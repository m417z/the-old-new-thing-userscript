<html>
<head>
<title>Application crash reported as security vulnerability, but you never crossed the airtight hatchway</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Application crash reported as security vulnerability, but you never crossed the airtight hatchway</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>April 21, 2017 / year-entry #98</td></tr>
<tr><td><b>Tags:</b></td><td>other</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20170421-00/?p=96015</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>4</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">A crash is not a priori a security vulnerability.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
A security vulnerability report came in that said roughly this:
</p>
<blockquote CLASS=m>
<p>
There is a use-after-free vulnerability in the XYZ component
which can be triggered as follows:
</p>
<ul>
<li>Run the XYZ application.</li>
<li>From the X menu, select Y.</li>
<li>In the resulting dialog, check Z, clear the checkbox on W,
    and twiddle your nose.</li>
<li>When you click OK, the application crashes because it
    is using a pointer to freed memory.</li>
</ul>
</blockquote>
<p>
Thanks for finding a bug in the XYZ application,
but is it a security vulnerability?
</p>
<p>
We look at the usual questions:
Who is the attacker?
Who is the victim?
What privileges have been gained?
</p>
<p>
There is no remote aspect to this attack.
In order to launch this attack,
the user needs to run the XYZ application
and manually go through a series of steps.
It's not like a bad guy can send a specially-crafted
file and lure a victim to encounter this crash.
A bad guy would have to send instructions to
a victim and socially-engineer them into following
them, and even then, the bad guy doesn't
gain anything yet.
The bad guy would also have to socially-engineer
the user into doing whatever steps are necessary
in order to drop a special vtable into the
freed memory.
If you are a bad guy who has this much
power over a victim that you can get them to
type anything you want,
then you don't need the XYZ application at all.
You can tell the victim,
"Download this executable and run it."
</p>
<p>
Okay, so maybe the attacker isn't remote?
Maybe the attacker is malware that is already
running at medium integrity, and it's going to try
to use this attack to gain additional privileges
from an instance of the XYZ application that is
running elevated.&sup1;
But that doesn't work because User Interface
Privilege Isolation
will not let a medium-integrity process
manipulate the UI of a high-integrity process.
In order for this to work, the malware would have
to socially-engineer the user into setting up
the vtable on the heap, at which point you may
as well just socially-engineer the user into
running your malware with administrative privileges.
</p>
<p>
As far as we can tell, it looks like what you have
there is a simple bug.
This bug was introduced in a Windows Insider build;
it never reached general availability.
And the bug was already identified by the team and
fixed in the next Windows Insider build.
</p>
<p>
The finder submitted a lengthy document explaining
the alleged attack and attempting to identify the root
cause.
It seems that this is their bread and butter,
because their document appeared to follow a template.
The chapter after the bug was identified and root-caused
was titled "Security implications".
</p>
<p>
That chapter was blank.
</p>
<p>
&sup1;
The finder never mentioned such a scenario,
but we try to give the finder the benefit of the
doubt.
For example,
if you
<a HREF="https://blogs.msdn.microsoft.com/oldnewthing/20170324-00/?p=95815">
misspell a file name</a>,
we will assume that you simply had a typo in your
report, and we will fix the typo for you.</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (4)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1293526">
				<div id="div-comment-1293526" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170421-00/?p=96015#comment-1293526">
			April 21, 2017 at 8:31 am</a>		</div>

		<p>On the other hand, crashes with memory corruption are security vulnerabilities so frequently that maybe they see no need to put in the effort to prove its exploitable. Not knowing what the application is, I would not be surprised if it turns out open specially malformed file results in this getting code in the file to run.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2" id="comment-1293535">
				<div id="div-comment-1293535" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170421-00/?p=96015#comment-1293535">
			April 21, 2017 at 8:53 am</a>		</div>

		<p>Yes, a malformed file would change the calculus. But this was just a dialog box in the program, no files being loaded.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1293545">
				<div id="div-comment-1293545" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yukkuri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170421-00/?p=96015#comment-1293545">
			April 21, 2017 at 9:32 am</a>		</div>

		<p>&#8220;That chapter was blank&#8221;</p>
<p>Indeed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-even depth-1" id="comment-1293625">
				<div id="div-comment-1293625" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170421-00/?p=96015#comment-1293625">
			April 21, 2017 at 4:21 pm</a>		</div>

		<p>This reminds me of <a href="https://code.google.com/p/google-security-research/issues/detail?id=117&#038;can=1" rel="nofollow">https://code.google.com/p/google-security-research/issues/detail?id=117&#038;can=1</a> where the crash happened when the document is *closed*. I reported that this fix missed Excel Viewer.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

