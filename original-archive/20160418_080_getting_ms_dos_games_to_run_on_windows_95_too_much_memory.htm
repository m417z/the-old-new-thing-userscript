<html>
<head>
<title>Getting MS-DOS games to run on Windows 95: Too much memory!</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Getting MS-DOS games to run on Windows 95: Too much memory!</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>April 18, 2016 / year-entry #81</td></tr>
<tr><td><b>Tags:</b></td><td>history</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>31</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Another case of intentionally under-reporting memory.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
Piggybacking on
<a HREF="https://blogs.msdn.microsoft.com/oldnewthing/20160328-00/?p=93204#comment-1231523">
Roger Lipscombe's story of the MS-DOS extender
that didn't work if you have
64<a HREF="https://blogs.msdn.microsoft.com/oldnewthing/20090611-00/?p=17933">MB</a>
of RAM:
</p>
<p>
There was
a popular MS-DOS game from 1994
that didn't run
in Windows 95.
After some investigation, the conclusion was that the game
didn't work if your computer had more than 16MB of memory
(physical, if running under MS-DOS;
virtual, if running under Windows).
The 16MB limit comes into play
because the game was written for the 80286 processor,
and that processor supports a maximum of 16MB of RAM.
I guess that when the game found more than 16MB of memory,
it didn't know what to do with the extra memory;
maybe it overflowed a buffer, or a calculation overflowed.
Whatever. Doesn't matter.
</p>
<p>
We fixed the problem by creating a custom configuration for
that game that said, "Never give this program more than 16MB
of memory."
</p>
<p>
This case was interesting because the custom configuration
means that
the program runs better under Windows 95 than
it does under raw MS-DOS:
Under raw MS-DOS, it would have crashed!</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (31)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1233736">
				<div id="div-comment-1233736" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233736">
			April 18, 2016 at 7:41 am</a>		</div>

		<p>Not quite too much memory, but too much speed:    I remember I had a MSDOS  game which I had to stop playing because it ran too fast on my &#8220;modern&#8221; PC.    Switching off the turbo button almost made it playable (went from 32Mhz to 8 Mhz I think)  but it was still too fast to be fair.    Can&#8217;t remember the name, but it was a Digdug clone in brown, green and red CGA mode.   I tried some TSR programs that tried to slow the processor down in the background,  but it was then too jerky to be playable.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1233746">
				<div id="div-comment-1233746" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233746">
			April 18, 2016 at 7:43 am</a>		</div>

		<p>Ah!  It was called Digger by Windmill Software</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1233775">
				<div id="div-comment-1233775" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rob Yull</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233775">
			April 18, 2016 at 8:43 am</a>		</div>

		<p>I remember trying to play the original Mechwarrior on a modern (and by modern I meant first gen Pentium) machine.  It pretty much took all the processor power it could and ran as fast as it could.  In combat, the enemy would run up destroy you and run away before you ever even had a chance to react.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2 parent" id="comment-1233805">
				<div id="div-comment-1233805" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BZ</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233805">
			April 18, 2016 at 10:19 am</a>		</div>

		<p>I remember that &#8220;Nibbles&#8221;, a sample game that came with QBASIC, would attempt to compensate for speed differences by calculating how much time a certain number of for loop iterations would take&#8230; and this would fail with a division by zero error by the time Windows 95 was around because whatever precision time unit it was using wasn&#8217;t high enough  to return a non-zero difference. Of course, since it came with source code, you could just increase the number of iterations so the check wouldn&#8217;t fail.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1233925">
				<div id="div-comment-1233925" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scarlet Manuka</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233925">
			April 18, 2016 at 8:27 pm</a>		</div>

		<p>Turbo/Borland Pascal had a similar issue; any programs using the &#8220;CRT&#8221; unit would fail when run on a computer with a clock speed over 200MHz. The CRT unit had an initialisation step which ran a counter for 55ms and then divided by 55 to calibrate for a 1ms delay. If the CPU was too fast the result overflowed, though the error was somewhat confusingly reported as a divide by zero.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1233755">
				<div id="div-comment-1233755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233755">
			April 18, 2016 at 7:51 am</a>		</div>

		<p>My guess would be that it&#8217;s some kind of assertion/sanity check. If we&#8217;ve calculated that the computer has more than 16MB of memory, something is very wrong, because that &#8220;can&#8217;t happen&#8221;. We *must* have made a miscalculation, or something unexpectedly overflowed/underflowed/got corrupted. If that&#8217;s the case, we don&#8217;t know what data we can trust, so the safest course of action is to bail out.</p>
<p>It always worries me when I see a &#8220;can&#8217;t happen&#8221; comment in an &#8220;else&#8221;/&#8221;default&#8221; clause&#8230; which then *does nothing* of significance. No logging, no bailing out, not even an early return with an error code. Your assumptions or invariants have just been violated, and you&#8217;re going to carry on regardless?? Ugh.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-iboyd even depth-2 parent" id="comment-1233756">
				<div id="div-comment-1233756" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IanBoyd' rel='external nofollow' class='url'>IanBoyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233756">
			April 18, 2016 at 8:10 am</a>		</div>

		<p>Or possibly they were using the high 8-bits of the 32-bit pointer for some flags or extra storage.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1233825">
				<div id="div-comment-1233825" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233825">
			April 18, 2016 at 11:14 am</a>		</div>

		<p>I guess it depends on what form of &#8220;not working&#8221; the game exhibited.</p>
<p>I wonder if Raymond can remember if it crashed, hung, corrupted itself, or just unexpectedly exited.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1244355">
				<div id="div-comment-1244355" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://nbtparse.org' rel='external nofollow' class='url'>Kevin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244355">
			April 19, 2016 at 3:18 pm</a>		</div>

		<p>It depends.</p>
<p>When you&#8217;re making a game, bailing out is almost always wrong.  You are guaranteed to annoy the player that way.  Glitches from false assumptions might not even be noticed, and if they are, the player probably won&#8217;t be as annoyed as they would by a crash (the only major exception being save file corruption &#8211; crashing may be preferable to writing bad data depending on how bad the data actually is).</p>
<p>If you&#8217;re making a financial (or worse, medical) app, on the other hand, bailing out is obviously the Right Thing to do.  But not everyone is in that boat, and I&#8217;m a little tired of developers assuming it.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-even depth-1 parent" id="comment-1233765">
				<div id="div-comment-1233765" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233765">
			April 18, 2016 at 8:27 am</a>		</div>

		<p>This reminds me of when the popular installer that worked like a shield would complain about &#8220;not enough disk space&#8221; if there was exactly or almost exactly 4GB, or something, of free space on the hard drive (back when hard drives were often 10 GB in size).   There was a calculation error&#8230; which they fixed.  They probably designed the software using 1 GB hard drives.  </p>
<p>I don&#8217;t know if it&#8217;s really hard to write software to anticipate everything growing in capacity (memory, disk sizes, etc.) but the errors seem awfully frequent.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-archangelpip even depth-2 parent" id="comment-1233785">
				<div id="div-comment-1233785" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233785">
			April 18, 2016 at 9:19 am</a>		</div>

		<p>A lot of these problems are down to people never thinking something can happen.<br />
Disk access was one of the first to hit this, we have seen some wonderful cases of software having issues, generally because hard disks have grown in size the fastest. There was even that driver problem with Windows XP where the drivers would end up wrapping around and start writing to the beginning of the disk when they got too large. (I think this was the issue with sector addressing.)<br />
Physical RAM has also had some really interesting issues. Like I think it was one of the Grand Theft Auto games that used a 32 bit integer to get how much RAM the system had, and then refused to run on systems when they didn&#8217;t have enough, like systems with 4GBs. I have seen some other games do similar things to, either refusing to run or locking the game at certain quality settings. The only way to get this to work was to not have one of these problematic values of RAM, at least Windows doesn&#8217;t require you to take it out these days, you can just use boot options to tell Windows to use less RAM.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-alegrigoriev odd alt depth-3 parent" id="comment-1233816">
				<div id="div-comment-1233816" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/alegr1' rel='external nofollow' class='url'>alegr1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233816">
			April 18, 2016 at 10:56 am</a>		</div>

		<p>The driver problem with LBA48&#8230; (remainder of message deleted due to disrespectful behavior, per ground rules).</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-4" id="comment-1233865">
				<div id="div-comment-1233865" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">smf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233865">
			April 18, 2016 at 2:06 pm</a>		</div>

		<p>Adults make mistakes too.</p>
<p>Windows 2000 requires a hot fix for LBA48 support, Windows XP seems to have shipped with it disabled but it can be enabled with a registry key, XP SP1 is enabled but you need a hotfix to stop hibernation and memory dumps causing corruption, LBA48 finally worked properly in XP SP2.</p>
<p>Software is written to a budget and nobody wants to pay the price for doing it well, someone messed up. It happens. Adults know this and don&#8217;t get huffy.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt depth-3 parent" id="comment-1233835">
				<div id="div-comment-1233835" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JanH</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233835">
			April 18, 2016 at 11:58 am</a>		</div>

		<p>Or a certain game dating from approximately 10 years ago, which would automatically set certain configuration settings based on your CPU speed. The trouble was that those CPU speeds were defined in terms of a Pentium IV, which needs relatively many GHz per unit of computing power. So if at that time you had a 2 GHz Athlon which was approximately as fast as a Pentium IV at 3.2 GHz, that game nevertheless locked you out of the highest configuration settings unless you manually edited the responsible configuration file.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-4" id="comment-1244515">
				<div id="div-comment-1244515" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ender</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244515">
			April 20, 2016 at 2:12 am</a>		</div>

		<p>Game? About a month ago we had to quickly buy a Xeon E5-2620v3 to install some medical database software (which isn&#8217;t CPU-bound at all), because the installer refused to proceed on an E5-2603v3, saying it wasn&#8217;t at least 2GHz (that same software ran just fine on a Core2-based Xeon, which had slightly higher clock).</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong odd alt depth-2" id="comment-1233915">
				<div id="div-comment-1233915" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233915">
			April 18, 2016 at 7:19 pm</a>		</div>

		<p>Adobe softwares before CS have this problem too (since they&#8217;ve published their KB on this and this happens long time ago, I guess there&#8217;s little problem naming it). I have to make multiple 100GB empty files just to make the available space on server goes below 1TB so the users can save their work on the file server.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1244516">
				<div id="div-comment-1244516" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ender</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244516">
			April 20, 2016 at 2:14 am</a>		</div>

		<p>Several installers had problems with 4GB wraparound &#8211; I remember seeing the problem mentioned in release notes of a fairly popular open-source installer.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wndsks odd alt thread-odd thread-alt depth-1" id="comment-1233795">
				<div id="div-comment-1233795" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/skSdnW' rel='external nofollow' class='url'>skSdnW</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233795">
			April 18, 2016 at 9:21 am</a>		</div>

		<p>Are these compatibility entries stored under &#8230;\MS-DOS Emulation\AppCompat\ or in win.ini? The registry entries seem to key off the presence of additional program files which would make sense because these DOS apps don&#8217;t have embedded version information.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1233815">
				<div id="div-comment-1233815" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scott H.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233815">
			April 18, 2016 at 10:34 am</a>		</div>

		<p>One that I remember (because I still play it a lot) is SimCity 2000 for DOS. It pops up a warning that your computer only has &#8220;-32767&#8221; kilobytes of RAM and it may not work correctly. Fortunately it lets you try anyway and it works fine.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-odd thread-alt depth-1" id="comment-1233855">
				<div id="div-comment-1233855" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233855">
			April 18, 2016 at 1:23 pm</a>		</div>

		<p>I think Windows 3.0 had a similar problem that led to a 16MB limit in himem.sys.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1233875">
				<div id="div-comment-1233875" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1233875">
			April 18, 2016 at 4:20 pm</a>		</div>

		<p>I recall running this program on Win95 that demanded real mode and up and said as much when you ran it. It had an option to turn off the check, which didn&#8217;t help for the obvious reason of it still is going to demand real mode to actually work. (I&#8217;m guessing the idea of turning off the check was to allow it to function with EMM386.exe loaded.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fjeldse odd alt thread-odd thread-alt depth-1 parent" id="comment-1242405">
				<div id="div-comment-1242405" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Erik+F' rel='external nofollow' class='url'>Erik F</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1242405">
			April 19, 2016 at 3:26 am</a>		</div>

		<p>It&#8217;s not just software that messes up with unexpectedly high values: I remember having several old 8-bit ISA expansion cards that refused to work if the ISA bus speed exceeded around 8MHz because they were designed in the PC and XT era, and the bus ran at the same rate as the CPU. Obviously computers would never get any faster, right? Of course! Thus motherboards had to desync the bus from the CPU to maintain compatibility and make the ISA bus slower than molasses compared to the rest of the board; the settings in some BIOSes regarding VGA palette snooping and the 15-16MB memory gap are related to ISA as well.</p>
<p>I&#8217;m glad that hardware makers are generally committed to supporting old hardware almost as much as PC OS developers are to software. Both have to work in conjunction to get systems working at all! I&#8217;m aware that there are many quirks in both areas, but for the most part I&#8217;ve had very few issues, or at least far fewer than I would expect given the complexity of the systems.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2 parent" id="comment-1244055">
				<div id="div-comment-1244055" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Martin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244055">
			April 19, 2016 at 7:09 am</a>		</div>

		<p>This might just be due a physical limitation of the technology used in the cards rather than a lack of forward thinking.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-bboorman odd alt depth-3" id="comment-1244066">
				<div id="div-comment-1244066" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Brian_EE' rel='external nofollow' class='url'>Brian_EE</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244066">
			April 19, 2016 at 7:23 am</a>		</div>

		<p>Things like propagation delay, rise and fall time slew rates, setup and hold times. You can&#8217;t fault the card designers for using the standard TTL devices of the time. Does the boss care if you can run at some future unknown faster speed? No. Does he care that AHC-type TTL devices cost more? Yes.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1244187">
				<div id="div-comment-1244187" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Falcon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1244187">
			April 19, 2016 at 10:09 am</a>		</div>

		<p>I remember reading about some hardware compatibility problems involving the I/O address space &#8211; there were some ISA cards that only decoded the bottom 10 bits of I/O addresses, so any addresses above 0x3FF would wrap around (the x86 I/O address space was, possibly still is, 16-bit).</p>
<p>If you had one of these cards in the system along with a PCI card that used a higher I/O address range, they could conflict with each other. For instance, the address range 0xF7F0 &#8211; 0xF7FF would &#8220;overlap&#8221; with 0x3F8 &#8211; 0x3FF (1st serial port).</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1245035">
				<div id="div-comment-1245035" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dmitry Onoshko</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1245035">
			April 21, 2016 at 6:32 pm</a>		</div>

		<p>I wonder if Raymond has some knowledge about NTVDM, especially its Sound Blaster emulation details. I wanted to write a small example for my students who currently learn x86 assembler, real mode, and it turned out that my Windows XP notebook has big trouble running most (but NOT ALL) of the MS-DOS programs that use means of sound output other than internal speaker. Anyway, there’re few of them which still work. Of course, I also tried to write my own program using all the docs available, but it doesn’t play sound in NTVDM as well. But it works in DOSBox.</p>
<p>So, I guess, there’s some kind of a trick a program must do to make NTVDM recognize its intention.</p>
<p>Or, maybe, someone could point me to some useful post or blog of someone from NTVDM’s team, or something?..</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1245235">
				<div id="div-comment-1245235" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Falcon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1245235">
			April 23, 2016 at 2:28 am</a>		</div>

		<p>There was a third party application which provided improved audio hardware emulation in NTVDM. (I won&#8217;t name it, to be on the safe side, but all the keywords required to find it using a search engine are contained in your post; I will leave it up to you to figure out which ones.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2" id="comment-1245285">
				<div id="div-comment-1245285" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Azarien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1245285">
			April 24, 2016 at 7:40 am</a>		</div>

		<p>NTVDM&#8217;s Sound Blaster emulation is so poor and incompatible that it would be better had it not existed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1246325">
				<div id="div-comment-1246325" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dmitry Onoshko</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1246325">
			May 1, 2016 at 4:17 pm</a>		</div>

		<p>Maybe just to bring some attention to the fact: my investigation shows that for some reason NTVDM delays MIDI message “execution” until the next MIDI message is received, i.e. the last one is always delayed. Messages using MIDI running status included. I can force MIDI message to be “used” by inserting a status byte (say, undefined/reserved one like 0xF4)… But that’s what the whole Raymond’s blog is about, right?.. that using undefined or reserved things is asking for compatibility trouble.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1245275">
				<div id="div-comment-1245275" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Azarien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1245275">
			April 24, 2016 at 4:26 am</a>		</div>

		<p>I played one such game (maybe the same you talk about in this article), it was possible to trick it under plain DOS by eating memory with disk cache (SMARTDRV) or installing a RAM-disk and leaving only 16 MB of free memory.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-raykoopa even thread-even depth-1" id="comment-1245357">
				<div id="div-comment-1245357" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ray+Koopa' rel='external nofollow' class='url'>Ray Koopa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160418-00/?p=93307#comment-1245357">
			April 25, 2016 at 4:45 am</a>		</div>

		<p>If I recall correctly, I remember my SimCity 2000 DOS installer overflowing somewhere at 32MB RAM in an emulator, and displayed negative available memory.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

