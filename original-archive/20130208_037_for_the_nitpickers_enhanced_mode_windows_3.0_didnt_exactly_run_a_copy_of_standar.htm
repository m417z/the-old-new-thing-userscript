<html>
<head>
<title>For the Nitpickers: Enhanced-mode Windows 3.0 didn't exactly run a copy of standard-mode Windows inside the virtual machine</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>For the Nitpickers: Enhanced-mode Windows 3.0 didn&#8217;t exactly run a copy of standard-mode Windows inside the virtual machine</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>February 8, 2013 / year-entry #38</td></tr>
<tr><td><b>Tags:</b></td><td>history</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>45</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Generally speaking, Enhanced-mode Windows 3.0 ran a copy of standard-mode Windows inside the virtual machine. This statement isn't exactly true, but it's true enough. Commenter Nitpicker objected, "Why are you threatening us with the Nitpicker's Corner for asking about this issue instead of explaining it once and linking it everywhere?" Okay, first of all, as...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>Generally speaking, <a href="http://blogs.msdn.com/b/oldnewthing/archive/2010/05/17/10013609.aspx"> Enhanced-mode Windows 3.0 ran a copy of standard-mode Windows inside the virtual machine</a>. This statement isn't exactly true, but <a href="http://blogs.msdn.com/b/oldnewthing/archive/2011/11/07/10234436.aspx"> it's true enough</a>.</p>
<p> Commenter Nitpicker objected, "Why are you threatening us with the Nitpicker's Corner for asking about this issue instead of explaining it once and linking it everywhere?" </p>
<p> Okay, first of all, as far as I can tell, you're the first person to ask about the issue. So you can't say "Everybody who asks about the issue is threatened with the Nitpicker's Corner" because up until you made your comment, <i>nobody ever asked</i>. Okay, well, technically you can say it, because every statement quantified over the empty set is true. But it is equally true that, at the time you made your comment, that "Everybody who asks about the issue is awarded a new car." So it is not a meaningfully true statement. </p>
<p> I haven't bothered explaining the issue because the issue has never been central to the main point of whatever article happens to bring it up. The statement is true enough for the purpose of discussion, and the various little corners in which the statement breaks down have no bearing on the original topic. Nitpickers would point out that you can't combine velocities by simple addition because of the laws of Special Relativity. Even when the situation under discussion takes place at non-relativistic speeds. </p>
<p> As for the suggestion, "Explain it once and link it everywhere," you're assuming that I can even explain it once, that doing so is less work than just saying "not exactly true, but true enough," and that I would enjoy explaining it in the first place. </p>
<p> If you don't like it, you can ask for your money back. </p>
<p> Okay, I went back and dug through the old Windows 3.0 source code to answer this question. It took me about four hours to study it all, try to understand what the code was doing, and then distill the conclusions into this article. Writing up the results took another two hours. That's six hours I could've spent doing something enjoyable. </p>
<p> The 16-bit Windows kernel was actually three kernels. One if you were using an 8086 processor, another if you were using an 80286 processor, and a third if you were using an 80386 processor. The 8086 kernel was a completely separate beast, but the 80286 and 80386 kernels shared a lot of code in common. The major difference between the 80286 and 80386 kernels was in how they managed memory, because the descriptor tables on the 80386 were a different format from the descriptor tables on the 80286. The 80386 memory manager could also take advantage of the new 32-bit registers. </p>
<p> But the difference between the 80286 and 80386 kernels were not based on whether you were running Standard or Enhanced mode. If you're running on an 80386 processor, then you get the 80386 kernel, regardless of whether you're using Standard or Enhanced mode Windows. And since Enhanced mode Windows required an 80386 processor, the behavioral changes between Standard and Enhanced mode were restricted to the 80386 kernel. </p>
<p> The 80386 kernel was designed to run as a DPMI client. It asked the DPMI host to take it into protected mode, then used the DPMI interface to do things like allocate selectors and allocate memory. If you ran Windows in Standard mode, then the DPMI host was a custom-built DOS extender that was created just for Standard mode Windows. If you ran Windows in Enhanced mode, then the DPMI host was the 32-bit virtual machine manager. Abstracting to the DPMI interface allowed a single 80386 kernel to run in both Standard and Enhanced modes. </p>
<p> And in fact if you ran Enhanced mode Windows with paging disabled, then the code running in the 80386 kernel was pretty much the same code that ran if you had run the 80386 kernel under Standard mode Windows. </p>
<p> One obvious place where the behavior changed was in the code to manage MS-DOS applications, because Enhanced mode Windows could multi-task MS-DOS applications, and Standard mode Windows could not. </p>
<p> Another place where the behavior changed was in in the code to allocate more selectors: The attempt to retry after extending the local descriptor table was skipped if you were running under the Standard mode DOS extender, because the Standard mode DOS extender didn't support extending the local descriptor table. </p>
<p> And another difference is that the Windows idle loop in Enhanced mode would issue a special call to release its time slice to any multi-tasking MS-DOS applications. (If you were running in Standard mode, there were no multi-tasking MS-DOS applications, so there was nobody to release your time slice to.) </p>
<p> Another thing special that the 80386 kernel did was register with the virtual machine manager so that it could display an appropriate message when you pressed <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd>. For example, you saw this message if you hit <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd> while there was a hung Windows application: </p>
<table style="font-size: 80%; background-color: #00F; color: white; font-family: monospace; font-weight: bold">
<tr>
<td style="width: 90ex; padding: 5ex">
<div style="text-align: center"><span style="background-color: #888; color: #0000FF">Contoso Deluxe Music Composer</span></div>
<div><br><br></div>
<div>This Windows application has stopped responding to the system.<br>          <br>          <nobr>*&nbsp; Press ESC to cancel and return to Windows.</nobr><br>          <nobr>*&nbsp; Press ENTER to close this application that is not responding.</nobr><br>          <nobr>&nbsp;&nbsp; You will lose any unsaved information in this application.</nobr><br>          <nobr>*&nbsp; Press CTRL+ALT+DEL again to restart your computer. You will</nobr><br>          <nobr>&nbsp;&nbsp; lose any unsaved information in all applications.</nobr><br>     </div>
</td>
</tr>
</table>
<p> But all these differences are minor in the grand scheme of things. The window manager behaved the same in Standard mode and Enhanced mode. GDI behaved the same in Standard mode and Enhanced mode. Printer drivers behaved the same in Standard mode and Enhanced mode. Only the low-level kernel bits had to change behavior between Standard mode and Enhanced mode, and as you can see, even those behavior changes were relatively minor. </p>
<p> That's why I said it was "true enough" that what was running inside the virtual machine was a copy of Standard-mode Windows. </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (45)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1038163">
				<div id="div-comment-1038163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038163">
			February 8, 2013 at 7:05 am</a>		</div>

		<p>I know you like putting on the air of being grumpy about it, but if you spent six hours researching for this blog post, you might have liked at least a little bit doing the exploration so that you can explain ancient Windows to us. We as readers certainly appreciate it.</p>
<div class="post">[<em>The six hours was less annoying than having to deal with everybody who says &quot;That&#39;s not true. Raymond, what&#39;s the REAL story? I demand to know!&quot; -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038173">
				<div id="div-comment-1038173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SimonRev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038173">
			February 8, 2013 at 7:14 am</a>		</div>

		<p>@pc &#8212; Raymond is just grumpy because he had to drive to Montanna, bully some security guards, go into a salt mine and read magnetic tape reels to get the code for this article. (see <a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/oldnewthing/archive/2009/11/02/9915989.aspx#9916694" rel="nofollow">blogs.msdn.com/&#8230;/9915989.aspx</a>)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alegrigoriev even thread-even depth-1" id="comment-1038183">
				<div id="div-comment-1038183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/alegr1' rel='external nofollow' class='url'>alegr1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038183">
			February 8, 2013 at 7:47 am</a>		</div>

		<p>[The six hours was less annoying than having to deal with everybody who says &quot;That&#39;s not true. Raymond, what&#39;s the REAL story? I demand to know!&quot; -Raymond]</p>
<p>This is Windows trutherism for you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038193">
				<div id="div-comment-1038193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/myagna01_4000_students.poly.edu/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>myagna01@students.poly.edu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038193">
			February 8, 2013 at 8:08 am</a>		</div>

		<p>Raymond, it appears that you&#39;re making a mildly contradictory statement here. &nbsp;In the opening of today&#39;s post, you made of point of emphasizing that there were no people who had asked this quesiion before. &nbsp;Now you claim that you spent six hours of your life in a way that you would rather not have, because it beats dealing &quot;everyone&quot; who asks for the real story. &nbsp;There must be something I&#39;m missing. &nbsp;If you (or anyone) can tell me what it is, I&#39;d be a happy camper. &nbsp;(Just don&#39;t hours of your life on it. &nbsp;Or even 10 minutes. &nbsp;Seriously, this is your blog, not ours. &nbsp;Please remember that above all else.)</p>
<div class="post">[<em>It&#39;s perception bias. The question may not objectively have been asked that often, but it <span style="text-decoration:underline;">feels</span> like it gets asked a lot because it gets asked each time I mention that &quot;the same kernel runs in enhanced-mode Windows as standard-mode Windows&quot; (which admittedly is not that often either). -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038213">
				<div id="div-comment-1038213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038213">
			February 8, 2013 at 8:17 am</a>		</div>

		<p>[And another difference is that the Windows idle loop in Enhanced mode would issue a special call to release its time slice]</p>
<p>Ah yes the Yield() call. (Not really, but Yield() would call the scheduler which I believe would eventually call this if there was no other standard task to run).</p>
<p>A very interesting little piece to bubble up from the bottom of the architecture as cooperative multiprocessing rather than preemptive.</p>
<p>I did find it amusing that Yield() was ported to Win32 as a noop rather than Sleep(0), but that&#39;s another story.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038223">
				<div id="div-comment-1038223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Danny</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038223">
			February 8, 2013 at 8:35 am</a>		</div>

		<p>See Ray?! None believes you didn&#39;t had fun. C&#39;mon, time to step up with that 12 steps programs and tell us the truth, you DID had fun&#8230;a lot actually&#8230;I, for one, do have fun when I read 20 years old code of mine (most of the time I think &quot;Jesus, so young and so stupid&quot;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038233">
				<div id="div-comment-1038233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Zenju</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038233">
			February 8, 2013 at 8:48 am</a>		</div>

		<blockquote><p>
  empty set
</p></blockquote>
<p>The set is not empty, it contains exactly one element! I demand a correction of the article!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038243">
				<div id="div-comment-1038243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038243">
			February 8, 2013 at 8:57 am</a>		</div>

		<blockquote><p>
  Okay, first of &#8230; meaningfully true statement.
</p></blockquote>
<p>Erm, if you look back at your own words, you&#39;ll realise you&#39;re threatening every reader who so much as dares to bring it up. You may claim you have logic on your side, but you can only do so by pretending that things were typed in a different context than they were, so in reality you&#39;re just bending the truth until it breaks.</p>
<p>I also find it impossible to believe that have been spending six hours doing all this horrible research about that subject that doesn&#39;t interest you at all even though there&#39;d be no penalty whatsoever for not doing it. It simply doesn&#39;t ring true.</p>
<p>Sorry if this makes me sound grumpy or thankless &#8211; I am not &#8211; but it would do you no harm to be just a little bit more civilised.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038253">
				<div id="div-comment-1038253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038253">
			February 8, 2013 at 9:07 am</a>		</div>

		<p>Posts like these are why I keep returning to this blog. Retrocomputing details like these are fascinating, and they tell us a piece of our technological history we would not know about otherwise (since few people have access to the Windows 3.x source code). It is even more interesting for people who, like me, had as one of their first exposures to the world of computing the MS-DOS/Win3.x combo. Thanks for writing this post, Raymond!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038263">
				<div id="div-comment-1038263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">NB</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038263">
			February 8, 2013 at 9:39 am</a>		</div>

		<p>Which kernel did you get if you had a 386-SX processor?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038273">
				<div id="div-comment-1038273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Klimax</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038273">
			February 8, 2013 at 9:44 am</a>		</div>

		<p>I&#39;m pretty sure that SX didn&#39;t matter. (It denoted lack of FP support)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038283">
				<div id="div-comment-1038283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/tlwest_4000_gmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>tlwest@gmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038283">
			February 8, 2013 at 9:50 am</a>		</div>

		<p>I just want to chime in my thanks, Raymond. &nbsp;I doubt such thanks is worth 6 hours of your time, but I find these little gems of history fascinating.</p>
<p>To other readers &#8211; I have no idea if MS farms out Raymond to clients, but if they do, I&#39;d be very surprised if it is for less than several hundred dollars an hour. &nbsp;The fact that Raymond has provided, gratis, a service probably worth a few thousand dollars simply because some readers requested (okay, nagged) it of him is an indication of his service to us. &nbsp;I&#39;m humbled, given all he&#39;s ever gotten from me was my thanks and possibly a buck or two in royalties if his book earned out.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038293">
				<div id="div-comment-1038293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gerald H.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038293">
			February 8, 2013 at 10:03 am</a>		</div>

		<p>Thanks for explaining the issue in a way even an idiot such as me could follow and understand at least the rough shape of the beast. Even if it cost you six hours of your life.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038303">
				<div id="div-comment-1038303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038303">
			February 8, 2013 at 10:06 am</a>		</div>

		<p>@Joshua: &quot;I did find it amusing that Yield() was ported to Win32 as a noop rather than Sleep(0)&quot;</p>
<p>Err&#8230; semantically Sleep(0) is also a no-op. &quot;sleep for zero milliseconds&quot; and &quot;do nothing&quot; are equivalent, but doing nothing requires less processing to figure that out.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038313">
				<div id="div-comment-1038313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">steven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038313">
			February 8, 2013 at 10:25 am</a>		</div>

		<p>@Klimax No, the SX/DX distinction of lacking FP support was with the 486 only. With the 386, it instead referred to the external bus. The 386SX and 386DX both used 32bit registers and 32bit instructions, but the 386SX&#39;s external bus was 16bit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038323">
				<div id="div-comment-1038323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/b414213562_4000_hotmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>b414213562@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038323">
			February 8, 2013 at 10:28 am</a>		</div>

		<p>Thank you for your time! We&#39;re glad you chose to share some of it with us.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038333">
				<div id="div-comment-1038333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">AC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038333">
			February 8, 2013 at 10:34 am</a>		</div>

		<p>I find your introduction rant very surprising. People mostly ask you about these things because you&#39;re a great source of information and your articles are interesting. But that doesn&#39;t mean you are forced to write these articles. Even if it feels like your readers demand it (they do, because it&#39;s interesting), you don&#39;t have to waste your time if you don&#39;t feel like it. Complaining about your readers demanding more doesn&#39;t make sense. It&#39;s only a sign that you have a large readership.</p>
<p>However, I am glad you did research this. This post was great.</p>
<p>I grew up with Win95 upwards, so I&#39;ve only known 3.1 from other people. I did do some very basic 16bit programming, but nothing fancy. So I&#39;m always amazed with your series about the ingenious hacks that made things possible which on first sight seemed impossible without hardware support.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038343">
				<div id="div-comment-1038343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul Parks</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038343">
			February 8, 2013 at 11:27 am</a>		</div>

		<p>@Matt: Sleep(0) is semantically different from NOP on Windows.</p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298.aspx" rel="nofollow">msdn.microsoft.com/&#8230;/ms686298.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038353">
				<div id="div-comment-1038353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038353">
			February 8, 2013 at 12:46 pm</a>		</div>

		<p>@Anonymous Coward:</p>
<p>I refer the honourable gentlemen to <a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/oldnewthing/archive/tags/the+social+skills+of+a+thermonuclear+device/" rel="nofollow">blogs.msdn.com/&#8230;/the+social+skills+of+a+thermonuclear+device</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038363">
				<div id="div-comment-1038363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil (SM)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038363">
			February 8, 2013 at 12:52 pm</a>		</div>

		<p>Well I suppose threatening one person with the Nitpicker&#39;s Corner is effectively threatening all of us! &nbsp;But that&#39;s besides the point since no threat had been made.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038373">
				<div id="div-comment-1038373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mikeb</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038373">
			February 8, 2013 at 1:03 pm</a>		</div>

		<p>I&#39;ll again just simply state that I enjoy these kinds of articles. For whatever that&#39;s worth.</p>
<p>Thanks Raymond.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038403">
				<div id="div-comment-1038403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/myagna01_4000_students.poly.edu/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>myagna01@students.poly.edu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038403">
			February 8, 2013 at 3:55 pm</a>		</div>

		<p>Ah, perception bias. &nbsp;I can definitely sympathize.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038203">
				<div id="div-comment-1038203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/johnstonj_4000_inn_2D00_soft.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>johnstonj@inn-soft.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038203">
			February 8, 2013 at 8:10 am</a>		</div>

		<p>Well, thanks for researching this anyway. &nbsp;The details were very interesting to read. &nbsp;I didn&#39;t realize there were *three* different kernels, each picked depending on the CPU. &nbsp;Must have been a fun set of configurations for testing (8086 real mode, 286 standard mode, 286 real mode, 386 real mode, 386 standard mode, 386 enhanced mode&#8230;.). &nbsp;Can certainly see why real mode was ripped out to simplify things&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038413">
				<div id="div-comment-1038413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JamesW</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038413">
			February 8, 2013 at 4:13 pm</a>		</div>

		<p>Thanks for spending the time researching this article. This kind of OS archeology is why I love this blog.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038433">
				<div id="div-comment-1038433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JamesNT</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038433">
			February 8, 2013 at 7:05 pm</a>		</div>

		<p>Mr. Chen,</p>
<p>I would also like to thank you for explaining this issue. &nbsp;And thank you very much for maintaining this blog. &nbsp;You are, and always will be, my programming god.</p>
<p>JamesNT</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-odd thread-alt depth-1" id="comment-1038443">
				<div id="div-comment-1038443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038443">
			February 8, 2013 at 7:29 pm</a>		</div>

		<p>Win-OS/2 and NTVDM also ran Win3.x as a DPMI client.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038383">
				<div id="div-comment-1038383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mark</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038383">
			February 8, 2013 at 1:15 pm</a>		</div>

		<p>Neil (SM): the threat was made in both articles as &quot;Don&#39;t make me bring back the Nitpicker&#39;s Corner&quot;.</p>
<p>I suspect the ambiguity in &quot;threatening&#8230; for asking&quot; (it doesn&#39;t necessarily imply someone *has* asked) is the source of the assumed transgression.</p>
<p>Regardless, it&#39;s an amusing spin to put on the article &#8211; back in the day, the difference between 286 and 386 meant everything.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038453">
				<div id="div-comment-1038453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Clovis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038453">
			February 9, 2013 at 2:48 am</a>		</div>

		<p>&quot;That&#39;s six hours I could&#39;ve spent doing something enjoyable.&quot;</p>
<p>Raymond &#8211; I&#39;d find 6 hours looking at and writing about Windows 3.0 source code pretty cool myself. But when it comes to Windows source code, I can accept you&#39;re spoiled for choice.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038463">
				<div id="div-comment-1038463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038463">
			February 9, 2013 at 3:26 am</a>		</div>

		<p>I seem to remember reading that Windows 3.1 Standard Mode ran slightly differently on a &#39;386 than Windows 3.0 did but my recollection of how 3.1 was claimed to do it matches what Raymond says for 3.0 so perhaps the claim was wrong after all.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xpclientgmail-com odd alt thread-odd thread-alt depth-1" id="comment-1038473">
				<div id="div-comment-1038473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/xpclient' rel='external nofollow' class='url'>xpclient</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038473">
			February 9, 2013 at 5:38 am</a>		</div>

		<p>Win /R /S /3 :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038483">
				<div id="div-comment-1038483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mmx</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038483">
			February 9, 2013 at 1:41 pm</a>		</div>

		<p>@Steven Don</p>
<p>The 386SX had another limitation &#8211; address space was limited to 16MB just like a 286, instead of 4GB, as far as I remember at least.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038493">
				<div id="div-comment-1038493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">bhtooefr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038493">
			February 9, 2013 at 4:40 pm</a>		</div>

		<p>@mmx: But that, I thought, was only external address space. The MMU supported 32-bit addresses, just like it did in the 386DX.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038503">
				<div id="div-comment-1038503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asdbsd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038503">
			February 10, 2013 at 1:27 am</a>		</div>

		<p>Raymond is being full-blown tsundere here. &quot;It&#39;s not like I made this post for you. O-of course I spent six hours making it, but that&#39;s just because you complained! I don&#39;t l-like you or anything, I just can&#39;t leave you alone because you&#39;re so helpless!&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038513">
				<div id="div-comment-1038513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">chentiangemalc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038513">
			February 10, 2013 at 2:59 am</a>		</div>

		<p>I love these windows &quot;archaeology&quot; blog posts&#8230;while totally useless information sure brings back memories of working with windows in its infancy&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038533">
				<div id="div-comment-1038533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dodo the Bird</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038533">
			February 10, 2013 at 2:36 pm</a>		</div>

		<p>I&#39;d like to know details of development of DOS 1.0 to DOS 5.x</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038543">
				<div id="div-comment-1038543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Observer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038543">
			February 10, 2013 at 4:08 pm</a>		</div>

		<p>&quot;That&#39;s six hours I could&#39;ve spent doing something enjoyable. &quot;</p>
<p>You mean you don&#39;t enjoy the four hours digging through Windows source?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038563">
				<div id="div-comment-1038563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038563">
			February 10, 2013 at 5:55 pm</a>		</div>

		<p>@Dodo: I&#39;m pretty sure Raymond doesn&#39;t know. He was hired somewhere near the release of Windows 3.1.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038583">
				<div id="div-comment-1038583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ender</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038583">
			February 11, 2013 at 2:05 am</a>		</div>

		<p>@NB: did you mean the buggy 386DX chips, which (IIRC) locked up when running in protected mode?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038663">
				<div id="div-comment-1038663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Bray</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038663">
			February 11, 2013 at 11:02 am</a>		</div>

		<p>Nice article and thanks for spending the 6 hours researching and writing it. &nbsp;Seems like quite a few people got something out of it&#8230;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1038763">
				<div id="div-comment-1038763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/jolyon.smith_4000_hotmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>jolyon.smith@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038763">
			February 11, 2013 at 3:22 pm</a>		</div>

		<p>@Matt : &nbsp;&quot;sleep for zero milliseconds&quot; and &quot;do nothing&quot; are emphatically *not* the same thing, semantically or otherwise.</p>
<p>Calling Sleep(0) let&#39;s Windows *know* that you have nothing to do, and that you are so intent on doing nothing that you are happy to give up any remaining part of your time-slice if Windows so decides.</p>
<p>Doing nothing and letting your manager KNOW you are doing nothing (Sleep(0)), is very, very different from just *doing* nothing (FaceBook()). &nbsp;:)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1038853">
				<div id="div-comment-1038853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1038853">
			February 12, 2013 at 2:13 am</a>		</div>

		<p>I remember the good old days booting my PC to the DOS prompt then having to decide do I type &#39;gem&#39; today or &#39;win&#39;. &nbsp;386SX at 16Mhz and probably 1Mb of ram. &nbsp; I did have a SVGA card though and could display 256 colours!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1039113">
				<div id="div-comment-1039113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1039113">
			February 12, 2013 at 10:50 am</a>		</div>

		<p>How could the statement be true when the ia32 hardware only could virtualize real mode clients?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1039243">
				<div id="div-comment-1039243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Herbie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1039243">
			February 12, 2013 at 1:53 pm</a>		</div>

		<p>I always felt that real-mode Windows was the real achievement and after that Windows just used whatever Intel gave us. That doesn&#39;t mean I really enjoyed running real mode&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1039363">
				<div id="div-comment-1039363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">George</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1039363">
			February 13, 2013 at 2:36 am</a>		</div>

		<p>Whether it really matters or not, my feeling on comments on the Internet is to ignore them. Internet debate is nothing like real life. With respect to people who post interesting and useful comments on this blog, of course.</p>
<p>And no, the irony is not lost on me for posting this :P</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1039503">
				<div id="div-comment-1039503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130208-00/?p=5303#comment-1039503">
			February 13, 2013 at 10:53 am</a>		</div>

		<p>What a whiny little girl! Grow a pair, Raymond.</p>
<div class="post">[<em>This coming from somebody afraid to give his name. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

