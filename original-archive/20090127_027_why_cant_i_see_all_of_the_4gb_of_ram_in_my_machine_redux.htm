<html>
<head>
<title>Why can't I see all of the 4GB of RAM in my machine?, redux</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why can&#8217;t I see all of the 4GB of RAM in my machine?, redux</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>January 27, 2009 / year-entry #28</td></tr>
<tr><td><b>Tags:</b></td><td>tipssupport</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>15</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Phil Taylor gives another few reasons why machine with 4GB of RAM doesn't show up as such. (Here's my earlier posting on this subject, for reference.) These articles about possible reasons for memory not showing up are not intended to be comprehensive. It is entirely possible that the problem you are experiencing is not one...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p><a href="http://blogs.msdn.com/ptaylor/">Phil Taylor</a> gives another few reasons <a href="http://blogs.msdn.com/ptaylor/archive/2008/01/03/why-your-4g-of-ram-windows-32-bit-system-may-not-report-all-of-the-4g-even-though-it-is-in-use.aspx"> why machine with 4GB of RAM doesn't show up as such</a>.</p>
<p> (<a href="http://blogs.msdn.com/oldnewthing/archive/2006/08/14/699521.aspx">Here's my earlier posting on this subject, for reference</a>.) </p>
<p> These articles about possible reasons for memory not showing up are not intended to be comprehensive. It is entirely possible that <a href="http://blogs.msdn.com/oldnewthing/archive/2007/02/14/1676656.aspx"> the problem you are experiencing is not one described here</a>. </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (15)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-703803">
				<div id="div-comment-703803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gene</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703803">
			January 27, 2009 at 10:22 am</a>		</div>

		<p>The first line of the blog post is &quot;The best explanation of this I have yet found is here;&quot; Where here is a link to another page, which is also an MSDN blog. &nbsp;Trying to get a buddy some hits by having us click through his entry to get to the good one? :p</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-703813">
				<div id="div-comment-703813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexander Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703813">
			January 27, 2009 at 10:41 am</a>		</div>

		<p>PTaylor&#8217;s posting is complete blabber. It sounds like a wannabe hacker who heard something and is reciting it to the chicks, trying to look cool. What &quot;physical RAM above 2G means standard 32-bit processes stand a chance of fitting entirely into RAM together with the OS&quot; means? WHat &quot;Finally, notice the potential for PAE and DEP errors.&quot; means?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-703823">
				<div id="div-comment-703823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703823">
			January 27, 2009 at 11:23 am</a>		</div>

		<p>BTW, I once asked Larry Osterman if real PAE support to access more than 4GB of RAM can be added to client versions of Windows. Needless to say he said no:</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/larryosterman/archive/2009/01/08/why-do-people-think-that-a-server-sku-works-well-as-a-general-purpose-operating-system.aspx#9302522" rel="nofollow">http://blogs.msdn.com/larryosterman/archive/2009/01/08/why-do-people-think-that-a-server-sku-works-well-as-a-general-purpose-operating-system.aspx#9302522</a></p>
<p>Currently it is only available in Enterprise editions of Windows Server.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-703843">
				<div id="div-comment-703843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.peterRitchie.com/blog' rel='external nofollow' class='url'>Peter Ritchie</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703843">
			January 27, 2009 at 12:05 pm</a>		</div>

		<p>&quot;physical RAM above 2G means standard 32-bit processes stand a chance of fitting entirely into RAM together with the OS&quot; Means that if you have 2GB of physical RAM, the system is less likely to have to page out portions of your application to disk (i.e. it stays in physical memory and will execute faster because it doesn&#8217;t have to be paged back into physical memory from disk). &nbsp;Keeping in mind that parts of the OS must always be in physical memory and thus that portion of physical memory can&#8217;t be used for applications.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-703863">
				<div id="div-comment-703863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703863">
			January 27, 2009 at 12:07 pm</a>		</div>

		<p>Yuhong Bao,</p>
<p>What you mean &quot;added&quot;? Do you really think it&#8217;s not there in Vista x86 kernel? I suppose SP1 kernel is the same as Win2008. And <em>client</em> x64 Vista can use memory above 4GB, this is why it&#8217;s able to use all of 4 GB of RAM (including the part remapped from PCI hole).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-703873">
				<div id="div-comment-703873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick Lamb</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703873">
			January 27, 2009 at 12:25 pm</a>		</div>

		<p>A particularly critical error in PTaylor&#8217;s posting is that he doesn&#8217;t grasp the difference between address space and RAM. He says the memory is &quot;in use&quot; but actually in the circumstance he&#8217;s looking at only the address space is in use, lots of RAM is unused, sitting there useless.</p>
<p>But hey, PTaylor&#8217;s just some guy working in the toys &amp; games division. It&#8217;s just a shame that Raymond linked him after his own previous explanation was so good.</p>
<p>It does seem to me that since Microsoft is part of the problem (offering a &quot;consumer&quot; OS which won&#8217;t use all your hardware, then a separate more expensive version which does) they ought to help give people a clue. It should be possible for Windows to indicate &quot;Hey, you actually have 4GB of RAM and if you went 64-bit you could use it all&quot; vs &quot;You may have fitted 4GB, but the chipset doesn&#8217;t support mapping it anywhere useful, so that&#8217;s a write off&quot;</p>
<p>The very poor standard of 3rd party kernel drivers (AFAICT that&#8217;s one big reason you won&#8217;t have a consumer Windows with PAE) is also Microsoft&#8217;s problem even if it&#8217;s arguably not their fault.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-703893">
				<div id="div-comment-703893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick Lamb</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703893">
			January 27, 2009 at 12:46 pm</a>		</div>

		<p>Alexandre Grigoriev,</p>
<p>It isn&#8217;t there. Or at least, it&#8217;s entirely disabled, beyond the point where you can &quot;just&quot; turn it back on. I&#8217;d guess it&#8217;s a compile time decision, but I have no privileged information.</p>
<p>You can suppose whatever you like, but reality is unmoved by your suppositions.</p>
<p>Using memory above 4GB in a /64-bit/ operating system doesn&#8217;t require PAE (but it still needs a suitable mainboard chipset, not to mention the 64-bit CPU). The PAE CPUID bit is set on x86-64 hardware only because those chips can also run 32-bit with PAE mode (offering a quite different trade off in performance terms than the x86-64 &quot;long&quot; mode)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-703953">
				<div id="div-comment-703953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703953">
			January 27, 2009 at 4:35 pm</a>		</div>

		<p>Nick Lamb,</p>
<p>x64 OS <em>always</em> runs in PAE mode. No exceptions. There is no non-PAE mode for 64-bit virtual addressing.</p>
<p>In any case, if your OS is <em>really</em> using 4GB of RAM, you&#8217;ll have to access addresses above 4GB, just because you need to access your PCI devices. And client Vista x64 does just that.</p>
<p>When I&#8217;ll get around to it, I&#8217;ll compare Vista x86 SP1 HAL and kernel with their Win2008 counterparts. I&#8217;m curious how much different they are.</p>
<p>PS. Anybody, please fix this blogs.msdn.com blog engine. It&#8217;s so unreliable. No, don&#8217;t fix, just replace it with the one that works. I don&#8217;t mind if it&#8217;s PHP based instead of aspx. Just &nbsp;make it work.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-703973">
				<div id="div-comment-703973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mx.2000</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703973">
			January 27, 2009 at 7:58 pm</a>		</div>

		<p>This is what you want to read:</p>
<p><a rel="nofollow" target="_new" href="http://blogs.technet.com/markrussinovich/archive/2008/07/21/3092070.aspx" rel="nofollow">http://blogs.technet.com/markrussinovich/archive/2008/07/21/3092070.aspx</a></p>
<p>Yes, its long and technical, but Mark Russinovich knows what he&#8217;s talking about.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-703993">
				<div id="div-comment-703993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cereal</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703993">
			January 27, 2009 at 9:23 pm</a>		</div>

		<p>One day, they upgraded the PCs in our office to 4GB. &nbsp;Since we&#8217;re running XP 32-bit, some of us were chagrined to discover that only 3.25 GB of it is usable.</p>
<p>My coworker said, &quot;This is why I miss the more elegant architectures, like VAX.&quot;</p>
<p>This led to a hot debate in which it was revealed, unsurprisingly, that &lt;a href=&quot;<a rel="nofollow" target="_new" href="http://www.compaq.com/alphaserver/vax/archive/vax7000.html&quot;&gt;VAX" rel="nofollow">http://www.compaq.com/alphaserver/vax/archive/vax7000.html&quot;&gt;VAX</a> topped out at under 4GB too&lt;/a&gt;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-703943">
				<div id="div-comment-703943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Peter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-703943">
			January 27, 2009 at 4:30 pm</a>		</div>

		<p>*sigh*</p>
<p>It&#8217;s 2009 and we&#8217;re _still_ worrying about this stuff? It&#8217;s long past time that the world moved on to 64-bit now this 4G thing is becoming a real limit.</p>
<p>At least it would mean people wouldn&#8217;t have to ask these questions any more :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-705033">
				<div id="div-comment-705033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-705033">
			February 1, 2009 at 2:30 pm</a>		</div>

		<p>&quot;It&#8217;s 2009 and we&#8217;re <em>still</em> worrying about this stuff? It&#8217;s long past time that the world moved on to 64-bit now this 4G thing is becoming a real limit.&quot;</p>
<p>Well, we will have to worry about things like PAE as long as a 32-bit version of Windows exists.</p>
<p>&quot;When I&#8217;ll get around to it, I&#8217;ll compare Vista x86 SP1 HAL and kernel with their Win2008 counterparts. I&#8217;m curious how much different they are.&quot;</p>
<p>You will see the code that Windows uses to set it&#8217;s memory limits by edition.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-705543">
				<div id="div-comment-705543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-705543">
			February 3, 2009 at 12:42 am</a>		</div>

		<p>&quot;And client Vista x64 does just that.&quot;</p>
<p>I know, I am asking Vista x86 to do that as well via PAE.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-705553">
				<div id="div-comment-705553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-705553">
			February 3, 2009 at 12:52 am</a>		</div>

		<p>BTW, I was told by Geoff Chappell that this page will be available in the future that will have more info on this issue:</p>
<p><a rel="nofollow" target="_new" href="http://www.geoffchappell.com/notes/windows/license/memory.htm" rel="nofollow">http://www.geoffchappell.com/notes/windows/license/memory.htm</a></p>
<p>(currently it is 404)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-705563">
				<div id="div-comment-705563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090127-00/?p=19373#comment-705563">
			February 3, 2009 at 1:21 am</a>		</div>

		<p>&quot;It should be possible for Windows to indicate &quot;Hey, you actually have 4GB of RAM and if you went 64-bit you could use it all&quot; vs &quot;You may have fitted 4GB, but the chipset doesn&#8217;t support mapping it anywhere useful, so that&#8217;s a write off&quot;&quot;</p>
<p>Yep, combine this with true PAE support in client versions of 32-bit Windows, and it would be perfect.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

