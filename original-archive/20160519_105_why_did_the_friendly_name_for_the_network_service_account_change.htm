<html>
<head>
<title>Why did the friendly name for the Network Service account change?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why did the friendly name for the Network Service account change?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>May 19, 2016 / year-entry #106</td></tr>
<tr><td><b>Tags:</b></td><td>code</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>37</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Nobody promised it wouldn't.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
A customer had a service that runs under the Network Service account.
They found that starting in Windows Vista, if the service calls
<code>Get&shy;User&shy;Name</code>,
it no longer gets "NETWORK SERVICE" back;
instead, it gets the computer name followed by a dollar sign.
Why did this change?
</p>
<p>
Well, nobody promised that it wouldn't change.
</p>
<p>
Whether the name for the Network Service account is
"NETWORK SERVICE" or "HOSTNAME$" depends on a variety of things,
including whether the service is authenticated with Active Directory
(in which case it presents itself to the Active Directory server
as the machine name).
</p>
<blockquote CLASS=q><p>
The customer requires official documentation for the change.
Is there a document available that explains the change and why
it occurred?
</p>
</blockquote>
<p>
The customer should not be relying on account display names
in the first place.
If you want to identify an account, use the SID.
The SID is fixed and
<a HREF="https://support.microsoft.com/kb/243330">
documented as S-1-5-20</a>.
The display name is neither fixed nor documented.
</p>
<p>
The fact that their service is sensitive to the display name
for the Network Service kind of scares me,
because it suggests that
if I change my display name
to "NETWORK SERVICE" (my friends call me Netty for short),
their service might treat me as if I'm the Network Service
account,
and now I've gained service privileges.
<a HREF="http://xkcd.com/327/">
Little Bobby Tables</a>, eat your heart out!
</p>
<p>
The customer liaison explained,
</p>
<blockquote CLASS=q><p>
The customer's application was designed to use both
user names and SIDs, and they found that their design
stopped working.
Now they need to redesign their application,
but they need to justify the work on their side,
hence their request for formal documentation confirming
the change.
</p>
</blockquote>
<p>
Okay, so they want the document in order to make
themselves look good.
"See, Microsoft made a change and screwed us.
That's why we have this unexpected work."
</p>
<p>
Their design relied on undocumented behavior.
Undocumented behavior can change at any time.
This is one example of undocumented behavior changing.
If we had to document every undocumented behavior,
then it wouldn't be undocumented any more.
</p>
<p>
This specific change was an internal change that
does not need to be documented externally
because properly-written code should not have been
relying on it.
Any documentation that could be written on the subject
would continue to be non-contractual because
Windows is within its rights to change the behavior
at any time without warning.
</p>
<p>
I don't know what happened next, but it looks like
the customer eventually pressured somebody into
documenting it,
because a paragraph addressing this specific
issue was added to
<a HREF="https://msdn.microsoft.com/library/windows/desktop/ms724432(v=vs.85).aspx">
the documentation for the
<code>Get&shy;User&shy;Name</code> function</a>.
MSDN is
<a HREF="https://technet.microsoft.com/magazine/jj643252.aspx">
being used as a pawn in
some company's internal politics</a>.
</p>
<p>
I suspect the need for that sentence is now gone,
so
I need to file a documentation change request to replace
that sentence with
"Applications should use SIDs to identify well-known accounts
rather than display names."</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (37)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-fleet-command even thread-even depth-1 parent" id="comment-1249475">
				<div id="div-comment-1249475" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249475">
			May 19, 2016 at 7:29 am</a>		</div>

		<p>This post should bring out the nostalgia in the fans; it has been long time since this blog tried to make a customer look like an idiot.</p>
<p>GetUserName function documentation page reads: &#8220;Retrieves the name of the user associated with the current thread.&#8221; This is documented behavior. &#8220;$&#8221; is not the name of the user associated with the current thread. So, this is a violation of the documented behavior.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2 parent" id="comment-1249485">
				<div id="div-comment-1249485" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249485">
			May 19, 2016 at 7:59 am</a>		</div>

		<p>It&#8217;s not documented what the display name of the network service account is. In theory, all the built-in accounts could be named after emoji.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-entegygmail-com even depth-3" id="comment-1249515">
				<div id="div-comment-1249515" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Entegy' rel='external nofollow' class='url'>Entegy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249515">
			May 19, 2016 at 8:36 am</a>		</div>

		<p>I&#8217;ve actually named accounts solely with emoji and I&#8217;m kinda shocked how much *doesn&#8217;t* break when you do that. It&#8217;s pretty awesome.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fleet-command odd alt depth-3 parent" id="comment-1249525">
				<div id="div-comment-1249525" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249525">
			May 19, 2016 at 8:56 am</a>		</div>

		<p>It is a <i>documented fact</i> that &#8220;HOSTNAME$&#8221; is not the display name of Network Service account. The customer has observed a discrepancy between the documentation and the actual result. I don&#8217;t see why you seek to contradict and stonewall the customer instead of just solving his problem.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-4 parent" id="comment-1249535">
				<div id="div-comment-1249535" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249535">
			May 19, 2016 at 9:12 am</a>		</div>

		<p>So where is the documentation that explicitly states &#8220;HOSTNAME$&#8221; is not the display name for the network service?</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-5" id="comment-1249595">
				<div id="div-comment-1249595" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.silverbacknetworks.tech' rel='external nofollow' class='url'>Josh B</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249595">
			May 19, 2016 at 11:55 am</a>		</div>

		<p>Internet Stratagems 101: Win any argument by claiming your unsupportable ideas are &#8220;documented facts.&#8221;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fleet-command even depth-5" id="comment-1249615">
				<div id="div-comment-1249615" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249615">
			May 19, 2016 at 12:44 pm</a>		</div>

		<p>Gee, how about: Windows Resource Kit, or Windows Internals by Mark Russinovich? Or do you really want me to spam links to dozens of TechNet or MSDN articles?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-5" id="comment-1249636">
				<div id="div-comment-1249636" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249636">
			May 19, 2016 at 2:46 pm</a>		</div>

		<p>Just one link would be nice.  And I&#8217;m pretty sure Windows Internals is not supposed to be canonical.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fjeldse even depth-5" id="comment-1249685">
				<div id="div-comment-1249685" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Erik+F' rel='external nofollow' class='url'>Erik F</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249685">
			May 19, 2016 at 10:31 pm</a>		</div>

		<p>Looking at the service documentation (<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms684272(v=vs.85)" rel="nofollow">https://msdn.microsoft.com/en-us/library/windows/desktop/ms684272(v=vs.85)</a>.aspx), the service accounts are very strange beasts that really only have any consistent meaning with their SIDs: for example, CreateService() and ChangeServiceConfig() don&#8217;t recognize &#8220;NETWORK SERVICE&#8221;, but instead insist on &#8220;NT AUTHORITY\NetworkService&#8221;.</p>
<p>I honestly wouldn&#8217;t use GetUserName() at all and would instead use GetUserNameEx() so that I would have more control over what I get back (probably the SID so I can store it for future use.) Taking a look at <a href="https://msdn.microsoft.com/ja-jp/library/cc429924.aspx" rel="nofollow">https://msdn.microsoft.com/ja-jp/library/cc429924.aspx</a> (which I had my browser translate), it appears that earlier versions of the documentation didn&#8217;t specify what the output format for GetUserName() would be at all!</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-aadsso-1live-com0003400182c5b091 odd alt depth-4" id="comment-1249545">
				<div id="div-comment-1249545" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Eddie+Lotter' rel='external nofollow' class='url'>Eddie Lotter</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249545">
			May 19, 2016 at 9:18 am</a>		</div>

		<p>Please cite your sources. Enquiring minds want to know.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-4 parent" id="comment-1249585">
				<div id="div-comment-1249585" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yukkuri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249585">
			May 19, 2016 at 11:42 am</a>		</div>

		<p>Yes, chapter and verse please.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-fleet-command odd alt depth-5" id="comment-1249616">
				<div id="div-comment-1249616" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249616">
			May 19, 2016 at 12:46 pm</a>		</div>

		<p>Or why not make it even more easier and accurate: Click on the link in the article that Raymond has given.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-archangelpip even depth-4" id="comment-1249625">
				<div id="div-comment-1249625" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249625">
			May 19, 2016 at 12:49 pm</a>		</div>

		<p>You would assume <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms684272(v=vs.85)" rel="nofollow">https://msdn.microsoft.com/en-us/library/windows/desktop/ms684272(v=vs.85)</a>.aspx would be where any display name for the network service would be documented if it was.<br />
But remember, there is a difference between the actual account name and the display name.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-4 parent" id="comment-1249697">
				<div id="div-comment-1249697" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">xcomcmdr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249697">
			May 20, 2016 at 12:15 am</a>		</div>

		<p>Please, re-read the article. You clearly misunderstood it.</p>
<p>Also, your aggressiveness is unwelcome here.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-raykoopa even depth-5" id="comment-1249707">
				<div id="div-comment-1249707" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ray+Koopa' rel='external nofollow' class='url'>Ray Koopa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249707">
			May 20, 2016 at 12:36 am</a>		</div>

		<p>It looks like someone was programming in the same interesting ways like the scumstomer mentioned in the article.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-5" id="comment-1249767">
				<div id="div-comment-1249767" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yukkuri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249767">
			May 20, 2016 at 8:28 am</a>		</div>

		<p>Maybe, but there has always been a certain subset of people posting comments here that are clearly here just to fuel their anti-Micro$Suxxxx rage.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-5" id="comment-1249836">
				<div id="div-comment-1249836" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249836">
			May 20, 2016 at 7:03 pm</a>		</div>

		<p>He&#8217;s got a point, though.  KB243330 (linked in Raymond&#8217;s article) documents the &#8220;names&#8221; corresponding to various SIDs, and GetUserName says it retrieves the &#8220;name&#8221;.  You&#8217;d expect GetUserName to return the names listed in KB243330, and I&#8217;m pretty sure that it usually does.  If one really is the &#8220;account name&#8221; and the other is the &#8220;friendly name&#8221; and these are two different concepts, the distinction should be documented.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1249495">
				<div id="div-comment-1249495" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249495">
			May 19, 2016 at 8:08 am</a>		</div>

		<p>Just so long as the documented names of NULL, &#8220;NT AUTHORITY\LOCALSERVICE&#8221;, and &#8220;NE AUTHORITY\NETWORK SERVICE&#8221; continue to work in CreateService; else you will have a rotten day for backwards compatibility. AFAIK you can&#8217;t pass SIDs there. I&#8217;m pretty sure &#8220;&#8221; works for local system too, but it&#8217;s not documented.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-archangelpip even depth-2" id="comment-1249606">
				<div id="div-comment-1249606" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249606">
			May 19, 2016 at 12:39 pm</a>		</div>

		<p>Well, these are documented, plus they are the actual account names, not the friendly names.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-even depth-1" id="comment-1249555">
				<div id="div-comment-1249555" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249555">
			May 19, 2016 at 10:40 am</a>		</div>

		<p>I suppose that wherever FriendlyNames are described, the description needs a note that says &#8220;this can be anything&#8221;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 parent" id="comment-1249565">
				<div id="div-comment-1249565" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ken Hagan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249565">
			May 19, 2016 at 10:46 am</a>		</div>

		<p>It&#8217;s a pity that the API that converts &#8220;NT AUTHORITY\NETWORK SERVICE&#8221; into a SID does not also accept strings of the form &#8220;S-1-a-b-c&#8230;&#8221;. Presumably Mrs Tables had a daughter called &#8220;S-1-1-0&#8221; and so there&#8217;s a compatibilty issue, but I&#8217;m sure I&#8217;m not alone in wishing that a string SID could be used in all the command line utilities that currently demand a (localisation-sensitive) name.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1249635">
				<div id="div-comment-1249635" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249635">
			May 19, 2016 at 2:42 pm</a>		</div>

		<p>Well if left curly brace was not allowed in usernames there&#8217;s an obvious fix.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk even thread-even depth-1" id="comment-1249575">
				<div id="div-comment-1249575" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249575">
			May 19, 2016 at 10:46 am</a>		</div>

		<p>And&#8230;. there is (are?) an infinite number of undocumented behaviors.  (Anything that is not documented is undocumented, of course.)</p>
<p>I don&#8217;t think there is enough paper in the world to document all of what&#8217;s undocumented.  And I can&#8217;t quite get my head around the concept of wanting to document that certain things are undocumented&#8230;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1249605">
				<div id="div-comment-1249605" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jolyon Direnko-Smith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249605">
			May 19, 2016 at 12:33 pm</a>		</div>

		<p>Whatoccurs to me is that if the display name is not important and must not be relied on, why did/does it need to change under certain circumstances ?</p>
<p>It&#8217;s almost as if there are some internal dependencies within Windows itself that are relying on artefacts divined from the particular name encountered to infer things or make discriminatory choices.  Things which presumably are documented somewhere ?</p>
<p>It&#8217;s perhaps fair enough that the OS may have internal mechanisms which rely on artefacts that you do not wish application code to rely on, so you choose not to publish the documentation.  So in this case I think &#8220;undocumented&#8221; likely really means &#8220;unpublished&#8221;.</p>
<p>Maybe ?</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1249655">
				<div id="div-comment-1249655" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249655">
			May 19, 2016 at 2:59 pm</a>		</div>

		<p>More likely the visible change was a consequence of some other architectural change.  Or perhaps someone just thought it made more sense, so that if you&#8217;ve got a named pipe the username you see for yourself is the same as the username the other end of the pipe sees for you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2 parent" id="comment-1249755">
				<div id="div-comment-1249755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249755">
			May 20, 2016 at 7:16 am</a>		</div>

		<p>Raymond already provided one reason why: Active Directory authentication for computers, for services that need cross-network functionality.</p>
<p>Identifying by the SID doesn&#8217;t work, because the SID for &#8220;NETWORK SERVICE&#8221; is always the same; there&#8217;s no way to separate which service on which computer is making the request.</p>
<p>Same goes for using the old display name.  &#8220;NETWORK SERVICE&#8221; doesn&#8217;t tell you anything about which computer is making the request.</p>
<p>&#8220;HOSTNAME$&#8221; is how a computer is identified in Active Directory.  That name is given to the network service account when the service needs to access something in AD.  The computer authenticates using &#8220;HOSTNAME$&#8221; as the username and the computer&#8217;s internal password.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1249826">
				<div id="div-comment-1249826" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249826">
			May 20, 2016 at 6:58 pm</a>		</div>

		<p>Nah, the remote computer would always have seen COMPUTERNAME$ &#8211; and the computer&#8217;s SID, for that matter.  It&#8217;s only the local computer that saw anything else.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1249645">
				<div id="div-comment-1249645" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249645">
			May 19, 2016 at 2:57 pm</a>		</div>

		<p>While you&#8217;re at it, you might want to get the documentation to explain the distinction between the friendly name and the account name.  Now that I think of it, I&#8217;m confused about that myself.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-entegygmail-com even depth-2 parent" id="comment-1249776">
				<div id="div-comment-1249776" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Entegy' rel='external nofollow' class='url'>Entegy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249776">
			May 20, 2016 at 8:32 am</a>		</div>

		<p>account name is the shortname in UNIX speak, or the original name. It&#8217;s the name you would find on the folder in C:\Users and can&#8217;t be changed.<br />
Friendly name is the name you can see as the display name, it can be changed at any time, but it wouldn&#8217;t affect the account&#8217;s shortname.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1249825">
				<div id="div-comment-1249825" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://harryjohnston.wordpress.com' rel='external nofollow' class='url'>Harry Johnston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249825">
			May 20, 2016 at 6:55 pm</a>		</div>

		<p>That can&#8217;t be right.  GetUserName doesn&#8217;t return the display name.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong even thread-odd thread-alt depth-1 parent" id="comment-1249665">
				<div id="div-comment-1249665" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249665">
			May 19, 2016 at 7:34 pm</a>		</div>

		<p>The customer is probably asking for documentation as form of proof in incident report.</p>
<p>I did that a lot while working in an &#8220;equity trading software&#8221; vendor. Each time just explaining the problem is not enough, they need downloadable documentation as proof from that offical site as reference. Lots of my time has been spent on finding documentations that seemingly related to the incident I&#8217;m creating report for.   _-_</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-cheong odd alt depth-2" id="comment-1249675">
				<div id="div-comment-1249675" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249675">
			May 19, 2016 at 7:48 pm</a>		</div>

		<p>One of the more memoriable incident is related to this KB article: <a href="https://support.microsoft.com/en-us/kb/290260" rel="nofollow">https://support.microsoft.com/en-us/kb/290260</a></p>
<p>We were bitten by this because our Windows services uses e-cert stored in &#8220;Person&#8221; store of the service&#8217;s current user to encrypt data. And they use remote management software that does not support sending Ctrl-Alt-Del to remote side. This plus the fact that their audit practice require them to change all server account password every 3 months makes the server operators change the service account password with User Managment MMC instead of &#8220;Change password&#8221; in secure desktop.</p>
<p>This, complicated by the fact that they move the server data to another hardware via backup and restore makes the customer believe our software will not survive a &#8220;backup and restore&#8221; and think this is totally not acceptable. I quoted the link to the KB article but they rejected that because it say that this just affects WinXP.</p>
<p>I had spent lots of time arguing with them since WinXP and Win2003 based on same kernel, just in different SKU, this will and should affect other Windows server products. I actually spent time demonestrating this behaviour is reproducable to their technical staffs. Sadly because of this incident, this customer never grant pass the UAT.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jamiejamieakers-co-uk even thread-even depth-1" id="comment-1249725">
				<div id="div-comment-1249725" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/JamieAkers' rel='external nofollow' class='url'>JamieAkers</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249725">
			May 20, 2016 at 2:57 am</a>		</div>

		<p>I&#8217;m guessing this developer also didn&#8217;t do any testing with localised language editions of Windows?  For example on a system installed from a German ISO file they&#8217;d have found the display name of the service to be &#8220;netzwerkdiesnte&#8221; for example.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1249726">
				<div id="div-comment-1249726" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Another John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249726">
			May 20, 2016 at 3:36 am</a>		</div>

		<p>&gt;  @Ray Koopa: &#8220;scumstomer&#8221;. Got to find an appropriate place to use the auto-correct misnomer!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-1249745">
				<div id="div-comment-1249745" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249745">
			May 20, 2016 at 7:02 am</a>		</div>

		<p>&gt; The customer should not be relying on account display names in the first place. If you want to identify an account, use the SID.</p>
<p>&gt; The customer’s application was designed to use both user names and SIDs</p>
<p>Perhaps this is yet another instance of &#8220;Unix thinking&#8221;? On Unix, it&#8217;s not a good idea to rely in the UID, since it can be different; for instance, the &#8220;contoso&#8221; account might be uid 123 on one machine, but uid 456 on another (the only reliable UID is for the &#8220;root&#8221; account, which is always UID 0). Therefore, programmers raised on Unix might expect to use the account name to identify an account.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1249865">
				<div id="div-comment-1249865" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Harald van Dijk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1249865">
			May 21, 2016 at 9:39 am</a>		</div>

		<p>&#8220;Perhaps this is yet another instance of “Unix thinking”? [&#8230;] (the only reliable UID is for the “root” account, which is always UID 0)&#8221;<br />
I hope that&#8217;s not what Unix thinking is. While administrative accounts will be named root and have UID 0 on most Unix implementations, in general, there is nothing in the Unix specifications that requires any name or UID for an administrative account. Unix systems do exist that have neither a user named root nor a user with a UID of 0, and most software &#8212; or at least most software that&#8217;s meant to be portable across Unix systems &#8212; will run just fine on them.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1250215">
				<div id="div-comment-1250215" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Engywuck</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160519-00/?p=93495#comment-1250215">
			May 23, 2016 at 10:58 pm</a>		</div>

		<p>In my german Windows 7, the &#8220;NT AUTHORITY\NetworkService&#8221; is shown as &#8220;Netzwerkdienst&#8221;. So their software has to be ported to support non-english versions? Just great.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

