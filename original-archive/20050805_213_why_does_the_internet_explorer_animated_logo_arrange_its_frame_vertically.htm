<html>
<head>
<title>Why does the Internet Explorer animated logo arrange its frame vertically?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why does the Internet Explorer animated logo arrange its frame vertically?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>August 5, 2005 / year-entry #214</td></tr>
<tr><td><b>Tags:</b></td><td>code</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>17</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">If you ever tried to build a custom animated logo for Internet Explorer, you cetainly noticed that the frames of the animation are arranged vertically rather than horizontally. Why is that? Because it's much more efficient. Recall that bitmaps are stored as a series of rows of pixels. In other words, if you number the...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
If you ever tried to build a custom animated logo for Internet Explorer,
you cetainly noticed that the frames of the animation are arranged
vertically rather than horizontally.  Why is that?
</p>
<p>
Because it's much more efficient.
</p>
<p>
Recall that bitmaps are stored as a series of rows of pixels.
In other words, if you number the pixels of a bitmap like this:
</p>
<pre>
123
456
789
</pre>
<p>
then the pixels are stored in memory in the order 123456789.
(Note: I'm assuming a top-down bitmap, but the same principle
applies to bottom-up bitmaps.)
Now observe what happens if you store your animation strip
horizontally:
</p>
<table BORDER=1 BORDERCOLOR=#000000
       CELLSPACING=0 STYLE="border-collapse: collapse; font-family: monospace">
<tr>
<td>12<br>AB</td>
<td>34<br>CD</td>
<td>56<br>EF</td>
<td>78<br>GH</td>
</tr>
</table>
<p>
These pixels are stored in memory in the order 12345678ABCDEFGH.
To draw the first frame requires pixels 1, 2, A and B.
The second frame takes 3, 4, C, and D.
And so on.
Observe that the pixels required for each frame are not contiguous
in memory.  This means that they occupy different cache lines at least,
and for a bitmap of any significant size, they also span multiple
memory pages.
</p>
<p>
Now consider a vertically-arranged animation strip:
</p>
<table BORDER=1 BORDERCOLOR=#000000
       CELLSPACING=0 STYLE="border-collapse: collapse; font-family: monospace">
<tr>
<td>12<br>34</td>
</tr>
<tr>
<td>56<br>78</td>
</tr>
<tr>
<td>AB<br>CD</td>
</tr>
<tr>
<td>EF<br>GH</td>
</tr>
</table>
<p>
Again, the pixels are stored in memory in the order 12345678ABCDEFGH,
[typo fixed, 15 Aug]
but this time, the pixels of the first frame are 1, 2, 3 and 4;
the second frame consists of 5, 6, 7, and 8; and so on.
This time, all the pixels for a single frame are adjacent in memory.
This means that they can be packed into a small number of cache
lines, and reading the pixels for a single image
will not force you to jump across multiple pages.
</p>
<p>
Let's illustrate with some pictures:
Let's say that the large animation is a series of twelve
38x38 frames, for a total bitmap dimension of 38x456.  Let's assume
further, for the sake of example,
that it's a 32bpp bitmap and that the page size is 4KB.
</p>
<p>
If the bitmap were stored as a horizontal strip (456x38), then
the memory layout would look like this,
where I've color-coded each memory page.
</p>
<table BORDER=1 BORDERCOLOR=#000000 CELLPADDING=0 CELLSPACING=1
       STYLE="border: none">
<col SPAN=12 STYLE="height: 38px" VALIGN=top>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=36 BGCOLOR=#0033FF></td>
<td WIDTH=2 BGCOLOR=#00CC99></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=28 BGCOLOR=#66FFFF></td>
<td WIDTH=10 BGCOLOR=#999933></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=20 BGCOLOR=#66FF66></td>
<td WIDTH=18 BGCOLOR=#CCCC00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=12 BGCOLOR=#FFCC00></td>
<td WIDTH=26 BGCOLOR=#99FF33></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=34 BGCOLOR=#00CC99></td>
<td WIDTH=4 BGCOLOR=#FF0000></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=26 BGCOLOR=#999933></td>
<td WIDTH=12 BGCOLOR=#FFFFFF></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=18 BGCOLOR=#CCCC00></td>
<td WIDTH=20 BGCOLOR=#FFFF00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=10 BGCOLOR=#99FF33></td>
<td WIDTH=28 BGCOLOR=#FF33CC></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=32 BGCOLOR=#FF0000></td>
<td WIDTH=6 BGCOLOR=#990099></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=24 BGCOLOR=#FFFFFF></td>
<td WIDTH=14 BGCOLOR=#333366></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=16 BGCOLOR=#FFFF00></td>
<td WIDTH=22 BGCOLOR=#663333></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=8 BGCOLOR=#FF33CC></td>
<td WIDTH=30 BGCOLOR=#330066></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=30 BGCOLOR=#990099></td>
<td WIDTH=8 BGCOLOR=#66FFFF></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=22 BGCOLOR=#333366></td>
<td WIDTH=16 BGCOLOR=#66FF66></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=14 BGCOLOR=#663333></td>
<td WIDTH=24 BGCOLOR=#FFCC00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=6 BGCOLOR=#330066></td>
<td WIDTH=32 BGCOLOR=#CC0033></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
</tr>
</table>
<p>
Observe that no matter which frame you draw, you will have to touch
every single page since each frame containes a few bytes from each page.
</p>
<p>
Storing the bitmap vertically, on the other hand, arranges the pixels
like so:
</p>
<table BORDER=1 BORDERCOLOR=#000000 CELLPADDING=0 CELLSPACING=1
       STYLE="border: none">
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=26>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#0033FF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=36 BGCOLOR=#0033FF></td>
<td WIDTH=2 BGCOLOR=#00CC99></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=11>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=15>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#00CC99></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=34 BGCOLOR=#00CC99></td>
<td WIDTH=4 BGCOLOR=#FF0000></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=22>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=4>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF0000></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=32 BGCOLOR=#FF0000></td>
<td WIDTH=6 BGCOLOR=#990099></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=26>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#990099></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=30 BGCOLOR=#990099></td>
<td WIDTH=8 BGCOLOR=#66FFFF></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=6>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=20>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FFFF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=28 BGCOLOR=#66FFFF></td>
<td WIDTH=10 BGCOLOR=#999933></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=17>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=9>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#999933></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=26 BGCOLOR=#999933></td>
<td WIDTH=12 BGCOLOR=#FFFFFF></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=26>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFFFF></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=24 BGCOLOR=#FFFFFF></td>
<td WIDTH=14 BGCOLOR=#333366></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=1>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=25>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#333366></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=22 BGCOLOR=#333366></td>
<td WIDTH=16 BGCOLOR=#66FF66></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=12>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=14>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#66FF66></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=20 BGCOLOR=#66FF66></td>
<td WIDTH=18 BGCOLOR=#CCCC00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=23>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=3>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CCCC00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=18 BGCOLOR=#CCCC00></td>
<td WIDTH=20 BGCOLOR=#FFFF00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=26>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFFF00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=16 BGCOLOR=#FFFF00></td>
<td WIDTH=22 BGCOLOR=#663333></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=7>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=19>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#663333></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=14 BGCOLOR=#663333></td>
<td WIDTH=24 BGCOLOR=#FFCC00></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=18>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=8>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FFCC00></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=12 BGCOLOR=#FFCC00></td>
<td WIDTH=26 BGCOLOR=#99FF33></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=26>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#99FF33></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=10 BGCOLOR=#99FF33></td>
<td WIDTH=28 BGCOLOR=#FF33CC></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=2>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=24>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#FF33CC></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=8 BGCOLOR=#FF33CC></td>
<td WIDTH=30 BGCOLOR=#330066></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=13>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
</table>
</td>
</tr>
<tr>
<td HEIGHT=38>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=13>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#330066></td>
</tr>
<tr HEIGHT=1>
<td WIDTH=6 BGCOLOR=#330066></td>
<td WIDTH=32 BGCOLOR=#CC0033></td>
</tr>
</table>
<table CELLPADDING=0 CELLSPACING=0>
<tr HEIGHT=24>
<td COLSPAN=2 WIDTH=38 BGCOLOR=#CC0033></td>
</tr>
</table>
</td>
</tr>
</table>
<p>
Notice that with the vertical strip,
each frame touches only two or three pages;
compare the horizontal strip, where each frame touches seventeen pages.
This is quite a savings especially when you realize that
most of the time, the only frame being drawn is the first one.
The other frames are used only during animation.
In other words, this simple change trimmed
60KB out of the normal working set.</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (17)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-294673">
				<div id="div-comment-294673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-294673">
			August 5, 2005 at 10:14 am</a>		</div>

		<p>You guys must have some pretty amazing tools to be able to spot a 60k drop in working set due to page fragmentation. What sort of profiling setups do you have? The best I&#8217;ve used is Massif, which gives you a pretty space/time graph, but given what I&#8217;ve seen of most apps 60k for the spinning logo would be lost in the noise.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-294703">
				<div id="div-comment-294703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://nearaz.blogspot.com' rel='external nofollow' class='url'>NeARAZ</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-294703">
			August 5, 2005 at 11:02 am</a>		</div>

		<p>Mike, I think it&#8217;s not a drop in memory usage, it&#8217;s a drop in the number of pages that are touched while drawing a page. In other words, just making your data cache friendly &#8211; this doesn&#8217;t reduce memory usage, but can speedup things by orders of magnitude.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-294753">
				<div id="div-comment-294753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">josh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-294753">
			August 5, 2005 at 11:46 am</a>		</div>

		<p>So why do toolbars take horizontal strips?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-294763">
				<div id="div-comment-294763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Schend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-294763">
			August 5, 2005 at 11:53 am</a>		</div>

		<p>Hm.  Personally, I&#8217;ve always used vertical animation strips when making animations for my programs&#8230; including a couple little games.  You make it sound as if the standard was horizontal, and the vertical ones are freakish.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-294833">
				<div id="div-comment-294833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tony Cox [MS}</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-294833">
			August 5, 2005 at 1:31 pm</a>		</div>

		<p>I remember back in the days of software rasterizers for games, you saw a similar effect due to L1 cache coherency. If a polygon happened to align on screen such that the source texture data was traversed in order, then performance was measurably better than the same polygon rotated by 90 degrees. On some games we worked on, we considered even going so far as to store two versions of a source texture, and picking the one closest to the alignment of the polygon (we never did this in the end due to the extra memory cost outweighing caching benefits).</p>
<p>These days, modern GPUs tackle a similar problem. They don&#8217;t actually store textures in the obvious memory order, but instead store them with the pixels mashed up in what is usually called a &quot;swizzle&quot; pattern. A swizzle pattern isn&#8217;t very intuitive geometrically, but in terms of the texture coordinates it amounts to interleaving the individual bits of the coordinates. If your original texel was at coordinate (X,Y), and the bit representation of X is xxxxxx and Y is yyyyyy, then the actual data is stored at the memory offset given by xyxyxyxyxyxy (interleaving bitwise). The net result of this is that texels which are close to each other in the original image are clustered close to each other in memory, regardless if they were close to each other horizontally or vertically, and therefore traversing the texture in any direction is roughly similar in cost. This is a considerable performance win. (Most GPUs are capable of reading plain old linear layouts as well, but the performance is measureably poorer.)</p>
<p>Software rasterizers could benefit from the same technique, except that the cost of doing the bit interleaving in software usually outweighs the cache coherency benefits (plus, there are relatively few applications for high-performance software rasterization these days, so nobody really takes the time).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-295083">
				<div id="div-comment-295083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">waleri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295083">
			August 6, 2005 at 5:35 am</a>		</div>

		<p>Alas, image lists uses horizontal bitmaps&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-295113">
				<div id="div-comment-295113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295113">
			August 6, 2005 at 9:45 am</a>		</div>

		<p>&quot;Again, the pixels are stored in memory in the order 1245678ABCDEFGH, but &#8230;&quot;<br />
<br />I never liked pixel 3 much anyway.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-295213">
				<div id="div-comment-295213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295213">
			August 8, 2005 at 3:59 am</a>		</div>

		<p>Sorry this is off topic, but triggered by your reference to &quot;quite a savings&quot;.<br />
<br />In the UK, we make &quot;a saving&quot; &#8211; savings go into banks. Does anyone know where the plural crept in across the Atlantic? I&#8217;ve always been puzzled by this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-295233">
				<div id="div-comment-295233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://wind.codepixel.com' rel='external nofollow' class='url'>Antonio Vargas</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295233">
			August 8, 2005 at 8:03 am</a>		</div>

		<p>Tony, the software way would be, instead of usual order VVVVVVVVUUUUUUUU, using UUUUVVVVVVVVUUUU bitorder which is very easy to generate on the fly while doing fixed-point interpolation. Look for &quot;fatmap2.txt&quot; for more info :)<br />
<br />There is also a way to use normal coordinates for textures: swizle the screen-travesal!!! :P</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-295243">
				<div id="div-comment-295243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://nearaz.blogspot.com' rel='external nofollow' class='url'>NeARAZ</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295243">
			August 8, 2005 at 8:50 am</a>		</div>

		<p>Antonio/Tony: yes, and in fact old &quot;fast rotozoomers&quot; did exactly that. Don&#8217;t draw the screen line by line, but instead draw it in blocks (say, 8&#215;8 pixels).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-295443">
				<div id="div-comment-295443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://excastle.com/blog/archive/2005/08/09/2001.aspx' rel='external nofollow' class='url'>Joe White's Blog</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-295443">
			August 9, 2005 at 9:43 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-296963">
				<div id="div-comment-296963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/abhinaba/archive/2005/08/16/452080.aspx' rel='external nofollow' class='url'>I know the answer (its 42)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-296963">
			August 16, 2005 at 5:48 am</a>		</div>

		<p>Sometimes we get so used to things being the way they are we stop questioning them. We always have the&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-296973">
				<div id="div-comment-296973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/abhinaba/archive/2005/08/16/452080.aspx' rel='external nofollow' class='url'>I know the answer (its 42)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-296973">
			August 16, 2005 at 5:48 am</a>		</div>

		<p>Sometimes we get so used to things being the way they are we stop questioning them. We always have the&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-300483">
				<div id="div-comment-300483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/abhinaba/archive/2005/08/16/452080.aspx' rel='external nofollow' class='url'>I know the answer (its 42)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-300483">
			August 24, 2005 at 9:19 am</a>		</div>

		<p>Sometimes we get so used to things being the way they are we stop questioning them. We always have the&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-300493">
				<div id="div-comment-300493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/abhinaba/archive/2005/08/16/452080.aspx' rel='external nofollow' class='url'>I know the answer (its 42)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-300493">
			August 24, 2005 at 9:23 am</a>		</div>

		<p>Sometimes we get so used to things being the way they are we stop questioning them. We always have the&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-466053">
				<div id="div-comment-466053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2007/01/29/1551916.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-466053">
			January 29, 2007 at 10:00 am</a>		</div>

		<p>That&#8217;s just the interchange format.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-466113">
				<div id="div-comment-466113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.williamwilling.com/blog/?p=59' rel='external nofollow' class='url'>WilliamWilling.com &raquo; Blog Archive &raquo; Arranging bitmaps</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050805-18/?p=34693#comment-466113">
			January 29, 2007 at 12:07 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://www.williamwilling.com/blog/?p=59" rel="nofollow">http://www.williamwilling.com/blog/?p=59</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

