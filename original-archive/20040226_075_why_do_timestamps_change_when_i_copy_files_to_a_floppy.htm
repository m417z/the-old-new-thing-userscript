<html>
<head>
<title>Why do timestamps change when I copy files to a floppy?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why do timestamps change when I copy files to a floppy?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>February 26, 2004 / year-entry #76</td></tr>
<tr><td><b>Tags:</b></td><td>history;time</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>17</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Floppy disks use the FAT filesystem, as do DOS-based and Windows 95-based operating systems. On the other hand, Windows NT-based systems (Windows 2000, XP, 2003, ...) tend to use the NTFS filesystem. (Although you can format a drive as FAT on Windows NT-based systems, it is not the default option.) The NTFS and FAT filesystems...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>Floppy disks use the FAT filesystem, as do DOS-based and Windows 95-based  operating systems.  On the other hand, Windows NT-based  systems (Windows 2000, XP, 2003, ...) tend to use the NTFS  filesystem.  (Although you can format a drive as FAT on Windows NT-based systems,  it is not the default option.)</p>
<p>  <a href="http://msdn.microsoft.com/library/en-us/sysinfo/base/file_times.asp">  The NTFS and FAT filesystems store times and dates differently</a>.  Note, for example, that FAT records last-write time only to two-second  accuracy.  So if you copy a file from NTFS to FAT, the last-write  time can change by as much as two seconds.  </p>
<p>  Why is FAT so much lamer than NTFS?  Because FAT was invented in 1977,  back before people were worried about such piddling things like  time zones, much less Unicode.  And it was still a major improvement  over CP/M, which didn't have timestamps at all.  </p>
<p>  It is also valuable to read and understand the consequences of  FAT storing filetimes in local time, compared to NTFS storing  filetimes in UTC.  In addition to the  <a href="http://blogs.msdn.com/oldnewthing/archive/2003/10/24/55413.aspx">  Daylight Savings time problems</a>,  you also will notice that the timestamp will appear to change if  you take a floppy across timezones.  Create a file at, say, 9am Pacific time, on a floppy disk.  Now move the floppy disk to Mountain time.  The file was created at 10am Mountain time, but if you look  at the disk it will still say 9am, which corresponds to 8am Pacific time.  The file travelled backwards in time one hour.  (In other words, the timestamp  <u>failed to change when it should</u>.)</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (17)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-147953">
				<div id="div-comment-147953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-147953">
			February 26, 2004 at 1:28 pm</a>		</div>

		<p>I can&#8217;t remember when I last used a floppy. At least 4 years ago, probably more.. Does anyone still use floppies? This seems like a very irrelevant problem today :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-147983">
				<div id="div-comment-147983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Claw</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-147983">
			February 26, 2004 at 2:28 pm</a>		</div>

		<p>Anon: Almost all flash and USB drives today still use FAT so the problem is not confined to floppies alone.</p>
<p>Anyone know how CDFS handles timestamps?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-147993">
				<div id="div-comment-147993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-147993">
			February 26, 2004 at 2:38 pm</a>		</div>

		<p>According to ISO9660</p>
<p><a target="_new" href="http://www.alumni.caltech.edu/~pje/iso9660.html" rel="nofollow">http://www.alumni.caltech.edu/~pje/iso9660.html</a></p>
<p>timestamps on CDs have 1 second resolution.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148003">
				<div id="div-comment-148003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">No</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148003">
			February 26, 2004 at 3:03 pm</a>		</div>

		<p>What&#8217;s a floppy? USB flash is the way to go</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148013">
				<div id="div-comment-148013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gene Hamilton</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148013">
			February 26, 2004 at 3:21 pm</a>		</div>

		<p>Isn&#8217;t flash drives formatted with FAT anyways?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148023">
				<div id="div-comment-148023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148023">
			February 26, 2004 at 5:32 pm</a>		</div>

		<p>For a change the cynicism in this remark is caused by someone other than Microsoft&#8230;</p>
<p>Last I read, Posix timestamps had to be based on GMT, which is UTC without leap seconds.  After enough years, when 43,200 leap seconds have occured, Posix users will have their midnight sun high in the sky, but UTC users will have it at noon.</p>
<p>There are already some number of seconds difference between UTC and GMT.</p>
<p>So if a process is running in the Posix subsystem, Windows is required to corrupt every timetamp by some number of seconds.  Does Windows obey?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148043">
				<div id="div-comment-148043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matthew Lock</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148043">
			February 26, 2004 at 7:35 pm</a>		</div>

		<p>The advantage with floppies is that everyone has them, and you don&#8217;t have to get on the floor under the desk to put a floppy in, where as you do for some peoples USB ports.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148053">
				<div id="div-comment-148053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Charles Pence</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148053">
			February 26, 2004 at 8:55 pm</a>		</div>

		<p>Not everybody has these anymore&#8211;Dell&#8217;s now completely phased out floppy drives in all their production machines, IIRC, and the last three or four machines I&#8217;ve built haven&#8217;t had a floppy drive in them.  Between CDRs and Bootable CDs, I haven&#8217;t ever wished I had it back.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148063">
				<div id="div-comment-148063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jordan Russell</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148063">
			February 26, 2004 at 9:03 pm</a>		</div>

		<p>Norman: In Windows, UTC == GMT. The time functions don&#8217;t make any adjustments for leap seconds.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148073">
				<div id="div-comment-148073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Colen McAlister</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148073">
			February 26, 2004 at 10:35 pm</a>		</div>

		<p>I don&#8217;t have a floppy any more (I built my own machine, didn&#8217;t see a need for one). The only reason I can think of for having one nowadays is for flashing the BIOS, and even now some &#8216;flash in windows&#8217; utilities are appearing.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148093">
				<div id="div-comment-148093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jpayne@NOSPAM.serif.com' rel='external nofollow' class='url'>Jonathan Payne</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148093">
			February 27, 2004 at 1:42 am</a>		</div>

		<p>Does Windows have a clear concept of leap seconds?  I was playing with my GPS a few days ago and I wanted to get accurate times from its track logs.  The GPS documentation said it returned seconds since 1st January 1980 (or similar) and neither the Windows or GPS documentation were clear about how they handled leap seconds into account.  Does Windows consider all years to have the same number of seconds?  If I subtract todayâ€™s date from the date at this time twenty years ago should I expect years_in_seconds * 20 or should the difference include leap seconds?  As leap seconds are not known that far in advance, can the time difference between a point in time now and a point in time in the future change?  Am I making all this far more complex than it needs to be?</p>
<p>To be honest, I don&#8217;t really care what Windows does but I would like its current behavior to be better documented (a summary page in MSDN would be really good).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148183">
				<div id="div-comment-148183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Kafrissen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148183">
			February 27, 2004 at 11:30 am</a>		</div>

		<p>To Norman and Russel:</p>
<p>UTC is actually defined as being .9 seconds within GMT time.</p>
<p>UTC time is computed with a cesium clock, so the seconds from there are more accurate. Then when UTC is approaching a second difference from GMT, which is the time it takes the Earth to go around the sun, a leap second is added or subtracted. Historically, only seconds have been added, about once a year.</p>
<p>GPS time are the seconds from 1980 using an atomic clock and are not adjusted so that it is ahead of GMT by 13 seconds</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148373">
				<div id="div-comment-148373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148373">
			February 29, 2004 at 4:54 pm</a>		</div>

		<p>2/26/2004 9:03 PM Jordan Russell:</p>
<p>&gt; In Windows, UTC == GMT.</p>
<p>UTC does not equal GMT.  If Windows says it does, well then what is new, another lie.</p>
<p>I guess this means though, when Windows documentation says it&#8217;s using UTC, maybe it&#8217;s really using GMT.  Then what happens when Windows Time Service picks up UTC from a network time server (some of which are operated by Microsoft).  The received time is not GMT.</p>
<p>2/27/2004 1:42 AM Jonathan Payne:</p>
<p>&gt; The GPS documentation said it returned<br />
<br />&gt; seconds since 1st January 1980</p>
<p>Yes.  The client (Earth-based application) has to add or subtract the correct number of leap seconds when coordinating between UTC and GPS timestamps.</p>
<p>2/27/2004 11:30 AM David Kafrissen:</p>
<p>&gt; UTC is actually defined as being .9 seconds<br />
<br />&gt; within GMT time.</p>
<p>No.  I don&#8217;t recall the exact details of when UTC adds a leap second, but that could well possibly be a .9 seconds maximum, how far UTC is allowed to deviate from actual time, where actual depends on actual geophysical motion.</p>
<p>GMT does not have leap seconds.  The number of seconds difference between GMT and UTC is always an integer.  A few years ago it was 17.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-148423">
				<div id="div-comment-148423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jordan Russell</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148423">
			February 29, 2004 at 9:15 pm</a>		</div>

		<p>To clarify the point I was making: Windows knows nothing about leap seconds. If you pass two arbitrary dates to SystemTimeToFileTime and compare the resulting FILETIMEs, you&#8217;ll find that no leap seconds are factored in. In addition, GetSystemTime will never return a wSecond value greater than 59.</p>
<p>Because there is no leap second handling, when January 1 rolls around the system clock will potentially be off by one (or more) seconds until it&#8217;s reset using an external time source that *is* leap-second-aware.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-148443">
				<div id="div-comment-148443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-148443">
			February 29, 2004 at 9:44 pm</a>		</div>

		<p>2/29/2004 9:15 PM Jordan Russell:</p>
<p>&gt; Windows knows nothing about leap seconds.</p>
<p>OK, that is a clarification.  Then Windows knows about GMT and time zones that are offset from GMT, but Windows does not know about UTC.</p>
<p>&gt; In addition, GetSystemTime will never return<br />
<br />&gt; a wSecond value greater than 59.</p>
<p>Very interesting!  Now what happens if this happens:  (1) Windows Time Service obtains an update from a network time server (some of which are operated by Microsoft) at a time which just happens to be a leap second, and then (2) an application calls GetSystemTime before the passage of another second.  Does Windows check its knowledge of the current time and fake it so that the preceding system &quot;second&quot; or following system &quot;second&quot; is actually two seconds long?  Or blue screen?  or what?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-151533">
				<div id="div-comment-151533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.nazul.net/blog/archive/0001/01/01/NtfsVsFat.aspx' rel='external nofollow' class='url'>Nazul's Weblog</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-151533">
			March 7, 2004 at 4:16 pm</a>		</div>

		<p>Un post de otro weblog que explica unas de las diferencias entre NTFS y FAT.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-182983">
				<div id="div-comment-182983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040226-00/?p=40473#comment-182983">
			June 11, 2004 at 11:54 pm</a>		</div>

		<p>Commenting on this article has been closed.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

