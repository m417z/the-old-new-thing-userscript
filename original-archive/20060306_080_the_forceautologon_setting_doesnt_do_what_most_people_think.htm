<html>
<head>
<title>The ForceAutoLogon setting doesn't do what most people think</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>The ForceAutoLogon setting doesn&#8217;t do what most people think</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>March 6, 2006 / year-entry #81</td></tr>
<tr><td><b>Tags:</b></td><td>tipssupport</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>12</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">The folks on the logon team wish me to remind you that the ForceAutoLogon setting does more than just log on an account automatically. They've had to deal with large numbers of people who set the key without really understanding what it does, and then getting into trouble because what they get is not what...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>The folks on the logon team wish me to remind you that <a href="http://support.microsoft.com/?kbid=315231"> the ForceAutoLogon setting</a> does more than just log on an account automatically. They've had to deal with large numbers of people who set the key without really understanding what it does, and then getting into trouble because what they get is not what they expected.</p>
<p> In addition to logging on an account automatically, the ForceAutoLogon setting also <strong>logs you back on after you log off</strong>. It is designed for machines running as kiosks or other publically-accessible scenarios where you want the kiosk account to be the only account available. Even if the user manages to fiddle with the machine and log off the kiosk user, the logon system will just log the kiosk user back on. </p>
<p> As a result, setting the ForceAutoLogon setting effectively locks out all users aside from the one you are forcing. If you do this to one of your machines, you'd better have some other way of administering the machine. (Typically, this is done via remote administration.) </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (12)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-351733">
				<div id="div-comment-351733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351733">
			March 6, 2006 at 10:08 am</a>		</div>

		<p>Or the shift key.</p>
<p>;-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-351763">
				<div id="div-comment-351763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Christian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351763">
			March 6, 2006 at 11:25 am</a>		</div>

		<p>Long time ago I locked me out of a PC with this (and TweakUI). Had to reinstall the OS (NT4). I wish someone told me about the SHIFT-key.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-351773">
				<div id="div-comment-351773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.differentpla.net/' rel='external nofollow' class='url'>Roger Lipscombe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351773">
			March 6, 2006 at 11:33 am</a>		</div>

		<p>I guess this is why GNOME (e.g.) has a TimedAutoLogon setting, which gives you a chance to cancel the automatic logon (this time only) and to use a different account.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-351853">
				<div id="div-comment-351853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Clayton O'Neill</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351853">
			March 6, 2006 at 1:09 pm</a>		</div>

		<p>I really wish there was some way to say &quot;Log me in automatically once, but lock the screen immediately&quot;</p>
<p>It&#8217;s nice that Windows can delay a lot of the startup stuff into the background, but windows booting isn&#8217;t what takes the most amount of time for my machines, it&#8217;s applications. &nbsp;Which gets delayed until I login and I get to wait more.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-351883">
				<div id="div-comment-351883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Eddy Boston</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351883">
			March 6, 2006 at 3:01 pm</a>		</div>

		<blockquote><p>
  I really wish there was some way to say &quot;Log me in automatically once, but lock the screen immediately&quot; </p>
<p>Couldn&#8217;t you put a shortcut to &quot;rundll32.exe user32.dll,LockWorkStation&quot; in your startup group?<br />
  
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-351913">
				<div id="div-comment-351913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ryanm</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351913">
			March 6, 2006 at 4:58 pm</a>		</div>

		<p>Eddy, that will corrupt the stack. &nbsp;It&#8217;s actually invisibly crashing when you do it.</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2004/01/15/58973.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2004/01/15/58973.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding even thread-even depth-1" id="comment-351923">
				<div id="div-comment-351923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-351923">
			March 6, 2006 at 5:55 pm</a>		</div>

		<p>You could always write your own wrapper which just calls LockWorkStation.</p>
<p>Personally, I tend to remove everything from my Startup folder (and registry keys, etc) that are not absolutely necessary. Which is most things, really.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-352003">
				<div id="div-comment-352003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Wilson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-352003">
			March 7, 2006 at 5:04 am</a>		</div>

		<p>I dont know how they do it but on the machines at work, they have a shortcut in the quicklaunch bar that locks the screen automatically for you.<br />
<br />So it can be done.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-352013">
				<div id="div-comment-352013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogmal.42.org/' rel='external nofollow' class='url'>Sec</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-352013">
			March 7, 2006 at 5:56 am</a>		</div>

		<p>Whoa. I didn&#8217;t know that the rundll32.exe call was actually that bad. I am now using a small C wrapper to lock. You can get it (and the binary) at my blog entry <a rel="nofollow" target="_new" href="http://blogmal.42.org/tidbits/windows-xlock.story" rel="nofollow">http://blogmal.42.org/tidbits/windows-xlock.story</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-352193">
				<div id="div-comment-352193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.eddyboston.com' rel='external nofollow' class='url'>Eddy Boston</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-352193">
			March 7, 2006 at 12:07 pm</a>		</div>

		<p>My bad. &nbsp;Shows you can&#8217;t trust Google to answer all your questions for you after all.<br />
<br />Still, you could write a python script.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-352783">
				<div id="div-comment-352783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ian A</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-352783">
			March 9, 2006 at 3:08 am</a>		</div>

		<p>As I recall ForceAutoLogon didn&#8217;t exist in NT we had to reset AutoAdminLogon and the DefaultPassword (if not using LsaStorePrivateData) after every logon if you wished the automatic logon to persist. I guess TWEAKUI did this?</p>
<p>In NT AutoAdminLogon also worked on new user logon, in Win2K and above it seems that if you just use AutoAdminLogon it will only work on PC restart (even if reset on logon). ForceAutoLogon solves this I am pleased to say. </p>
<p>On the admin side aside from the Shift option or Remote Admin, on Win2K and above we have the handy (depending how heavily you have locked down the Users desktop) CreateProcessWithLogonW function exposed via &#8216;RUNAS&#8217; in XP/2003 or for use in your own admin utility.</p>
<p>Lastly I am curious why you would want to autologon and then lock immediately. I guess you could have UI processes that you wish to run that couldn&#8217;t run as Services or Scheduled Tasks? or am I missing something?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-352803">
				<div id="div-comment-352803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060306-08/?p=32053#comment-352803">
			March 9, 2006 at 4:05 am</a>		</div>

		<p>Thursday, March 09, 2006 3:08 AM by Ian A<br />
<br />&gt; Lastly I am curious why you would want to<br />
<br />&gt; autologon and then lock immediately.</p>
<p>Visual Studio 2005 seems to have put some time-consuming initialization in the user&#8217;s logon sequence. &nbsp;Boot, get half of your coffee, logon, lock, get the other half of your coffee, unlock, start working. &nbsp;I can&#8217;t find it in the startup folder though so the timing might be a coincidence (oddly repeatable though). &nbsp;Office does put some of its initialization in the startup folder. &nbsp;Some antivirus programs start their search engines as services but do their updating after a user logs on.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

