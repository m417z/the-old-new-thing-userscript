<html>
<head>
<title>Why doesn't Explorer have an interface for creating hard links?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why doesn&#8217;t Explorer have an interface for creating hard links?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>September 28, 2009 / year-entry #308</td></tr>
<tr><td><b>Tags:</b></td><td>other</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>119</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Nick asks why Explorer doesn't have UI for creating hard links. Heck, while you're at it, why not ask "Why doesn't Explorer have a UI for hex-editing a file?" Remember, all features start out with minus 100 points. Explorer is not under any obligation to expose every last NTFS feature, and it's certainly not going...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>Nick asks <a href="http://blogs.msdn.com/oldnewthing/pages/407234.aspx#666887"> why Explorer doesn't have UI for creating hard links</a>.</p>
<p> Heck, while you're at it, why not ask "Why doesn't Explorer have a UI for hex-editing a file?" </p>
<p> Remember, all features start out with <a href="http://blogs.msdn.com/ericgu/archive/2004/01/12/57985.aspx"> minus 100 points</a>. Explorer is not under any obligation to expose every last NTFS feature, and it's certainly not going to help to expose an NTFS feature that even technical people don't understand. Just look at all the people who ask questions like "How can I tell if a file name is a hard link instead of a normal file?" or online explanations of hard links which claim that "A hard link is only a reference to the original file, not a copy of the file. If the original file is deleted, the information will be lost." I mean, if even a techno-geek doesn't understand hard links, how is your average user supposed to have a chance? </p>
<p> First, let's see how you would explain a hard link to an end user. </p>
<blockquote class="m"><p> When you create a hard link, you give the item an additional name. The file can be accessed by either its old name or its new name; they are equivalent. A file is not deleted until all its names are deleted.   If you open a file by one name, make changes, and then save the file, the update is made to the file, and accessing the file by a second name will show the updated file, because the data for a file is separate from its name. </p>
<p> Actually, that paragraph above is only true if the application which saves the file does so by writing directly to the name you used when you opened the file. If the application updates the file by creating a temporary file, then renaming the original to a backup name and renaming the temporary file, then updating a file by one name will sever its connection with other names for the file. The other names will continue to refer to the unmodified file; the name you used for the update will refer to the updated file. Different applications handle this situation differently; consult your application documentation for information on how it treats hard links. </p>
<p> Note also that some backup programs have difficulty with hard links. Consult the documentation for your backup program for information on how it behaves when faced with hard links. </p>
<p> If a file has multiple names, editing the file by using different names simultaneously may result in data corruption. </p>
<p> If a file has multiple names, all the names must exist on the same drive. </p>
</blockquote>
<p> Most users clicked Cancel  at about the time you said, "When you create a hard link..." You'll probably lose the rest of them while you are busy warning about the potential problems with hard links, and the brave few who managed to stick it out to the end will be completely confused and hit Cancel. (The ones who hit Cancel early on were the smart ones.) </p>
<p> The problem with backup programs is particularly nasty. A backup program that is not hard-link-aware will miscalculate the necessary size of the backup volume, and when it attempts to restore the files, it will not restore the hard links. </p>
<p> There was a Windows&nbsp;XP PowerToy for creating hard links, but the backup team recommended that it not be released because so many third party backup programs exploded when they stumbled across files that had multiple names in the file system. </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (119)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-771663">
				<div id="div-comment-771663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771663">
			September 28, 2009 at 10:13 am</a>		</div>

		<p>Raymond,</p>
<p>Can you find out why Vista/2008/7 have those symbolic or hard links with legacy directory names? Is it to support legacy applications that use hardcoded paths? They don&#8217;t work for that purpose anyway &#8211; &#8220;Access denied&#8221;.</p>
<div class=post>[<i><a href="http://blogs.msdn.com/oldnewthing/archive/2009/03/12/9471146.aspx#94719" rel="nofollow">dup</a>. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771673">
				<div id="div-comment-771673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771673">
			September 28, 2009 at 10:28 am</a>		</div>

		<p>Does Windows actually use hard links anywhere? &nbsp;I know Vista introduced junction points for backward compatibility purposes, but I am not aware of any applications that use hard links; it just seems like an extremely niche feature to support, especially when 99% of people (including myself) will get it wrong.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771683">
				<div id="div-comment-771683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://johntopley.com/' rel='external nofollow' class='url'>John Topley</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771683">
			September 28, 2009 at 10:29 am</a>		</div>

		<p>It would seem that the name &quot;hard&quot; link is apposite, as hard links are indeed hard.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771693">
				<div id="div-comment-771693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://johntopley.com/' rel='external nofollow' class='url'>John Topley</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771693">
			September 28, 2009 at 10:36 am</a>		</div>

		<p>@John: On a point of historical pendantry, I believe NTFS Junction Points were introduced with Windows 2000, not Windows Vista.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771703">
				<div id="div-comment-771703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Christian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771703">
			September 28, 2009 at 10:39 am</a>		</div>

		<p>Would it be a such unreasonable obligation for explorer to implement e.g. a delete function that can handle EVERY feature NTFS exposes?</p>
<p>e.g. files with . in the name or ?</p>
<p>The posix layer allows such names.</p>
<p>Explorer should really be able to deal with all NTFS gotchas</p>
<div class=post>[<i>&#8220;Why does Explorer show me a file where all operations fail except delete?&#8221; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771713">
				<div id="div-comment-771713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771713">
			September 28, 2009 at 10:40 am</a>		</div>

		<p>@John:</p>
<p>From what LinkShellExtension tells me, there&#8217;s a metric crapload of hardlinks in system32 (Server 2008 R2). Most, if not all, of these are linked into WinSxS.</p>
<p>Does Explorer support junctions these days without extensions? Or does it still recursively delete the contents of a junction target instead of just the junction itself?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771723">
				<div id="div-comment-771723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pierre B.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771723">
			September 28, 2009 at 10:43 am</a>		</div>

		<p>John: I&#8217;m pretty sure Windows uses hard-link for some protected files and installed files, like drivers and such and for restoration point too, I believe. That&#8217;s how it can have &quot;backups&quot; without using too much disk space.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771733">
				<div id="div-comment-771733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BOFH</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771733">
			September 28, 2009 at 10:43 am</a>		</div>

		<p>This &quot;hard link&quot; stuff that fsutil.exe does, is it separate from what&#8217;s called junction points in the Windows Server 2000 Resource Kit documentation?</p>
<p>There was a tool in the Win2K RK called linkd.exe, and now there&#8217;s also Sysinternals junction.exe that both create and delete junction points.</p>
<p>Junction points can be created to different volumes, which should mean that they are soft links, right?</p>
<p>Besides, junction points are only relevant to folders, so your warning regarding the &quot;create temporary file/delete original/rename temporary&quot; process does not apply there, I hope.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771743">
				<div id="div-comment-771743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771743">
			September 28, 2009 at 10:44 am</a>		</div>

		<p>What definition of &quot;techno-geek&quot; is in use here?</p>
<p>Most techno-geeks I know are of the Unix-variant-using variety, and I think all of them understand hard links, and don&#8217;t think of them as that difficult a concept to grasp.</p>
<p>Why do Windows techno-geeks have problems here?</p>
<p>Or do they? If you&#8217;re going to include any &quot;self-proclaimed expert&quot; on the internet who is willing to give advice on a subject, no matter how stupid, misinformed or flat-out wrong they actually are, as a member of an &quot;expert&quot; group, you&#8217;re probably going to end up with a mighty poor opinion of experts in almost any field. Windows techno-geekery included.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771753">
				<div id="div-comment-771753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771753">
			September 28, 2009 at 10:49 am</a>		</div>

		<p>@John Topley: I know junction points as a feature were introduced in Windows 2000. &nbsp;What I meant was that Windows Vista actually USED junction points (Documents and Settings, etc).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771763">
				<div id="div-comment-771763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A. Skrobov</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771763">
			September 28, 2009 at 10:51 am</a>		</div>

		<p>[&quot;Why does Explorer show me a file where all operations fail except delete?&quot; -Raymond]</p>
<p>Explorer has no problem showing files like &#8216;con&#8217;; on these all operations fail including delete.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771773">
				<div id="div-comment-771773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771773">
			September 28, 2009 at 10:53 am</a>		</div>

		<p>“Explorer has no problem showing files like &#8216;con&#8217;; on these all operations fail including delete.”</p>
<p>I believe this is one of those “two wrongs don&#8217;t make one right” situations</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771783">
				<div id="div-comment-771783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771783">
			September 28, 2009 at 11:00 am</a>		</div>

		<p>Technically, I believe the reserved names (con, lpt, etc.) are an artifact of Win32, not NTFS. &nbsp;This discussion is about NTFS.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771803">
				<div id="div-comment-771803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aneurin Price</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771803">
			September 28, 2009 at 11:56 am</a>		</div>

		<p>[dup. -Raymond]</p>
<p>The linked thread, so far as I can see, doesn&#39;t actually provide an answer to the question.</p>
<p>However, some testing indicates that, although &#39;C:Documents and Settings&#39; is inaccessible, &#39;C:Documents and Settings&lt;username&gt;&#39; is the same as &#39;C:Users&lt;username&gt;&#39;, so I imagine the answer lies somewhere in that direction. I guess it&#39;s a link that&#39;s been special-cased to be unreadable by everyone in order to discourage its use?</p>
<div class="post">[<em>The answer is <a href="http://technet.microsoft.com/en-us/magazine/ee851567.aspx" rel="nofollow">in the queue</a>. I&#39;m just calling out that it is a duplicate request. <a href="http://blogs.msdn.com/oldnewthing/archive/2008/06/02/8568490.aspx" rel="nofollow">Repeating a question makes me less likely to answer it</a>, but in this case, he lucked out because the answer was already on its way. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771823">
				<div id="div-comment-771823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random832</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771823">
			September 28, 2009 at 12:15 pm</a>		</div>

		<p>Let&#8217;s keep in mind that Unix/Linux GUI file managers don&#8217;t have an interface for creating hard links &#8211; at least they didn&#8217;t the last time I used one.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771833">
				<div id="div-comment-771833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://windowssucks.wordpress.com/' rel='external nofollow' class='url'>WndScks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771833">
			September 28, 2009 at 12:18 pm</a>		</div>

		<p>fsutil requires you to be admin for no reason, so you can&#8217;t even create hardlinks without 3rd party tools on XP (Hey MS, how about testing things as non admin)</p>
<div class=post>[<i>fsutil has a very good reason for requiring administrator privileges: It lets you change administrative settings for a drive. It does more than just create hard links. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771843">
				<div id="div-comment-771843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://windowssucks.wordpress.com/' rel='external nofollow' class='url'>WndScks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771843">
			September 28, 2009 at 1:00 pm</a>		</div>

		<p>@Raymond: And clearly the admin check should only be called when you are about to do something that requires admin rights (Or don&#8217;t check at all and fail with a access denied error)</p>
<div class=post>[<i>I&#8217;m sure the people responsible for fsutil have that on their list. It just needs to be prioritized against all the other things to be done. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771853">
				<div id="div-comment-771853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabest</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771853">
			September 28, 2009 at 1:23 pm</a>		</div>

		<p>NTFS file streams are rarely used too, but I do create files with streams in my programs and that explorer cannot see them or at least include their size in the total is annoying.</p>
<div class=post>[<i>Imagine the confusion that would result if &#8220;Size&#8221; included the sizes of alternate streams. (Also consider how slow this would make directory enumeration.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771863">
				<div id="div-comment-771863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771863">
			September 28, 2009 at 1:28 pm</a>		</div>

		<p>@Gabest:</p>
<p>What do you do that for??</p>
<p>(Are you the Gabest of video software fame?)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771873">
				<div id="div-comment-771873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jabelli</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771873">
			September 28, 2009 at 1:58 pm</a>		</div>

		<p>For those wondering what shell extension &quot;someone else&quot; was talking about, he probably meant this one: <a rel="nofollow" target="_new" href="http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html" rel="nofollow">http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771883">
				<div id="div-comment-771883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771883">
			September 28, 2009 at 2:03 pm</a>		</div>

		<p>Yes, I was. I trusted Google on this one.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771893">
				<div id="div-comment-771893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771893">
			September 28, 2009 at 2:19 pm</a>		</div>

		<p>@Gabest,</p>
<p>Explorer uses alternate streams to tag files with custom attributes. For example, you can tag a plain .txt file with them.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771913">
				<div id="div-comment-771913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">feddy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771913">
			September 28, 2009 at 2:59 pm</a>		</div>

		<p>&quot;If a file has multiple names, editing the file by using different names simultaneously may result in data corruption.</p>
<p>If a file has multiple names, all the names must exist on the same drive. &quot;</p>
<p>These are logical consequences of what a hard link is and shouldn&#8217;t need to be stated explicitly.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771923">
				<div id="div-comment-771923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771923">
			September 28, 2009 at 3:04 pm</a>		</div>

		<p>@feddy:</p>
<p>Experience tells us that a warning too many is better than a warning too few.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771943">
				<div id="div-comment-771943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771943">
			September 28, 2009 at 3:28 pm</a>		</div>

		<p>Well, hey, I&#8217;m famous!</p>
<p>I&#8217;d completely forgotten about asking this question until I saw my name there &#8212; that&#8217;s what over 3 years will do I guess :)</p>
<p>Honestly, I expected the answer to pretty much come down to (even experienced) user confusion, but at the same time wondered if there were more technical reasons involved in the design decision.</p>
<p>I can easily see not enabling an interface to hard links on consumer versions of Windows, but there are many potential uses of hard/symbolic links on Windows Server. &nbsp;I&#8217;ve only used them a few times, but it would be nice for shell integration to make that easier (though Vista/Win7/Server08 are somewhat better in that regard).</p>
<p>Anyway, that&#8217;s for answering my question!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771793">
				<div id="div-comment-771793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Schend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771793">
			September 28, 2009 at 11:48 am</a>		</div>

		<p>Karellen: The obvious point you&#8217;re missing is that if Windows added a UI for hard links, *non* techno-geeks will run across it and be confused, have broken backups, etc etc.</p>
<p>Hell, I consider myself a &quot;techno-geek&quot; and I&#8217;ve screwed this up before&#8211; specifically, I created a backup script using robocopy in Vista that recursively copied the same symlinked folder inside of itself over and over again. (This can happen when copying your user directory in Vista if the robocopy script is running as Admin&#8211; run the script as User and permissions prevent the problem.)</p>
<p>The target consumer of Windows and (most) Unixes is very, very different.</p>
<p>Besides, you have to do a cost/benefit analysis here. Raymond has laid out all the costs&#8211; now what&#8217;s the benefit to having access to hard links?</p>
<p>I can&#8217;t think of a single thing I&#8217;d use them for. Can you?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771953">
				<div id="div-comment-771953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Blake</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771953">
			September 28, 2009 at 6:57 pm</a>		</div>

		<p>Certainly you can use fsutil.exe, linkd.exe and junction.exe, but with Vista or later it&#8217;s easiest to use the cmd.exe builtin &#8216;mklink&#8217; for hardlinks, and both common sorts of junction points.</p>
<p>For bonus points, don&#8217;t forget that junction points are an extensible infrastructure and third-parties can create their own types of junction points. &nbsp; Explorer would be hard pressed do anything sensible there.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771963">
				<div id="div-comment-771963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom Finnigan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771963">
			September 28, 2009 at 6:59 pm</a>		</div>

		<p>So, does that mean that explorer has UI for creating symbolic links? &nbsp;I&#8217;ve been using mklink, but a GUI would be nice.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771813">
				<div id="div-comment-771813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771813">
			September 28, 2009 at 12:10 pm</a>		</div>

		<p>Speaking of Robocopy, while it&#8217;s nice that it has a switch to turn off deep junction copying, it would have been even better to add a switch to recreate the junction point, if possible (i.e. on the same volume). *sigh*</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771973">
				<div id="div-comment-771973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://barrkel.blogspot.com/' rel='external nofollow' class='url'>Barry Kelly</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771973">
			September 28, 2009 at 7:20 pm</a>		</div>

		<p>The reason backup programs fall over is because there is no UI for creating hard links, so the issues aren&#8217;t found in testing; and a similar situation with confused users. It&#8217;s a circular problem.</p>
<p>I for one use hard links all the time, with Cygwin ln and cp -l, but I&#8217;m not under any illusions about average users&#8217; familiarity with the concepts. tar and other utilities, and the backup program I use (rdiff-backup) are aware of hard links.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-771983">
				<div id="div-comment-771983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771983">
			September 28, 2009 at 7:21 pm</a>		</div>

		<p>Well, look at that: <a rel="nofollow" target="_new" href="http://technet.microsoft.com/en-us/library/cc766301" rel="nofollow">http://technet.microsoft.com/en-us/library/cc766301</a>(WS.10).aspx</p>
<p>“This user right should only be assigned to trusted users. Symbolic links (symlinks) can expose security vulnerabilities in applications that aren&#8217;t designed to handle symbolic links.”</p>
<p>This might explain why there&#8217;s no explorer interface. It&#8217;s even more of a fringe case.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-771993">
				<div id="div-comment-771993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-771993">
			September 28, 2009 at 7:41 pm</a>		</div>

		<p>&quot;There was a Windows XP PowerToy for creating hard links, but the backup team recommended that it not be released because so many third party backup programs exploded when they stumbled across files that had multiple names in the file system.&quot;</p>
<p>Let&#8217;s not forget about filesystem scanning/copying programs and NTFS junctions. &nbsp;Plenty end up in infinite recursion when you have a junction that points to an ancestor. &nbsp;Either they run out of address space and die or hit a character limit for their paths and finally start unrecursing.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772003">
				<div id="div-comment-772003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772003">
			September 28, 2009 at 7:47 pm</a>		</div>

		<p>@Aneurin Price Obviously you get access denied when accessing it directly so that aforementioned backup programs can&#8217;t recurse into it and cause the problems mentioned in the article.</p>
<p>But legacy programs with poorly coded paths can still use them to directly access files or folders, as you indicated.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772013">
				<div id="div-comment-772013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Blake</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772013">
			September 28, 2009 at 7:57 pm</a>		</div>

		<p>Ugh &#8211; s/junction point/reparse point/g in my last comment. &nbsp; Junctions and symlinks are both sorts of reparse points.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772023">
				<div id="div-comment-772023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Eric TF Bat</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772023">
			September 28, 2009 at 7:57 pm</a>		</div>

		<p>I think you&#8217;ve got the cart before the horse. &nbsp;Hard links are hard to understand because Explorer doesn&#8217;t support them, not the other way round. &nbsp;The solution is obvious: Raymond, you must go down to the basement of the mysterious Building 13, borrow the official Microsoft Time Machine (R)[TM], go back to when Windows was first invented, and get them to put hard link support into whatever Explorer was called in those days.</p>
<p>See? &nbsp;Easy solution. &nbsp;I don&#8217;t know why you complain so much.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772033">
				<div id="div-comment-772033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772033">
			September 28, 2009 at 8:07 pm</a>		</div>

		<p>&quot;Why doesn&#8217;t Explorer have a UI for hex-editing a file?&quot;</p>
<p>That would be pretty handy! &nbsp;Did it make it into Windows 7?</p>
<p>(umm.. joking, in case that&#8217;s not obvious.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772043">
				<div id="div-comment-772043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772043">
			September 28, 2009 at 8:51 pm</a>		</div>

		<p>Also for historical reasons. Windows 95 did not support hard links since it only supported the FAT file system, and even in the early days of NT it was primarily used for the POSIX subsystem which needed them.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772053">
				<div id="div-comment-772053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">hexatron</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772053">
			September 28, 2009 at 10:05 pm</a>		</div>

		<p>I didn&#8217;t find out that NTFS supports hard links until about two years ago. Then I created a few to play with, and noticed the confusion they caused.</p>
<p>Then I remembered they weren&#8217;t particularly useful in Unix either, but were integral to the directory structure in ancienter file systems ( . and .. are hard links to the current and parent directories, etc)</p>
<p>So I forgot all about them again.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772063">
				<div id="div-comment-772063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Falcon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772063">
			September 29, 2009 at 12:02 am</a>		</div>

		<p>&quot;Hard links&quot; in FAT were reported as cross-linked files by file system checking utils. This was the correct action to take, since they weren&#8217;t supported by the file system, therefore their existence would have created problems &#8211; inconsistency between multiple directory entries, deleting one would free the cluster chain and destroy other &quot;copies&quot;, etc.</p>
<p>I can understand the confusion even among advanced/experienced users. I guess they have a certain unnatural feel, as two separate files would be expected to be independent at the file system level. Even when you know about the concept of links (both hard and symbolic) but don&#8217;t know that a particular file is a link, it&#8217;s easy to fall into a trap.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772073">
				<div id="div-comment-772073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Teo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772073">
			September 29, 2009 at 1:05 am</a>		</div>

		<p>This is very much off-topic, but still very interesting. Why are &quot;format.exe&quot;, &nbsp;&quot;chkdsk.exe&quot;, &quot;fsutil.exe&quot; and so on manifested &quot;asInvoker&quot;? They clearly require admin privileges, because they can kill every bit of information on your system.</p>
<p>And yes, I still remember the fun when my backup application &quot;discovered&quot; the Vista junctions inside user profile dir and merrily crashed :) Luckily, MSDN had the correct code for detecting them and I could fix the bug in under 10 minutes.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772083">
				<div id="div-comment-772083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Worf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772083">
			September 29, 2009 at 1:40 am</a>		</div>

		<p>Hard links are fun!</p>
<p>On UNIX, they&#8217;re a great source of security vulnerabilities. Thankfully, their limitation of being able to live on one filesystem meant their use is pretty restricted, but even in geek-land, I end up having to test behaviors. &nbsp;Soft links are much easier to use, and most people use them for they get rid of many hard link issues, though they are slower because of it.</p>
<p>About the only major use of hard links I can tell is in OS X&#8217;s Time Machine feature, where identical unchanged directories are hard linked to save space.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772093">
				<div id="div-comment-772093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Drak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772093">
			September 29, 2009 at 1:41 am</a>		</div>

		<p>Sorry if I&#8217;m asking a stupid question here, but what is the gain in a hard link over a soft link?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772103">
				<div id="div-comment-772103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymuos</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772103">
			September 29, 2009 at 2:05 am</a>		</div>

		<p>But why doesn&#8217;t Explorer not traverse hard links, SMB symbolic links OR junction points when double clicked? (As I see, programs can traverse it but the file manager cannot navigate thru hard links?) Not under any obligation=unsatisfactory rude lazy arrogant crippled answer. Why Explorer can&#8217;t calculate the correct folder sizes if it contains hard links (e.g. WinSxS)? Explorer is a big FAIL beginning with Vista. I was a total Windows zealot since Windows 95, but I was so disappointed with the shell in Vista that I plan to forever stick with XP until some OS with a full-featured non-crippled shell comes along. You have no right to take away major features people used. If some program or the other in the OS doesn&#8217;t expose every NTFS feature (<a href="http://en.wikipedia.org/wiki/NTFS#Features" rel=nofollow target=_new rel="nofollow">http://en.wikipedia.org/wiki/NTFS#Features</a>), then who will? Why are you making the shell super-dumbed-down? Couldn&#8217;t people work with the pre-Vista shell? I really expect to see Explorer at least navigate to the pointing folder in Windows 8 when a junction point is clicked instead of throwing up &#8220;Access denied&#8221;. I am neither a developer nor an IT pro, just an end user but I find Explorer horrible non-customizable and dumbed down beginning with Vista. Just how many things Microsoft has never put because it would too nerdy?</p>
<div class=post>[<i><a href="http://blogs.msdn.com/oldnewthing/archive/2009/02/17/9426787.aspx" rel="nofollow">What is the &#8220;correct&#8221; size of a folder containing hard links</a>? (Psst, all folders contain hard links. Yet another person who doesn&#8217;t understand hard links.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772113">
				<div id="div-comment-772113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772113">
			September 29, 2009 at 2:25 am</a>		</div>

		<blockquote><p>
  &gt; Let&#8217;s keep in mind that Unix/Linux GUI file managers don&#8217;t have an interface for creating hard links &#8211; at least they didn&#8217;t the last time I used one.
</p></blockquote>
<p>Let&#8217;s keep in mind that that&#8217;s a broad claim on little evidence.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772123">
				<div id="div-comment-772123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.crazyontap.com' rel='external nofollow' class='url'>Wayne</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772123">
			September 29, 2009 at 2:44 am</a>		</div>

		<blockquote><p>
  &gt; But why doesn&#8217;t Explorer not traverse hard links, SMB symbolic links OR junction points when double clicked?
</p></blockquote>
<p>Does for me in XP. &nbsp;Explorer treats the junction point/symlink is a regular directory &#8212; I&#8217;m not even sure it knows the difference.</p>
<p>I will agree that Vista&#8217;s explorer is terribly hard to use when compared with XP&#8217;s.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772133">
				<div id="div-comment-772133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772133">
			September 29, 2009 at 2:54 am</a>		</div>

		<p>@porter: As one datum, Dolphin from current KDE (4.3.1) does not have an interface for creating hard links. It can copy, move and create symbolic links to files, yes. Hard links, no.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772143">
				<div id="div-comment-772143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Var</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772143">
			September 29, 2009 at 3:06 am</a>		</div>

		<p>Nitpick: Features in a large market leader that dislikes competitive innovation start at minus 100 points.</p>
<p>Features in smaller disruptors just get implemented.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772153">
				<div id="div-comment-772153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772153">
			September 29, 2009 at 5:52 am</a>		</div>

		<p>“Hard links are hard to understand because Explorer doesn&#8217;t support them, not the other way round.”</p>
<p>Ah, you also clicked cancel after “When you create a hard link&#8230;”</p>
<p>“Why are &quot;format.exe&quot;, &nbsp;&quot;chkdsk.exe&quot;, &quot;fsutil.exe&quot; and so on manifested &quot;asInvoker&quot;?”</p>
<p>Because they aren&#8217;t supposed to be used by the common folk anyway. Ask a non-computer-savvy person what these commands do.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772163">
				<div id="div-comment-772163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dee</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772163">
			September 29, 2009 at 6:41 am</a>		</div>

		<p>To Teo:</p>
<p>&quot;This is very much off-topic, but still very interesting. Why are &quot;format.exe&quot;, &nbsp;&quot;chkdsk.exe&quot;, &quot;fsutil.exe&quot; and so on manifested &quot;asInvoker&quot;? They clearly require admin privileges, because they can kill every bit of information on your system.&quot;</p>
<p>What if you want to format your USB key or 1.44&quot; floppy?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772173">
				<div id="div-comment-772173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772173">
			September 29, 2009 at 6:48 am</a>		</div>

		<p>What&#8217;s a 1.44″ floppy? But seriously, corporate admins usually don&#8217;t like it when the users introduce their own portable media, so this is more of a problem for home users &#8230; who run as admin or in easy reach of admin privileges.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772183">
				<div id="div-comment-772183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772183">
			September 29, 2009 at 6:50 am</a>		</div>

		<p>It&#8217;s for the same reason why the only text editor in default windows is notepad and the only image manipulation program is paint. Look at Mac or Linux and compare yourself.</p>
<p>Simply speaking, Windows sucks in any way.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772193">
				<div id="div-comment-772193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772193">
			September 29, 2009 at 7:40 am</a>		</div>

		<p>Good point, Anonymous, but I must for the sake of fairness point out that most of the good stuff that comes with GNU/Linux is available for Windows too.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772213">
				<div id="div-comment-772213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.winvistaside.de' rel='external nofollow' class='url'>Andr&#233;</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772213">
			September 29, 2009 at 7:51 am</a>		</div>

		<p>@jabelli</p>
<p>LSE is cool. I&#8217;m using this for years :)</p>
<p>@anonymuos (Tuesday, September 29, 2009 2:05 AM)</p>
<p>good questions. the size detection when HardLinks are used is still broken. People only see that the WinSxS folder is soooooo huge, but don&#8217;t know that the files are linked to the target folder (C:program fils;C:Windows;C:WindowsSystem32). This is disappointing, that it is not easy to see in Explorer if the file is a hardlink or not.</p>
<p>I&#8217;ve submitted this to Vista/WIn7 feedback on connect, but you&#8217;ll never get an answer from MS :(</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772223">
				<div id="div-comment-772223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772223">
			September 29, 2009 at 7:58 am</a>		</div>

		<p>@Anonymous:</p>
<p>I&#8217;m sure the antitrust people would have a field day if MS included a decent editor a image manipulation program. Like when they included a decent web browser.</p>
<p>Besides, when does the average person use Notepad or Paint? What do you propose as a replacement? Remember, it can&#8217;t have functionality that would confuse the average home user (e.g. regexp is right out).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772243">
				<div id="div-comment-772243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772243">
			September 29, 2009 at 8:10 am</a>		</div>

		<p>If you really want to screw with a backup program, combine sparse files with hard links! &quot;This directory will require 1e+38 bytes to back up.&quot;</p>
<p>TC: You may unfortunately be one of the technogeeks who doesn&#8217;t understand hard links. Symbolic links work just as well as hard links for storing duplicate files. And there is no way to tell the difference between a &quot;real&quot; file and a hard link &#8212; every directory entry on the disk is a hard link.</p>
<p>If you want to see the reference count, you can call GetFileInformationByHandle on the file (see <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/aa363788" rel="nofollow">http://msdn.microsoft.com/en-us/library/aa363788</a>(VS.85).aspx for the data it returns).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772283">
				<div id="div-comment-772283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772283">
			September 29, 2009 at 8:36 am</a>		</div>

		<p>“Huh? A symbolic link is am .LNK file.”</p>
<p>No. Do the freakin&#8217; research.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772293">
				<div id="div-comment-772293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772293">
			September 29, 2009 at 8:40 am</a>		</div>

		<p>These comments appear to be proving Raymond&#8217;s point rather nicely.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772303">
				<div id="div-comment-772303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://programmingforpeople.blogspot.com/' rel='external nofollow' class='url'>Tim Gradwell</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772303">
			September 29, 2009 at 8:42 am</a>		</div>

		<p>(in XP) If I drag the My Computer icon onto my start button I end up with an expanding My Computer icon at the top of my start menu. &nbsp;If I create a shortcut to My Computer and drag that onto my start button I end up with a shortcut to my computer. &nbsp;Is one of those a hard link and one a not-hard link?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772313">
				<div id="div-comment-772313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772313">
			September 29, 2009 at 8:46 am</a>		</div>

		<p>@Tim Gradwell</p>
<p>My Computer is not a file, so it can&#8217;t be hardlinked. Windows may be creating a folder with an appropriate desktop.ini for the expanding folder.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772323">
				<div id="div-comment-772323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">L.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772323">
			September 29, 2009 at 8:49 am</a>		</div>

		<p>@TC: A symbolic link is am .LNK file.</p>
<p>No. &nbsp;.LNK files are shell links, handled by the shell. &nbsp;Symbolic links (introduced in Vista) are reparse points, handled by the kernel.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772333">
				<div id="div-comment-772333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dean</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772333">
			September 29, 2009 at 8:56 am</a>		</div>

		<p>&quot;Nitpick: Features in a large market leader that dislikes competitive innovation start at minus 100 points.</p>
<p>Features in smaller disruptors just get implemented.&quot;</p>
<p>So Linux has every feature ever imagined already implemented? That&#8217;s impressive!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772343">
				<div id="div-comment-772343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sometwo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772343">
			September 29, 2009 at 8:57 am</a>		</div>

		<p>The whole rationale is so flawed. Then why don&#8217;t you take out file-based shortcuts as well? Keep only the Windows 7 like taskbar behavior. Get rid of all *.lnk files for more dumbing down sake.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772353">
				<div id="div-comment-772353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Daniel the Wise</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772353">
			September 29, 2009 at 9:03 am</a>		</div>

		<p>Format can be run as regular user for Vista (for removable devices)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772363">
				<div id="div-comment-772363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772363">
			September 29, 2009 at 9:04 am</a>		</div>

		<p>@sometwo:</p>
<p>Do the words “backwards compatibility” mean anything to you?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772383">
				<div id="div-comment-772383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aaron G</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772383">
			September 29, 2009 at 10:16 am</a>		</div>

		<p>I&#8217;ve always looked at hard links as being a bit like tactical nuclear weapons. &nbsp;Under normal circumstances, you would never need them. &nbsp;Under exceptional circumstances where you think you need them, you probably still don&#8217;t need them. &nbsp;If you really do need them, you probably don&#8217;t know how to handle them properly. &nbsp;And if you use them anyway, there&#8217;s a very good chance that you&#8217;ll cause an enormous amount of collateral damage, even if you know what you&#8217;re doing.</p>
<p>It&#8217;s probably for the best that there&#8217;s no pretty UI for it, in the fashion of the big red &quot;launch missiles&quot; button you see in Hollywood movies that apparently doesn&#8217;t do any checks or require any other input and is just begging to be hit accidentally or at the worst possible time. &nbsp;I&#8217;d be very surprised if there are any people out there who don&#8217;t work for the Windows team and who have been able to use hard links to solve a non-trivial problem while adequately planning for all the potential corner cases.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772423">
				<div id="div-comment-772423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kevin Eshbach</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772423">
			September 29, 2009 at 11:09 am</a>		</div>

		<p>Going by memory I thought junctions were first introduced in the new version of NTFS which was part of Windows NT 4.0. &nbsp;There was a new API call introduced that allowed them to be created but there was no built in tool to do it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772433">
				<div id="div-comment-772433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rick C</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772433">
			September 29, 2009 at 11:28 am</a>		</div>

		<p>One interesting use of hard links I saw on a Unix box was to protect database files. &nbsp;Create a directory, make hard links in it to all the DB files, and then set the perms on the links and the directory to 0000. &nbsp;Now you can&#8217;t accidentally delete a DB extent.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772453">
				<div id="div-comment-772453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Illuminator</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772453">
			September 29, 2009 at 11:34 am</a>		</div>

		<p>Here&#8217;s a more pressing question of the ages:</p>
<p>Why, 15 years later, does Windows Explorer still REFUSE to let me sort by file extension like every other normal file manager?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772463">
				<div id="div-comment-772463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772463">
			September 29, 2009 at 11:40 am</a>		</div>

		<p>File extensions are an ugly kludge that should have been abolished a long time ago but refuses to die. You can sort by type, which makes somewhat more sense.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772473">
				<div id="div-comment-772473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Absotively</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772473">
			September 29, 2009 at 11:50 am</a>		</div>

		<p>@Illuminator:</p>
<p>It lets you sort by type. &nbsp;I&#8217;m not sitting at my Mac right now, so I can&#8217;t confirm this, but I think that&#8217;s the same thing OS X&#8217;s file manager does.</p>
<p>I&#8217;d prefer sorting by extension, but this fits better with the default of hiding extensions. &nbsp;(Of course, I&#8217;d also prefer the opposite default there, but like everyone else here, I&#8217;m something of a techno-geek.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772483">
				<div id="div-comment-772483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772483">
			September 29, 2009 at 11:52 am</a>		</div>

		<p>Illuminator: File extensions are hidden by default in Explorer, but there is a &quot;Type&quot; column that shows the type associated with the file. Having a separate column named &quot;File Extension&quot; would be confusing on a number of levels for the average user that has not enabled display of extensions.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772493">
				<div id="div-comment-772493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Walker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772493">
			September 29, 2009 at 11:53 am</a>		</div>

		<p>@anonymuos with the weird spelling: &nbsp;Annoyed much? &nbsp;&quot;You have no right to take away major features people used.&quot;</p>
<p>If &quot;You&quot; means Microsoft, they can do (almost) anything they want.</p>
<p>And I like how the very first comment asks Raymond to go &quot;find out&quot; something. &nbsp;It&#8217;s great to know that he is at all of our beck and call&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772523">
				<div id="div-comment-772523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">rs</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772523">
			September 29, 2009 at 12:46 pm</a>		</div>

		<p>Alternate folder names, namely &quot;.&quot; and &quot;..&quot;, were confusing even in DOS. FindFirstFile/FindNextFile still report these, by the way.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772203">
				<div id="div-comment-772203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772203">
			September 29, 2009 at 7:41 am</a>		</div>

		<p>@hexatron: You say hard links are not particularly useful in Unix either?</p>
<p>They&#8217;re actually useful in Unix *and* Windows. A backup tool can create a disk copy where, if a file hasn&#8217;t changed, its entry is a hard link to the previous version. Thus, each disk copy looks and works like a full disk copy, but in reality, it only allocates space for the files that actually changed since the previous copy. This is the best of both worlds: utility and efficiency.</p>
<p>I tried to get this going on my Windows laptop, using rsync from a Ubuntu &quot;Live CD&quot; to make backups on a USB drive. (Ubuntu includes an NTFS driver.) But it wasn&#8217;t really acceptable, because when I viewed the backups later from Windows, I couldn&#8217;t see which files were &quot;real&quot;, and which were hard links. This made it difficult to test the process, and be confident that it was working correctly.</p>
<p>Could NTFS maintain a reference count for each file? (ie. the number of directory entries that point to that file data?) Then, Explorer could use that count to highlight entries pointing to files with reference counts greater than 1. The highlight would effectvely mean: &quot;This file has several different names. See &#8216;hard linked files&#8217; for more information&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772543">
				<div id="div-comment-772543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772543">
			September 29, 2009 at 2:56 pm</a>		</div>

		<p>@Illuminator: If it bothers you that much why don&#8217;t you create a column handler? &nbsp;<a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/bb776831" rel="nofollow">http://msdn.microsoft.com/en-us/library/bb776831</a>(VS.85).aspx</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772233">
				<div id="div-comment-772233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772233">
			September 29, 2009 at 8:08 am</a>		</div>

		<p>&quot;I couldn&#8217;t see which files were &quot;real&quot;, and which were hard links.&quot;</p>
<p>Uh, real files are hard links. The two are equivalent. That&#8217;s the point. It&#8217;s just that when you &quot;create a hard link&quot;, what you&#8217;re really doing is creating a *second* hard link to a file, just with a different filename from the first (original) link.</p>
<p>&quot;Could NTFS maintain a reference count for each file?&quot;</p>
<p>I presume it does. Otherwise, how would it know when all the filenames that refer to it have been deleted? What you want is just a bit of UI that gives a link count, which probably wouldn&#8217;t be too hard, but might be confusing. Perhaps an extra datum in the &quot;file properties&quot; dialog, which already contains a bits of information people will skip over that they don&#8217;t understand, might do here.</p>
<p>&quot;it is not easy to see in Explorer if the file is a hardlink or not.&quot;</p>
<p>Once a hard link has been created to a file, there is no difference between the original name of the file and the new name of the file. It is impossible to tell which is the original. If either is the original. You could have created two extra hard links to a file, and then deleted the original directory entry. It&#8217;s impossible to tell. Heck, file moves on the same file system are probably implemented internally as simply creating a new hard link to a file with the new filename and then deleting the old hard link with the old name.</p>
<p>@Worf : How, on UNIX, are hard links a great source of security vulnerabilities, as you claim? I&#8217;ve never come across this assertion before.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772553">
				<div id="div-comment-772553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random User 43790</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772553">
			September 29, 2009 at 3:11 pm</a>		</div>

		<p>Given that most users appear to assume the filename is directly and inseparably attached to the file, it is unsurprising that more than a few are confused by &quot;these &#8216;hard link&#8217; things&quot;.</p>
<p>That hard links are/resemble (implementation specific) pointers causes problems, too.</p>
<p>I once saw a study (no link; look around) that said most (but not all) people can comprehend conceptual variables [&quot;this&quot; can contain &quot;that&quot;], but a depressingly large portion of that group have significant problems comprehending conceptual pointers [&quot;this&quot; leads you to &quot;that&quot;]. (Note: the topic was the conceptual [imaginary/computer/etc.], not the physical versions of these. People had fewer problems understanding boxes and phone books.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772253">
				<div id="div-comment-772253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772253">
			September 29, 2009 at 8:22 am</a>		</div>

		<p>@Gabe: Huh? A symbolic link is am .LNK file. It&#8217;s content is completely different to the original file. There&#8217;s no guarantee that any given application will be able to open an .LNK file. *All* applications can open a hard linked file (if they can open a file at all).</p>
<p>Also, there *is* a way to tell the difference between a &quot;real&quot; file (ie., in casual terms, one with a reference count = 1) and a hard link (in casual terms, one with a reerence ocunt &gt; 1). fsutil returns a unique number pertaining to the file data itself.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772263">
				<div id="div-comment-772263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772263">
			September 29, 2009 at 8:26 am</a>		</div>

		<p>@Karellen: </p>
<p>&#8220;I couldn&#8217;t see which files were &#8220;real&#8221;, and which were hard links.&#8221;</p>
<p>&nbsp;&#8211; Uh, real files are hard links. The two are equivalent. That&#8217;s the point.</p>
<p>Dude, read my post again. I understand what a hard link is. I undestand that *every* directory entry is a hard link. But in the scenario that I described, it&#8217;s important to distinguish: &#8220;a directory entry that points to file data with NO OTHER directory entries&#8221;, from: &#8220;a directory entry that points to file data with ONE OR MORE OTHER directory entries&#8221;.</p>
<p>Is this a technical blog or what?</p>
<div class=post>[<i>And then you&#8217;ll have end-user questions like &#8220;Why do some of my files have a little asterisk next to them?&#8221; Answer: &#8220;If an asterisk appears next to a file, then that means that the file is accessible by more than one name. (Insert description of hard links here).&#8221; User: &#8220;Sigh. Windows is so hard to use. I should have gotten a Mac.&#8221; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772273">
				<div id="div-comment-772273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TJ</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772273">
			September 29, 2009 at 8:29 am</a>		</div>

		<p>Gabe: &quot;You may unfortunately be one of the technogeeks who doesn&#8217;t understand hard links. Symbolic links work just as well as hard links for storing duplicate files.&quot;</p>
<p>Notwithstanding whether or not TC understands hard links, symlinks absolutely would *not* work just as well for storing duplicate files in the scenario he mentions.</p>
<p>Unless you think a backup system whereby deleting a file from a 2-week-old backup means the file also becomes inaccessible from every subsequent backup, that is&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772603">
				<div id="div-comment-772603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772603">
			September 29, 2009 at 3:53 pm</a>		</div>

		<p>@someone else:</p>
<p>The problem with file extensions is that nobody has proposed a better way to indicate a file&#8217;s contents.</p>
<p>I like file extensions. &nbsp;I can see at a glance, without running another program, if a file is a picture, a text document, or executable. I can send a file to another operating system and that metadata is still available. Permissions, alternate data streams, file date/times and almost every other intrinsic property of that file may be gone, but the most important one, the file&#8217;s type, is still there.</p>
<p>Contrary to *nix fanboy belief, file extensions are not bad.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772403">
				<div id="div-comment-772403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Clinton Pierce</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772403">
			September 29, 2009 at 11:02 am</a>		</div>

		<p>@Drak:</p>
<p>Mostly speed.</p>
<p>[disclaimer: I haven&#8217;t used hard links in Windows, but have used them extensively in Unix. &nbsp;And I&#8217;m simplifying a *quite* a bit.]</p>
<p>When you open a file in Unix (/home/clintp/myfile) the system traverses the file system to find each component of the path (home in /, clintp in /home, and myfile in /home/clintp). &nbsp;Now that we&#8217;ve found &quot;myfile&quot; what you&#8217;ve got is an inode number &#8212; because directories are essentially lists of names and inode numbers. &nbsp;That inode number can be used to find a structure (surprisingly called an inode) that contains a pointer to the actual data for myfile. &nbsp;That inode number-to-inode structure-to-data is just two reads &#8212; very fast. </p>
<p>Normally for files* there&#8217;s a 1-to-1 correlation between a directory entry an inode. &nbsp;Each directory entry for a file refers to one inode structure.</p>
<p>When you create a hard link you create a second directory entry somewhere in that filesystem that refers to the *same* inode structure. &nbsp; Using either name you&#8217;re 1 step away from getting to the data.</p>
<p>Think of a symbolic link as a &quot;special little file&quot; that has another name inside of it.** &nbsp;When you open a file that&#8217;s really a symlink the system has to take the target name and traverse the directory tree again to find the target file before it can get to an inode to find the data. &nbsp;And you can have symlinks pointing to symlinks. &nbsp;Following a chain of symlinks to get to the actual data takes a lot of disk reads.</p>
<p>* And by &quot;normal&quot; I&#8217;m going to mean files that have 1 name and 1 set of data that goes with the name. &nbsp;It&#8217;s no more or less correct than any other arrangement, but represents the vast majority of files in a filesystem.</p>
<p>** Implementation has varied wildly over the decades. &nbsp;Sometimes the symlink target &quot;name&quot; can be in the directory entry itself, in the inode for the directory entry, or in a &quot;file&quot; that the inode refers to. &nbsp;They&#8217;ve all been done.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772513">
				<div id="div-comment-772513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772513">
			September 29, 2009 at 12:23 pm</a>		</div>

		<p>@Rick C: Under Unix-style systems the permissions of a file are stored with the file, not the directory entry/hard link. If you create a second hard link to a file and set its permissions to 0000, then the permissions of the *file* are 0000 &#8211; i.e. no-one can read/write the file from either link (except root).</p>
<p>I suppose creating extra hard links to the files somewhere out of the way might prevent against accidental deletion by anyone who has the privs to do so (who has permissions to access/delete DB files other than the DB daemon UID?) &#8211; but why not just keep the only copies of the files in that out of the way location?</p>
<p>Doesn&#8217;t make much sense to me. But I could be missing something&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772663">
				<div id="div-comment-772663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.crazyontap.com' rel='external nofollow' class='url'>Wayne</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772663">
			September 29, 2009 at 8:01 pm</a>		</div>

		<p>Sometimes what someone thinks it contains is more important? &nbsp;What&#8217;s the difference between file.txt, file.c, file.php, file.asp, file.sql, file.tpl?? &nbsp;They&#8217;re all just ASCII files! &nbsp;The extension provides a level of meaning.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772723">
				<div id="div-comment-772723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://lambert.geek.nz/' rel='external nofollow' class='url'>Miral</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772723">
			September 29, 2009 at 10:37 pm</a>		</div>

		<p>Not sure if this is getting a little off-topic or not; the other day I was trying to use mklink to set up junction points for the Program Files folders on Win7 (since I dislike those names and would much rather have them be called &quot;Programs32&quot; and &quot;Programs64&quot;). &nbsp;It&#8217;s a lot more painful than it should be, especially since the original&#8217;s permissions don&#8217;t carry across to the junction. &nbsp;I&#8217;ve managed to copy most of the permissions over via cacl, but I can&#8217;t work out how to change the owner of the junction to TrustedInstaller (to match the original). &nbsp;Neither console tools nor the GUI seem to want to admit that that account exists.</p>
<p>(All I wanted to do was to rename them, while keeping the original name valid for compatibility. &nbsp;I wasn&#8217;t even trying to put them onto a different drive &#8212; that would have been better, but I&#8217;ve read the horror stories that causes due to transactional NTFS.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772733">
				<div id="div-comment-772733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rick C</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772733">
			September 29, 2009 at 10:50 pm</a>		</div>

		<p>Karellen, perhaps I misremembered the exact details and it was merely the directory that had 0000. &nbsp;Then nobody[1] would be able to get into the directory to delete the hard links, which would preserve the files.</p>
<p>&quot;(who has permissions to access/delete DB files other than the DB daemon UID?)&quot;</p>
<p>Unless you&#8217;ve experienced it, you&#8217;d be horrified how many places don&#8217;t get that right.</p>
<p>[1]obviously anyone with root access can override this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772743">
				<div id="div-comment-772743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772743">
			September 29, 2009 at 11:08 pm</a>		</div>

		<p>@Karellen</p>
<p>I&#8217;m very familiar with magic numbers and <code>file</code>, and I see them as an even worse solution to determining file type than file extensions. &nbsp;As pointed out, there are many, many different forms of ASCII text documents. &nbsp;There are times when <code>file</code> fails at correctly determining file types. &nbsp;Finally, you are now stuck using a system-dependent binary to decide what files are what?</p>
<p>Yes, file extensions can be changed arbitrarily, but in a way that&#8217;s the point. They can be abstracted away if you want (as Windows does by default) or you can make use of them. &nbsp;The most important thing is that all files with a given extension/type are handled the same way.</p>
<p>I&#8217;ve told Windows I want PHP source files to open in Notepad++ and to use an icon I created. &nbsp;That&#8217;s easy to do with file extensions. &nbsp;How would you suggest doing that with magic(5) and <code>file</code>?</p>
<p>(I realize this is completely off-topic. &nbsp;Sorry. &nbsp;But hey, a bunch of people having off-topic discussions is the sign of a popular and successful website. &nbsp;Congrats Raymond!)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772643">
				<div id="div-comment-772643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772643">
			September 29, 2009 at 6:31 pm</a>		</div>

		<p>&quot;I like file extensions. &nbsp;I can see at a glance, without running another program, if a file is a picture, a text document, or executable.&quot;</p>
<p>No, you can&#8217;t. You can see what the person who named it *thinks* it contains, or what they want you to think it contains, but not what it actually contains.</p>
<p>To find out what it actually contains, you just need to use a little magic(5)</p>
<p>(&lt;<a rel="nofollow" target="_new" href="http://linux.die.net/man/5/magic&gt;" rel="nofollow"></a><a href="http://linux.die.net/man/5/magic&#038;gt" rel="nofollow">http://linux.die.net/man/5/magic&#038;gt</a>;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772783">
				<div id="div-comment-772783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Drak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772783">
			September 30, 2009 at 1:49 am</a>		</div>

		<p>@Clinton Pierce</p>
<p>Thanks for that answer :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772803">
				<div id="div-comment-772803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772803">
			September 30, 2009 at 2:13 am</a>		</div>

		<p>(edit: Last post @L was from TC. Not sure where the &quot;C&quot; went! )</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772813">
				<div id="div-comment-772813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772813">
			September 30, 2009 at 3:10 am</a>		</div>

		<p>Aneurin Price: It&#8217;s made unreadable with just a regular Deny ACE that prevents you from reading or deleting it. It has nothing to do with it being a symbolic link.</p>
<p>Presumably they don&#8217;t want you reading it so that you don&#8217;t write new apps that depend on it. And many users are likely to try to delete it if they can&#8217;t read it, so maybe that&#8217;s why they won&#8217;t let you delete it either.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772823">
				<div id="div-comment-772823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772823">
			September 30, 2009 at 3:47 am</a>		</div>

		<blockquote><p>
  &gt; The problem with file extensions is that nobody has proposed a better way to indicate a file&#8217;s contents.
</p></blockquote>
<p>Type/Creator, MIME types, Content-Type, extended attributes and file headers.</p>
<p>I&#8217;ve heard people say that to turn a file into a zip file you just highlight the file and change the extension.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772833">
				<div id="div-comment-772833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">AC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772833">
			September 30, 2009 at 4:50 am</a>		</div>

		<p>@anonymuos</p>
<p>&quot;But why doesn&#8217;t Explorer not traverse hard links &#8230; (As I see, programs can traverse it but the file manager cannot navigate thru hard links?)&quot;</p>
<p>You&#8217;re nearly there&#8230; Explorer has no problems traversing hardlinks. It can&#8217;t /read/ the folders you&#8217;re talking about (which just happen to be hard links &#8211; EG have more than exactly 1 reference) because the &#8216;read&#8217; permission on them is set to deny.</p>
<p>And of course, it&#8217;s down to appcompat:</p>
<p>Application Compatibility: Junction Points and Backup Applications</p>
<p>&quot;&#8230; These junction points have file attributes of FILE_ATTRIBUTE_REPARSE_POINT and FILE_ATTRIBUTE_SYSTEM, and the access control lists (ACLs) must be set to &quot;“Everyone Deny Read&quot;. Applications must have permissions in order to call out and traverse a specific path. However, enumerating the contents of these junction points is not possible.&quot;</p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/bb756982.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/bb756982.aspx</a></p>
<p>And I imagine in Windows 8 or later they&#8217;ll be removed completely. The problems you&#8217;re experiencing are probably designed to get you used to the &#8216;new world order&#8217;, without immediately breaking things which reference %SYSTEMDRIVE%/Documents and Settings/%USERNAME%/.MyApp/ (for example).</p>
<p>It&#8217;s not easy. That&#8217;s why I tend to just read and not post because I&#8217;ll probably get something wrong. I just happen to have dealt with these recently (cf. Applying an incorrect security template which then led to an infinite loop backup situation. With the perms that Microsoft has on them, that didn&#8217;t happen) so I know a bit about them.</p>
<p>Looking forward to Raymond&#8217;s post on them. Does that have a planned date? I assume that date is likely to change if you (Raymond) do a non-queued post anyway.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772793">
				<div id="div-comment-772793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">T</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772793">
			September 30, 2009 at 2:09 am</a>		</div>

		<p>@L:</p>
<p> &nbsp;&quot;.LNK files are shell links, handled by the shell. Symbolic links (introduced in Vista) are reparse points, handled by the kernel.&quot;</p>
<p>Thanks, I didn&#8217;t know that. But I had XP in mind, which explains the confusion.</p>
<p>Another poster pointed out that symbolic links would not be satisfactory in the scenario that I described. So I stand by my original comment, that hard links *are* useful in appropriate scenarios. It would just be nice if explorer could distinguish files with multiple links, for reasons I explained before.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772873">
				<div id="div-comment-772873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772873">
			September 30, 2009 at 9:14 am</a>		</div>

		<blockquote><p>
  &gt; Everything except file headers are stored independent of the file. What happens when file is copied to another file system? Uploaded to the web?
</p></blockquote>
<p>I would argue the filename is not part of the file. The stream of bytes is the file, and the file may have zero or more names that reference the file ( zero because a file could be open and then the last name unlinked ). Renaming a file does not change the type of data.</p>
<p>As we have been saying the same stream of bytes can have two filenames refering to the same file, both of which could have different extensions or even no extension.</p>
<p>In NTFS the streams associated with the file are part of the file so writing the MIME type to the stream would stay with the file. When transferring the file with HTTP the file type lives in the header field &quot;Content-Type&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772883">
				<div id="div-comment-772883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772883">
			September 30, 2009 at 9:56 am</a>		</div>

		<p>By the way, OS/2 actually stored the file type independently of the actual extension. It never really caught on, though &#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772893">
				<div id="div-comment-772893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772893">
			September 30, 2009 at 10:42 am</a>		</div>

		<p>Raymond, don&#8217;t be silly. If file-5 was really a C++ file, it would contain a &quot;//&quot; or the words &quot;template&quot;, &quot;virtual&quot;, &quot;class&quot;, &quot;public:&quot;, or &quot;private:&quot;. If it were a Java program, it would contain the word &quot;import&quot;.</p>
<p>What happens if your programming language isn&#8217;t popular enough to be among those half-dozen that libmagic knows about (like JavaScript, C#, and VB)? Just figure out a way to tell the difference between your language and one that it already knows about, add it to names.h, compile, submit your patch to the maintainers of the file, and wait for the rest of the world to update their library! What could be simpler?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772923">
				<div id="div-comment-772923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772923">
			September 30, 2009 at 11:16 am</a>		</div>

		<p>(Almost) every valid C file is also a valid C++ file.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772933">
				<div id="div-comment-772933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772933">
			September 30, 2009 at 11:26 am</a>		</div>

		<p>[And then you&#8217;ll have end-user questions like &quot;Why do some of my files have a little asterisk next to them?&quot; Answer: &quot;If an asterisk appears next to a file, then that means that the file is accessible by more than one name. (Insert description of hard links here).&quot; User: &quot;Sigh. Windows is so hard to use. I should have gotten a Mac.&quot; -Raymond]</p>
<p>Interesting, since Mac OS X, being based on Unix, has hard links as well. But, yes, indeed I know of no file manager that does this, even on Mac or Unix.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772973">
				<div id="div-comment-772973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772973">
			September 30, 2009 at 12:13 pm</a>		</div>

		<blockquote><p>
  &gt; But, yes, indeed I know of no file manager that does this, even on Mac or Unix.
</p></blockquote>
<p>Have you never heard of &quot;ls&quot;? If you use the long listing &quot;ls -l&quot;, the 2nd column, right after the attributes indicates the number of links to the file.</p>
<p>$ ls -l wibble</p>
<p>-rw-r&#8211;r&#8211; &nbsp; 1 porter &nbsp;porter &nbsp;1 Oct &nbsp;1 05:11 wibble</p>
<p>$ ln wibble wibble2</p>
<p>$ ls -l wibble*</p>
<p>-rw-r&#8211;r&#8211; &nbsp; 2 porter &nbsp;porter &nbsp;1 Oct &nbsp;1 05:11 wibble</p>
<p>-rw-r&#8211;r&#8211; &nbsp; 2 porter &nbsp;porter &nbsp;1 Oct &nbsp;1 05:11 wibble2</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772983">
				<div id="div-comment-772983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772983">
			September 30, 2009 at 12:23 pm</a>		</div>

		<p>Gabe: I write a phenomenal amount of C++ modules that contain none of the symbols and keywords you listed. And yes, they are C++ modules, not C. You&#8217;d have to compile the code to tell the difference. I think I prefer an extension.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773003">
				<div id="div-comment-773003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773003">
			September 30, 2009 at 12:47 pm</a>		</div>

		<p>Gabe: Or perhaps you&#8217;re being ironic. At least, I hope so.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-772843">
				<div id="div-comment-772843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jscanlon@yahoo.com' rel='external nofollow' class='url'>John</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772843">
			September 30, 2009 at 6:02 am</a>		</div>

		<p>@porter:</p>
<p>Everything except file headers are stored independent of the file. What happens when file is copied to another file system? Uploaded to the web?</p>
<p>And file headers only work so well. A program to truly identify the file must know how to read the header (or the magic number, or whatever). Text files store a wide variety of different formats (as already mentioned) and they don&#8217;t have headers.</p>
<p>Whether it&#8217;s perfect or not, file extensions work amazingly well. And as to someone renaming a file extension to seemingly zip the file &#8211; well, there *is* a certain degree of knowledge/thinking users must bring to the table. Renaming a file from .TXT to .JPG won&#8217;t make it an image, renaming a file from .TXT to .ZIP won&#8217;t zip it either. This isn&#8217;t a hard leap for most users to make.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-772853">
				<div id="div-comment-772853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-772853">
			September 30, 2009 at 7:42 am</a>		</div>

		<p>Yes, file(1) is terrible at telling the difference between different types of text file. Just watch:</p>
<p>karellen@host:~$ ls</p>
<p>file-1 &nbsp;file-2 &nbsp;file-3 &nbsp;file-4 &nbsp;file-5 &nbsp;file-6 &nbsp;file-7</p>
<p>karellen@host:~$ file *</p>
<p>file-1: ASCII text</p>
<p>file-2: HTML document text</p>
<p>file-3: RCS/CVS diff output text</p>
<p>file-4: Bourne-Again shell script text executable</p>
<p>file-5: ASCII C program text</p>
<p>file-6: ASCII make commands text, with escape sequences</p>
<p>file-7: a /usr/bin/perl -w script text executable</p>
<p>karellen@host:~$ file -i *</p>
<p>file-1: text/plain; charset=us-ascii</p>
<p>file-2: text/html; charset=us-ascii</p>
<p>file-3: text/x-diff; charset=utf-8</p>
<p>file-4: text/x-shellscript; charset=us-ascii</p>
<p>file-5: text/x-c; charset=us-ascii</p>
<p>file-6: text/x-makefile; charset=us-ascii</p>
<p>file-7: text/x-perl; charset=us-ascii</p>
<p>adam@adam-1:~/tmp$</p>
<p>How on earth could any application possibly tell the difference between these file types?</p>
<p>Stuck with a system dependent binary? Well, kind of, in that you can&#8217;t just copy the file(1) binary from, say, FreeBSD to Windows64 and make it run. I mean, the source code is pretty portable and can be compiled on almost any platform, with Windows ports available &lt;<a href="http://gnuwin32.sourceforge.net/packages/file.htm%3E" target=_new rel=nofollow rel="nofollow">&#8220;>http://gnuwin32.sourceforge.net/packages/file.htm&gt;</a> but I guess that doesn&#8217;t count, huh?</p>
<p>As for getting Windows to use certain programs based on various file types, I guess I&#8217;d use the portable &lt;<a href="http://linux.die.net/man/3/libmagic%3E" target=_new rel=nofollow rel="nofollow">&#8220;>http://linux.die.net/man/3/libmagic&gt;</a> (the core of file(1) in a handy to reuse shared library) to determine the correct MIME type of a file based on its contents, and then allow users to specify their preference of application to use with varying MIME types.</p>
<p>Yeah, that might work.</p>
<div class=post>[<i>Well, except that file-5 was actually a C++ file, not a C file. And file-1 was actually a LitWare Log File. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773043">
				<div id="div-comment-773043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymuos</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773043">
			September 30, 2009 at 5:05 pm</a>		</div>

		<p>@David Walker, of course they have the right. But remember we also have the right to buy or not buy. It implied that. Most understood it.</p>
<p>@Illuminator and @John,</p>
<p>there&#8217;s already a column handler for extensions at <a rel="nofollow" target="_new" href="http://www.xrayz.co.uk/extension-column/" rel="nofollow">http://www.xrayz.co.uk/extension-column/</a>. But the horrible Vista/Windows 7 Explorer removed it without providing a proper replacement (Windows Search and Property system? No sorry)!!!!!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773073">
				<div id="div-comment-773073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stefan Kanthak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773073">
			September 30, 2009 at 7:58 pm</a>		</div>

		<p>@Raymond:</p>
<p>[And then you&#8217;ll have end-user questions like &#8220;Why do some of my files have a little asterisk next to them?&#8221; Answer: &#8220;If an asterisk appears next to a file, then that means that the file is accessible by more than one name. (Insert description of hard links here).&#8221; User: &#8220;Sigh. Windows is so hard to use. I should have gotten a Mac.&#8221; -Raymond]</p>
<p>Have you used shell links in Windows 95 and later? They show an arrow as overlay icon.</p>
<p>Have you ever used the CD burning extension provided with XP and later?</p>
<p>When you &#8220;write&#8221; one or more file(s) to CD they show up with a overlay icon resembling a &#8220;dagger&#8221; as long as they are sitting in the staging area. And IIRC the shell uses hardlinks in this case.</p>
<p>NB: if you &#8220;write&#8221; a directory to CD then the shell copies that directory with its contents to the staging area&#8230; and no overlay icon shows!</p>
<div class=post>[<i>The difference is that you can explain &#8220;it&#8217;s a shortcut&#8221; and &#8220;those are files waiting to be burned to CD&#8221; in 10 words or less, and people will say &#8220;Oh, okay&#8221; and not &#8220;What kind of computer geeky technocrap are you talking about, and why should I care?&#8221; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773033">
				<div id="div-comment-773033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773033">
			September 30, 2009 at 3:25 pm</a>		</div>

		<p>@Karellen</p>
<p>I don&#8217;t disagree that `file` does a pretty good job at describing a lot of different types of files. &nbsp;The two problems that jump out immediately are:</p>
<p>&#8211; What I said earlier (and Raymond gave great examples for).</p>
<p>&#8211; `file` is constantly playing catch-up with all the various kinds of file formats out there. &nbsp;Some might say that this means you&#8217;ve already lost the battle.</p>
<p>&#8211; File associates are much cleaner with extensions:</p>
<p>In Windows I can double-click a *.tda3 file and have the TMPGEnc project open in the correct program. &nbsp;What are the odds that `file` knows about that (or other less well-known types of files)?</p>
<p>I have many *.xpi, *.wsz, and *.zip files. &nbsp;Each of these is just zip file, but in Windows they will open with the correct program (Firefox, Winamp, and WinZip for example). &nbsp;There&#8217;s no way for a `file`-empowered shell to do this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773083">
				<div id="div-comment-773083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foxyshadis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773083">
			September 30, 2009 at 10:50 pm</a>		</div>

		<p>Want to see if files have more than one hard link? Write or find a filesystem filter that modifies some property returned to every caller, or a shell extension that highlights or adds a column or property page or whatever you want. It&#8217;s just that simple.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773103">
				<div id="div-comment-773103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Teo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773103">
			October 1, 2009 at 1:05 am</a>		</div>

		<p>Actually, I found *once* a good reason to hardlink files. They were so severely fragmented, that NTFS just gave up every time someone tried to do anything besides reading from them (ERROR_FILE_SYSTEM_LIMITATION). These files were totally 40+ GiB. So I &quot;copied&quot; them for the sys admin to play with, while the programmers access them through the original names.</p>
<p>It was an interesting problem to deal with &#8211; I couldn&#8217;t do anything with these files until I defragment them, *including* defragmenting them :) Which is described in this KB article &#8211; <a rel="nofollow" target="_new" href="http://support.microsoft.com/kb/957180" rel="nofollow">http://support.microsoft.com/kb/957180</a> but still fun.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773193">
				<div id="div-comment-773193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773193">
			October 1, 2009 at 12:58 pm</a>		</div>

		<p>@Gabe,</p>
<p>Having // is NOT a sign of C++ file. It&#8217;s not your K&amp;R C anymore.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773203">
				<div id="div-comment-773203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773203">
			October 1, 2009 at 1:27 pm</a>		</div>

		<blockquote><p>
  &gt; Having // is NOT a sign of C++ file. It&#8217;s not your K&amp;R C anymore.
</p></blockquote>
<p>I know many true ANSI C compilers that balk at //, and quite rightly so!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773213">
				<div id="div-comment-773213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773213">
			October 1, 2009 at 2:15 pm</a>		</div>

		<p>@porter,</p>
<p>True C99 ANSI/ISO compilers won&#8217;t balk at //. It&#8217;s not your C89 anymore.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773233">
				<div id="div-comment-773233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773233">
			October 1, 2009 at 3:02 pm</a>		</div>

		<p>Paul, Alexandre, and porter: There is no reason that your C file couldn&#8217;t have a // comment. My Borland C files had them in the early &#8217;90s. Even if you use strict K&amp;R C, you could have a string or comment that has a // in it. In fact, libmagic will probably identify your JavaScript, C#, or Java package as C++ as well due to the // comments.</p>
<p>This was really an example of why using a ridiculous heuristic to guess a file&#8217;s type is a much worse idea than letting the user assign the file type with metadata (an extension).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773243">
				<div id="div-comment-773243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773243">
			October 1, 2009 at 3:09 pm</a>		</div>

		<p>Gabe: So it was irony; I apologize for jumping the gun. Your point is entirely correct. The idea of waiting for Explorer to scan the contents of hundreds of files in a directory to determine their types is a non-starter, anyway, even if the results were reliable.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-773313">
				<div id="div-comment-773313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.preinheimer.com/' rel='external nofollow' class='url'>Paul Reinheimer</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773313">
			October 1, 2009 at 6:04 pm</a>		</div>

		<p>The analogy I generally fall back on when it comes to hard links is lockers in a bus stop or high school.</p>
<p>When you create a file, you put a label on the locker, the contents of the file reside inside. When you create a hard link you place a second label on the very same locker. When you &quot;delete a file&quot; you pull a label off. Lockers with nothing in it are cleaned out.</p>
<p>The analogy holds through your various examples of temporary files (new locker, move label) and such.</p>
<p>It may be tricky to explain things, but it&#8217;s far from impossible.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-773393">
				<div id="div-comment-773393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-773393">
			October 2, 2009 at 2:30 am</a>		</div>

		<p>With the inode indirection it&#8217;s actually a locker in a locker. FAT is more direct, an directory entry points directly to the sector holding the content.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-774093">
				<div id="div-comment-774093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stefan Kanthak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-774093">
			October 4, 2009 at 11:30 am</a>		</div>

		<p>@Raymond:</p>
<p>[The difference is that you can explain &#8220;it&#8217;s a shortcut&#8221; and &#8220;those are files waiting to be burned to CD&#8221; in 10 words or less, and people will say &#8220;Oh, okay&#8221; and not &#8220;What kind of computer geeky technocrap are you talking about, and why should I care?&#8221; -Raymond]</p>
<p>Let&#8217;s try: a shortcut is an attributed pointer to a filesystem/shell object. When you open it, the shell resolves the indirection and opens the filesystem/shell object; but if that has been moved, then (depending upon certain registry settings) the shell will search it.</p>
<p>When the filesystem object is an executable, the shell link provides some parameters (options, working directory) for its call.</p>
<p>Is that explanation but complete?</p>
<p>Have I covered all the semantics attached to shell links?</p>
<p>NB: if you turn on SAFER with it&#8217;s default settings don&#8217;t forget to exempt *.LNK from the list of executable files.</p>
<p>Let&#8217;s try to describe hard links:</p>
<p>A hard link is a(nother) name for an existing file. It can be placed anywhere on the same volume where the file resides. The several hard links which name the same file are all equal, there is no primary hard link. If you erase the last hardlink of a file the file will be deleted.</p>
<p>I omitted the NTFS specialties of hard links: they cache a part of the attributes of the file. When you change a file through one hard link and then run a &#8220;dir another_hard_link&#8221; you&#8217;ll see the attributes BEFORE the change. But if you open that another_hard_link the attributes are updated. If you use the Windows Explorer you&#8217;ll notice this when you enter a directory with hard links to files which Explorer reads to fetch the icon or tooltips or &#8230;</p>
<div class=post>[<i>I think the average user lost you at &#8220;attributed pointer&#8221;. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-774153">
				<div id="div-comment-774153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-774153">
			October 4, 2009 at 11:15 pm</a>		</div>

		<p>To explain to developer is a bit easier&#8230;</p>
<p>First, imagine that you &quot;new-ed&quot; an object and stored it&#8217;s pointer to a variable. Then you created another variable and copied the pointer to it.</p>
<p>Now, just think the &quot;object&quot; as the &quot;file&quot;, &quot;variable&quot; as the &quot;directory entry on filesystem&quot; and the second vairable as &quot;hardlink&quot;.</p>
<p>While this analogy may not cover all aspects of hardlink, this serves the purpose of explaining &quot;what a hardlink is&quot; well to any students who attended C++ programming class and doing well enough&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-774193">
				<div id="div-comment-774193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://yuryskaletskiy.blogspot.com' rel='external nofollow' class='url'>Yury Skaletskiy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20090928-00/?p=16573#comment-774193">
			October 5, 2009 at 5:48 am</a>		</div>

		<p>This is obvious it&#8217;s not necessary to expose such things in explorer.</p>
<p>I just wandering why it doesn&#8217;t have a shortcut for Create Folder functionality. If you work from keyboard, you have to Alt-f, W, F when you create a new folder</p>
<div class=post>[<i>? &#8220;Explorer doesn&#8217;t have a shortcut for X. The shortcut for X is Y.&#8221; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

