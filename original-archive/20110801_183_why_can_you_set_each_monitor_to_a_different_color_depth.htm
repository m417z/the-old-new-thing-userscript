<html>
<head>
<title>Why can you set each monitor to a different color depth?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why can you set each monitor to a different color depth?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>August 1, 2011 / year-entry #184</td></tr>
<tr><td><b>Tags:</b></td><td>other</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>31</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Random832 seemed horrified by the fact that it is possible to run multiple monitors, with different color formats on each monitor. "Seriously, why does it let you do that?" Well, of course you can do that. Why shouldn't it let you do that? When multiple monitors were introduced to Windows, video hardware was nowhere near...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>Random832 seemed horrified by the fact that it is possible to run multiple monitors, with different color formats on each monitor. "<a href="http://blogs.msdn.com/oldnewthing/archive/2010/02/08/9959494.aspx#9960155">Seriously, why does it let you do that?</a>"</p>
<p> Well, of course you can do that. Why shouldn't it let you do that? </p>
<p> When multiple monitors were introduced to Windows, video hardware was nowhere near as advanced as it is today. One common discovery was that your computer, which came with a video card in one of the expansion slots, actually had a video chip baked into the motherboard, but which was disabled in the BIOS. In other words, your computer was actually multiple-monitor-capable; it's just that the capability was disabled. </p>
<p> Once you got it enabled, you would discover that the onboard video adapter was not as good as the one in the expansion slot. (Duh. If it were as good as the one in the expansion slot, then the manufacturer would have saved a lot of money and not bothered shipping a video card in the expansion slot!) Usually, the onboard video card didn't have a lot of video RAM. You still want to run it at 1024&times;768 (hey, that's high resolution for these days), but in order to do that, you need to reduce the color depth. On the other hand, the card in the expansion slot has a huge amount of video RAM (<i>four megabytes!</i>), so you take advantage of it by running at a higher color depth. </p>
<p> You're now getting the most out of your machine; each video card is cranked up as high as it can go. (The lame-o card doesn't go very high, of course.) What could possibly be wrong with that? </p>
<p> <b>Bonus chatter</b>: It so happened that some of these "secret video card" motherboards had a feature where they would disable the ROM BIOS on the on-board video card if they detected a plug-in video card. To get multi-monitor support on these recalcitrant machines, one of my colleagues wrote a tool that you used like this: </p>
<ul>
<li>Turn off the computer and remove the plug-in video card. </li>
<li>Boot the computer with only the lame-o on-board video. </li>
<li>Run the tool, which captures the ROM BIOS. </li>
<li>Turn off the computer, put the plug-in video card back in, and boot     the computer again. </li>
<li>Run the tool again and tell it "Hey, take that ROM BIOS you     captured and map it into memory where a ROM BIOS would normally go,     and then initialize the video card from it and add it as my     second monitor." </li>
</ul>
<p> It was a bit of a hassle, but it let you squeak crappy multi-monitor support out of these lame-o motherboards. </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (31)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-927813">
				<div id="div-comment-927813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SimonRev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927813">
			August 1, 2011 at 7:31 am</a>		</div>

		<p>I used to run Win98 with 5 video cards and as they varied from 1 to 4 MB of RAM, I was grateful that I could run each monitor at a different color depth.</p>
<p>I also ran into the lame-o built in video card issue, but personally found it easier to go grab another video card from the dead PC heap than to try that BIOS hack.</p>
<p>Actually the monitors were much harder to come by at the company I was working for back then. &nbsp;I used to have to wait until someone left the company and then scavenge their monitor (we didn&#39;t have much of an IT department back then so no one really noticed much except that I kept getting more and more monitors).</p>
<p>Back when I had 5 CRT monitors my coworkers would occasionally come into my office with whatever they were hardware working on (touch screens usually) and see if the EMI generated by them would interfere with their hardware. &nbsp;We found several touch screen issues that way.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-sgroot odd alt thread-odd thread-alt depth-1" id="comment-927833">
				<div id="div-comment-927833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Sven+Groot+%5BMSFT%5D' rel='external nofollow' class='url'>Sven Groot [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927833">
			August 1, 2011 at 7:50 am</a>		</div>

		<p>One thing that I wish you could do is run each monitor at a different DPI settings. I have a laptop with a 13&quot; 1920&#215;1080 screen, which I like to run at 120 or 144 DPI. But I often connect an external monitor to that laptop (using that one as the primary and the laptop&#39;s panel as the secondary), and that monitor is 1920&#215;1200, except it&#39;s 24&quot;, so I want to run that one at 96 DPI.</p>
<p>So either I have ridiculously huge stuff on the external monitor, or I have to squint to be able to read anything on the laptop panel. There is no compromise that works well for both monitors.</p>
<p>I understand the technical reasons for why this would be extremely difficult (if not impossible) to support. But it would still be nice to live in that fairy-tale land where this is possible. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927843">
				<div id="div-comment-927843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodr&#237;guez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927843">
			August 1, 2011 at 7:58 am</a>		</div>

		<p>Once again, the title&#39;s question can be answered by another question: what would happen if you couldn&#39;t?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927853">
				<div id="div-comment-927853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">henke37</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927853">
			August 1, 2011 at 8:07 am</a>		</div>

		<p>Well, you could still crank up the card to the highest setting supported, it just wouldn&#39;t be the same as if it was alone.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927873">
				<div id="div-comment-927873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">gfx</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927873">
			August 1, 2011 at 8:35 am</a>		</div>

		<p>The graphic hardware/drivers doesn&#39;t nescessarily support any common bitdepth.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927883">
				<div id="div-comment-927883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927883">
			August 1, 2011 at 9:01 am</a>		</div>

		<p>Even today, most BIOSes will disable the on-board video card if they detect a PCI-Express card plugged in. &nbsp;This is often done to conserve PCI-E lanes &#8212; in other words, to save fifty cents.</p>
<p>Fortunately, triple-monitor cards are so cheap these days that it&#39;s less hassle to throw hardware at the problem than to work around firmware limitations like this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927903">
				<div id="div-comment-927903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">benjamin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927903">
			August 1, 2011 at 9:48 am</a>		</div>

		<p>The whole presto-changeo BIOS trick to fool the motherboard sounds like a disaster just waiting to happen.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927913">
				<div id="div-comment-927913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927913">
			August 1, 2011 at 10:18 am</a>		</div>

		<p>Raymond forgot to tell that the reason for this hassle is Sandy bridge&#39;s hardware &quot;support&quot; for protected video path, aka palladium/tcpa.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927923">
				<div id="div-comment-927923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Craig</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927923">
			August 1, 2011 at 10:41 am</a>		</div>

		<p>@640k &#8211; No, it&#39;s not. This is referring to kit from way back &#8211; not recent motherboards, though some still behave similarly but not for trusted path reasons.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927933">
				<div id="div-comment-927933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Torkell</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927933">
			August 1, 2011 at 11:23 am</a>		</div>

		<p>The other nifty thing that you can do is have different monitors set to different refresh rates (useful when using a mismatched pair of old CRTs), which amazingly doesn&#39;t seem to cause any problems.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927943">
				<div id="div-comment-927943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SimonRev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927943">
			August 1, 2011 at 11:44 am</a>		</div>

		<p>Yeah, the different refresh rates thing was pretty important back with older CRTs. &nbsp;Otherwise you would get a resonance pattern in the display, which I always assumed came because they refresh rates were slightly out of sync. &nbsp;It also helped slightly to put some metal between the CRTs to block some of the EMI.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927953">
				<div id="div-comment-927953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kemp</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927953">
			August 1, 2011 at 11:48 am</a>		</div>

		<p>@640k &#8211; Sometimes you make it too easy to tell you&#39;re just here to troll.</p>
<p>On topic: I always found it annoying about the auto-disabling of the onboard graphics. There actually were a couple of times that having it available would have been really useful. On the other hand, these days it&#39;s easier to just pick up a second card in the rare case that your existing card doesn&#39;t already support multiple monitors. Just to cover all possibilities, I am about to build a machine using the built-in graphics capability of the Sandy Bridge line.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927973">
				<div id="div-comment-927973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927973">
			August 1, 2011 at 2:15 pm</a>		</div>

		<p>Sven, to save Raymond the effort, it&#39;s on the list. <a href="http://blogs.msdn.com/b/oldnewthing/archive/2010/05/31/10017567.aspx" rel="nofollow">http://blogs.msdn.com/b/oldnewthing/archive/2010/05/31/10017567.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-927983">
				<div id="div-comment-927983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927983">
			August 1, 2011 at 4:03 pm</a>		</div>

		<p>I&#39;m guessing that it would actually have taken significant work to require that all monitors are set to the same color depth. Imagine what would happen if you have a system working with several monitors, then somebody plugs in one that specifies EDID information that is incompatible with the current resolution/color depth, causing the graphics card to change color depth. Then every other graphics card on the system would have to simultaneously change their color depth, possibly requiring them to change resolution too!</p>
<p>There might not even be a common color depth supported by all monitor/graphics card/resolution combinations. Who could possibly want this situation?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-927993">
				<div id="div-comment-927993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joe Schmoe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-927993">
			August 1, 2011 at 4:29 pm</a>		</div>

		<p>Raymond,</p>
<p>Can you please explain why Windows and most of it&#39;s applications do not fully support 10bit large gamut monitors which are in the market today when Windows has supported 32bit color depth in video settings for more than a decade?</p>
<p>I know that the configured 32bit color depth is actually just 24bit color depth (8bits X 3colors) but why was it not possible to fully support 10bit (or more) per color if the hardware supports it in the Windows GDI and other applications programming interfaces for all this time?</p>
<p>I asking this question because I&#39;ve almost gone mad trying to find the right combination of Large gamut / high resolution monitor and image editing applications, video cards and connectors that will work. I can&#39;t believe that it is this complicated. I shudder how the average consumer is supposed to understand any of this when their $100 blueray player simply works with deep color via HMDI on their $500 HDTV but their $2,000 computer + $1,000 monitor + $300 video card doesn&#39;t.</p>
<p>Was this another case of &quot;nobody will ever need more than 512KB (8bits per color)&quot;?</p>
<p>Thanks!</p>
<div class="post">[<i>Going past 8bpp would break a lot of GDI functions. (How would you express 10-bit color formats in GetSysColor? RGBQUAD? COLORREF? GetPixel?) You are welcome to stop using GDI. DirectX, for example, supports many extended color formats. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928003">
				<div id="div-comment-928003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joe Schmoe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928003">
			August 1, 2011 at 4:45 pm</a>		</div>

		<p>Raymond, I understand that some parts of the GDI cannot deal with &gt;10bits per color. I was wondering if Microsoft had/now has a plan to fully supporting &gt;8bit per color in normal applications and why deep color simply doesn&#39;t work correctly even with those rewritten DirectX applications unless you&#39;re using select video cards (NVideo Quadro for example) and display port cables (but not HDMI).</p>
<div class="post">[<i>How would I know? I&#39;m not a Microsoft spokesperson, and I certainly don&#39;t go to GDI meetings. You seem to have forgotten that I don&#39;t cover future plans on this Web site. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928033">
				<div id="div-comment-928033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Troll</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928033">
			August 1, 2011 at 10:23 pm</a>		</div>

		<p>Too bad Windows 7 or Vista do not support horizontal and vertical desktop spanned modes for multiple monitors, that is, stretching the desktop resolution across multiple monitors. They only support dual view (extending the desktop to multiple monitors). Earlier versions of Windows did.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928043">
				<div id="div-comment-928043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Worf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928043">
			August 2, 2011 at 12:11 am</a>		</div>

		<p>32 bit color is not just a neat speed hack for Windows &#8211; i.e., it&#39;s not just 8bpp x 3 channels, it&#39;s often 8bpp x 4 channels. The last one is alpha and controls transparency. Usually called RGBA mode. 10-bit color in 32-bits just puts us back in the nasty mask-and-shift pixel manipulations when we dealt with RGB565 or RGB555. Great on memory, at the price of speed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928053">
				<div id="div-comment-928053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ender</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928053">
			August 2, 2011 at 1:09 am</a>		</div>

		<p>Heh, my current computer came with an on-board (on-CPU?) Intel HD graphics and GeForce 420 in PCIe slot. The on-board card has DVI and HDMI ports, both were plugged (with the DVI port having a a piece of plastic with &quot;Do not remove&quot; stamped on it screwed in). I could enable the on-board card in BIOS, but that resulted in Windows BSODing as soon as a monitor was connected to card (guess that explains &quot;Do not remove&quot;) &#8211; then I found out that the BSOD goes away if I set the on-board card as primary.</p>
<p>As for 10-bits per channel, I had a Matrox card long ago that supported that. Not sure how it worked, but the included viewer did seem to show a difference on the sample images &#8211; not that I cared.</p>
<p>(and I still have to post every comment twice before it&#39;s actually accepted)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928063">
				<div id="div-comment-928063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Someone</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928063">
			August 2, 2011 at 1:15 am</a>		</div>

		<p>To enable more than 8 bit per color channel, it could be done like the introducing of Unicode: There would be RGBQUADH, COLORREFH etc with 16 bit per color channel. Every GDI structure und function depending on the current format gets a counterpart with a H prefix, and there should be a precompiler symbol to switch from the pixel color format &quot;standard&quot; to &quot;high&quot;. The handling of Windows messages transporting color values also needs some attention:) Maybe its only possible on 64 bit systems.</p>
<p>Just kidding.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928073">
				<div id="div-comment-928073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928073">
			August 2, 2011 at 4:03 am</a>		</div>

		<p>@ender If you&#39;re quick enough it only takes one submit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928143">
				<div id="div-comment-928143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928143">
			August 2, 2011 at 7:42 am</a>		</div>

		<p>@Someone: Oh god, you almost had me there for a minute. &nbsp;Having to #undef generic names such as GetObject is bad enough, but then having to deal with 4 potential variants of a function that happened to take both a string and a color? &nbsp;Madness.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928183">
				<div id="div-comment-928183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Not Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928183">
			August 2, 2011 at 8:20 am</a>		</div>

		<p>@Adam Rosenfield: In that case, it would make sense to only implement the xxxH structures on the W variant of the function &#8211; it seems that a bunch of APIs are now only being implemented in W variants anyways, so it makes sense that development of future functionality would ignore the seemingly deprecated A variants. In all likelihood, if you&#39;re going to want to implement high colours, you&#39;d probably also be supporting Unicode, and if you aren&#39;t, you can always do the conversions where necessary.</p>
<div class="post">[<i>Adding the new APIs is easy (if cumbersome). The hard part is making them interop with the old ones. If an old app calls GetObjectW(DIBSECTION) on a new bitmap, what should happen? -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928313">
				<div id="div-comment-928313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Unsure</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928313">
			August 2, 2011 at 10:40 am</a>		</div>

		<p>&quot;If an old app calls GetObjectW(DIBSECTION) on a new bitmap, what should happen?&quot;</p>
<p>If a window is shown on two monitors (half on monitor 1, half on monitor 2) and I retrieve it&#39;s bits via GDI functions: What happens if the monitors have different color depths? I&#39;m not that familiar with GDI bitmap functions, but I thought that the color depth of the resulting bitmap can be dictated by the program calling the GDI function, via some parameter or header value in the bitmap structure.</p>
<div class="post">[<i>DIB sections allow <a href="http://blogs.msdn.com/b/oldnewthing/archive/2011/05/20/10166505.aspx" rel="nofollow">direct access to pixels in their original format</a>. If you want a conversion, use <a href="http://blogs.msdn.com/b/oldnewthing/archive/2009/04/08/9537051.aspx" rel="nofollow">GetDIBits</a>. We are now way off topic and I think I&#39;m going to delete all these off-topic comments in a week or so. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928463">
				<div id="div-comment-928463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928463">
			August 2, 2011 at 5:07 pm</a>		</div>

		<p>[That&#39;s a pretty awesome breaking change you&#39;re suggesting. &quot;All existing applications will stop working until they recompile with the new header files. Even if you don&#39;t care about 10-bit color formats.&quot; -Raymond]</p>
<p>A simple int can have changed from one day to another (16 -&gt; 32 bit). Defined types are black boxes which you should not know any thing about how they are defined inside. You cannot just compile your code with new compiler/sdk and think it works. That&#39;s why you should have a dwSize member or similar check. And that&#39;s why you should use sizeof instead of using hard coded sizes of structs. This is (C) programming 101.</p>
<p>I understand that most windows APIs are quick hacks which isn&#39;t forward compatible, a clean breaking change in those cases would be changing API semantics when upgrading architecture, you already had two opportunities, 16-&gt;32 bit and 32-&gt;64 bit x86. And you will again have this opportunity with ARM in next windows release.</p>
<div class="post">[<i>Okay, now I&#39;m convinced you&#39;re just a troll. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928303">
				<div id="div-comment-928303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yeah</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928303">
			August 2, 2011 at 10:23 am</a>		</div>

		<p>&quot;but then having to deal with 4 potential variants of a function that happened to take both a string and a color? &nbsp;Madness.&quot;</p>
<p>Don&#39;t forget 32 vs. 64 bit. All in all, there would be 8 variants that can be called wrong, especially via p/invoke :)</p>
<p>But hopefully, there exist no function or structure or windows message containing strings *and* INT_PTR *and* color values.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928423">
				<div id="div-comment-928423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928423">
			August 2, 2011 at 4:03 pm</a>		</div>

		<p>@Raymond: How would you express 10-bit color formats in GetSysColor? RGBQUAD? COLORREF? GetPixel?</p>
<p>The reason for using include files instead of hardcoded types are that defined types, like RGBQUAD and COLORREF, can be *redefined* when appropriate.</p>
<div class="post">[<i>That&#39;s a pretty awesome breaking change you&#39;re suggesting. &quot;All existing applications will stop working until they recompile with the new header files. Even if you don&#39;t care about 10-bit color formats.&quot; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928433">
				<div id="div-comment-928433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928433">
			August 2, 2011 at 4:07 pm</a>		</div>

		<p>@Raymond: DIB sections allow direct access to pixels in their original format.</p>
<p>Are you saying that DIBs are device *dependant*? What a mess.</p>
<div class="post">[<i>They are device-independent. You can create a 32bpp DIB even if your video card is only 4bpp. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-928533">
				<div id="div-comment-928533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928533">
			August 3, 2011 at 12:28 am</a>		</div>

		<p>Raymond, I&#39;ve discovered that apparently it is common that people who post on the Internet don&#39;t know that changing a header file means recompiling ALL code that includes that header. They don&#39;t seem to realize that recompiling only SOME of the code makes it binary incompatible with the code that wasn&#39;t recompiled.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-928703">
				<div id="div-comment-928703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-928703">
			August 3, 2011 at 11:49 am</a>		</div>

		<p>@Gabe: Of course a 16 bit integer isn&#39;t binary compatible with a 8 bit integer. What did you expect?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-929153">
				<div id="div-comment-929153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110801-00/?p=10013#comment-929153">
			August 5, 2011 at 2:02 pm</a>		</div>

		<p>640k: Wow. I don&#39;t know where to begin telling you what&#39;s wrong with that.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

