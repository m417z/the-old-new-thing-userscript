<html>
<head>
<title>What is the effect of setting the /3GB switch on my 64-bit Windows machine?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>What is the effect of setting the /3GB switch on my 64-bit Windows machine?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>December 3, 2009 / year-entry #385</td></tr>
<tr><td><b>Tags:</b></td><td>other</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>41</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Nothing.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p> Nothing.</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (41)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-791353">
				<div id="div-comment-791353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791353">
			December 3, 2009 at 7:04 am</a>		</div>

		<p>The flag takes disk space, and thus, fragment the file system, and makes the computer slower. Also takes more ram in the code that loads boot.ini</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791363">
				<div id="div-comment-791363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791363">
			December 3, 2009 at 7:05 am</a>		</div>

		<p>Well, that clears that up.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791373">
				<div id="div-comment-791373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Steven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791373">
			December 3, 2009 at 7:05 am</a>		</div>

		<p>Succinct.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791403">
				<div id="div-comment-791403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791403">
			December 3, 2009 at 7:12 am</a>		</div>

		<p>Cool, Raymond, so you&#8217;re twittering (tweeting?) your blog entries now? I like that.</p>
<p>&quot;The flag takes disk space, and thus, fragment the file system, and makes the computer slower. Also takes more ram in the code that loads boot.ini&quot;</p>
<p>Unlikely. If you boot.ini takes up more than one cluster (normally 4 kb on NTFS), you have a lot more problems that just fragmentation.</p>
<p>Then again, there aren&#8217;t that many 64-bit machines with a 64-bit version of Windows 5.x.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791423">
				<div id="div-comment-791423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791423">
			December 3, 2009 at 7:17 am</a>		</div>

		<p>Boot time is slower because the code has to parse a larger file.</p>
<div class=post>[<i>I find this all very amusing because <a href="http://www.microsoft.com/whdc/system/platform/64bit/64bitsystems.mspx" rel="nofollow">64-bit Windows doesn&#8217;t use boot.ini</a>. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791433">
				<div id="div-comment-791433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Falcon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791433">
			December 3, 2009 at 7:27 am</a>		</div>

		<p>@someone else:</p>
<p>Yes &#8211; presumably the space is taken up by your, shall we say, LARGE menu timeout value, which won&#8217;t have the intended effect because the boot manager can only handle up to ~10 million seconds!</p>
<p>If only that suggestion about using bignums had come a little earlier&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791443">
				<div id="div-comment-791443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt Newman</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791443">
			December 3, 2009 at 7:27 am</a>		</div>

		<p>It would be more fun if it restricted available ram to 3GB&#8230; kind of an evil easter egg.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791473">
				<div id="div-comment-791473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pae</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791473">
			December 3, 2009 at 7:48 am</a>		</div>

		<p>How about /PAE?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791483">
				<div id="div-comment-791483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabest</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791483">
			December 3, 2009 at 8:06 am</a>		</div>

		<p>Well, there are many pci tuners that fail to work if the system has 4+ gb of ram, if I could choose between one 2gb module or two that are limited to 3gb I would gladly have that plus one gig.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791493">
				<div id="div-comment-791493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">579</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791493">
			December 3, 2009 at 8:39 am</a>		</div>

		<blockquote><p>
  &gt; Unlikely. If you boot.ini takes up more than one cluster (normally 4 kb on NTFS), you have a lot more problems that just fragmentation.
</p></blockquote>
<p>Plus, it should be of exactly K+1, K+2, K+3, K+4 or K+5 bytes long where K is any multiple of 4096.</p>
<p>Otherwise the weight of /3GB switch would be null because you don&#8217;t gain a cluster by removing it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791503">
				<div id="div-comment-791503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alexandre Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791503">
			December 3, 2009 at 9:12 am</a>		</div>

		<p>@Gabest,</p>
<p>You confuse process usermode VM size (which /3GB controls in x86), and physical memory size. Anyway, if a system has &quot;only&quot; 4GB of RAM, in x64 some of it will already be over 4GB logical, and those PCI tuners won&#8217;t work already.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791533">
				<div id="div-comment-791533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pierre B.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791533">
			December 3, 2009 at 9:37 am</a>		</div>

		<p>Well, Windows XP 64-bits edition still uses boot.ini. :P</p>
<p>(Of course, I must be in the very tiny group of martyrs who is still on XP64&#8230; at least it a lot less painful than it was when it first came out.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791543">
				<div id="div-comment-791543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://billy-oneal.com' rel='external nofollow' class='url'>Billy O'Neal</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791543">
			December 3, 2009 at 10:21 am</a>		</div>

		<p>@Pierre B.:</p>
<p>No, it does not. Windows XP Professional x64 Edition does. Windows XP 64 Bit Edition runs only on Itanium systems&#8230; I seriously doubt you&#8217;ve got one of those lying around.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791553">
				<div id="div-comment-791553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pierre B.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791553">
			December 3, 2009 at 10:25 am</a>		</div>

		<p>Billy: sorry, I forgot I was writing in the land of nit-pickers! Woe to me to talk of 64-bits edition when I meant x64! We won&#8217;t accept such a loose usage of language! Not on this ship^H^H^H blog!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791563">
				<div id="div-comment-791563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt Fisher</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791563">
			December 3, 2009 at 10:37 am</a>		</div>

		<p>I saw the headline in my RSS reader, clicked, saw the text, and laughed heartily.</p>
<p>Thanks, Raymond. &nbsp;:)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791573">
				<div id="div-comment-791573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://billy-oneal.com' rel='external nofollow' class='url'>Billy O'Neal</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791573">
			December 3, 2009 at 10:37 am</a>		</div>

		<p>I&#8217;m not being a language stickler. Just saying that when Raymond says 64-bit Windows doesn&#8217;t use boot.ini, he is not mistaken.</p>
<p>64-bit refers to the IA-64 architecture.</p>
<p>x64 or x86-64 refers to the amd64 architecture.</p>
<p>They&#8217;re very different and the operating systems designed to run on them are nothing alike.</p>
<p>Don&#8217;t blame me, I didn&#8217;t name the products that way ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791653">
				<div id="div-comment-791653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random832</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791653">
			December 3, 2009 at 12:00 pm</a>		</div>

		<p>This post is far too verbose &#8211; I got about halfway through it and gave up.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791673">
				<div id="div-comment-791673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random832</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791673">
			December 3, 2009 at 12:02 pm</a>		</div>

		<p>On a more serious note [just realized this after I posted] &#8211; if &quot;64-bit&quot; only refers to IA-64, does that mean that this post does not apply to x64? What does the /3GB switch do on x64, then?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791703">
				<div id="div-comment-791703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791703">
			December 3, 2009 at 12:13 pm</a>		</div>

		<p>NT 5.1 (Windows XP) 32-bit uses boot.ini.</p>
<p>NT 5.2 (Windows XP and Windows Server 2003) 32-bit and 64-bit (AMD64) use boot.ini.</p>
<p>NT 6.x (Windows Vista and later), both 32 and 64-bit, use BCD.</p>
<p>I don&#8217;t know what IA-64 systems use. EFI?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791743">
				<div id="div-comment-791743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://twitter.com/BlackTigerX' rel='external nofollow' class='url'>Eber Irigoyen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791743">
			December 3, 2009 at 12:50 pm</a>		</div>

		<p>how long until someone creates</p>
<p>WhatistheeffectofsettingtheSlash3GBswitchonmy 64-bitWindowsmachine.com</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791753">
				<div id="div-comment-791753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791753">
			December 3, 2009 at 1:03 pm</a>		</div>

		<p>Again, why do you want o use the/3GB switch on a 64-bit system?</p>
<p>Joe</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791763">
				<div id="div-comment-791763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">945</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791763">
			December 3, 2009 at 1:06 pm</a>		</div>

		<p>My app (which I haven&#8217;t written yet) will read boot.ini and crash if the switch is not set to a proper value. So please consider making this setting relevant for forward-compatibility reasons.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791773">
				<div id="div-comment-791773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791773">
			December 3, 2009 at 1:29 pm</a>		</div>

		<p>Very succinct Raymond, but it doesn&#8217;t even address the primary problem!</p>
<p>The real question is, has Microsoft finally given its customers what they want with 64-bit Windows? &nbsp;Have you FINALLY allowed for more than 11 million seconds boot delay?</p>
<p>Stop ignoring your customers!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791783">
				<div id="div-comment-791783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Brett Allen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791783">
			December 3, 2009 at 2:24 pm</a>		</div>

		<p>So&#8230;what does it do on a x32 or x64 machine?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791793">
				<div id="div-comment-791793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791793">
			December 3, 2009 at 3:15 pm</a>		</div>

		<blockquote><p>
  So&#8230;what does it do on a x32 or x64 machine?
</p></blockquote>
<p>really?</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2004/08/22/218527.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2004/08/22/218527.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791833">
				<div id="div-comment-791833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">scorpion007</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791833">
			December 3, 2009 at 9:01 pm</a>		</div>

		<p><a href="http://blogs.msdn.com/oldnewthing/archive/2009/12/04/9932270.aspx" rel="nofollow"></a> TL;DR.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791863">
				<div id="div-comment-791863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.georg-rottensteiner.de' rel='external nofollow' class='url'>Endurion</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791863">
			December 3, 2009 at 11:54 pm</a>		</div>

		<p>I wish more technical documentation was that clear and to the point.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791883">
				<div id="div-comment-791883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Fire Snake</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791883">
			December 4, 2009 at 3:04 am</a>		</div>

		<p>That&#8217;s called 4GB RAM Tuning now!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791903">
				<div id="div-comment-791903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Fire Snake</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791903">
			December 4, 2009 at 3:09 am</a>		</div>

		<p>One clarification for some dummies out here, but I would expect it to have an effect on Processes running in 32bit WoW mode on a x64 machine &#8230; or not? I mean if I port a 32 bit app from a x86 to a x64 machine, and the x86 machine had the /3gb (or 4 gig ram tuning) enabled, I could not port it, or how would I tell the x64 machine to use 3gb user mode address space for a process which uses 32 bit pointers?</p>
<p>Might be a dumb question, but at least I am an honest idiot.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791933">
				<div id="div-comment-791933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791933">
			December 4, 2009 at 4:57 am</a>		</div>

		<p>Many programs become buggy when you enable the 3gb switch in 32-bit windows. Is it the same in 64-bit windows?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mike-dimmick even thread-even depth-1" id="comment-791943">
				<div id="div-comment-791943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Mike+Dimmick' rel='external nofollow' class='url'>Mike Dimmick</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-791943">
			December 4, 2009 at 7:04 am</a>		</div>

		<p><a href="http://blogs.msdn.com/oldnewthing/archive/2009/12/04/9932270.aspx" rel="nofollow"></a> 640k: Just flipping the /3GB switch doesn&#8217;t actually do anything for most programs. Programs have to opt in to get a 3GB virtual address space using the /LARGEADDRESSAWARE linker flag (which sets a bit in the image header). If they don&#8217;t, they still get a 2GB address space.</p>
<p>In 64-bit Windows, 32-bit programs that specify /LARGEADDRESSAWARE get a near-4GB address space, while 32-bit programs that don&#8217;t still get a 2GB address space as before. After all, they didn&#8217;t say they could handle addresses with bit 31 set to 1.</p>
<p>Mostly it&#8217;s server programs that specify /LARGEADDRESSAWARE, though, and there are normally 64-bit versions that get access to the full 64-bit address space available.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-792043">
				<div id="div-comment-792043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">someone else</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792043">
			December 4, 2009 at 7:48 am</a>		</div>

		<p>&quot;Mostly it&#8217;s server programs that specify /LARGEADDRESSAWARE, though, and there are normally 64-bit versions that get access to the full 64-bit address space available.&quot;</p>
<p>That, and multimedia programs. Photoshop is one of them. And for good reason.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-792263">
				<div id="div-comment-792263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JamesW</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792263">
			December 4, 2009 at 1:08 pm</a>		</div>

		<p>@Mike Dimmick: Just flipping the /3GB switch doesn&#8217;t actually do anything for most programs. Programs have to opt in.</p>
<p>Yes. And any that do opt in should pay heed to Raymond&#8217;s mention of the &quot;Top down&quot; flag in the memory manager allocation preferences mask, as mentioned in this post from years ago: <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2004/08/12/213468.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2004/08/12/213468.aspx</a></p>
<p>If you say you&#8217;re LARGEADDRESSAWARE, then make sure your code runs well with the top down allocator. It helped us catch some ancient code smuggling data in bit 31.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-792403">
				<div id="div-comment-792403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792403">
			December 5, 2009 at 4:17 am</a>		</div>

		<p>TL;DR</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-792433">
				<div id="div-comment-792433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Heffernan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792433">
			December 5, 2009 at 2:55 pm</a>		</div>

		<p>Ironically WOW64 has some bugs with addresses &gt;2GB, for example GetCursorPos fails for all such addresses. &nbsp;This is fixed in Windows 7 but won&#8217;t be down-ported to Vista.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-792453">
				<div id="div-comment-792453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792453">
			December 5, 2009 at 11:13 pm</a>		</div>

		<p>“Ironically WOW64 has some bugs with addresses &gt;2GB, for example GetCursorPos fails for all such addresses. ”</p>
<p>Which can be nasty, since it do not show unless an address above 2GB is actually passed to GetCursorPos.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-792493">
				<div id="div-comment-792493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792493">
			December 7, 2009 at 2:27 am</a>		</div>

		<p>Gah. Didn&#8217;t realise someone made the exact same joke that I did.</p>
<p>That&#8217;s what I get for skimreading.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-792513">
				<div id="div-comment-792513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://odysonline.gr' rel='external nofollow' class='url'>odys</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792513">
			December 7, 2009 at 6:24 am</a>		</div>

		<p>same as in the x86</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-792843">
				<div id="div-comment-792843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-792843">
			December 7, 2009 at 10:37 pm</a>		</div>

		<p>IMO the biggest mistake made with EFI during it&#8217;s history was AMD not considering EFI during x86_64 development. Instead, EFI had to be ported to x86_64 after the fact, which delayed its adoption for years. If AMD had mandated it from the beginning that all x86_64 OSes booted via EFI, there indeed would be no version of 64-bit Windows using boot.ini.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-793153">
				<div id="div-comment-793153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">rje</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-793153">
			December 8, 2009 at 12:49 pm</a>		</div>

		<p>An even bigger mistake than that was inventing EFI at all, considering OpenFirmware already existed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-793343">
				<div id="div-comment-793343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091203-00/?p=15803#comment-793343">
			December 8, 2009 at 11:24 pm</a>		</div>

		<p>EFI was invented only to enable DRM/TCPA/Palladium on the x86 platform. OpenFirmware cannot, by design, support that.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

