<html>
<head>
<title>Why does hypervisor remain enabled even when Hyper-V is disabled in Windows Features?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why does hypervisor remain enabled even when Hyper-V is disabled in Windows Features?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>January 30, 2018 / year-entry #27</td></tr>
<tr><td><b>Tags:</b></td><td>tipssupport</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>11</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Because somebody else needs it.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
A customer found that even though they
set
<a HREF="https://blogs.technet.microsoft.com/keithcombs/2009/12/08/hypervisorlaunchtype-not-set-after-bcd-changes-here-is-the-fix/">
the hypervisorlaunchtype to <i>off</i> in the boot configuration</a>,
and they unchecked <i>Hyper-V</i> in the
<i>Turn Windows features on or off</i> dialog,
they found that hypervisor was still enabled.
As a result,
Oracle VM VirtualBox Manager refuses to create a 64-bit guest.
</p>
<p>
Someone from the kernel team explained that
the hypervisor might still be enabled in the UEFI,
so that's one thing to check.
</p>
<p>
Another thing that will force the hypervisor on is
<a HREF="https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-vbs">
Virtualization-Based Security</a>,
which goes by the acronym VBS.
This is confusing because to most people VBS stands
for
<a HREF="https://msdn.microsoft.com/en-us/library/t0aew7h6(v=vs.84).aspx">
VBScript</a>.</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (11)	</div>

		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/oldnewthing/20180130-00/?p=97925#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="https://blogs.msdn.microsoft.com/oldnewthing/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="4" aria-required="true"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit btn btn-default" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='97925' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="e20d038ca6" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="191"/></p>			</form>
			</div><!-- #respond -->
	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-iboyd even thread-even depth-1 parent" id="comment-1323135">
				<div id="div-comment-1323135" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IanBoyd' rel='external nofollow' class='url'>IanBoyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323135">
			January 30, 2018 at 8:14 am</a>		</div>

		<p>It seems then that setting `hypervisorlaunchtype` to **off** is only a suggestion; and that a service can still launch the hypervisor.</p>
<p>In this context, is *hypervisor* can be thought of a kind of service available to the OS itself?  If you specify launch type off, will Hyper-V service later simply turn it in; making the hypervisor a sort of delayed-start feature?</p>
<p>Or is it the case that Hyper-V service not function when `hypervisorluanchtype` was set to off at boot time?</p>
<p>Or, if hypervisor and Hyper-V are two terms for the same thing &#8211; if one is running it means the other is running &#8211; can the hypervisor be disabled if the Hyper-V service startup is set to disabled?</p>
<p>Is there a Channel 9 video that documents what hypervisor *is*, how it relates to Hyper-V, UEFI, and the hardware features?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323135#respond' onclick='return addComment.moveForm( "div-comment-1323135", "1323135", "respond", "97925" )' aria-label='Reply to IanBoyd'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1323195">
				<div id="div-comment-1323195" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JAS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323195">
			January 30, 2018 at 1:13 pm</a>		</div>

		<p>The only time Channel 9 does anything deep anymore is when it plays upcoming features from whatever the latest C# version. The other videos are just super duper and vapid. Suspiciously plain on purpose like Corn Flakes.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323195#respond' onclick='return addComment.moveForm( "div-comment-1323195", "1323195", "respond", "97925" )' aria-label='Reply to JAS'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1323755">
				<div id="div-comment-1323755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JDG</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323755">
			February 2, 2018 at 6:46 pm</a>		</div>

		<p>Hyper-V is a fundamentally different way of running the OS. It cannot be turned on or off at runtime. Windows without Hyper-V runs directly, and its drivers have unfettered access to the hardware. If Hyper-V is enabled, though, then there *is* no host OS at all. Your main Windows instance is actually itself also a virtualized container. Windows does not have a Hyper-V Service, it has a Hyper-V *Management* Service. You are free to stop or disable this service, but doing so will have no effect on running VMs. It simply disables the conventional means of managing the VMs. When Hyper-V is turned on, the &#8220;real&#8221; host &#8220;OS&#8221; is Hyper-V itself, and *all* it does is host VMs. If something in your Windows boot config indicates that Hyper-V is required, then Windows isn&#8217;t actually the first thing to boot on system startup. Hyper-V initializes first, sets up a container for your main Windows instance, and then boots up Windows in that VM. It is in this way that Hyper-V (and similar systems such as VMWare eSXI) differ fundamentally from products like VirtualBox, VMWare Workstation and Virtual PC: the VMs are not just processes in a host OS, they are sitting alongside the primary OS, which is no longer a host per se, and which does not have any direct insight or control into the other VMs, except that granted to it by the hypervisor.</p>
<p>As for terminology, a hypervisor is anything that manages the hosting and execution of virtual machines. VirtualBox is a hypervisor, and so is Hyper-V. They are fundamentally different technologies but both meet the definition of hypervisor.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323755#respond' onclick='return addComment.moveForm( "div-comment-1323755", "1323755", "respond", "97925" )' aria-label='Reply to JDG'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-msn odd alt thread-odd thread-alt depth-1" id="comment-1323205">
				<div id="div-comment-1323205" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/poizan42' rel='external nofollow' class='url'>poizan42</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323205">
			January 30, 2018 at 1:58 pm</a>		</div>

		<p>In recent Windows Insider Previews will Windows Defender actually enable Hyper-V. The new Windows Hypervisor Platform API should fix the issues with virtualization being unable to other software such as VirtualBox &#8211; see also this discussion: <a href="https://github.com/Microsoft/WSL/issues/2850" rel="nofollow">https://github.com/Microsoft/WSL/issues/2850</a></p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323205#respond' onclick='return addComment.moveForm( "div-comment-1323205", "1323205", "respond", "97925" )' aria-label='Reply to poizan42'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-1323215">
				<div id="div-comment-1323215" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodríguez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323215">
			January 30, 2018 at 4:51 pm</a>		</div>

		<p>The problem here is not why a core OS component is enabled. IMHO, TRWTF is that a common piece of software from a major vendor requires a core OS component to be turned off in order to work correctly. 32-bit virtual machines are fine for testing and reproducing scenarios in user support; but that company is in the high-end enterprise server market, where 64-bit OSes are a must&#8230;</p>
<p>Yes, I know VirtualBox maybe implements, as a virtual machine host, its own hypervisor which may clash with Hyper-V. But at least they should try to make it work with Hyper-V, even if it meant a &#8220;partial emulation&#8221; method with reduced performance, like the one used by early versions of VMWare (which ran user mode directly on the processor, but ran privileged mode inside an x86 emulator).</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323215#respond' onclick='return addComment.moveForm( "div-comment-1323215", "1323215", "respond", "97925" )' aria-label='Reply to Antonio Rodríguez'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-msn odd alt depth-2 parent" id="comment-1323225">
				<div id="div-comment-1323225" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/poizan42' rel='external nofollow' class='url'>poizan42</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323225">
			January 30, 2018 at 10:28 pm</a>		</div>

		<p>There have up until now been no way of &#8220;working with Hyper-V&#8221;. It&#8217;s all or nothing, once hyper-v is enabled virtualization becomes completely unavailable to all other applications.</p>
<p>This is being fixed now with Windows Hypervisor Platform API: <a href="https://docs.microsoft.com/en-us/virtualization/api/hypervisor-platform/hypervisor-platform" rel="nofollow">https://docs.microsoft.com/en-us/virtualization/api/hypervisor-platform/hypervisor-platform</a>, but it&#8217;s still going to take some time before the major virtualization software supports it.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323225#respond' onclick='return addComment.moveForm( "div-comment-1323225", "1323225", "respond", "97925" )' aria-label='Reply to poizan42'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1323226">
				<div id="div-comment-1323226" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John Elliott</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323226">
			January 31, 2018 at 3:39 am</a>		</div>

		<p>How very VCPI.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323226#respond' onclick='return addComment.moveForm( "div-comment-1323226", "1323226", "respond", "97925" )' aria-label='Reply to John Elliott'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong odd alt thread-odd thread-alt depth-1" id="comment-1323216">
				<div id="div-comment-1323216" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323216">
			January 30, 2018 at 6:16 pm</a>		</div>

		<p>I&#8217;ll add that Edge&#8217;s &#8220;Windows Defender Application Guard&#8221; also uses hypervisor, so there&#8217;s one more thing to check.<br />
<a href="https://blogs.windows.com/msedgedev/2016/09/27/application-guard-microsoft-edge/" rel="nofollow">https://blogs.windows.com/msedgedev/2016/09/27/application-guard-microsoft-edge/</a></p>
<p>Not sure when it&#8217;ll go live though, and seems there&#8217;s neither follow-up post to address unanswered enquiries on that post, and no related news either.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323216#respond' onclick='return addComment.moveForm( "div-comment-1323216", "1323216", "respond", "97925" )' aria-label='Reply to cheong00'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xpclient even thread-even depth-1 parent" id="comment-1323245">
				<div id="div-comment-1323245" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/xp.client' rel='external nofollow' class='url'>xp.client</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323245">
			January 31, 2018 at 6:22 am</a>		</div>

		<p>Also gets enabled when Docker for Windows is installed.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323245#respond' onclick='return addComment.moveForm( "div-comment-1323245", "1323245", "respond", "97925" )' aria-label='Reply to xp.client'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1323395">
				<div id="div-comment-1323395" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yukkuri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323395">
			February 1, 2018 at 9:01 am</a>		</div>

		<p>Holy crap Xpclient is back</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323395#respond' onclick='return addComment.moveForm( "div-comment-1323395", "1323395", "respond", "97925" )' aria-label='Reply to Yukkuri'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1323565">
				<div id="div-comment-1323565" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tanveer Badar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925#comment-1323565">
			February 2, 2018 at 5:02 am</a>		</div>

		<p>I didn&#8217;t notice that when I read it on 30th.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://blogs.msdn.microsoft.com/oldnewthing/20180130-00/?p=97925&#038;replytocom=1323565#respond' onclick='return addComment.moveForm( "div-comment-1323565", "1323565", "respond", "97925" )' aria-label='Reply to Tanveer Badar'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

