<html>
<head>
<title>Using /LARGEADDRESSAWARE on 64-bit Windows for 32-bit programs</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Using /LARGEADDRESSAWARE on 64-bit Windows for 32-bit programs</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>June 1, 2005 / year-entry #135</td></tr>
<tr><td><b>Tags:</b></td><td>other</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>11</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Probably the biggest advantage of 64-bit Windows is not the larger registers but rather the expansive 64-bit address space. Recall that even when the /3GB switch is set, 32-bit programs receive only 2GB of address space unless they indicate their willingness to cope with addresses above 2GB by passing the /LARGEADDRESSAWARE flag. This flag means...</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>Probably the biggest advantage of 64-bit Windows is not the larger registers but rather the expansive 64-bit address space. Recall that even when the /3GB switch is set, 32-bit programs receive only 2GB of address space unless they indicate their willingness to cope with addresses above 2GB by passing the /LARGEADDRESSAWARE flag.</p>
<p> This flag means the same thing on 64-bit Windows. But since 64-bit Windows has a much larger address space available to it, it can afford to give the 32-bit Windows program the entire 4GB of address space to use. This is mentioned almost incidentally in <a href="http://support.microsoft.com/default.aspx?scid=889654"> Knowledge Base article Q889654</a> in the table "Comparison of memory and CPU limits in the 32-bit and 64-bit versions of Windows". </p>
<p> In other words, certain categories of 32-bit programs (namely, those tight on address space) benefit from running on 64-bit Windows machine, even though they aren't explicitly taking advantage of any 64-bit features. </p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (11)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-278983">
				<div id="div-comment-278983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.eightypercent.net' rel='external nofollow' class='url'>Joe Beda</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-278983">
			June 1, 2005 at 10:35 am</a>		</div>

		<p>BTW, the new version of photoshop (CS2) is supposedly linked with /LARGEADDRESSAWARE.  I haven&#8217;t tried it on a machine with lots of RAM yet, but it is supposed to work well.</p>
<p><a rel="nofollow" target="_new" href="http://www.adobe.com/support/techdocs/320005.html" rel="nofollow">http://www.adobe.com/support/techdocs/320005.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-279023">
				<div id="div-comment-279023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Miles Archer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279023">
			June 1, 2005 at 11:00 am</a>		</div>

		<p>Dude, you don&#8217;t even need a machine with large amounts of ram. You just need data that won&#8217;t fit in 3GB and let it swap it out to disk. Of course it will be really slow unless you have a significant amount of real memory available.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor even thread-even depth-1" id="comment-279063">
				<div id="div-comment-279063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279063">
			June 1, 2005 at 12:28 pm</a>		</div>

		<p>What&#8217;s to explain? The compiler and your application will run under the Win32 emulator.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-279083">
				<div id="div-comment-279083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">martyCZ</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279083">
			June 1, 2005 at 12:55 pm</a>		</div>

		<p>From what I remember about memory mapped files, they can be used to &quot;test&quot; your address space well (instead of allocating 3GB on swap).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-279053">
				<div id="div-comment-279053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">AC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279053">
			June 1, 2005 at 12:13 pm</a>		</div>

		<p>Wow, full 4 GB address space for one Win32 app, that&#8217;s really nice.</p>
<p>I know it&#8217;s a little off topic, but I haven&#8217;t seen any page that it explains: if I switch to Windows XP 64, can I still *develop* (maintain) my existing Win32 applications? And from time to time try to develop something for Win64? Has anybody experience on this subject? Any catches?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-279103">
				<div id="div-comment-279103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279103">
			June 1, 2005 at 4:22 pm</a>		</div>

		<p>&quot;if I switch to Windows XP 64, can I still *develop* (maintain) my existing Win32 applications?&quot;</p>
<p>The biggest gotcha is that MS Virtual PC/Server won&#8217;t run on XP64. That is a showstopper for me. VS2005 SP1 is supposed to let you run on XP64 but I don&#8217;t know when it&#8217;s coming out. VMWare has beta support for XP64 now I think.</p>
<p>If you&#8217;re not using either of those products, you either have a dozen physical test systems or you&#8217;re not testing adequately.</p>
<p>The upgrade license deal that MS offers is pretty scary, they invalidate your 32-bit license and give you a 64-bit one so you can&#8217;t go back. That should encourage users to buy XP64 outright so maybe that&#8217;s what was intended. Really, you&#8217;re better off with something like the MSDN Subscriptions if you do a lot of dev testing on multiple OS though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-279143">
				<div id="div-comment-279143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Factory</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279143">
			June 2, 2005 at 2:37 am</a>		</div>

		<p>&quot;VS2005 SP1 is supposed to let you run on XP64 but I don&#8217;t know when it&#8217;s coming out.&quot;<br />
<br />  Erm, VS2005 is still in beta, and we only recently got a SP for VS2002. I wouldn&#8217;t hold my breath.. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-279163">
				<div id="div-comment-279163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">RonO</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279163">
			June 2, 2005 at 7:28 am</a>		</div>

		<p>&quot;&quot;VS2005 SP1 is supposed to let you run on XP64 but I don&#8217;t know when it&#8217;s coming out.&quot;<br />
<br />Erm, VS2005 is still in beta, and we only recently got a SP for VS2002. I wouldn&#8217;t hold my breath.. :) &quot;</p>
<p>In this context, VS2005 = Virtual Server 2005.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-279753">
				<div id="div-comment-279753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Justin Olbrantz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279753">
			June 3, 2005 at 3:00 pm</a>		</div>

		<p>What exactly needs to be &#8217;emulated&#8217; for running a 32-bit program on a Windows XP 64 system? I got the impression from the x86-64 documentation that running a 32-bit process on a 64-bit OS was a simple affair.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-279763">
				<div id="div-comment-279763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Justin Olbrantz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-279763">
			June 3, 2005 at 3:06 pm</a>		</div>

		<p>I&#8217;m kinda surprised that the 3 gig-4 gig address space difference exists at all. Wasn&#8217;t the point or requiring the /LARGEADDRESSAWARE flag so that apps that expect addresses under 2 gigs won&#8217;t break when they get a higher address? Wouldn&#8217;t it be the same problem, if a program that&#8217;s expecting an address in the lowest 3 gigs suddenly gets one in the highest gig?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-280183">
				<div id="div-comment-280183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/larryosterman/archive/2005/06/06/425701.aspx' rel='external nofollow' class='url'>Larry Osterman's WebLog</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050601-24/?p=35483#comment-280183">
			June 6, 2005 at 11:36 am</a>		</div>

		<p>Not quite &amp;quot;Riffing on Raymond&amp;quot; but he just wrote about this, and it reminded me of a story that was related&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

