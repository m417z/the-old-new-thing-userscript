<html>
<head>
<title>Why does my Surface power brick keep blinking on and off?</title>
<link rel="stylesheet" href="page.css">
</head><body>
<div class="titlediv"><h2>Why does my Surface power brick keep blinking on and off?</h2></div>
<div class="hdrdiv"><table class="hdrtable" cellspacing="0" cellpadding="0">
<tr><td><b>Date:</b></td><td>January 31, 2017 / year-entry #22</td></tr>
<tr><td><b>Tags:</b></td><td>tipssupport</td></tr>
<tr><td><b>Orig Link:</b></td><td>https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295</td></tr>

<tr><td><b>Comments:&nbsp;&nbsp;&nbsp;&nbsp;</b></td><td>15</td></tr>
<tr><td valign="top"><b>Summary:</b></td><td valign="top">Power negotiations break down.</td></tr>
</table></div>
<hr/>
<table class="contenttable" cellspacing="0" cellpadding="0"><tr><td><div class="contentdiv">
<!-- CONTENT START -->
<p>
If you try to charge your phone and your Surface from the
same power brick,
keep a close eye on the charger:
See if the charging light is blinking.
</p>
<p>
Here's the deal.
There's an issue with some phones
in the way they negotiate current with Surface power brick.
The two get into a current negotiation fight.
</p>
<ol>
<li>The power brick detects that there is a phone plugged in.</li>
<li>The power brick says, "Hey, I can give you 1.2mA, is that okay?"
    (Note: All numbers in this story are made up.)</li>
<li>The phone says, "I'm cool with that."</li>
<li>The power brick says, "Okay, heres 1.2mA. Enjoy."</li>
<li>The phone gets confused and draws 1.3mA instead of 1.2mA.</li>
<li>The power brick shuts down due to overcurrent.
    The charging light goes off.</li>
<li>Your Surface is now running on battery.</li>
<li>The phone says,
    "Okay, well, easy come easy go." It stops drawing power.</li>
<li>The power brick says, "Whew, that overcurrent situation is over.
    I sense no load.
    The user must have unplugged the curling iron or whatever it was.
    Let me turn myself back on." The charging light goes on.</li>
<li>The Surface is now running on AC power.</li>
<li>Go to step 1.</li>
</ol>
<p>
The result of this issue is that the PC is
constantly switching between battery and AC,
and the phone doesn't charge.
Basically, everybody loses.
</p>
<p>
The Lumia folks issued a firmware update to address this issue,
but if you're using some other phone model,
then who knows when/if it'll get fixed.
But at least you know what's going on.</p>
<!-- CONTENT END -->
</div></td></tr></table>
<hr/>
<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (15)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1281975">
				<div id="div-comment-1281975" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuri Khan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1281975">
			January 31, 2017 at 7:12 am</a>		</div>

		<p>I see the disclaimer, but your numbers are about three orders of magnitude off. A charging phone might draw 1.2A.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1282016">
				<div id="div-comment-1282016" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Trisk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282016">
			January 31, 2017 at 9:24 am</a>		</div>

		<p>No doubt intentionally off, so that no one could possibly misconstrue them as contractual :)</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor even depth-3" id="comment-1282025">
				<div id="div-comment-1282025" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282025">
			January 31, 2017 at 9:39 am</a>		</div>

		<p>Um, yeah, that&#8217;s the ticket!</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-bboorman odd alt thread-odd thread-alt depth-1 parent" id="comment-1281985">
				<div id="div-comment-1281985" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Brian_EE' rel='external nofollow' class='url'>Brian_EE</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1281985">
			January 31, 2017 at 7:21 am</a>		</div>

		<p>Sure, the phone shouldn&#8217;t be drawing more current than what was negotiated but that&#8217;s only one side of the equation. (Note if you have the Surface 3 power brick, looks like you have bigger problems &#8211; check for the recall)</p>
<p>The power brick was ill designed if the internal controller shuts off power to the Surface when there is over-current on the USB phone-charging ports. All the ports should have independent load switches that are separate from the switch-mode AC/DC supply. Add a small microcontroller to monitor each port and only turn off what is mis-behaving. But, that is a few more parts and a few more pennies in cost and I&#8217;m sure the #1 requirement to the design team was &#8220;make it as cheap as possible&#8221;. That is the mantra of virtually all managers everywhere.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor even depth-2" id="comment-1281995">
				<div id="div-comment-1281995" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1281995">
			January 31, 2017 at 7:31 am</a>		</div>

		<p>I agree that there&#8217;s plenty of blame to go around. The primary purpose of this article was to make people aware of the issue since it&#8217;s the sort of thing that may go unnoticed (until you wonder why nothing is charging).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2" id="comment-1282006">
				<div id="div-comment-1282006" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Voigt (Visual Studio and Development Technologies MVP with C++ focus)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282006">
			January 31, 2017 at 8:28 am</a>		</div>

		<p>A single microcontroller, even of the 8-bit variety, is plenty powerful enough to monitor and manage a dozen independent ports.  You just need the external circuitry.  Independent load switches are quite cheap actually, I suspect the cost savings came from measuring total current, so only one high-side current-sense amplifier is needed.  For per-port control, you need per-port current measurement, and thus multiple high-side sense amplifiers, which might actually have added several dollars to the BOM.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1282005">
				<div id="div-comment-1282005" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://coursepad.com' rel='external nofollow' class='url'>Li Huan</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282005">
			January 31, 2017 at 7:44 am</a>		</div>

		<p>Had this overcurrent issue with a particular USB cable. Used the original Lumia USB cable and everything gets charged.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1282035">
				<div id="div-comment-1282035" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dmitry</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282035">
			January 31, 2017 at 3:49 pm</a>		</div>

		<p>Why power brick can not limit that stupid phone current to agreed 1.2mA?</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2 parent" id="comment-1282045">
				<div id="div-comment-1282045" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matteo Italia</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282045">
			January 31, 2017 at 4:03 pm</a>		</div>

		<p>That would mean lowering the output voltage, which is a Bad Thing as it could damage the phone.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1282075">
				<div id="div-comment-1282075" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ismo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282075">
			January 31, 2017 at 9:23 pm</a>		</div>

		<p>Limiting current can be done by using pwm, measuring  current when &#8220;on state&#8221; and adjusting the pulse ratio accordingly. That way no undervoltage condition exists. But dunno what that would do for a phone. The best solution was already given : measure each load individually.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-3 parent" id="comment-1282165">
				<div id="div-comment-1282165" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Douglas Hill</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282165">
			February 1, 2017 at 10:19 am</a>		</div>

		<p>Actually, depending on what kind of charger it is, that&#8217;s what it&#8217;s supposed† to do.</p>
<p>The USB Battery Charging spec has DCPs (the dumb/cheap ones) short the D+ and D- pins together (anything under 200 ohms counts as a short). On overload, the charger isn&#8217;t _required_ to current-limit, it is _allowed_ to shut off, but current limiting is the better thing to do. Go search for &#8220;DCP required operating range&#8221; to get a nice diagram. Essentially, it has to provide at least 0.5 A before current limiting to at least 2.0 V before shutting off. Above 1.5 A it can shutoff at any point.</p>
<p>For CDPs (the smarter-ish ones), the charger has to be able to provide at least 1.5 A before current limiting or shutoff. Again, search &#8220;CDP required operating range&#8221; to get a nice diagram.</p>
<p>So what a phone does is it sees the charger is a DCP or CDP and draws, say, 0.5 A. It then increases that by 0.1 A (okay, it&#8217;s more complicated to describe than that) and checks if the voltage has dropped significantly. If the voltage hasn&#8217;t dropped, it keeps going until it does (or the phone can&#8217;t draw any more). When it sees the voltage start to drop, it backs off just a little.</p>
<p>So that strategy works _really well_ when the charger limits the current, and fails spectacularly when the charger shuts off on overload, giving you the behavior discussed in the article.</p>
<p>† &#8220;supposed to&#8221; i.e. &#8220;OUGHT TO&#8221; from RFC 6919. It&#8217;s what all right-thinking sensible people would do. (sarcasm)</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-4 parent" id="comment-1282615">
				<div id="div-comment-1282615" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DNH</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282615">
			February 4, 2017 at 12:32 pm</a>		</div>

		<p>I have needed to return four MS Band 2 devices so far. They all started having problems with charging. I&#8217;ve been thinking the problem maybe correlated with business trips, when I&#8217;ve used the Surface brick to get USB power for the band. With my latest device I have avoided using the Surface brick to charge it and so far, no problems. Could this be related?</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-5" id="comment-1282745">
				<div id="div-comment-1282745" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mark S</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282745">
			February 6, 2017 at 7:52 am</a>		</div>

		<p>Not likely &#8212; the battery is in the clasp, and the wiring inside the band itself seems to wear out over time from the constant flexing and pressure.  I&#8217;ve gone through four too now.  At some point they did a hardware revision that thickened the rubber, but it didn&#8217;t help.</p>
<p>For me, I suspect the sleep tracking is what does the most damage, since I sleep with my hands under my pillow which presumably puts a lot of strain on the band.  So I stopped doing that since there&#8217;s no more replacements.</p>
<p>Damn shame, because the band 2 was awesome, but now it&#8217;s just another in a long list of MS products that were ahead of their time but poorly marketed and slightly flawed.</p>
<p><a href="http://winsupersite.com/microsoft-band/one-possible-reason-microsoft-band-2-battery-problems" rel="nofollow">http://winsupersite.com/microsoft-band/one-possible-reason-microsoft-band-2-battery-problems</a><br />
<a href="http://winsupersite.com/microsoft-band/managing-my-second-band-2-defect-dead-battery-message" rel="nofollow">http://winsupersite.com/microsoft-band/managing-my-second-band-2-defect-dead-battery-message</a></p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1282645">
				<div id="div-comment-1282645" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David van Leerdam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282645">
			February 5, 2017 at 6:59 am</a>		</div>

		<p>Typical story for this decade. Products and services (half) broken out of box is the new normal. This particular issue has been there all the time and people have been complaining over this ever since. So please don&#8217;t act as if this is something newly discovered. Much appreciated.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1282915">
				<div id="div-comment-1282915" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">zboot</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170131-00/?p=95295#comment-1282915">
			February 6, 2017 at 12:48 pm</a>		</div>

		<p>How do you know this post wasn&#8217;t written two years ago?</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>

</body>
</html>
<br/><div class="disclaimer">
*DISCLAIMER: I DO NOT OWN THIS CONTENT. If you are the owner and would like it removed, please
<a target="_blank" href="/contact.htm">contact me</a>.
The content herein is an archived reproduction of entries from
Raymond Chen's "Old New Thing" Blog (most recent link is <a target="_blank" href="https://devblogs.microsoft.com/oldnewthing/">here</a>).
It may have slight formatting modifications for consistency and to improve readability.
<br/><br/>
WHY DID I DUPLICATE THIS CONTENT HERE?
Let me first say this site has never had anything to sell and has never shown ads of any kind. I have nothing monetarily to gain by duplicating content here.
Because I had made my own local copy of this content throughout the years, for ease of using tools like grep, I decided to put it online after I discovered
some of the original content previously and publicly available, had disappeared approximately early to mid 2019.
At the same time, I present the content in an easily accessible theme-agnostic way.
<br/><br/>
The information provided by Raymond's blog is, for all practical purposes, more authoritative on Windows Development than Microsoft's
own MSDN documentation and should be considered supplemental reading to that documentation. The wealth of missing details
provided by this blog that Microsoft could not or did not document about Windows over the years is vital enough, many would agree an online "backup" of these details
is a necessary endeavor. Specifics include:<br/>
<ul>
    <li>
        A "redesign" after 2019 erased thousands of user's comments from previous years. As many have stated, the comments are nearly as important as the postings themselves.
        The archived copies of the postings contained here retain the original comments.
    </li>
    <li>
        The blog has changed domains many times and the urls have otherwise been under constant change since 2003.
        Even when proper redirection has been set up for those links, redirection only works for a limited period of time.
        For example, all of the internal blog links that were valid in early 2019, were broken by 2020 without proper redirection.
    </li>
    <li>
        The blog has been under constant re-design and re-theming since its inception.
        It is downright irritating to deal with a bogged-down site experience as the result of the latest visual themes designed for cell-phone browsers.
        As of this writing, it is cumbersome to navigate titles with only 10 entries per page.
        While it is nice that the official site has a search feature, searching using this index (with all titles on a single page) is much quicker (CTRL-F in most browsers).
    </li>
</ul>
</div><br/>
&lt;-- Back to <a href="index.htm">Old New Thing Archive Index</a>

