<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (5)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-alegrigoriev even thread-even depth-1 parent" id="comment-1258325">
				<div id="div-comment-1258325" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/alegr1' rel='external nofollow' class='url'>alegr1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160729-00/?p=93985#comment-1258325">
			July 29, 2016 at 7:57 am</a>		</div>

		<p>There was a time when I needed a solution to find out when all processes running a certain application exited (to uninstall the app). Kind of a reverse semaphore. Now that I think about it, it could have been implemented by having the target processes taking a read lock to a predefined range of a file, and the waiting process trying to take a write lock to the same range.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1258375">
				<div id="div-comment-1258375" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Voigt (Visual Studio and Development Technologies MVP with C++ focus)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160729-00/?p=93985#comment-1258375">
			July 29, 2016 at 9:24 am</a>		</div>

		<p>The problem with using file locks for synchronization is that operations fail outright, there&#8217;s no way to wait on a file lock, or get notified when it is released.  Thus you end up using (wasteful and allows starvation) polling to try again, instead of being event driven (efficient, allows starvation) or queuing up for access (efficient, guaranteed eventual progress).</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3 parent" id="comment-1258395">
				<div id="div-comment-1258395" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Killer{R}</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160729-00/?p=93985#comment-1258395">
			July 29, 2016 at 11:45 am</a>		</div>

		<p>LockFileEx without LOCKFILE_FAIL_IMMEDIATELY does this</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-4" id="comment-1258435">
				<div id="div-comment-1258435" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Voigt (Visual Studio and Development Technologies MVP with C++ focus)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160729-00/?p=93985#comment-1258435">
			August 1, 2016 at 7:27 am</a>		</div>

		<p>Nice!  Do you know if it works with CancelIoEx?</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-archangelpip even thread-odd thread-alt depth-1" id="comment-1258365">
				<div id="div-comment-1258365" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160729-00/?p=93985#comment-1258365">
			July 29, 2016 at 8:58 am</a>		</div>

		<p>I like the whole concept of just switching the events like that, it is really simple.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>