<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (73)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-264083">
				<div id="div-comment-264083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://oswaldproject.blogspot.com' rel='external nofollow' class='url'>D. Philippe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264083">
			March 15, 2005 at 8:21 am</a>		</div>

		<p>Does anyone know offhand what the size of a window object in CE is?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264093">
				<div id="div-comment-264093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.csa-inc.net' rel='external nofollow' class='url'>RickG</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264093">
			March 15, 2005 at 8:55 am</a>		</div>

		<p>Great post.  I miss the days of &#8216;lean&#8217; development.  Software is getting fat and lazy.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264103">
				<div id="div-comment-264103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264103">
			March 15, 2005 at 9:04 am</a>		</div>

		<p>Does not having a window handle mean that you have to implement your own accessiblity features such as supporting a screen reader.  I don&#8217;t have issues with that myself, but I sometimes use the Narrarator to make my computer talk for my kids.</p>
<p>As a developer, is this a tradeoff that needs to be considered when going windowless?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264133">
				<div id="div-comment-264133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://perlmonks.org/?node=theorbtwo' rel='external nofollow' class='url'>James Mastros (theorbtwo)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264133">
			March 15, 2005 at 9:53 am</a>		</div>

		<p>Here&#8217;s a question: Why are all window handles visible to all processes?  Why not force you to set a flag bit that says &quot;make this window handle visible to other processes&quot;, or, in the alternative, allow for a flag that says &quot;this window handle is private&quot;?</p>
<p>Wouldn&#8217;t this fix lots of security problems, where a flaw in any application makes it easy to spy on the data of every application?  Only problem I see is screen-readers, as Matt pointed out.</p>
<p>It would seem this is what WinFX is moving toward, but re-implementing the  whole thing at the same time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264153">
				<div id="div-comment-264153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264153">
			March 15, 2005 at 10:02 am</a>		</div>

		<p>James: Marking a window as &quot;private&quot; doesn&#8217;t help the window manager any &#8211; it still has to keep track of it. It is keeping track of the window at all that is expensive.</p>
<p>I don&#8217;t see why you&#8217;re bringing up the security aspect of window handles. I was writing about the memory cost.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264163">
				<div id="div-comment-264163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/heaths' rel='external nofollow' class='url'>Heath Stewart</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264163">
			March 15, 2005 at 10:07 am</a>		</div>

		<p>Far too often I respond to posts in developer forums and on articles regarding this issue &#8211; like when someone uses several Control class derivatives (Windows Forms) or worse &#8211; a UserControl derivative &#8211; to form a checkered board with each square being a control.</p>
<p>I&#8217;ll have to remember this point and simply link to you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264173">
				<div id="div-comment-264173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://msdn.microsoft.com/library/default.asp?url=/library/en-us/win64/win64/running_32_bit_applications.asp' rel='external nofollow' class='url'>64</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264173">
			March 15, 2005 at 10:12 am</a>		</div>

		<blockquote><p>
  &gt; And yes, 16/32-bit interoperability is still important even today</p>
<p>The Win64 developers say it is not.<br />
  
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264193">
				<div id="div-comment-264193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tito</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264193">
			March 15, 2005 at 11:00 am</a>		</div>

		<p>Can you explain why controls (buttons, drop downs, etc.) were OS windows in the first place?  It seemed like a lot extra effort for programmers (me) to build GUI applications where every control is a window.</p>
<p>Why weren&#8217;t &quot;windowless controls&quot; the default implementation, with Window handles being reserved for &quot;actual windows&quot; on the screen?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264203">
				<div id="div-comment-264203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jamesatuncw.com/blog' rel='external nofollow' class='url'>James Summerlin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264203">
			March 15, 2005 at 11:06 am</a>		</div>

		<p>64,</p>
<p>This article isn&#8217;t talking about Win64.  Plus, sooner or later the backward compatibility must be dropped.  The cost of keeping 16 bit compatible with the 32 bit platform is acceptable.  However, keeping 16 on 64 makes the cost change hands.</p>
<p>Besides, 32 bit will be around for a nice long time for those of you who just don&#8217;t want to get off your butts and write your code to conform to what it needs to be&#8230;or give you time to ween yourselves off your DOS games.</p>
<p>James</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264213">
				<div id="div-comment-264213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264213">
			March 15, 2005 at 11:12 am</a>		</div>

		<p>You thought windowed controls were hard to write &#8211; windowless cotrols are even harder.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264223">
				<div id="div-comment-264223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John Elliott</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264223">
			March 15, 2005 at 11:15 am</a>		</div>

		<p>For comparison, GEM 1.x (1985) had a 50-byte window structure, and allowed 8 windows in total, including the desktop. It should come as no surprise that in GEM, controls such as buttons and text boxes were not windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264233">
				<div id="div-comment-264233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://mikedimmick.blogspot.com/' rel='external nofollow' class='url'>Mike Dimmick</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264233">
			March 15, 2005 at 11:28 am</a>		</div>

		<p>James, 64: the reason that 16-bit apps aren&#8217;t supported on x64 running in long (64-bit) mode is pretty simple. Virtual-8086 mode cannot be enabled in this mode. V86 mode is required for 16-bit support &#8211; I don&#8217;t think it works if you just set the code segment&#8217;s compatibility mode to 32-bit and the default operand size to 16 bits.</p>
<p>Whether achievable or not, it would have required a rewrite of 16-bit support, since 32-bit Windows uses V86 mode. It&#8217;s not worth it at this stage given that very few people regularly run 16-bit programs.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264243">
				<div id="div-comment-264243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">julie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264243">
			March 15, 2005 at 11:41 am</a>		</div>

		<p>Luckily for we who care, GNU/Linuxes are cheap objects, as well as being Free!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264253">
				<div id="div-comment-264253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.divil.co.uk/net/' rel='external nofollow' class='url'>Tim Dawson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264253">
			March 15, 2005 at 11:53 am</a>		</div>

		<p>They&#8217;re only free if your time has no value.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264263">
				<div id="div-comment-264263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jon Potter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264263">
			March 15, 2005 at 11:54 am</a>		</div>

		<p>On the Amiga, all &quot;controls&quot; (called Gadgets) were window-less. Each window (the Amiga only had top-level windows, there was no child window concept) had its own linked list of Gadgets which the UI manager (Intuition) knew about and would take care of for you. You simply called a function to add the list of gadgets to the window and Intuition would handle the user interaction for you automatically, only passing mouse events and the like through that did not involve a gadget.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264273">
				<div id="div-comment-264273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Schend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264273">
			March 15, 2005 at 12:11 pm</a>		</div>

		<p>Yeah, MacOS Classic (1.0-9.2.2) worked the same way as Amiga.  &quot;Windows&quot; were only actual windows on the screen while everything else were &quot;controls.&quot;  If the OS told your application that an event occured inside one of your windows, you were responsible for handling your own controls.  (Of course, the API provided tons of functions to make this easy to do.)</p>
<p>Of course, these OSes were designed with a one megabyte system was almost unheard of&#8230; MacOS 1.0 shipped on a 128k machine, and that was a pretty high-end machine at the time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264283">
				<div id="div-comment-264283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">bramster</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264283">
			March 15, 2005 at 12:12 pm</a>		</div>

		<p>No 16 bit apps?   I&#8217;ve got a ton of command-line utilities I&#8217;ve written in Turbo C 2. Put me on the list of people who won&#8217;t be moving to 64-bit anytime soon.   I have no desire to port those utilities to 32-bit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264313">
				<div id="div-comment-264313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris Becke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264313">
			March 15, 2005 at 2:30 pm</a>		</div>

		<p>As a developer this situation is amusingly paradoxical. If I wish to create an application that has so many control windows that it would overflow a 16 bit window handle I have to NOT use windows. So the Win16 app has nothing to enumerate anyway, and &quot;compatibility&quot; (app, not OS) is not achieved.</p>
<p>Hypothetically &#8211; All we really need is a WS_EX flag to CreateWindow that, for WS_CHILD windows, indicates an apps readiness to have a full 32 bit window handle returned. The window manager, (hypothetically remember), would never allow 16bit apps to see the 32 bit hwnds. Now the situation is the same. The 16bit app still can&#8217;t see my windows, but they look all themed and work real nice on XP without a lot of work from me :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264323">
				<div id="div-comment-264323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264323">
			March 15, 2005 at 2:42 pm</a>		</div>

		<p>The system should not be encouraging a program to create 60,000 windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264333">
				<div id="div-comment-264333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jock</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264333">
			March 15, 2005 at 3:27 pm</a>		</div>

		<p>I don&#8217;t think Avalon really solves the huge scaling problem. It&#8217;s controls are  still objects in a hierarchy. If you had 20,000 listbox items, you&#8217;d have at least 20,000 objects with a lot of duplicated state (font, color, position etc). In practice, probably a lot more since you&#8217;d like each item to be a composite of others (icon, text, checkbox etc).</p>
<p>So eventually, with Avalon, you&#8217;ll have to write your own hit testing and control stuff. Again.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264343">
				<div id="div-comment-264343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Cooke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264343">
			March 15, 2005 at 3:31 pm</a>		</div>

		<p>Jon Potter,<br />
<br />Were gadgets really supported at the Intuition level? I didn&#8217;t spend much time developing GUI apps on the Amiga, but I thought all that came along in Kickstart/Workbench 2.0 with the gadtools.library, or something like that.</p>
<p>Then again, maybe I&#8217;m just getting my terminology mixed up. It&#8217;s been a while&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264353">
				<div id="div-comment-264353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jerry Pisk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264353">
			March 15, 2005 at 4:08 pm</a>		</div>

		<p>Jock, you&#8217;re right, but those are no longer OS level objects, they&#8217;re local to your app. I think the whole issue comes from the fact that Microsoft is encouraging everyone to create windows for eveyrthing, even for things that are not user interface, simply because they like to have their developers drag and drop code and you can&#8217;t exactly drag and drop something that is not a window. That&#8217;s why we have applications that have form windows that handle modem communications and so on.</p>
<p>And I wish IE actually went the windowless way instead of that hybrid model it uses today.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264363">
				<div id="div-comment-264363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.accidentalscientist.com' rel='external nofollow' class='url'>Simon Cooke [exMSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264363">
			March 15, 2005 at 4:29 pm</a>		</div>

		<p>Jerry Pisk wrote:<br />
<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
<br />I think the whole issue comes from the fact that Microsoft is encouraging everyone to create windows for eveyrthing, even for things that are not user interface, simply because they like to have their developers drag and drop code and you can&#8217;t exactly drag and drop something that is not a window. That&#8217;s why we have applications that have form windows that handle modem communications and so on.<br />
<br />&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</p>
<p>Erm&#8230; I&#8217;m not sure what platform you&#8217;re talking about, or what development tools you&#8217;re using, but it certainly doesn&#8217;t sound like C++/Win32 to me.</p>
<p>Or do you think that dialog editors are equivalent to &quot;drag and drop code&quot;?</p>
<p>Actually, scratch that. I&#8217;m even more interested in whether or not you&#8217;ve actually ever developed using an IDE, or if you&#8217;re a Vi jockey who likes to pretend to be superior.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264373">
				<div id="div-comment-264373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Cooke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264373">
			March 15, 2005 at 4:30 pm</a>		</div>

		<p>One nice(?) thing about creating child windows is that you can do cheap tricks to customize the interface by sending hide and size messages to windows in other applications. Sure, that&#8217;s not a very nice thing to do, but I&#8217;ve found it useful in the past for fixing little niggly things that really bug me.</p>
<p>Unfortunately, I don&#8217;t have a current example because right now all of my applications are serving me pretty well.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264383">
				<div id="div-comment-264383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Cooke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264383">
			March 15, 2005 at 4:36 pm</a>		</div>

		<p>Simon,<br />
<br />I suspect he&#8217;s thinking of Visual Basic. I seem to remember that in older versions it was common to create little invisible windows in a form to create non-UI objects. It was, of course, cleaner to use the WithEvents thing to declare it in code, but that didn&#8217;t seem to stop people dragging and dropping the &quot;Winsock Control&quot; onto a form and accessing it like an ActiveX control.</p>
<p>I understand that since Visual Studio .NET such objects now float about in a little area at the bottom of the GUI designer, which seems like a good workaround to allow visual editing while not creating useless child windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264413">
				<div id="div-comment-264413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264413">
			March 15, 2005 at 6:53 pm</a>		</div>

		<blockquote><p>
  Since the 8086 had a maximum address space<br />
  <br />&gt; of 1MB, even if you devoted every single<br />
  <br />&gt; byte of memory to window objects, you&#8217;d<br />
  <br />&gt; still not have enough memory.</p>
<p>Right, so if you wanted 20,000 windows then you&#8217;d have to restrict your targets to 80286 or higher, VAX, etc.  Sure performance would suck, but I still don&#8217;t think it was necessary for the OS to impose harsher restrictions.</p>
<p>&gt; If you go windowless, then the only program<br />
  <br />&gt; that can access your content is you. You<br />
  <br />&gt; don&#8217;t have to worry about marshalling,<br />
  <br />&gt; cross-process synchronization, Unicode/ANSI<br />
  <br />&gt; translation, external subclassing, hooks&#8230;</p>
<p>Huh?  Among those two sentences, I understand the first one perfectly but the second one not a bit.
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264293">
				<div id="div-comment-264293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Schend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264293">
			March 15, 2005 at 12:13 pm</a>		</div>

		<p>Guh.  Were designed *when* a one megabyte system was almost unheard of.  Not with, when.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264423">
				<div id="div-comment-264423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jon Potter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264423">
			March 15, 2005 at 8:24 pm</a>		</div>

		<p>Ben Cooke: &quot;Were gadgets really supported at the Intuition level? I didn&#8217;t spend much time developing GUI apps on the Amiga, but I thought all that came along in Kickstart/Workbench 2.0 with the gadtools.library, or something like that.&quot;</p>
<p>Yep. The basic gadgets equivalent to those in USER under Windows were all supported by Intuition right from Amiga OS 1.0. Version 2.0 added gadtools.library as you said which provided a few more complex gadgets (similar to the Windows common controls) and a basic OO system (BOOPSI) but the underlying OS support was there from the start and never really changed.</p>
<p>(This is all from memory as it&#8217;s been over 6 years since I programmed an Amiga so forgive me if I&#8217;m a bit off :)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264303">
				<div id="div-comment-264303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris Becke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264303">
			March 15, 2005 at 1:46 pm</a>		</div>

		<p>Gah! It *would* have been really nice if the core functionality of windowed controls had been exposed in a windowless fashion from user32.dll</p>
<p>I trust that far more than some muppets ActiveX &quot;windowless&quot; control. It would have been nice to be able to write lightweight windowless gadgets with the correct functionality, but I guess thats just wishful thinking.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264463">
				<div id="div-comment-264463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://stud3.tuwien.ac.at/~e0226430/' rel='external nofollow' class='url'>Sebastian Redl</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264463">
			March 16, 2005 at 1:29 am</a>		</div>

		<p>Ben: &quot;Unfortunately, I don&#8217;t have a current example because right now all of my applications are serving me pretty well.&quot;</p>
<p>This is about dialogs, not controls, but I had the problem that OpenOffice.org remembers the positions of its dialogs, which brought me great pain when I switched the positions of my multiple screens. Suddenly these remembered positions were completely off-screen, and since the dialogs were modal, the app appeared to have crashed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264473">
				<div id="div-comment-264473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.schriner.net/serendipity' rel='external nofollow' class='url'>Patrick Schriner</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264473">
			March 16, 2005 at 1:55 am</a>		</div>

		<p>I may be naive, but i&#180;ve yet to see an application that can fit 60000 window objects on to a single screen. Same for the directory with 100000 files. Make that lazy, and you have (allmost) no problem???</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264443">
				<div id="div-comment-264443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.devleap.com/marco/archive/2005/03/16/2990.aspx' rel='external nofollow' class='url'>Marco Russo</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264443">
			March 16, 2005 at 2:58 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264453">
				<div id="div-comment-264453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.devleap.com/marco/archive/0001/01/01/2990.aspx' rel='external nofollow' class='url'>Marco Russo</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264453">
			March 16, 2005 at 2:58 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264493">
				<div id="div-comment-264493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andreas Johansson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264493">
			March 16, 2005 at 4:07 am</a>		</div>

		<p>Patrick Schriner: &quot;I may be naive, but i&#180;ve yet to see an application that can fit 60000 window objects on to a single screen.&quot;</p>
<p>Imagine a webbrowser or a spreadsheet application, displaying a 20 column wide table with 3000 rows. 1 window for each cell.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264533">
				<div id="div-comment-264533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vlad</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264533">
			March 16, 2005 at 6:23 am</a>		</div>

		<p>Borland VCL (Delphi, C-Builder) has two kinds of controls: WinControls and Graphic (windowless) controls. Both derived from same class and graphic controls cannot receive focus, only mouse input. They paint themselves to the parent WinControl (they can be placed to the WinControls only). And they receive windows messages, parent controls take care about delivering messages. Some standard controls like image, label, speed button derived from graphic controls.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264543">
				<div id="div-comment-264543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://wind.codepixel.com' rel='external nofollow' class='url'>Antonio Vargas</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264543">
			March 16, 2005 at 6:40 am</a>		</div>

		<p>John Potter, you are remembering correctly :)</p>
<p>Anyways, telling people not to make windows for their controls amounts to telling people to make their own hit-box testing and whatever you need to implement controls on your own, doesn&#8217;t it?</p>
<p>ps. John Potter of Directory Opus fame?<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264553">
				<div id="div-comment-264553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264553">
			March 16, 2005 at 7:46 am</a>		</div>

		<p>As I noted in the article, I already gave an example of windowless controls: Each item in the scrollbar sample is windowless. They aren&#8217;t accessible yet &#8211; that&#8217;s on my list of future topics.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264563">
				<div id="div-comment-264563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tito</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264563">
			March 16, 2005 at 7:56 am</a>		</div>

		<p>I know that under the current system and set of libraries writing windowless controls is much more difficult than writing window based controls.  However, I think that if the initial decision had been to make controls windowless, then libraries would have been written with windowless controls in mind. (with all of the hit test code, etc, saving us from the trouble of dealing with that so much in the current libraries.)</p>
<p>Is there something I&#8217;m missing that makes windowless controls inherently more complicated than windowed controls, given proper library support for windowless controls?</p>
<p>(@ Chris Becke)<br />
<br />That would have to be cheaper, even from a system perspective, because you aren&#8217;t tracking wndClass, message queue&#8217;s and the like for each control, plus you don&#8217;t have to worry about parent notification and other such cross talk that comes from having 30 &quot;windows&quot; in one UI window.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264433">
				<div id="div-comment-264433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Martin Smith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264433">
			March 16, 2005 at 12:02 am</a>		</div>

		<p>Having created windowless controls for a visual editor, I can testify that windowless programming is a *BIG* pain.  That said, I would have liked it if there were an easer way to draw controls.  At least in pure managed code there isn&#8217;t a good way to easily implement themed support.  What would have been nice is to have lightweight button classes that had all the state properties of buttons and rendered them nicely to a Graphics object.</p>
<p>I ended up just using un-themed ControlPaint drawing, and I&#8217;ll switch it over to themed painting when the v2 framework comes out.  I&#8217;ve heard they have renderers which would be similar to my lighweight buttons.  I&#8217;m hoping&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264573">
				<div id="div-comment-264573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264573">
			March 16, 2005 at 8:10 am</a>		</div>

		<p>&quot;&#8230; given proper library support&#8230;&quot; &#8211; That&#8217;s rather tautological &#8211; if there were any problems you could blame it on the library for not handling it &quot;properly&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264613">
				<div id="div-comment-264613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.studentclub.ro/ovidiupl/' rel='external nofollow' class='url'>Ovidiu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264613">
			March 16, 2005 at 9:16 am</a>		</div>

		<p>Call me obsessed, call me off-topic, but these posts still don&#8217;t explain why I can&#8217;t open more than 60-70 Internet Explorer windows or why the limitations mentioned in <a target="_new" href="http://support.microsoft.com/default.aspx?kbid=126962" rel="nofollow">http://support.microsoft.com/default.aspx?kbid=126962</a> (quoted by Mr. Chen in a previous post) exist in Windows XP.</p>
<p>I have some freaking 700 MB of RAM free and I can&#8217;t open any more programs. I want to be able to use my machine the way I want&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264633">
				<div id="div-comment-264633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">luceric</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264633">
			March 16, 2005 at 9:25 am</a>		</div>

		<p>One of the best thing about Windows is that everything is a Window, no special case for widgets.<br />
<br />As stated above, windowless controls are very difficult to get right, I am currently working with a windowless library of our our own.  You loose a lot of things the OS does a lot of thing for free for windows, hittesting, clipping, tab handling, focus, capture, premade controls such as the Edit, etc.  The problem I run into with real windows is the speed, there is a flood of messages when creating and manipulating windows that makes them feel much more sluggish than our windowless controls.  Also, the windows are individually double-buffered whereas if you do everything in your own windowless lib you can double-buffer everything together and aleviate flickering. One still ends up having to create real windows for things such as edit controls, or opengl windows, so it&#8217;s never truely satisfying unless you invest many man month to create a complete windowless lib.  Harder to train new developpers to use internal toolkits as well, and no help from tools such as spy++, boundchecker.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264643">
				<div id="div-comment-264643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.studentclub.ro/ovidiupl/' rel='external nofollow' class='url'>Ovidiu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264643">
			March 16, 2005 at 9:26 am</a>		</div>

		<p>Don&#8217;t give me that. Windows is fairly scalable on the server. Once you take the darned swap file down, SQL Server or ASP.NET perform quite well. Why can&#8217;t scalability be brought to the Window Manager as well?</p>
<p>Also, keep in mind that some dude decided to write his own OS more than a decade ago. It&#8217;s givind Microsoft bad dreams at night these days&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264653">
				<div id="div-comment-264653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/jeffdav' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264653">
			March 16, 2005 at 9:29 am</a>		</div>

		<p>Ovidiu: The memory for UI objects comes out of the so-called desktop heap. You typically run out of desktop heap long before running into any other limits (like the 65535-window limit). That&#8217;s why windows are not cheap objects.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264663">
				<div id="div-comment-264663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.studentclub.ro/ovidiupl/' rel='external nofollow' class='url'>Ovidiu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264663">
			March 16, 2005 at 9:32 am</a>		</div>

		<p>Thanks for the reply, Raymond. I sort of understood that from the KB article mentioned above.</p>
<p>The really pesky question still remains: Why can&#8217;t the desktop heap scale? What if I put 4 GB of RAM on my desktop? (I can see myself going to 2 GB in the near future, for instance, and I&#8217;m sure I&#8217;ll make the next step later). Will Windows still use a several MB desktop heap by default?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264673">
				<div id="div-comment-264673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/jeffdav' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264673">
			March 16, 2005 at 9:39 am</a>		</div>

		<p>Remember &#8211; the desktop heap is global (it has to be since window handles are available to all procsses). Make it too big and there won&#8217;t be room for other global stuff. It&#8217;s all a balancing act. See the previous discussion about the /3GB switch for examples.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264683">
				<div id="div-comment-264683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.studentclub.ro/ovidiupl/' rel='external nofollow' class='url'>Ovidiu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264683">
			March 16, 2005 at 9:51 am</a>		</div>

		<p>Maybe I&#8217;m going in the wrong direction, but how does this differ from other global objects you might have in Windows, like file handles, mutexes, sempahores and so on? Sure, windows are managed in a different component of the OS, and the situation is quite a bit more complex because of having to work with window stations, desktops and so on (for instance, if you run a process with RunAs, you can change the keyboard layout with the keyboard shortcut but not from the systray icon &#8211; the window manager at work, not allowing windows in different security contexts to access each other). What is it in there that makes the balancing act harder for the desktop heap? The 64K limit on window handles inside a process seems reasonable even these days, and even limiting the overall memory consumption is a good thing, I&#8217;m convinced of that. I just don&#8217;t like it being harcoded, regardless of the features of the physical machine.</p>
<p>Anyway, thank you for your time :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264693">
				<div id="div-comment-264693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264693">
			March 16, 2005 at 10:06 am</a>		</div>

		<p>Beyond the normal object overhead, a semaphore is just a dword; an event is just a bit!  But windows are much heavier &#8211; message queues, property lists, invalid regions, child windows, window classes, keyboard layouts, IME context, virtual keyboard state, double-click state, caret state&#8230; Obviously if something is big you can&#8217;t have as many of them as something that is small.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264713">
				<div id="div-comment-264713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chad</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264713">
			March 16, 2005 at 10:43 am</a>		</div>

		<p>But if he has the memory resources then that&#8217;s not the limitation, the architecture is. I think the answer to his question is probably, &quot;In our experience and based on customer usage we haven&#8217;t seen a need to implement that capability&quot;. If there were enough demand for what Ovidiu wants to do then it would probably be implemented, right? It&#8217;s not like you need to automatically allocate the memory, but if there&#8217;s enough RAM why not let global constructs grow larger?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264723">
				<div id="div-comment-264723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/jeffdav' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264723">
			March 16, 2005 at 11:01 am</a>		</div>

		<p>RAM is irrelevant. The issue is address space, which is 4GB regardless of how much RAM you have.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264733">
				<div id="div-comment-264733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.livejournal.com/users/merle_/' rel='external nofollow' class='url'>Merle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264733">
			March 16, 2005 at 12:44 pm</a>		</div>

		<p>Ovidiu: On Win2kPro, with a mere 384M of RAM, I can open 376 IE windows before things start to go bad.  That&#8217;s with no other open (active) apps.</p>
<p>If I play with taskmgr I can often sneak a 377th window in, but then Things Start To Go Bad.  Things like not being able to open taskmgr anymore, or even shut down my computer.</p>
<p>The limits were within about 20 windows of when I tried it on my machine with 1G of memory.  I assumed it was a desktop UI issue (and the different number was due to background apps or services).</p>
<p>On the other hand, how often do you need 60 IE windows open?  I start to freak out when I have 15 windows open.  Even while browsing, 20 windows is ample for me (and I use Opera in MDI mode).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264503">
				<div id="div-comment-264503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris Becke</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264503">
			March 16, 2005 at 4:50 am</a>		</div>

		<p>Raymond Chen wrote:<br />
<br />&quot;The system should not be encouraging a program to create 60,000 windows.&quot;</p>
<p>But really &#8211; why not?</p>
<p>Sure, the window object has grown over time. And is now something more than 88 bytes. System RAM however has grown far faster. I think that real window objects are relativly cheap &#8211; especially so considering all the built in goodness you DO get. A lot of thought and careful design has gone into them &#8211; they *work*. By contrast, any custom framework for managing windowless controlls &#8211; what reason is there to expect that they will be substantially cheaper than windowed controls?</p>
<p>In rare instances maybe. But frankly, most programmers are lazy dogs who do the minimum required but will insist on rewriting non OS provided services from scratch anyway so NOT having an OS that allows them to do stupid things (like bog their app down with 60&#8217;000 windows) just works out to incent the production of hundreds of not-quite-the-same implementations of some or other grid control &#8211; none of which react to themeing and changes to system default colors quite the same way.</p>
<p>Perhaps the best topic for a set of articles would/should be: &quot;How to write windowless widgets right, right now, without waiting for Avalon/WinFX/Whatever, that react to XP theming and system appearance settings properly&quot;. Which looks just too big a task to realistically expect anyone to do in their free time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264753">
				<div id="div-comment-264753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jon Potter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264753">
			March 16, 2005 at 12:54 pm</a>		</div>

		<p>4 GB address space / 88 bytes per window = 4.8 million windows :)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264763">
				<div id="div-comment-264763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/jeffdav' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264763">
			March 16, 2005 at 1:02 pm</a>		</div>

		<p>It&#8217;s a lot more than 88 bytes now, especially after you add in the hangers-on (which I didn&#8217;t count). And of course this assumes you don&#8217;t want to leave any address space anyhthing else!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264793">
				<div id="div-comment-264793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://spaces.msn.com/members/msftone/' rel='external nofollow' class='url'>paulr</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264793">
			March 16, 2005 at 3:06 pm</a>		</div>

		<p>merle how many instances of notepad were you able to open? IE is pretty resource intensive especially with all the plugins and core dependencies.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264803">
				<div id="div-comment-264803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264803">
			March 16, 2005 at 4:47 pm</a>		</div>

		<p>3/16/2005 12:44 PM Merle</p>
<p>&gt; Even while browsing, 20 windows is ample for<br />
<br />&gt; me</p>
<p>I agree, even when opening and comparing various results from Google searches, I usually don&#8217;t have 20 IE windows.  (And fortunately I can have 20.  Windows 98 corrupted itself badly after about 5.  4 if OE was open at the same time.)</p>
<p>However, I might have 15 VB6 instances open at the same time.  Open one, make changes that I think are necessary in a source file, open the other 14 to check if anything has obviously been broken or not, then compile them one-by-one.  Of course if the source file needs further changes then I have to close 14 of the VB projects, change the source file in 1, and then open the other 14 again.  For some reason it does seem easier to switch from one to another and look at whatever I need to look at, instead of keeping just 1 open and frequently closing the current one and opening up another just to take another look at the other.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264813">
				<div id="div-comment-264813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Taylor</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264813">
			March 16, 2005 at 5:15 pm</a>		</div>

		<p>What impact do windowless controls have on automated testing tools?</p>
<p>One of the apps our product works with uses a custom GUI library (VxWare or something) and all the GUI testers see it as one big window. You have to ensure everything is pixel perfect during playback or the tests don&#8217;t work because the testing tools can only go by mouse x/y not by window handle or name.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264623">
				<div id="div-comment-264623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.accidentalscientist.com' rel='external nofollow' class='url'>Simon Cooke [exMSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264623">
			March 16, 2005 at 9:22 am</a>		</div>

		<p>Ovidiu:<br />
<br />Then may I suggest that you write your own OS?</p>
<p>That way you can use your machine any way you want, because you&#8217;ll get to define all of the tradeoffs in the way the OS is defined. And there *are* tradeoffs.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264833">
				<div id="div-comment-264833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.accidentalscientist.com' rel='external nofollow' class='url'>Simon Cooke [exMSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264833">
			March 16, 2005 at 11:48 pm</a>		</div>

		<p>David Taylor &#8211; nothing if they support the IAccessibility interface.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-264843">
				<div id="div-comment-264843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rune Moberg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264843">
			March 17, 2005 at 4:25 am</a>		</div>

		<p>I measured 30-35 IE instances on Win2003 loading a simple page like <a target="_new" href="http://di.se/" rel="nofollow">http://di.se/</a> (what one of my customers typically access). That&#8217;s 30 instances of IE before I use any other applications&#8230;</p>
<p>I don&#8217;t quite see why Raymond thinks IE is a good example of good resource management. To me it illustrates clearly why the default desktop heap size of 3MB is ridiculously small!</p>
<p>&#8212;<br />
<br />Rune</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-264853">
				<div id="div-comment-264853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Wilson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-264853">
			March 17, 2005 at 5:07 am</a>		</div>

		<p>Something related to this discussion:<br />
<br /><a target="_new" href="http://www.winterdom.com/dev/ui/wnd.html" rel="nofollow">http://www.winterdom.com/dev/ui/wnd.html</a><br />
<br />This is a guy trying to reverse engineer the internal window structure :) (although its a moot point since Longhorn will change the whole thing no doubt :)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-265033">
				<div id="div-comment-265033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-265033">
			March 17, 2005 at 8:50 am</a>		</div>

		<p>Rune: Now imagine how much worse it would be if IE used actual window handles.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-265183">
				<div id="div-comment-265183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://msmvps.com/greglow' rel='external nofollow' class='url'>Greg Low</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-265183">
			March 17, 2005 at 3:02 pm</a>		</div>

		<p>Hi, one of the things I could never understand (when using windowless controls from VB6) is why none of the bugs with them ever seemed to get fixed. I reported the following one in the beta of VB6 and again at every service pack where I got the opportunity to comment. Yet they never got fixed.</p>
<p>Take two windowless text boxes, drop them on a form. Put code in the &quot;GotFocus&quot; event for each textbox to select all the text in the text box. Run the program. Whichever textbox has the focus when the program starts has its text disappear. If you tab out, it reappears.</p>
<p>This is the sort of thing I can&#8217;t work around easily.</p>
<p>Why didn&#8217;t this sort of thing ever get fixed?</p>
<p>Thanks,</p>
<p>Greg</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-265153">
				<div id="div-comment-265153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.livejournal.com/users/merle_/' rel='external nofollow' class='url'>Merle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-265153">
			March 17, 2005 at 1:11 pm</a>		</div>

		<p>paulr: it did not seem to make much difference what app it was.  IE with all those silly toolbars off, opening &quot;about:blank&quot;, isn&#8217;t bad, and all instances share a large memory footprint.</p>
<p>I remember testing cmd.exe vs notepad.exe, and I could get the same number.  I&#8217;m not *positive* I tested IE up into the 300+ window range, but do know I&#8217;ve opened 100 (for load testing).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-265363">
				<div id="div-comment-265363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nikos</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-265363">
			March 18, 2005 at 5:43 am</a>		</div>

		<p>more on the windowless/windowed saga:</p>
<p>the advantage of windowed everything is that you can subclass/superclass and modify the default behaviour. Can you do that with windowless (?)</p>
<p>not to mention that to get a windowless &quot;window&quot; on a dialog with ATL you need a real host window (CAxWindow). Lame or what?</p>
<p>gawd knows what avalon will do with all that&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-266093">
				<div id="div-comment-266093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jamesatuncw.com/blog' rel='external nofollow' class='url'>James Summerlin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-266093">
			March 21, 2005 at 8:57 pm</a>		</div>

		<p>I cannot believe Raymond Chen is having to tell people the difference between RAM and address space.  But since he is, that leads me to this next question:</p>
<p>Are many of you here to learn, or just bash Windows/Microsoft??</p>
<p>James</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-266173">
				<div id="div-comment-266173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/2005/03/22/400316.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-266173">
			March 22, 2005 at 5:22 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-266543">
				<div id="div-comment-266543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/0001/01/01/400316.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-266543">
			March 22, 2005 at 12:39 pm</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-268043">
				<div id="div-comment-268043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://runesbike.com/' rel='external nofollow' class='url'>Rune Moberg</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-268043">
			March 29, 2005 at 3:57 am</a>		</div>

		<p>Raymond: The question isn&#8217;t really whether IE could be worse or not, but rather if the current approach is sufficient.</p>
<p>Current generation LCD monitors typically offer 1280&#215;1024 resolution and most of us have limited ourselves to two such panels. However, you can buy 1920&#215;1200 panels and with PCI Express you&#8217;ll have workstations capable of any (practical) number of such monitors.</p>
<p>30-35 instances of IE will in setups like that seem like a very limited number of instances. I can already feel the pain with my dual monitor setup.</p>
<p>Clearly a solution needs to be worked out, so my question is: Have MS atleast increased the default desktop heap size for the 64-bit versions of Windows?</p>
<p>Now, the really bad part about this is: I can&#8217;t seem to find any performance counters which gives me an indication of how much desktop heap size Windows has left. Thus I&#8217;m left with &quot;if weird UI problem surfaces &#8212; try increasing desktop heap size and reboot&quot; which is hardly the way to go. :( (A reboot to fix a small UI issue? Surely someone at MS are doing something very wrong?)</p>
<p>&#8212;<br />
<br />Rune (finally back from four weeks of vacation)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-268103">
				<div id="div-comment-268103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://runesbike.com/' rel='external nofollow' class='url'>Rune Moberg</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-268103">
			March 29, 2005 at 5:14 am</a>		</div>

		<p>Oh, and I&#8217;d just like to add: That is 30-35 instances of IE showing a rather simple web page. More elaborate web pages may require additional resources, thus further reducing the number of instances that are possible. Also keep in mind that most users will want to run other applications besides just IE&#8230; (btw Merle: testing IE using about:blank is hardly useful?)</p>
<p>&#8212;<br />
<br />Rune</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-525783">
				<div id="div-comment-525783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2007/07/16/3885472.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-525783">
			July 16, 2007 at 11:48 am</a>		</div>

		<p>A simpler life.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-598583">
				<div id="div-comment-598583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.stevienova.com/2008/02/05/it-and-development-best-practice-just-because-you-can-doesnt-mean-you-should/' rel='external nofollow' class='url'>stevienova.com &raquo; Blog Archive &raquo; IT and Development Best Practice: Just Because You Can Doesn&#8217;t Mean You Should..</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-598583">
			February 5, 2008 at 6:25 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blog.stevienova.com/2008/02/05/it-and-development-best-practice-just-because-you-can-doesnt-mean-you-should/" rel="nofollow">http://blog.stevienova.com/2008/02/05/it-and-development-best-practice-just-because-you-can-doesnt-mean-you-should/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-690383">
				<div id="div-comment-690383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://wallism.wordpress.com/2008/12/07/memory-leak-in-my-net-application/' rel='external nofollow' class='url'>Memory Leak in My .Net Application &laquo; Mark&#8217;s Blog</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050315-00/?p=36183#comment-690383">
			December 6, 2008 at 11:18 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://wallism.wordpress.com/2008/12/07/memory-leak-in-my-net-application/" rel="nofollow">http://wallism.wordpress.com/2008/12/07/memory-leak-in-my-net-application/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>