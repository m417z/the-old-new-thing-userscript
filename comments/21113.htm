<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (59)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-661183">
				<div id="div-comment-661183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661183">
			August 25, 2008 at 10:18 am</a>		</div>

		<p>Wait, aren&#8217;t &quot;Windows 95&quot; and &quot;SCSI drive&quot; one the first &quot;Chen Spells&quot; invokable on The Old New Thing?</p>
<p>IIRC:</p>
<ul>
<li>Windows 95 + SCSI drive: invokes Norman Diamond.</li>
<li>
<p>Vista: invokes Igor Levicki</p>
</li>
<li>
<p>Explorer: invokes Gripes From Everywhere</p>
</li>
<li>
<p>Nitpicker&#8217;s Corner: invokes Nitpickers Lvl 2.</p>
</li>
</ul>
<p>I only remember the common ones because sometimes only a special combination of approximate words can bring up the most powerful ones!</p>
<p>But I hear Raymond has recently found a Stone Of Jordan inside an IUnknown::QueryInterface and can now protect himself against those incantions&#8230;</p>
<p>Time will tell&#8230; :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661193">
				<div id="div-comment-661193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661193">
			August 25, 2008 at 10:27 am</a>		</div>

		<p>And if a rational explanation has to be found, I think that both the words &quot;the&quot; and &quot;a&quot; invoke the dreaded Storm Of Pingbacks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661203">
				<div id="div-comment-661203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661203">
			August 25, 2008 at 10:50 am</a>		</div>

		<p>I don&#8217;t know what&#8217;s wrong with me today but let me at least try to make an on-topic comment:</p>
<p>Imagine the speed boost of putting the swap-file on a RAM drive!!</p>
<p>Ok, I failed.</p>
<p>As as side note, it would be interesting to know the growth of the dev teams since windows 3.1.</p>
<p>I remember seeing the numbers for NT in <a rel="nofollow" target="_new" href="http://www.usenix.org/events/usenix-win2000/invitedtalks/lucovsky_html/Lucovsky.ppt" rel="nofollow">http://www.usenix.org/events/usenix-win2000/invitedtalks/lucovsky_html/Lucovsky.ppt</a> and being amazed at how much both the dev and test teams grew.</p>
<p>Seeing that the &quot;storage device driver&quot; dev team consisted of three people seems to imply relatively small teams in which the spirit must have played a great part.</p>
<p>PS:</p>
<p>And oh, in my last post it was &quot;incantations&quot; not &quot;incantions&quot;, of course.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661213">
				<div id="div-comment-661213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661213">
			August 25, 2008 at 11:00 am</a>		</div>

		<p>You sound pretty defensive, Raymond&#8230; reading Travis&#8217;s original comment, he doesn&#8217;t seem to be implying that the feature was removed from Win95, nor does he seem to be harboring any grudge for its non-implementation.</p>
<p>I think &quot;because resources are finite Win95 was a massive overhaul&quot; very much fits Travis&#8217;s allowance for &quot;a great reason&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661223">
				<div id="div-comment-661223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Schend</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661223">
			August 25, 2008 at 11:01 am</a>		</div>

		<p>Nawak,</p>
<p>Maybe you should finish up your coffee and have a bagel before posting, eh?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661243">
				<div id="div-comment-661243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Walker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661243">
			August 25, 2008 at 12:07 pm</a>		</div>

		<p>Kyle: &nbsp;What are YOU smoking? &nbsp;:-)</p>
<p>Travis&#8217; question included the sentence &quot;I&#8217;m sure there&#8217;s a great reason why ram drive was removed around the time Windows 95 shipped, but being DOS based, why was the ramdrive commant removed?&quot;. &nbsp;How can that NOT lead you to think that Travis was complaining that the Ram drive was removed?</p>
<p>He said &quot;removed&quot; twice, then he landed a triple-lutz by saying &quot;get the axe&quot; in the final sentence. &nbsp;Obviously, Travis thought the feature was removed, killed, ripped out, eviscerated, deleted &#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661283">
				<div id="div-comment-661283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ulric</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661283">
			August 25, 2008 at 1:30 pm</a>		</div>

		<p>No kyle is right, he does sound needlessly defensive. &nbsp;The answer to the question was &#8220;It needed to be re-written&#8221;, but again we need the lecture about priorities and what other features would need to be cut. &nbsp;That&#8217;s typical of how old engineers talk to clients, when that have been working for too long in corporation. &nbsp;These things should all be edited out, it&#8217;s beside the point, you&#8217;re not on trial.</p>
<p>Now the post actually brings more questions to me. &nbsp;What&#8217;s that thing on the Windows Server 2003 CD? &nbsp;Is it a win32 driver, and if so when what it written, why, and by who?</p>
<div class=post>[<i>I pull out that same lecture each time, because it&#8217;s part of the process known as &#8220;writing.&#8221; In addition to giving the answer (&#8220;It needed to be rewritten&#8221;) you have to anticipate the inevitable followup-question: &#8220;So why didn&#8217;t you rewrite it?&#8221; I will try next time to merely incorporate it by reference to make you happy. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661313">
				<div id="div-comment-661313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661313">
			August 25, 2008 at 1:59 pm</a>		</div>

		<p>I think the only RAM drive for Windows currently offered by MS is a sample from the DDK which isn&#8217;t really suitable for daily use. &nbsp;(I would love to be proven wrong.)</p>
<p>So, I&#8217;m hoping some fellow geek in this thread will recommend a RAM drive he or she is happy with, because I haven&#8217;t found one yet. &nbsp;And yes, there are legitimate uses for RAM drives that geeks would care about, like storing all of the things that get written to disk during a compile operation. &nbsp;(There seems to be a surprising amount of room for improvement here over the disk cache.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661333">
				<div id="div-comment-661333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661333">
			August 25, 2008 at 2:15 pm</a>		</div>

		<p>Ulric:</p>
<p>Remember, the &#8216;Tone&#8217; dial on Raymond goes up to &#8216;Thermonuclear&#8217;, so &#8216;defensive&#8217; is actually not that bad.</p>
<p>Personally, I didn&#8217;t think Raymond was defensive. I always like the extra bits of background Raymond put in his posts.</p>
<p>I agree though that the fact that the driver was eventually written raises some interesting questions&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661353">
				<div id="div-comment-661353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661353">
			August 25, 2008 at 2:24 pm</a>		</div>

		<p>[I pull out that same lecture each time, because it&#8217;s part of the process known as &quot;writing.&quot; In addition to giving the answer (&quot;It needed to be rewritten&quot;) you have to anticipate the inevitable followup-question: &quot;So why didn&#8217;t you rewrite it?&quot; I will try next time to merely incorporate it by reference to make you happy. -Raymond]</p>
<p>OK, so Travis asks a legitimate question, and instead of simply responding with the simple answer, you take the opportunity to nip the inevitable &quot;why?&quot; in the bud. &nbsp;Fair enough.</p>
<p>But that &quot;why?&quot; is a very interesting question. &nbsp;Your answer makes perfect sense, and it provides context and rationale to a situation that many of us might miss with our noses buried in code all day. &nbsp;I don&#8217;t think that the &quot;inevitable followup&quot; is a bad thing at all. &nbsp;In fact, I&#8217;d be worried if one of my colleagues were satisfied with the simple explanation.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661373">
				<div id="div-comment-661373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KenW</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661373">
			August 25, 2008 at 2:38 pm</a>		</div>

		<p>@Kyle: &quot;I don&#8217;t think that the &quot;inevitable followup&quot; is a bad thing at all. &nbsp;In fact, I&#8217;d be worried if one of my colleagues were satisfied with the simple explanation.&quot;</p>
<p>Which is why Raymond provided it = &quot;to anticipate the inevitable follow-up question&quot;. &nbsp;By answering it in the initial entry, he hoped to avoid the deluge of questions here. Which he did, of course.</p>
<p>He just failed to correctly anticipate the offensiveness and poor reading skills of a couple of posters who complained about his answering the questions. Like you, of course, in your initial post about his being defensive, and Ulrich for his posts agreeing with you and attacking Raymond.</p>
<p>You should be a little more consistent. Your first post accuses Raymond of being defensive for providing the details behind the decision, and your last agrees that he should provide it because it&#8217;s probably necessary information.</p>
<p>@Raymond: Thanks for the info. I&#8217;d thought about this a couple of times previously, but never knew why it was dropped.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661383">
				<div id="div-comment-661383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661383">
			August 25, 2008 at 2:39 pm</a>		</div>

		<p>[Travis&#8217; question included the sentence &#8220;I&#8217;m sure there&#8217;s a great reason why ram drive was removed around the time Windows 95 shipped, but being DOS based, why was the ramdrive commant removed?&#8221;. &nbsp;How can that NOT lead you to think that Travis was complaining that the Ram drive was removed?]</p>
<p>Removed from Win95, not omitted in general. &nbsp;Raymond asserted that there was an underlying assumption the ramdrive feature was part of Win95 and was then removed prior to RTM. &nbsp;I didn&#8217;t infer this from Travis&#8217;s question. &nbsp;Rather, I read it like &#8220;ramdrive was in WFW 3.11, and not in Win95&#8230; do you know why?&#8221;.</p>
<div class=post>[<i>But that&#8217;s still assuming that everything in WFW 3.11 was included in Windows 95 by default, and then somebody went in and removed it. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661403">
				<div id="div-comment-661403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jefferson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661403">
			August 25, 2008 at 3:06 pm</a>		</div>

		<p>Why would you need a RAM drive given that the filesystem has an in-memory cache that should function very similarly? &nbsp;Granted, I remember copying games to a RAM drive back in like Windows 3.0 and DOS so that they would load a ton faster, but theoretically shouldn&#8217;t the file system cache take care of this?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661413">
				<div id="div-comment-661413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661413">
			August 25, 2008 at 3:35 pm</a>		</div>

		<p>[But that&#8217;s still assuming that everything in WFW 3.11 was included in Windows 95 by default, and then somebody went in and removed it. -Raymond]</p>
<p>I don&#8217;t see that, but I think I know where you&#8217;re coming from now. &nbsp;I deal primarily with technical people, who understand that just becuase Product X v2 was preceded by Product X v1 does NOT imply that v2 is simply v1 plus more code.</p>
<p>External customers and end-users, on the other hand, often don&#8217;t understand that the next version of a product doesn&#8217;t simply consist of a clone of the previous version with new features, and are susceptible to just the sort of assumption you&#8217;re talking about.</p>
<p>So, for a technical person, an answer along the lines of &quot;A lot of the architectural fundamentals of Product X were reworked for v2&quot; would be enough to describe the base motivation, and then the followup would cover such things as resource allocation, schedule pressures, and cost-benefit analysis. &nbsp;For a non-technical person, I can see how that misconception of product evolution could influence the tone of the question.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-kjkhyperion even thread-even depth-1" id="comment-661423">
				<div id="div-comment-661423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KJK::Hyperion</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661423">
			August 25, 2008 at 3:51 pm</a>		</div>

		<p>Jefferson: I keep hearing it, but I never understood the &quot;disk cache&quot; counter-argument. The cache is not addressable. That&#8217;s a no-brainer to me: cache and a RAM disk are not the same thing, because the cache is not addressable, much less in filesystem fashion</p>
<p>Some applications need a writable temporary directory, so you can&#8217;t run them from read-only media: what alternative to a RAM disk you propose for that? what could the developers of said applications have done in the first place to avoid using a temporary file?</p>
<p>What about Windows NT versions up to and including Windows 2000? they really didn&#8217;t like running without a page file. Where do you propose we should put one, when booting from read-only media?</p>
<p>Sometimes I wonder if we all live on the same planet. A RAM disk solves a number of issues that are simply not solvable in any other way</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661433">
				<div id="div-comment-661433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jefferson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661433">
			August 25, 2008 at 3:58 pm</a>		</div>

		<p>@KJK</p>
<p>Sorry, I don&#8217;t understand what you mean. &nbsp;The disk cache is an optimization that the OS uses to speed up disk accesses. &nbsp;Only unlike the RAM drive where the user chose what was fast, with the disk cache, the OS chooses. &nbsp;You should see the exact same benefits.</p>
<p>For a writable temporary directory, you would put it in %TEMP%.</p>
<p>Am I missing something?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661443">
				<div id="div-comment-661443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661443">
			August 25, 2008 at 4:00 pm</a>		</div>

		<p>&quot;Why would you need a RAM drive given that the filesystem has an in-memory cache that should function very similarly?&quot;</p>
<p>Two reasons:</p>
<p>1) With the RAM drive, you are in absolute control over what&#8217;s in the cache. &nbsp;With the cache, you have almost no control over the contents of the cache. &nbsp;Copy a large file using Explorer? &nbsp;Oops, wave goodbye to your carefully constructed cache!</p>
<p>2) The cache can&#8217;t save the world when it comes to writes. &nbsp;Consider the following recent measurements of a certain C++ app&#8217;s warm full-rebuild compile time, all taken with read and write caching enabled (on XP):</p>
<p>150GB Raptor (read/write): 19 seconds</p>
<p>128GB OCZ Core SSD (read/write): 59 seconds(!!!)</p>
<p>SSD (read) + 500GB Hitachi (write): 15 seconds</p>
<p>SSD (read) + RAM drive (write): ??? (need to test)</p>
<p>We&#8217;re not talking about tons of data here either, probably &lt;50MB of writes.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661453">
				<div id="div-comment-661453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661453">
			August 25, 2008 at 4:11 pm</a>		</div>

		<p>[For a writable temporary directory, you would put it in %TEMP%.</p>
<p>Am I missing something? -Jefferson]</p>
<p>Yes&#8230; if the volume is read-only, you can&#8217;t write to %TEMP%, but you can write to a ramdisk. &nbsp;There is no write cache on a volume you can&#8217;t write to.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661463">
				<div id="div-comment-661463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.pretentiousname.com' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661463">
			August 25, 2008 at 4:18 pm</a>		</div>

		<p>CreateFile has flags for opening temp files that (memory permitting) never touch the HDD and are deleted on closure. I would say that covers many of the RAM drive scenarios.</p>
<p>Assuming the filesystem caches well and uses up all spare memory, the only real advantage I can see to RAM disks is that you can choose a particular set of files to be cached no matter what.</p>
<p>(If that assumption isn&#8217;t/wasn&#8217;t true then that is/was a much more important thing for the filesystem people to work on than the RAM disk as it benefits everything.)</p>
<p>I wonder how many situations there are where a RAM disk is useful, and whether it makes more sense for applications to cache the data they need by loading it into memory rather than relying on a RAM filesystem?</p>
<p>One bad thing about RAM drives is you don&#8217;t know which program put the data in them. If a process allocates a huge cache and you find yourself low on memory then you can see what&#8217;s behind it via Task Manager. If a process dumps a load of files into a filesystem with no identifying names then it could be difficult to work out what put it there and why.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661473">
				<div id="div-comment-661473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.pretentiousname.com' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661473">
			August 25, 2008 at 4:20 pm</a>		</div>

		<p>Kyle, it %TEMP% is pointing to a read-only volume then you&#8217;ve got far, far bigger problems than access time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661483">
				<div id="div-comment-661483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661483">
			August 25, 2008 at 4:25 pm</a>		</div>

		<p>Disk caching doesn&#8217;t cache filesystem metadata writes, only file content.</p>
<p>Putting the swapfile on ramdrive is a considerable performance boost as long as windows doesn&#8217;t run out of memory (which can happen faster than you think). Even a &quot;slow&quot; ramdrive are faster than any physical disk.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661503">
				<div id="div-comment-661503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">spoink</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661503">
			August 25, 2008 at 4:37 pm</a>		</div>

		<p>&quot;Putting the swapfile on ramdrive is a considerable performance boost as long as windows doesn&#8217;t run out of memory (which can happen faster than you think).&quot;</p>
<p>I think my head just exploded. &nbsp;Of course it runs out faster than you think; what do you think the point of the pagefile is? &nbsp;What you&#8217;ve just done is the Rube Goldberg version of turning off the pagefile.</p>
<p>And define &quot;considerable performance boost.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661523">
				<div id="div-comment-661523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">MC</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661523">
			August 25, 2008 at 4:46 pm</a>		</div>

		<p>&quot;But that&#8217;s still assuming that everything in WFW 3.11 was included in Windows 95 by default, and then somebody went in and removed it. -Raymond&quot;</p>
<p>For usual customer, the Win95 is &quot;the successor&quot; for WFW 3.11, so the customer simply presumes (you could not strictly beet him for this), that Win95 contains the functions of its predecessor and &quot;something more&quot; (which makes the new version better and more fun than ever before).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661533">
				<div id="div-comment-661533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661533">
			August 25, 2008 at 4:59 pm</a>		</div>

		<p>[I think my head just exploded. &nbsp;Of course it runs out faster than you think; what do you think the point of the pagefile is? &nbsp;What you&#8217;ve just done is the Rube Goldberg version of turning off the pagefile.</p>
<p>And define &quot;considerable performance boost.&quot; -spoink]</p>
<p>Well, if you&#8217;re running a version of Windows that does not support disabling the pagefile in an environment with very constant memory requirements, I guess it provides some performance benefit&#8230;?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661553">
				<div id="div-comment-661553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SRS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661553">
			August 25, 2008 at 5:11 pm</a>		</div>

		<p>&quot;I think my head just exploded&quot; &#8211; don&#8217;t worry, you just configure the system so the swapfile on the ramdrive is paged out to the swapfile on the ramdrive when the memory gets low. Of course, to make this work, you really need two ram drives. In very tight memory conditions, you might even need three ramdrives, with the swapfile configured across all of them (leaving some space to swap to). People often miss this part.</p>
<p>How do I apply for job with the storage team?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661583">
				<div id="div-comment-661583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">MadQ</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661583">
			August 25, 2008 at 6:25 pm</a>		</div>

		<p>A ram drive would be screamingly fast if it were a user-mode driver and used Address Windowing Extensions. I&#8217;m not sure if that is possible, but it would be cool. A few years ago I toyed with the idea of connecting to a second PC using SCSI, and using most the second PC&#8217;s ram as a drive for the primary PC. Talk about a FAST page file ;-) The only reason I never implemented it is because I&#8217;d rather stick a needle into my eye, than write another driver. The only thing more tedious and dull than writing a driver is reading an IBM document.</p>
<p>I really loved the reset-resistant ram drive of the Amiga OS. Reboot after a guru meditation (system crash) and contents of the ram drive were still there as soon as it was mounted.</p>
<p>I also liked that T: (equivalent of %TEMP%) was assigned to the normal ram drive. You didn&#8217;t get all the clutter buildup in the temporary directories. I have come across quite a few Windows applications that assume their files will still be in %TEMP% after a system restart, which makes it difficult to keep %TEMP% clutter free.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661603">
				<div id="div-comment-661603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">MS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661603">
			August 25, 2008 at 6:33 pm</a>		</div>

		<p>Honestly, if you want a RAM drive, go and buy one, don&#8217;t try to store it into memory. &nbsp;There is a very good one with SATA and supports up to 4GB of DDR. &nbsp;Don&#8217;t try to second guess the OS or waste system RAM on it. &nbsp;You&#8217;re more likely to hurt performance with that.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xepol odd alt thread-odd thread-alt depth-1" id="comment-661613">
				<div id="div-comment-661613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Xepol' rel='external nofollow' class='url'>Xepol</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661613">
			August 25, 2008 at 6:44 pm</a>		</div>

		<p>For WIn95, the ram drive would have been more useful to more people than SCSI ever was. &nbsp;SCSI was at best a FRINGE hardware target at that point, certainly more suitable for servers than desktop OSes, particularilly when you take the price of SCSI hardware at the time.</p>
<p>It was a bad choice, and defending it now with full hindsight is equally foolish. It was possible, and probably would not have been the huge ordeal you&#8217;ve hinted it would be. Certainly, if we could write one, MS with access to the OS developers and the DDK authors could have created it that much easier.</p>
<p>As for the &#8220;why was it removed from&#8221;, it was in the previous versions of the OS, so people consider the version it was missing from to be the version it was removed from. Seems straightforward. It was there before, now its gone. You don&#8217;t ask why it was removed from somwhere it continues to be.</p>
<div class=post>[<i>Hm, but if Windows 95 didn&#8217;t have SCSI support, Norman Diamond would have had&nbsp;to find something else to complain about! (I still suspect that more people would have shot themselves in the foot with a RAM drive than used it productively.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661623">
				<div id="div-comment-661623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Doug</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661623">
			August 25, 2008 at 6:47 pm</a>		</div>

		<p>I kind of think there should be a RAM drive or loopback drive of some sort. It doesn&#8217;t necessarily need to be exposed to end users, but as a developer, I do have a need for an arbitrarily-sized block device that I can muck around with.</p>
<p>Quick point of clarification. There are two kinds of &quot;RAM&quot; that you can use for a &quot;RAM drive&quot; &#8212; non-paged and paged. If you used non-paged memory, the data on the RAM disk is always in actual RAM, so you&#8217;re increasing memory pressure by forcing other data out to swap (you&#8217;re telling the OS that the data on the RAM disk must be immediately accessible no matter how infrequently it is used). This might be useful for real-time scenarios, but for the best performance of the overall machine, it is usually a bad idea. The OS usually does a pretty good job of keeping the most frequently accessed data in RAM and kicking out stuff that hasn&#8217;t been used for a while, and by creating a non-paged RAM drive, you&#8217;re making the RAM unavailable to any other program in the OS, regardless of how rarely the RAM drive is used or how frequently the other program&#8217;s data is used. The alternative is to use paged memory, which allows the OS to kick data from the RAM drive to the page file as needed if the data on the RAM drive hasn&#8217;t been used for a while. This probably doesn&#8217;t provide as much of a performance benefit for the data on the RAM drive, but it does provide the behavior benefits of a RAM drive without as much potential waste. A possible third alternative is to use a file on disk to back &nbsp;the &quot;RAM&quot; drive, which is essentially the same as using paged memory in terms of performance (the difference is that the memory is &quot;backed&quot; by a file under your control instead of the swap file). This opens up some additional nice possibilities in terms of behavior. Unix has this, and it&#8217;s called the loopback file system, and it is really useful.</p>
<p>So why would I want a RAM disk at all, especially since it probably doesn&#8217;t get me much in terms of performance (unless I&#8217;m using non-paged memory, in which case my performance gains potentially come at a cost to the rest of the system)?</p>
<ul>
<li>Easy way to play around with block devices, i.e. look at a corrupted disk image (floppy, hard disk, USB drive) when trying to recover data without risking additional damage to the original. (Even better if the image can be mounted directly from a file.)</li>
<li>
<p>Easy way to create a bunch of temp files and be confident that they&#8217;ll be automatically deleted at reboot, or that they&#8217;ll never exceed a limit on disk usage. Especially useful when you don&#8217;t control the process that creates the temp files.</p>
</li>
<li>
<p>Use your imagination.</p>
</li>
</ul>
<p>So basically, I&#8217;m wishing for a loopback device. Usable as a RAM drive, a testbed, a staging area for creation of media, a way to create floppy disk boot drives for Virtual PC, a way to read from ISO images without having to burn them first (or install some crazy ISO mount tool that comes with AdWare and is associated with breaking copy-protection).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661633">
				<div id="div-comment-661633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661633">
			August 25, 2008 at 7:17 pm</a>		</div>

		<p>&quot;Copy a large file using Explorer? &nbsp;Oops, wave goodbye to your carefully constructed cache!&quot;</p>
<p>It&#8217;s true that you don&#8217;t have control over what is in the cache, but the OS has, and generally this scenario is not sufficient to pollute the cache. OS caches often use a bypass setting so that big transfers are not cached (by the OS! The disk may well cache them)</p>
<p>About windows 95 and SCSI: I remember buying an SCSI card and an SCSI CD burner for my windows 95 PC because it was almost the only way to avoid making coasters regularly.</p>
<p>So SCSI was not THAT fringe.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661643">
				<div id="div-comment-661643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661643">
			August 25, 2008 at 7:28 pm</a>		</div>

		<p>&quot;generally this scenario is not sufficient to pollute the cache&quot;</p>
<p>That would make tons of sense, but it&#8217;s absolutely not the case for Windows 2000 or XP. &nbsp;This has been my biggest annoyance with the disk cache in Windows. &nbsp;And no, I&#8217;m not confusing the OS-level disk cache with the cache that resides within the drive itself.</p>
<p>It&#8217;s VERY easy to observe: start some programs repeatedly, notice your disk is quiet and startup time quick on the warm starts. &nbsp;Now copy some large files. &nbsp;Start the same programs again. &nbsp;Slow, and lots of noise from the disk. &nbsp;You&#8217;re pretty much back to cold start. &nbsp;The effect is amplified when programs are optimized heavily for warm start. &nbsp;(Gee. &nbsp;Who would do that?)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661673">
				<div id="div-comment-661673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bratch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661673">
			August 25, 2008 at 7:56 pm</a>		</div>

		<p>[&#8230; There is a very good one with SATA and supports up to 4GB of DDR &#8230;]</p>
<p>This is what I was thinking, you wouldn&#8217;t need it OS supported if you use something like the Gigabyte GC-RAMDISK i-RAM, 4GB, SATA 1.5GB/s. &nbsp;Be better if it supported more/better RAM and SATA 3GB/s. &nbsp;Data is transfered through the SATA connector, PCI is for power. &nbsp;</p>
<p>Then again, if you had a 64 bit OS and lots of RAM, like 16GB or so, why couldn&#8217;t you just use some of that as a RAMDISK?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661293">
				<div id="div-comment-661293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Frymaster</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661293">
			August 25, 2008 at 1:34 pm</a>		</div>

		<p>A couple of us had this discussion with someone on IRC the other day.</p>
<p>His premise that was since gigabit ethernet can be faster than disk access, by creating a RAM drive (on XP or vista) you could get faster downloads in the case when your gigabit link was maxed out.</p>
<p>Ignoring the point that on his home network, nothing could _generate_ traffic faster than his drive could write, and that was likely to go double for net traffic (even if he had gigabit internet, which he doesn&#8217;t), we tried to hammer in the fact that in that situation you&#8217;re better off leaving the RAM available to the OS so it can manage disk caching directly; that way it works on ALL file access and not just that to your ramdisk (which you have to remember to copy to permanent store anyway), and you also get to use the RAM for other things when needed*</p>
<p>Not sure we got through to him, though</p>
<p>*Assuming you manage to get a ramdrive that uses physical memory directly anyway and isn&#8217;t just using its own virtual memory, which would in intermittent-burst scenarios result in at best no difference.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661323">
				<div id="div-comment-661323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Duke of New York</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661323">
			August 25, 2008 at 2:09 pm</a>		</div>

		<p>I understand Raymond&#8217;s frustration, since Travis&#8217;s question seems to repeat the tired myth that Windows 95 was a DOS hack rather than the complete operating system it was. Come on folks, it&#8217;s been 13 years. The truth is out there.</p>
<p>I can think of a couple other reasons to leave the RAM drive out of Windows:</p>
<p>1. It&#8217;s a support headache. An unsuspecting user saves a document on the RAM drive, then shuts down the computer (or it crashes). *ring-ring* &quot;Windows lost my document!&quot;</p>
<p>2. Hard disk sizes took off. Microsoft also &quot;took out&quot; compressed drive support between DOS 6 and Windows 95, even after they got around the Stac patent problem. Hard disks had increased in size to the point that it wasn&#8217;t worth the trouble.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661693">
				<div id="div-comment-661693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike Swaim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661693">
			August 25, 2008 at 10:38 pm</a>		</div>

		<p>Actually, some fairly common Sound Blaster cards had SCSI interfaces. The DOS drivers sucked eggs, but under Win95, I could reliably use my sound card to drive a SCSI drive. (I also had a dedicated card, but it could only do 2 of the folowing 3, 8 bit SCSI, 16 bit SCSI, and external, and I had all 3.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661703">
				<div id="div-comment-661703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Duke of New York</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661703">
			August 25, 2008 at 10:56 pm</a>		</div>

		<p>Another reason would be that Microsoft was under the gun at the time to prove that it could deliver an OS without IBM. Let&#8217;s see&#8230; secure the future of the company, or spend time on a low-demand feature that could be offloaded to third parties? Tough choice.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661713">
				<div id="div-comment-661713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661713">
			August 26, 2008 at 12:08 am</a>		</div>

		<blockquote><p>
  I think the only RAM drive for Windows currently offered by MS is a</p>
<p>  sample from the DDK which isn&#8217;t really suitable for daily use. &nbsp;</p>
<p>  (I would love to be proven wrong.)
</p></blockquote>
<p>No, you&#8217;re right, it&#8217;s not suited for daily (or any) use. &nbsp;It&#8217;s meant as an illustrative example/skeleton for developers, not as production code.</p>
<blockquote><p>
  So, I&#8217;m hoping some fellow geek in this thread will recommend a RAM drive</p>
<p>  he or she is happy with, because I haven&#8217;t found one yet. &nbsp;
</p></blockquote>
<p>QSoft RAMdisk, <a rel="nofollow" target="_new" href="http://www.ramdisk.tk/" rel="nofollow">http://www.ramdisk.tk/</a>. &nbsp;I&#8217;ve tried several RAM drives and this one is the only one that&#8217;s been consistently reliable and stable. &nbsp;Unfortunately it&#8217;s not free any more, but it&#8217;s worth the small registration fee.</p>
<blockquote><p>
  And yes, there are legitimate uses for RAM drives that geeks would care</p>
<p>  about, like storing all of the things that get written to disk during a</p>
<p>  compile operation.
</p></blockquote>
<p>I point $TEMP at it, as well as the various registry paths that Windows uses to constantly scribble data to the hard drive (e.g. browser cache, temp files, etc). &nbsp;It&#8217;s amazing how much junk is caught up in the RAM drive at the end of each day.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661723">
				<div id="div-comment-661723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661723">
			August 26, 2008 at 12:15 am</a>		</div>

		<blockquote><p>
  Kyle, it %TEMP% is pointing to a read-only volume then you&#8217;ve got far, far</p>
<p>  bigger problems than access time.
</p></blockquote>
<p>I&#8217;ve had NT4 do that, I was wondering why the machine was so incredibly sluggish and realised that it was trying to write to a CD (not CDRW, just a standard CD) drive. &nbsp;At some point during the last time the machine was running it had directed a pile of paths to the CD drive). &nbsp;Amazingly, it still worked, it was just painfully slow.</p>
<p>(I&#8217;ve also had NT4 eat its own boot sector (fixed with a sector editor), trash partitions, and make the monitor on the computer spin 360 degrees and vomit green slime :-).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661733">
				<div id="div-comment-661733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Puckdropper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661733">
			August 26, 2008 at 12:51 am</a>		</div>

		<p>Dave, you must be in to robotics. :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661743">
				<div id="div-comment-661743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stephen Jones</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661743">
			August 26, 2008 at 1:46 am</a>		</div>

		<p>I got my first computer a couple of months after Win 95 came out. I was advised to double the installed memory from 8MB to 16MB. Some time after Win 98 came out I bought my second computer. It came with 32MB and after a month I doubled it to 64MB.</p>
<p>What consumers would ever have had the memory to make use of a RAM drive.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661753">
				<div id="div-comment-661753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661753">
			August 26, 2008 at 2:42 am</a>		</div>

		<p>Dave: Thanks &#8211; I&#8217;ll give that one a try!</p>
<p>Stephen: Before Windows came along, it wasn&#8217;t so easy to make use of memory beyond 640KB. &nbsp;I used to have a full-length ISA card with tons of chips plugged into it that totaled something like 2 or 4MB maybe? &nbsp;And there was little to do with it other than use it for a RAM drive. &nbsp;A few games could make use of it, but not very many.</p>
<p>Nowadays RAM is dirt cheap. &nbsp;You can get 8GB worth of 2GB sticks for around $150 from Newegg right now. &nbsp;That&#8217;s easily enough to have a fairly beefy RAM drive with plenty left over&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661783">
				<div id="div-comment-661783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">NB</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661783">
			August 26, 2008 at 3:10 am</a>		</div>

		<p>I have found that Microsoft Reader (for LIT files) works much faster if you map &quot;My Library&quot; via a junction to a RAM drive.</p>
<p>For some reason MS Reader always writes to the disk when you change the page and this also seems to be a non-cached write since it causes a noticeable disk access and delay every time.</p>
<p>With a RAM drive the problem goes away.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661803">
				<div id="div-comment-661803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Darren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661803">
			August 26, 2008 at 4:14 am</a>		</div>

		<p>RAM Drive? &nbsp;Foo! &nbsp;I&#8217;d take GrabFS (the Screenshot file system) over a RAM drive any day.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-661813">
				<div id="div-comment-661813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661813">
			August 26, 2008 at 4:48 am</a>		</div>

		<p>ReadyBoost is of course an example of how to relieve the disk cache by moving data to faster (well, for reads anyway) media.</p>
<p>I used to have a Windows 95 PC running a SCSI scanner. (We now use a network scanner/printer device.)</p>
<p>Windows Explorer&#8217;s use of the disk cache to copy files can be worked around by using eseutil /y (if you have it) although I can&#8217;t find the document that suggested that.</p>
<p>If you&#8217;re on Windows XP then there&#8217;s actually an (unsupported) Microsoft driver that will mount ISO images: <a rel="nofollow" target="_new" href="http://download.microsoft.com/download/7/b/6/7b6abd84-7841-4978-96f5-bd58df02efa2/winxpvirtualcdcontrolpanel_21.exe" rel="nofollow">http://download.microsoft.com/download/7/b/6/7b6abd84-7841-4978-96f5-bd58df02efa2/winxpvirtualcdcontrolpanel_21.exe</a></p>
<blockquote><p>
  (I also had a dedicated card, but it could only do 2 of the folowing 3, 8 bit SCSI, 16 bit SCSI, and external, and I had all 3.)
</p></blockquote>
<p>That&#8217;s because cables only have two ends. Use 16 to 8 bit adapters for your 8 bit devices.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-661833">
				<div id="div-comment-661833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-661833">
			August 26, 2008 at 8:57 am</a>		</div>

		<p>Windows PE based on Server 2008 (maybe Vista too, but I haven&#8217;t tried it) doesn&#8217;t need a RAM disk the way earlier PE&#8217;s did. &nbsp;PE/Srv2008 has a filesystem filter driver that allows writes to read-only filesystems/media. &nbsp;For example, it lets you &quot;write&quot; to a DVD. &nbsp;This means that %TEMP% is now writable by default on PE. &nbsp;I think this filesystem filter first made an appearance in Windows XP Embedded.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662073">
				<div id="div-comment-662073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">spamalot</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662073">
			August 26, 2008 at 1:38 pm</a>		</div>

		<p>any reason you keep the spam pingback (first comment)?</p>
<div class=post>[<i>Because I missed it when I returned from vacation and had to wade through hundreds of comments. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-662233">
				<div id="div-comment-662233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">zzz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662233">
			August 26, 2008 at 11:38 pm</a>		</div>

		<blockquote><p>
  CreateFile has flags for opening temp files that (memory permitting) never touch the HDD and are deleted on closure. I would say that covers many of the RAM drive scenarios.
</p></blockquote>
<p>Never say never. Either those flags don&#8217;t work or more likely there is some very strict limit on &quot;memory permitting&quot;.</p>
<p>I recently tested that and with 2 GB of free memory and a 300 MB file created with those two flags, it all went straight to disk. As disk must be avoided in this particular scenario I have another way to do this it&#8217;s just a pain in the * learning curve in order to implement.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662243">
				<div id="div-comment-662243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">zzz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662243">
			August 26, 2008 at 11:43 pm</a>		</div>

		<p>ramdisks: </p>
<p>I would LOVE TO see a benchmark of VS2008 compiling a medium size ~(1000 .cpp 1000 .h files) project with /CLR switch where one was the standard config and another used ramdisk for all the IO. </p>
<p>There is absolute ton of UNNECESSARY disk IO during this type of compilation when the whole project (20 MB) should fit in memory (4 GB) and all you want is the resulting single .exe on the god damn DISK. Why is it putting all temporary crap on the disk during compilation?</p>
<p><font color=red>(death threat deleted)</font></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding even thread-even depth-1" id="comment-662283">
				<div id="div-comment-662283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662283">
			August 27, 2008 at 3:51 am</a>		</div>

		<p>&quot;Why is it putting all temporary crap on the disk during compilation?&quot;</p>
<p>I thought that was obvious&#8230; to avoid compiling every single .cpp files the next time you hit &quot;Compile&quot; and you&#8217;ve only modified one file. Pretty much every compiler on the planet does the same&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662353">
				<div id="div-comment-662353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ulric</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662353">
			August 27, 2008 at 10:37 am</a>		</div>

		<blockquote><p>
  you have to anticipate the inevitable followup-question: &quot;So why didn&#8217;t you rewrite it?&quot;
</p></blockquote>
<p>one doesn&#8217;t have to anticipate and reply to that question. It worse to answer it with the classic &#8216;corporate engineer apology&#8217; (explanation of priorities/threats of which feature would have to be cut/blame lack of resources). We also interact with a large user base on a daily basis. &nbsp;All the technical stuff is interesting discussion points, by experience I&#8217;d just leave out the apologies. &nbsp;</p>
<blockquote><p>
  I will try next time to merely incorporate it by reference to make you happy
</p></blockquote>
<p>No, no, no matter. &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-662443">
				<div id="div-comment-662443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Walker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662443">
			August 27, 2008 at 1:47 pm</a>		</div>

		<p>Writing to a read-only DVD is a neat trick.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662483">
				<div id="div-comment-662483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nico</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662483">
			August 27, 2008 at 3:31 pm</a>		</div>

		<p>Hu ?</p>
<p>No ramdrive in Windows 95 ?</p>
<p>It is strange because I remember using RAMDRIVE.sys.</p>
<p>And it seem that i am not alone:</p>
<p><a rel="nofollow" target="_new" href="http://www.lagmonster.org/docs/DOS7/v-ramdrive-sys.html" rel="nofollow">http://www.lagmonster.org/docs/DOS7/v-ramdrive-sys.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-662563">
				<div id="div-comment-662563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662563">
			August 27, 2008 at 7:55 pm</a>		</div>

		<p>Has someone mentioned Vista? :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662703">
				<div id="div-comment-662703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">me</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662703">
			August 28, 2008 at 4:43 am</a>		</div>

		<p>It is strange because I remember using RAMDRIVE.sys.</p>
<p>From the article:</p>
<p>(Well, okay, you could use the old 16-bit RAM drive, but then you&#8217;d be going through the real-mode mapper, at which point your performance would go down the tubes.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-662713">
				<div id="div-comment-662713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Michiel</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-662713">
			August 28, 2008 at 5:09 am</a>		</div>

		<p>Can&#8217;t believe that nobody mentioned it yet. Linux actually has a better solution than a RAM disk. It allows you to have files in the file cache without a backing store. There&#8217;s still a quota so you don&#8217;t eat up all RAM. But this is a quotum, not a reservation. Eg. a 1GB RAM disk takes away 1GB of RAM from the file cache. A 1GB quotum on non-backed files, 50% used only takes away 512MB from the file cache.</p>
<p>But I&#8217;d like the PAE idea. It could allow the full use of 4GB RAM on a 32 bit machine. Many existing applications would need no change to use a 512MB ramdisk.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-663233">
				<div id="div-comment-663233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-663233">
			August 29, 2008 at 11:46 pm</a>		</div>

		<blockquote><p>
  I recently tested that and with 2 GB of free memory and a 300 MB file created with those two flags, it all</p>
<p>  went straight to disk. As disk must be avoided in this particular scenario I have another way to do this</p>
<p>  it&#8217;s just a pain in the * learning curve in order to implement.
</p></blockquote>
<p>You&#8217;re running the wrong test, if you try it with lots of short-lived small files they shouldn&#8217;t be written to disk. &nbsp;Note that you&#8217;ll see them with a &#8216;dir&#8217;, but that doesn&#8217;t necessarily mean that they&#8217;ve been committed to disk from the in-memory cache.</p>
<p>(I don&#8217;t know what the exact heuristics are for handling these files and they probably change over time as the FS code gets tuned, but the contract seems to be that genuinely temporary files, short-lived scratch files and the like, are less likely to get written to disk than ones without the flag set. &nbsp;A 300MB file wouldn&#8217;t fit the bill for &quot;short-lived scratch file&quot;).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-663243">
				<div id="div-comment-663243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-663243">
			August 29, 2008 at 11:49 pm</a>		</div>

		<blockquote><p>
  &quot;Why is it putting all temporary crap on the disk during compilation?&quot;</p>
<p>  I thought that was obvious&#8230; to avoid compiling every single .cpp files the next time you hit</p>
<p>  &quot;Compile&quot; and you&#8217;ve only modified one file. Pretty much every compiler on the planet does the same&#8230;
</p></blockquote>
<p>No, you&#8217;re thinking of the wrong thing. &nbsp;VC++ is a command-line compiler, VS is the GUI front-end. &nbsp;When VS builds an object file from source it simply passes the build command to the multi-pass command-line back end. &nbsp;Since it&#8217;s multi-pass each pass scribbles its output to disk, to be deleted again almost immediately when the next pass reads it back in.</p>
<p>This is why you need a RAM drive.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-663253">
				<div id="div-comment-663253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-663253">
			August 29, 2008 at 11:51 pm</a>		</div>

		<blockquote><p>
  Writing to a read-only DVD is a neat trick.
</p></blockquote>
<p>Quite possible under Unix with UnionFS, and going from John&#8217;s post recent copies of Windows PE as well.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-683693">
				<div id="div-comment-683693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2008/11/13/9064839.aspx' rel='external nofollow' class='url'>The Old New Thing : Why is the maximum boot.ini delay 11 million seconds?</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080825-00/?p=21113#comment-683693">
			November 13, 2008 at 3:03 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2008/11/13/9064839.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2008/11/13/9064839.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>