<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (4)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-938263">
				<div id="div-comment-938263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110930-00/?p=9513#comment-938263">
			September 30, 2011 at 7:29 am</a>		</div>

		<p>There is another use for a heap besides reducing memory overhead. If you have a set of related allocations which should be freed together (for instance, you created a large tree data structure and want to destroy it), you can create a separate heap for it and just drop the heap at the end, instead of manually freeing each allocation. I just took a quick look, and HeapDestroy explicitly allows this use case (see the documentation for it on MSDN, it says you do not need to HeapFree each allocation within the heap before destroying it).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-938283">
				<div id="div-comment-938283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110930-00/?p=9513#comment-938283">
			September 30, 2011 at 7:58 am</a>		</div>

		<p>Doug Lea&#39;s malloc (<a rel="nofollow" target="_new" href="http://g.oswego.edu/dl/html/malloc.html" rel="nofollow">g.oswego.edu/&#8230;/malloc.html</a>) switches over to using mmap/VirtualAlloc at 256 KB by default.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-938333">
				<div id="div-comment-938333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110930-00/?p=9513#comment-938333">
			September 30, 2011 at 12:49 pm</a>		</div>

		<p>Cesar: Yes, it&#39;s called an Arena Allocator. We used it to accumulate buffers, and then destroy them all at once when they&#39;re committed to storage. It also reduces fragmentation in the regular heap&#8230; At the price of slightly increasing address-space fragmentation (important in 32-bit, less so in 64-bit), and confusing leak-tracking software to no end.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-938393">
				<div id="div-comment-938393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jolyon Smith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110930-00/?p=9513#comment-938393">
			October 2, 2011 at 4:35 pm</a>		</div>

		<p>I think you missed the single biggest mis-statement in the original question/post&#8230;</p>
<p>&quot;I need to understand&#8230;&quot; &nbsp;should of course have been &quot;I want/would like to understand&#8230;&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>