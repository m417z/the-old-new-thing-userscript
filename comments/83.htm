<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (24)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1147373">
				<div id="div-comment-1147373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147373">
			September 3, 2014 at 7:45 am</a>		</div>

		<p>I use RoboCopy with the FFT switch to cope with this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147383">
				<div id="div-comment-1147383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Xv8</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147383">
			September 3, 2014 at 8:08 am</a>		</div>

		<p>To say time handling in the computer world is a mess is like saying Hitler was a bit naughty.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1147393">
				<div id="div-comment-1147393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147393">
			September 3, 2014 at 8:14 am</a>		</div>

		<p>I had a very similar problem with an rsync script of mine. &nbsp;I use rsync to synchronize files between an HFS+ volume and a FAT volume (an SD card), and rsync by default skips copying files if the file size and timestamp match between the source and destination.</p>
<p>Because FAT has a 2-second timestamp resolution, I had to add the &#8211;modify-window=1 option to tell rsync that &quot;if timestamps differ by up to 1 second, consider them to be equal&quot; in order for half of all files to not be copied again each time the script ran.</p>
<p>I honestly don&#39;t remember why &#8211;modify-window=1 is sufficient, when you&#39;d think it should be &#8211;modify-window=2, but the documentation recommends using &#8211;modify-window=1 when copying to or from FAT volumes, and that&#39;s worked just fine for me.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147403">
				<div id="div-comment-1147403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Xv8</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147403">
			September 3, 2014 at 8:17 am</a>		</div>

		<p>@Adam Rosenfield: +/-1s is enough if your filesystem driver rounds to nearest. 2s is needed if your driver rounds up or down.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-1147413">
				<div id="div-comment-1147413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147413">
			September 3, 2014 at 8:21 am</a>		</div>

		<p>I feel obliged to point out that for recurring backups, /M is a better switch to use than /D.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147423">
				<div id="div-comment-1147423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Piotr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147423">
			September 3, 2014 at 10:32 am</a>		</div>

		<p>Can someone explain the reasoning behind the 2 second accuracy? Is it just about saving one bit or am I missing something?</p>
<div class="post">[<em>Look at the DOS time format. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-hikari even thread-even depth-1" id="comment-1147433">
				<div id="div-comment-1147433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Chris+Crowther' rel='external nofollow' class='url'>Chris Crowther</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147433">
			September 3, 2014 at 11:23 am</a>		</div>

		<p>Piotr: DOS times were packed 16-bit values; the seconds value only has bits 0 to 4 to encode the seconds. &nbsp;You can&#39;t count up to 59 with only 5 bits unless you half the resolution.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147443">
				<div id="div-comment-1147443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Myria</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147443">
			September 3, 2014 at 12:15 pm</a>		</div>

		<p>The last-accessed time on FAT has a resolution of 86400 seconds, so it&#39;s more like the last-accessed date. &nbsp;I don&#39;t know what it is for exFAT, though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1147453">
				<div id="div-comment-1147453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A regular viewer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147453">
			September 3, 2014 at 12:42 pm</a>		</div>

		<p>This is known, and many a batch file has worked with/around it. A step back. On the larger picture, does MS on principle work on putting up a method of function straightaway, with unquestionably (trolls, shut up. I know what I am writing on Raymond&#39;s blog) good intentions into its products? Or is there a back and forth amongst the larger user base within MS and their partners, that comes up with these functionalities? If the latter, on average, what is the time frame between Option A &#8212;&#8211;&gt; Usage &#8212;&#8211;&gt; Feedback &#8212;&#8211;&gt; Option B &#8212;&#8211;&gt; Usage &#8212;&#8211;&gt; Feedback &#8212;&#8211;&gt; Revert &#8212;&#8211;&gt; Option A?</p>
<p>No specific purpose. Just curious. Thank you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147463">
				<div id="div-comment-1147463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scott</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147463">
			September 3, 2014 at 1:19 pm</a>		</div>

		<p>Stating the obvious for people as confused as I was: &nbsp;The rounding can result in what appears to be a two second jump, but is really less than two seconds. &nbsp;If the timestamp is &quot;0 min, 02 sec, 001 ms&quot;, since it can&#39;t go back in time when the FAT timestamp is created, it needs to update to &quot;0 min, 04 sec&quot;.</p>
<p>It&#39;s a jump of less than two seconds technically, but since many tools only show the timestamps in seconds, it&#39;ll appear to the user to be a jump of two seconds.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1147473">
				<div id="div-comment-1147473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">poizan42</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147473">
			September 3, 2014 at 1:28 pm</a>		</div>

		<p>If only there was some way to attach additional metadata to files in FAT without breaking backwards compatibility. Then you could use the same trick to support long filenames as well. Oh well, we are probably going to be stuck with 8.3 filenames forever as well.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147483">
				<div id="div-comment-1147483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Henry Skoglund</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147483">
			September 3, 2014 at 2:16 pm</a>		</div>

		<p>Also (perhaps slightly offtopic) is there any way to make Windows behave like Ubuntu or OSX when copying directories?</p>
<p>I&#39;m thinking of when I mount an NTFS-formatted USB-harddrive and makes a copy of say C:Program Files, if I do it in Windows 8.1 (or earlier versions) the subdirectories will be timestamped with the current date/time, but if I do the same copy operation in Ubuntu or OSX (using the NTFS Paragon drivers) the date and time of the subdirectories will be set to the same as the original.</p>
<p>(Obviously Windows can do this because normal files are set the same timestamp as the originals, it&#39;s just the copied subdirectories themselves that exhibit this syndrome.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1147513">
				<div id="div-comment-1147513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">IdahoJacket</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147513">
			September 3, 2014 at 7:39 pm</a>		</div>

		<p>@Henry Skoglund</p>
<p>Robocopy /DCOPY:T</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147533">
				<div id="div-comment-1147533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">smf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147533">
			September 4, 2014 at 1:29 am</a>		</div>

		<p>@poizan42</p>
<p>&quot;If only there was some way to attach additional metadata to files in FAT without breaking backwards compatibility. Then you could use the same trick to support long filenames as well. Oh well, we are probably going to be stuck with 8.3 filenames forever as well.&quot;</p>
<p>There are issues with that, but your sarcasm puts me off discussing them.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-entegygmail-com even thread-even depth-1" id="comment-1147583">
				<div id="div-comment-1147583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Entegy' rel='external nofollow' class='url'>Entegy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147583">
			September 4, 2014 at 7:31 am</a>		</div>

		<p>@poizan42 Aren&#39;t 8.3 file names off by default in modern versions of Windows now?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mngoldeneagle odd alt thread-odd thread-alt depth-1" id="comment-1147603">
				<div id="div-comment-1147603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MNGoldenEagle' rel='external nofollow' class='url'>MNGoldenEagle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147603">
			September 4, 2014 at 7:45 am</a>		</div>

		<p>@Entegy: No, 8.3 filenames are still generated by default in Windows 8.1. &nbsp;You can specify in FORMAT to disable this feature though, or do so after the fact using FSUTIL.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-iboyd even thread-even depth-1" id="comment-1147673">
				<div id="div-comment-1147673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IanBoyd' rel='external nofollow' class='url'>IanBoyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147673">
			September 4, 2014 at 8:43 am</a>		</div>

		<p>DOS File Time (16-bits)</p>
<p>&#8211; bits 0–4: Second divided by 2</p>
<p>&#8211; bits 5–10: Minute (0–59)</p>
<p>&#8211; bits 11–15: Hour (0–23 on a 24-hour clock)</p>
<p>DOS File Date format (16-bits):</p>
<p>&#8211; bits 0–4: Day of the month (1–31)</p>
<p>&#8211; bits 5–8: Month (1 = January, 2 = February, etc.)</p>
<p>&#8211; bits 9-15: Year offset from 1980 (add 1980 to get actual year)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147543">
				<div id="div-comment-1147543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147543">
			September 4, 2014 at 5:05 am</a>		</div>

		<p>&gt;If only there was some way to attach additional metadata to files in FAT</p>
<p>Sure, but why bother enhancing an obsolete file system?</p>
<p>(Particularly since FAT is most useful today as a least-common-denominator interchange format, so *all* implementations will need to change before the enhancement is really worthwhile)</p>
<p>Also, look at the mess that &#39;a file has two names&#39; got us into: &nbsp;&#39;del *.foo&#39; deleting whatever.foobar, for example.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mngoldeneagle even thread-even depth-1" id="comment-1147823">
				<div id="div-comment-1147823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MNGoldenEagle' rel='external nofollow' class='url'>MNGoldenEagle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147823">
			September 4, 2014 at 1:38 pm</a>		</div>

		<p>@IanBoyd: Welp, we&#39;re screwed in the year 2107 then.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1147893">
				<div id="div-comment-1147893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ancient_Hacker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147893">
			September 4, 2014 at 3:01 pm</a>		</div>

		<p>But Microsoft has such a fine history of making time go backwards.</p>
<p>If you look into the tick interrupt code in DOS, it checks to see if midnight has just gone by, and if so, it &quot;fixes up&quot; the accumulated time error by subtracting 50 or so milliseconds from the time.</p>
<p>This tripped up some code of mine that made the rash assumption that time always went forwards. &nbsp;It got stuck trying to control tasks that had started in the future. &nbsp;Never assume!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1147953">
				<div id="div-comment-1147953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Justa Typer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1147953">
			September 4, 2014 at 6:20 pm</a>		</div>

		<p>@Ancient_Hacker &#8211; that&#39;s what I love about the PC world&#8230; opportunities abound! &nbsp;If you figured out how to control tasks in the future, you&#39;d be rich! </p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1148153">
				<div id="div-comment-1148153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ErikF</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1148153">
			September 5, 2014 at 3:30 pm</a>		</div>

		<p>@Ancient_Hacker: Your programs have to worry about time going backwards once a year anyways (for many regions anyways; this does not include NTP negative time offsets), so it&#39;s not just Microsoft that causes this :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1148473">
				<div id="div-comment-1148473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stefan Kanthak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1148473">
			September 8, 2014 at 8:13 am</a>		</div>

		<p>&quot;And even after the file is copied, the timestamp is not stable. The timestamp changes depending on the time zone employed by the computer that accesses the drive.&quot;</p>
<p>Since FAT timestamps are in local time this is wrong.</p>
<p>Only filesystems where timestamps are not in local time show this behaviour, notably NTFS.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1149423">
				<div id="div-comment-1149423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140903-00/?p=83#comment-1149423">
			September 9, 2014 at 3:13 pm</a>		</div>

		<p>Stefan Kanthak: A FAT timestamp will always display as the same time in Explorer, but will be a different FILETIME value in different time zones. An NTFS timestamp will always be the same FILETIME, but will display differently in Explorer depending on your time zone offset.</p>
<p>The stability that Raymond is referring to is that the FILETIME always stays the same, allowing xcopy to work as intended.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>