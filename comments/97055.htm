<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (6)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1309996">
				<div id="div-comment-1309996" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1309996">
			September 20, 2017 at 9:38 am</a>		</div>

		<p>Suddenly curious whether RestoreDC(0) does nothing or something surprising.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1310006">
				<div id="div-comment-1310006" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1310006">
			September 20, 2017 at 9:48 am</a>		</div>

		<p>My completely unfounded assumption would be that it does nothing, but there&#8217;s an array of various backward compatibility shims to handle poorly-written programs that expect it to do nothing in subtly different ways.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3 parent" id="comment-1310016">
				<div id="div-comment-1310016" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ErikF</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1310016">
			September 20, 2017 at 11:32 am</a>		</div>

		<p>According to the documentation ( <a href="https://msdn.microsoft.com/en-us/library/dd162929(v=vs.85)" rel="nofollow">https://msdn.microsoft.com/en-us/library/dd162929(v=vs.85)</a>.aspx ): &#8220;nSavedDC [in]: The saved state to be restored. If this parameter is positive, nSavedDC represents a specific instance of the state to be restored. If this parameter is negative, nSavedDC represents an instance relative to the current state. For example, -1 restores the most recently saved state.&#8221; Zero is not in the set of documented values, so it&#8217;s technically undefined. I can&#8217;t see what specifying zero would do besides nothing, but there is a lacuna in the documentation so a conforming implementation could in theory reformat your hard drive! :-)</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-4" id="comment-1310035">
				<div id="div-comment-1310035" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1310035">
			September 20, 2017 at 3:10 pm</a>		</div>

		<p>SaveDC returns zero on error, so it would be sensible for RestoreDC to ignore it.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1310045">
				<div id="div-comment-1310045" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bob</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1310045">
			September 20, 2017 at 3:43 pm</a>		</div>

		<p>In wine, at least, RestoreDC(0) returns FALSE (i.e. failure.)</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-odd thread-alt depth-1" id="comment-1310036">
				<div id="div-comment-1310036" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170920-00/?p=97055#comment-1310036">
			September 20, 2017 at 3:38 pm</a>		</div>

		<p>As a side note, I think at least one win32k update had problems with SaveDC/RestoreDC, right?</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>