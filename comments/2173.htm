<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (14)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1097433">
				<div id="div-comment-1097433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">9k08</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097433">
			January 3, 2014 at 7:56 am</a>		</div>

		<p>It continues to amaze me how much real mode Windows tried to accomplish with so little to work with&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097443">
				<div id="div-comment-1097443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097443">
			January 3, 2014 at 8:18 am</a>		</div>

		<p>Well there&#39;s two more functions to add to the list of what to expect as platform functions:</p>
<p>we now have: div, _ldiv, memcpy, memmove, memset, sbrk, setjmp, longjmp</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1097453">
				<div id="div-comment-1097453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Theo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097453">
			January 3, 2014 at 9:28 am</a>		</div>

		<p>After all the work that had to be done before this, it&#39;s quaint to see that in this case it was basically a none-issue.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097463">
				<div id="div-comment-1097463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">CarlD</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097463">
			January 3, 2014 at 10:21 am</a>		</div>

		<p>It is fun to remember the pains we went through &quot;way back when&quot;. &nbsp;Having implemented an overlay manager for 16 bit CP/M back in the days before Windows, we had to solve all these same problems &#8211; and came up with very similar solutions.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1097483">
				<div id="div-comment-1097483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ken Hagan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097483">
			January 3, 2014 at 1:28 pm</a>		</div>

		<p>@9k08: Agreed, but you tell that to the kids these days and they just don&#39;t believe you.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097503">
				<div id="div-comment-1097503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jonwil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097503">
			January 4, 2014 at 2:31 am</a>		</div>

		<p>I do wonder if the special kernel functions were publicly documented (allowing other compiler vendors to use them where necessary), &quot;documented&quot; (in that some compiler vendors and others were given the info and/or it existed out there but not officially) or kept secret so only Microsoft had proper working code.</p>
<p>Even today its (to the best of my knowledge) not possible to find official documentation describing how the machinery behind __declspec(thread) or win32 SEH works (the relavent code is not included in the CRT source with any version of Visual Studio I have ever seen)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1097523">
				<div id="div-comment-1097523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097523">
			January 4, 2014 at 8:59 am</a>		</div>

		<p>@ionwil: Try looking in the PE file format specifications.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-odd thread-alt depth-1" id="comment-1097533">
				<div id="div-comment-1097533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097533">
			January 4, 2014 at 2:13 pm</a>		</div>

		<p>@jonwil: Ah, reminds me of this: <a rel="nofollow" target="_new" href="http://antitrust.slated.org/www.iowaconsumercase.org/011607/0000/PX00342.pdf">antitrust.slated.org/&#8230;/PX00342.pdf</a></p>
<p>I don&#39;t think &quot;Open Tools&quot; with documentation for things like InitTask, InitApp, and WaitEvent came until 1991.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao even thread-even depth-1" id="comment-1097543">
				<div id="div-comment-1097543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097543">
			January 4, 2014 at 2:29 pm</a>		</div>

		<p>@jonwil: In fact, it also reminds me of how Skywing described how Windows x64 SEH implemented setjmp/longjmp as a &quot;layering violation&quot;:</p>
<p><a rel="nofollow" target="_new" href="http://www.nynaeve.net/?p=105">http://www.nynaeve.net/?p=105</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097553">
				<div id="div-comment-1097553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">poizan42</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097553">
			January 4, 2014 at 4:13 pm</a>		</div>

		<p>@Jushua: Well according to <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms686708(v=vs.85).aspx:" rel="nofollow" target="_new">msdn.microsoft.com/&#8230;/ms686708(v=vs.85).aspx:</a></p>
<p>You should not directly access this structure. To access the values of the TlsSlots and TlsExpansionSlots members, call TlsGetValue.</p>
<p>It seems like someone at Microsoft thinks that third party compilers should not be allowed to generate as efficient code as Microsoft&#39;s own compilers.</p>
<div class="post">[<em>The &quot;you&quot; in that sentence is &quot;you, the application writer.&quot; Selected parts of the TEB are documented for compiler authors. But most people reading MSDN are not compiler authors. If you are a compiler author, then you already have the &quot;extra stuff just for compiler authors&quot; document because you also need to know about all sorts of stuff that isn&#39;t interesting to an application author, like the rules on code generation so the exception unwinder will know how to unwind your stack. There are other categories of specialty software like accessibility tools vendors and anti-malware software vendors. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1097563">
				<div id="div-comment-1097563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Danny</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097563">
			January 4, 2014 at 6:59 pm</a>		</div>

		<p>Ahhh, long jump in a discardable segment &#8211; the best way to write an undetected polymorphic virus. Then SoftIce came along and those discardable segments were accessible for a debugger.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097623">
				<div id="div-comment-1097623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Damien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097623">
			January 5, 2014 at 11:39 pm</a>		</div>

		<p>Exercise: Why don&#39;t you have to worry about the data segment or stack segment being discarded?</p>
<p>I was thinking along the lines, and then went back and read the original article that started this all off &#8211; code segments could only *be* discarded because it was easy to regenerate the content of those segments &#8211; just reload the code from disk. Data and stack segments were updatable and never got discarded.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1097973">
				<div id="div-comment-1097973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097973">
			January 7, 2014 at 3:07 am</a>		</div>

		<p>For those of you who are still annoyed that Firefox doesn&#39;t follow comment links, the squeaky wheel finally got too much for me and I&#39;ve submitted a patch. Expect to see it working in Firefox 29.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1097993">
				<div id="div-comment-1097993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Deduplicator</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140103-00/?p=2173#comment-1097993">
			January 7, 2014 at 4:34 am</a>		</div>

		<p>I cannot find the original Microsoft document which started this series way back when. Can it still be found on the web?</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>