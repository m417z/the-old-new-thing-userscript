<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (8)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-565383">
				<div id="div-comment-565383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Florian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565383">
			November 5, 2007 at 3:21 pm</a>		</div>

		<p>Sounds reasonable. So why don&#8217;t dialog procedures behave the same way? I know that it&#8217;s possible to subclass the dialog class and call DefDlgProc, but I think it&#8217;s confusing (you then have two procedures, the window procedure and the dialog procedure, and both could process messages like WM_COMMAND). It could be simpler, couldn&#8217;t it?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-565393">
				<div id="div-comment-565393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Wilson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565393">
			November 5, 2007 at 5:33 pm</a>		</div>

		<p>I am guessing that the way dialogs work (i.e. the &quot;return false to do default processing&quot; mechanism) dates back to the early days when dialog boxes were first implemented. Why it was done that way I dont know (but wish I did)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-565403">
				<div id="div-comment-565403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">bugreport</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565403">
			November 5, 2007 at 7:24 pm</a>		</div>

		<p>I&#8217;ve found a bug on this blog: the search results sometimes contain bad links. &nbsp;</p>
<p>Repro:</p>
<p>In the Search box at the top right of The Old New Thing, type &quot;WM_QUIT&quot;. &nbsp;</p>
<p>Result:</p>
<p>The header of the first and third results (for example) link to &quot;<a rel="nofollow" target="_new" href="http://weblogs.asp.net/...&quot;" rel="nofollow"></a><a href="http://weblogs.asp.net/" rel="nofollow">http://weblogs.asp.net/</a>&#8230;&quot; which is a bad link. &nbsp;The comment link for these blog entries, however, is correct (&quot;<a rel="nofollow" target="_new" href="http://blogs.msdn.com/...&quot;" rel="nofollow"></a><a href="http://blogs.msdn.com/" rel="nofollow">http://blogs.msdn.com/</a>&#8230;&quot;).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-565433">
				<div id="div-comment-565433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Lauren Smith</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565433">
			November 5, 2007 at 10:44 pm</a>		</div>

		<p>Was this a conscious decision to support this usage pattern, or is this a post-hoc justification of an early implementation detail? Not that it really makes a difference in the end&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-565443">
				<div id="div-comment-565443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">waleri</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565443">
			November 6, 2007 at 1:57 am</a>		</div>

		<blockquote><p>
  &gt;&gt; Why it was done that way I dont know (but wish I did)
</p></blockquote>
<p>Because you will have to create a custom class dialog for every dialog &#8211; how would you point which dialog function to use otherwise? Alternative is to subclass every created dialog &#8211; I guess at that time subclassing wasn&#8217;t invented yet.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-565463">
				<div id="div-comment-565463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Raymond II</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565463">
			November 6, 2007 at 11:04 am</a>		</div>

		<p>I know, Dean, and if I reply it will only get worse off-topic; I forcefully tried to wedge it in as &quot;related.&quot; &nbsp;Now other people like me, who do a search for WM_NCCREATE and window title, *may* get some feedback on how it (mis)behaves. &nbsp;I planned on getting this issue through the suggestion box, but it&#8217;s been closed each time I&#8217;ve tried, so today, before I left for work, I just crammed it in.&#8211;The information does more good than bad, even if it is slightly off-topic, at least in my view. &nbsp;Mr. Chen is free to delete any post, especially one of mine, since I have a habit of drifting off-topic. blablabla</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-565753">
				<div id="div-comment-565753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Hummer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-565753">
			November 7, 2007 at 6:19 am</a>		</div>

		<p>From my own experience I&#8217;d say that it would have been much easier, and perhaps less complicated if the dialog box scheme had followed the window scheme, i.e. if dialog had inherited window, or vice versa.</p>
<p>For me, I wrote a custom frame, from which all my window clases are derived. As I attacked the dialog problem I found myself having to consider ditching all of the dialog resource tools, in order to achieve a dialog that had a consistent look and feel, between frames and dialogs.</p>
<p>Admittedly I could have implemented a solution that repeated the &quot;window&quot; code in the &quot;dialog&quot; code, but given the difficulty of getting it to work &quot;just&quot; right, it wasn&#8217;t something I wanted to have to repeat, or maintain as some quite intricate bugs/problems surfaced.</p>
<p>Fortunately I decided not to use the windows dialog scheme. It was just luck in the end, and the additional effort of implementing a usable resource toolset paid off.</p>
<p>What I didn&#8217;t know at the time was that I would have significant problems moving to a threaded environment, because of things that were happening in windows modal loops. I&#8217;m not suggesting that they couldn&#8217;t have been made to work, merely that I couldn&#8217;t figure out what happens inside them.</p>
<p>Not using the windows dialog scheme meant that I didn&#8217;t have to reimplement dialogs these problems started surfacing. Implementing a popup menu capability was the last of windows modal loops for me! I find it a distinct advantage to own all of my modal loops. I wouldn&#8217;t say that it saves me time, but I have confidence that I know what is happening, and that means my code can be simple and unambiguous.</p>
<p>If I use a windows common dialog, and I do, it gets it&#8217;s own thread!</p>
<p>All I can hope now is that the operating system doesn&#8217;t start posting private message id&#8217;s to my main UI thread!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-568033">
				<div id="div-comment-568033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.shugye.com/2007/11/why-do-we-even-have-the-defwindowproc-function-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81defwindowproc-%e5%87%bd%e6%95%b0-48.html' rel='external nofollow' class='url'>Why do we even have the DefWindowProc function? 为什么我们需要DefWindowProc 函数 &laquo; Cloudsun&#8217;s Daily Review</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20071105-00/?p=24583#comment-568033">
			November 17, 2007 at 10:04 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://www.shugye.com/2007/11/why-do-we-even-have-the-defwindowproc-function-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81defwindowproc-%e5%87%bd%e6%95%b0-48.html" rel="nofollow">http://www.shugye.com/2007/11/why-do-we-even-have-the-defwindowproc-function-%e4%b8%ba%e4%bb%80%e4%b9%88%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81defwindowproc-%e5%87%bd%e6%95%b0-48.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>