<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (41)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1222851">
				<div id="div-comment-1222851" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Brian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222851">
			January 14, 2016 at 7:15 am</a>		</div>

		<p>Yes, I get odd stares when I tell people that the odds of winning the Powerball when you buy two tickets are the same as the odds you have if you buy one ticket (twice infinitesimal is infinitesimal).  Of course, the odds of winning if you buy a ticket are infinitely greater than if you don&#8217;t buy a ticket (infinitesimal is infinitely greater than zero).  Weirdness lives at the very edges of the number line.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1222861">
				<div id="div-comment-1222861" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">parkrrrr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222861">
			January 14, 2016 at 7:32 am</a>		</div>

		<p>Your odds of winning the Powerball if you don&#8217;t buy a ticket are still nonzero: someone could give you a winning ticket, or you could find one on the ground.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-gregm even depth-2 parent" id="comment-1222941">
				<div id="div-comment-1222941" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/GregM' rel='external nofollow' class='url'>GregM</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222941">
			January 14, 2016 at 9:12 am</a>		</div>

		<p>Well, if you say they&#8217;re exactly the same, as opposed to them not being significantly different, then the odd stares are deserved.  While the odds are still infinitesimally small, they are in fact different.  There isn&#8217;t a huge difference between 1:292,201,338 (3.42e-9) and 2:292,201,338 (1.71e-9), but there is a difference.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1222951">
				<div id="div-comment-1222951" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kyle S.</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222951">
			January 14, 2016 at 9:42 am</a>		</div>

		<p>In fact, in the base-2 reckoning we software types so often deal with, the odds of winning having bought two (non-identical) tickets are an order of magnitude greater than the odds of winning having bought one.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-3 parent" id="comment-1222972">
				<div id="div-comment-1222972" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JoshT</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222972">
			January 14, 2016 at 10:39 am</a>		</div>

		<p>Yes, different. But essentially the same as far as the probably impact on your life. As always, Randall says it best: <a href="https://xkcd.com/1252/" rel="nofollow">https://xkcd.com/1252/</a></p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-4" id="comment-1223032">
				<div id="div-comment-1223032" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Simon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223032">
			January 14, 2016 at 2:25 pm</a>		</div>

		<p>A book I remember reading once noted that statistically, all species are extinct. :)</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1222962">
				<div id="div-comment-1222962" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Evan Harper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222962">
			January 14, 2016 at 10:35 am</a>		</div>

		<p>I have seen this meme repeated all over lately and I have no idea why people think it&#8217;s true.</p>
<p>You at least are playing word games with &#8220;infinitesimal&#8221; (which is a mathematically invalid concept, viz. the history of the calculus) but I&#8217;ve seen others claim that the odds are literally unchanged.</p>
<p>Unless you are buying up a substantial portion of the total stock of potential winning numbers, the relationship between number of tickets bought and chances of winning is almost exactly linear.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1223011">
				<div id="div-comment-1223011" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">AdamWu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223011">
			January 14, 2016 at 11:29 am</a>		</div>

		<p>What are you talking about.</p>
<p>The relationship between number of tickets bought and chances of winning is *always* exactly linear, regardless of how many you buy (of course assume you don&#8217;t repeat numbers).</p>
<p>Unless it is not a random draw.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-3" id="comment-1223042">
				<div id="div-comment-1223042" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">drocta</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223042">
			January 14, 2016 at 2:29 pm</a>		</div>

		<p>The real numbers don&#8217;t have infinitesimals, (or, I think some definition counts 0 as one but I don&#8217;t remember why) but the surreal numbers do, as well as a number of other systems. (e.g. the surreals with birthday less than omega^omega I think? I think that forms a field? I think that might be the smallest ordered field which has the reals and infinitesimals, but I&#8217;m not sure.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-matthew-manelahotmail-com odd alt depth-3" id="comment-1223091">
				<div id="div-comment-1223091" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Matthew+Manela' rel='external nofollow' class='url'>Matthew Manela</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223091">
			January 14, 2016 at 3:45 pm</a>		</div>

		<p>Tickets can share the same numbers in Powerball (if those numbers win, the winnings are split proportionally by number of winning tickets between the ticket holders). So as long as every ticket you buy is unique, the relationship is exactly linear, I think, no matter how many you buy.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 parent" id="comment-1222871">
				<div id="div-comment-1222871" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://adamrosenfield.com' rel='external nofollow' class='url'>Adam Rosenfield</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222871">
			January 14, 2016 at 7:38 am</a>		</div>

		<p>Where did that extra factor of 2^21 come from in the denominator of the last equation?</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2 parent" id="comment-1222982">
				<div id="div-comment-1222982" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222982">
			January 14, 2016 at 11:00 am</a>		</div>

		<p>Math is hard.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1223163">
				<div id="div-comment-1223163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ron O</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223163">
			January 15, 2016 at 4:15 am</a>		</div>

		<p>Let&#8217;s go shopping?</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1222882">
				<div id="div-comment-1222882" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222882">
			January 14, 2016 at 7:47 am</a>		</div>

		<p>Wouldn&#8217;t algorithm 4 have the same chance of corruption, though?</p>
<p>Then again, I suppose collision isn&#8217;t the same thing as corruption.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1223171">
				<div id="div-comment-1223171" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">EduardoS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223171">
			January 15, 2016 at 6:43 am</a>		</div>

		<p>Yes, but the odds of corruption in v4 causing collision are very small, in v1 each generated guid differes by only a few bits, a bit flip and you got a collision, in v4 a bit flip gives you another random number that probably never were generated before.</p>
<p>But corruption may screw up you in other ways.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1222891">
				<div id="div-comment-1222891" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pm100</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222891">
			January 14, 2016 at 8:33 am</a>		</div>

		<p>&#8220;The odds of two GUIDs colliding are therefore one in 2¹²²&#8221; This is not so. This is the chance of guidA colliding with guidB. The odds of there being any collision is the birthday &#8216;paradox&#8217;. A quick look shows for 128 bits that if you generate 10^77 guids there is a 50% chance of a collision. It will be a lot less for 122 bits (96 bits -&gt; 10^57 are required for 50%)</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1223002">
				<div id="div-comment-1223002" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mkl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223002">
			January 14, 2016 at 11:23 am</a>		</div>

		<p>What do you mean by &#8220;This is not so.&#8221;?<br />
Your argument is not what the article mentions. You don&#8217;t have 10^77 GUIDs. You have TWO. And the odds that they collide are 1 in 2^122.<br />
&#8220;The odds of two GUIDs colliding are one in 2^122&#8221; is as true of a statement as your &#8220;the odds of at least two GUIDs among 10^77 colliding are more than 1/2&#8221;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2" id="comment-1223021">
				<div id="div-comment-1223021" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodríguez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223021">
			January 14, 2016 at 12:08 pm</a>		</div>

		<p>Not only that. The calculations made by Raymond suppose a perfect random generator, correctly seeded and with perfectly uniform distribution. Sadly, often this isn&#8217;t the case, because computers use pseudo-random generators. The degree of predictability of a pseudo-random generator lowers significantly the entropy of the random number, and makes collisions more frequent. That&#8217;s without taking into account that most programmers will use the language&#8217;s standard random generator, which often uses a bit length of 23 or 64 (making a best-case collision rate of 2^-32 or 2^-64). Oh, and the memory/storage media corruption problem applies to random GUIDs, too.<br />
IMHO, type 1 GUIDs are a better solution because they are simpler to generate, and thus it&#8217;s a lot harder to botch the generation. Type 4 GUIDs, on the other hand, leaves you depending on the used random generator (which may or may not be up to the job) or even invites you to write your own generator (which is surprisingly easy to get wrong).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1223102">
				<div id="div-comment-1223102" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Pseudonym</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223102">
			January 14, 2016 at 5:05 pm</a>		</div>

		<p>Yes, the the point of GUIDs is that they are meant to be globally unique. What you really want to know is the chance of a collision in the pool of all generated GUIDs.</p>
<p>I don&#8217;t know where you got the 10^77 figure from, that&#8217;s too high. Given a 122 bit hash/random number, there is a 50% chance of a collision after generating 2^61 numbers, which is the square root of 2^122. This is the birthday paradox.</p>
<p>Comparing this with the probability of a memory flip if you have enough memory to store 2^61 GUIDs is left as an exercise.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-3" id="comment-1223121">
				<div id="div-comment-1223121" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223121">
			January 14, 2016 at 6:54 pm</a>		</div>

		<p>This is not about &#8220;The odds that a bit flip can result in a collision in a pool of all generated GUIDs.&#8221; This is just saying that people worry about the probability of a v4 collision, but they don&#8217;t consider the probability of the v1 algorithm breaking down.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fredericmagnyf even thread-even depth-1 parent" id="comment-1222911">
				<div id="div-comment-1222911" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Medinoc' rel='external nofollow' class='url'>Medinoc</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222911">
			January 14, 2016 at 8:59 am</a>		</div>

		<p>Note: The new layout broke the graphics markup used on this blog (for example here: <a href="https://blogs.msdn.microsoft.com/oldnewthing/20030905-02/?p=42653" rel="nofollow">https://blogs.msdn.microsoft.com/oldnewthing/20030905-02/?p=42653</a> ). Neither Firefox 43 nor IE11 display it correctly.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1222952">
				<div id="div-comment-1222952" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222952">
			January 14, 2016 at 10:10 am</a>		</div>

		<p>No kidding! Someone didn&#8217;t do their job right.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk even thread-odd thread-alt depth-1 parent" id="comment-1222921">
				<div id="div-comment-1222921" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222921">
			January 14, 2016 at 9:00 am</a>		</div>

		<p>The &#8220;zero chance of duplication&#8221; link doesn&#8217;t work.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2 parent" id="comment-1222932">
				<div id="div-comment-1222932" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222932">
			January 14, 2016 at 9:07 am</a>		</div>

		<p>Redirects from the old site are broken. I have an open ticket it.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-dwalker-wk even depth-3" id="comment-1223061">
				<div id="div-comment-1223061" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223061">
			January 14, 2016 at 2:36 pm</a>		</div>

		<p>Thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-davidt-ms odd alt thread-even depth-1" id="comment-1222991">
				<div id="div-comment-1222991" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/yadt84' rel='external nofollow' class='url'>yadt84</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1222991">
			January 14, 2016 at 11:06 am</a>		</div>

		<p>Of course, the biggest problem with generating algorithm 4 GUIDs is probably finding 122 sufficiently random bits.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1 parent" id="comment-1223031">
				<div id="div-comment-1223031" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Arezz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223031">
			January 14, 2016 at 12:08 pm</a>		</div>

		<p>The &#8220;overclocking&#8221; and &#8221; zero chance of duplication, unless someone screws up the generation process. &#8221; blog links are dead :(</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-dwalker-wk odd alt depth-2" id="comment-1223062">
				<div id="div-comment-1223062" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223062">
			January 14, 2016 at 2:36 pm</a>		</div>

		<p>Which has already been mentioned, and answered, right here in these comments!</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1223051">
				<div id="div-comment-1223051" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.djstein.com' rel='external nofollow' class='url'>David Stein</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223051">
			January 14, 2016 at 2:32 pm</a>		</div>

		<p>Very nice back-of-the-envelope calculations.</p>
<p>BER-type memory corruption is an interesting consideration, for two reasons.</p>
<p>First: If memory is corrupted and a GUID is read out with a single bit flipped, then the GUID is still wrong, regardless of the algorithm used to generate it &#8211; all sorts of catastrophe can result, right? I&#8217;m not sure that the chance that the misread is also a collision with another GUID (given the space density of v1 that you noted) represents a significant *marginal* risk over the simple fact that the GUID has spontaneously changed.</p>
<p>Second: Since v1 GUIDs are based partly on the MAC address, it&#8217;s possible to detect a BER-type memory misread that way in some cases. For example, if you know that the GUID was generated by a device with a particular MAC address, wouldn&#8217;t it be possible to compare it with the MAC address that&#8217;s included in the GUID? Granted, this is a pretty artificial scenario, but of course so is BER in and of itself&#8230;.</p>
<p>Regardless &#8211; I think the upshot is that the importance of protecting GUIDs against memory misreads, for all of the reasons you mentioned, is compelling. Perhaps it should be good practice to checksum all GUIDs (either tacked onto the v(x)-generated GUID, or incorporated into a GUID algorithm).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-odd thread-alt depth-1 parent" id="comment-1223071">
				<div id="div-comment-1223071" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223071">
			January 14, 2016 at 2:41 pm</a>		</div>

		<p>It&#8217;s interesting that Powerball drawings are actually done using physical Ping-Pong-ball-like numbered balls, which are weighed frequently and carefully handled.  The numbers picked will not be subject to the vagaries of any pseudo-random number generator&#8230;. although they could be subject to other things.  The selected numbers are checked (using a method that is not spelled out) for true randomness (per the Powerball web site&#8217;s FAQs).</p>
<p>However, if you go to the store and ask the clerk to ask the lottery system&#8217;s computers to pick some random number(s) for you (Quick Picks), of course there is a PRNG involved in selecting your numbers.</p>
<p>I don&#8217;t really have a big point, except to say that not only is math hard, but random numbers are hard too.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2 parent" id="comment-1223112">
				<div id="div-comment-1223112" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223112">
			January 14, 2016 at 6:23 pm</a>		</div>

		<p>And anything in gambling is very strictly checked for fairness, for legal and financial reasons.  (The numbers people pick for their tickets doesn&#8217;t matter; but the method in determining the winning numbers does, very much so.)</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1223173">
				<div id="div-comment-1223173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bob</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223173">
			January 15, 2016 at 6:51 am</a>		</div>

		<p>&gt;&gt; The numbers people pick for their tickets doesn’t matter</p>
<p>I disagree. It is already well known that the expected value of a lottery ticket varies based on the numbers chosen because people who choose their own numbers do not distribute their choices evenly across the set of possibilities. If the &#8220;pseudo-random&#8221; choices also had a bias, the game could no longer be &#8220;fair&#8221;.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-1223101">
				<div id="div-comment-1223101" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223101">
			January 14, 2016 at 4:20 pm</a>		</div>

		<p>So this is wrong. No way around saying that really. </p>
<p>There are two generators you consider:</p>
<p>1. A uniform random generator.  It&#8217;s collision probability is C:=1/2^(124).</p>
<p>2. Basically a sequence.  It&#8217;s a sharded sequence (the mac address), and it skips values (the time component), but it is nonetheless a monotonically increasing sequence.</p>
<p>The sequence won&#8217;t wrap in your lifetime.  So we don&#8217;t have to worry about that.  The only thing that might concern us are machines that happen to have the same mac. So we can&#8217;t trust the user to generate the uuid we have to do it on machines we control,  but that is true of either method because the user could always maliciously pick someone else&#8217;s published uuid.</p>
<p>Now add in the hardware error with probability epsilon.</p>
<p>The collision probability for method #1 is unchanged. You are just xoring a random error into an already random error.</p>
<p>For #2 there are 3 cases.  Errors in both uuids, errors in 1, errors in neither. These events happen with probabilities e^2 2(1-e)e and (1-e)^2 respectively. The collision probabilities are C, C and 0 respectively. </p>
<p>This the collision probability is 2eC -e^23  &lt;&lt; C. Basically you are off by a factor of 2^124.</p>
<p>You lose the guarantee but it is still a lot better than the uniform select.  Both are insanely improbable, but are susceptible to different issues.  For #1 your random seeds could be bad, for #2 you could have bad clocks on your machines.</p>
<p>If you are really worried do both and xor them together.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2 parent" id="comment-1223122">
				<div id="div-comment-1223122" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223122">
			January 14, 2016 at 6:55 pm</a>		</div>

		<p>This is not about &#8220;The odds that a bit flip can result in a collision in a pool of all generated GUIDs.&#8221; This is just saying that people worry about the probability of a v4 collision, but they don&#8217;t consider the probability of the v1 algorithm breaking down. I chose a random bit flip as one of the things which can break the v1 algorithm. Another is of course a systematic MAC collision.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1223123">
				<div id="div-comment-1223123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223123">
			January 14, 2016 at 7:44 pm</a>		</div>

		<p>So?</p>
<p>A random bit flip on a randomly selected uuid does nothing to the collision probability because it is just xoring a random into a random. The bits that flip against you are equally likely to flip in your favor.</p>
<p>A random bit flip on the sequence uuid results in a uuid which is a convex combination of a random and sequential uuid. I don&#8217;t see how that has a lower collision probability than the first. So what if I lose my guarantee,  I&#8217;m still less likely to collide because I&#8217;m guaranteed to start from a known different value.</p>
<p>If your concern is collisions you would still prefer the sequence uuid if you trusted the inputs like the system clock and mac address, even if you didn&#8217;t trust the ram.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-3 parent" id="comment-1223141">
				<div id="div-comment-1223141" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223141">
			January 14, 2016 at 7:52 pm</a>		</div>

		<p>To make an analogy your argument reads like:</p>
<p>People say that winning the lottery is unlikely because they have to match all 7 numbers or of the tumbler, but it is actually harder to win than that. </p>
<p>There is some miniscule chance that the numbers on the balls could be misread, and although you have the winning numbers the commission awards the prize to someone. </p>
<p>It seems like you have forgotten,  that this can also work in your favor.  You could just add likely be the designated winner when you in actual reality are not the proper winner. </p>
<p>Random bit errors can never increase the probability that a uuid will collide with a random uuid. And you have given no mechanism whereby a value known to be distinct can somehow invert the collision probabilities with one&#8217;s that have a known probability of colliding.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-4 parent" id="comment-1223151">
				<div id="div-comment-1223151" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">smf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223151">
			January 15, 2016 at 2:48 am</a>		</div>

		<p>&#8220;Random bit errors can never increase the probability that a uuid will collide with a random uuid&#8221;</p>
<p>That is only true when both people generating have an equal probability of creating any uuid.<br />
If I&#8217;m only picking balls 1-20 and you are only picking balls 21-49 then we won&#8217;t ever share a lottery win.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-5" id="comment-1223154">
				<div id="div-comment-1223154" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223154">
			January 15, 2016 at 4:13 am</a>		</div>

		<p>If you pick low numbered balls and I pick high number balls, then an error (or multiple errors), could turn my high numbers into your low numbers. So I still get collisions. </p>
<p>Not really sure what you are trying to get at there. Maybe the mac sharding?</p>
<p>I have one machine generating all my uuids and so they are close and share the first six bytes. </p>
<p>6/16 times the random error is on the mac address and I end up with a uuid I could never generate.  10/16 I get another uuid I might generate at some other time, but now I have to wait maybe a thousand or more years to see if I actually do.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1223683">
				<div id="div-comment-1223683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Miles High</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1223683">
			January 18, 2016 at 7:04 pm</a>		</div>

		<p>&gt;  * Or “a thousand billion” if you use the European scale. </p>
<p>On the continent, we say &#8220;a billiard&#8221;, not &#8220;a thousand billion&#8221;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="comment-1224021">
				<div id="div-comment-1224021" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tobias Becker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1224021">
			January 20, 2016 at 4:06 am</a>		</div>

		<p>As for your footnote: 10^(15) would be a Billiard (Billiarde) in German.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-davebacher even thread-odd thread-alt depth-1" id="comment-1224152">
				<div id="div-comment-1224152" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dave+Bacher' rel='external nofollow' class='url'>Dave Bacher</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160114-00/?p=92851#comment-1224152">
			January 20, 2016 at 3:20 pm</a>		</div>

		<p>UUID v1 was good back when network cards were real, and number of manufacturers was low, number of devices were low.</p>
<p>Today, the number of duplicate MAC addresses is very non-zero, and so even if the hardware is working perfectly &#8212; UUID v1 is likely to make a duplicate between machines.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>