<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (25)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-bboorman even thread-even depth-1 parent" id="comment-1352465">
				<div id="div-comment-1352465" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Brian_EE' rel='external nofollow' class='url'>Brian_EE</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352465">
			July 18, 2018 at 7:04 am</a>		</div>

		<p>Why does this sound like someone trying to develop ransomware &#8211; Encrypt the data, call us to decrypt &#8211; uninstall our malware and data encrypted forever!</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-koldude odd alt depth-2" id="comment-1352475">
				<div id="div-comment-1352475" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/kantos' rel='external nofollow' class='url'>kantos</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352475">
			July 18, 2018 at 7:17 am</a>		</div>

		<p>Because it probably is the barely legal equivalent: where an ISV does something really shady to &#8220;Protect their intellectual property&#8221;. For obvious reasons Raymond can&#8217;t tell us any sort of why to protect the guilty party. Nor am I going to speculate further.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1352485">
				<div id="div-comment-1352485" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">laonianren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352485">
			July 18, 2018 at 7:58 am</a>		</div>

		<p>You can have software that legitimately stores a secret required to access some networked resource, and the customer demands that the secret is rendered inaccessible when the software is uninstalled.  The user is trusted; they just don&#8217;t want the secret hanging around any longer than necessary.</p>
<p>Ideally it wouldn&#8217;t work like this, but in my experience it&#8217;s common for accessing legacy stuff in enterprise environments.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1352665">
				<div id="div-comment-1352665" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joker_vD</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352665">
			July 19, 2018 at 2:04 am</a>		</div>

		<p>Then just delete the secret during the uninstall? After that it&#8217;ll become inaccessible all right.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mzzt even depth-2 parent" id="comment-1352495">
				<div id="div-comment-1352495" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/The+MAZZTer' rel='external nofollow' class='url'>The MAZZTer</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352495">
			July 18, 2018 at 7:59 am</a>		</div>

		<p>Sounds more like someone trying to develop DRM without understanding how computers work (if the user can see it on their screen or hear it on their speakers, it has to be in a form they could save and reproduce later regardless of if you want them to be able to or not). Or at least something along those lines.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1352505">
				<div id="div-comment-1352505" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mason Wheeler</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352505">
			July 18, 2018 at 8:04 am</a>		</div>

		<p>&gt; Sounds more like someone trying to develop DRM without understanding how computers work</p>
<p>Why do you repeat yourself like that? :P</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-3" id="comment-1352515">
				<div id="div-comment-1352515" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuri Khan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352515">
			July 18, 2018 at 8:24 am</a>		</div>

		<p>Well, DRM *is* a form of ransomware.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-3 parent" id="comment-1352525">
				<div id="div-comment-1352525" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DWalker07</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352525">
			July 18, 2018 at 8:34 am</a>		</div>

		<p>Right, that&#8217;s known as the &#8220;analog hole&#8221;.  DRM-enabled HDMI signals, DRM-enabled decoder chips, etc. can &#8220;protect&#8221; data all the way to the end (where the streams supposedly can&#8217;t be captured by hooking into the sound or video card output).</p>
<p>You can always set up a Webcam pointed at the screen to record visuals, and a tape recorder to record audio.  The resolution will likely suffer though.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-4 parent" id="comment-1352585">
				<div id="div-comment-1352585" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tanveer Badar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352585">
			July 18, 2018 at 11:26 am</a>		</div>

		<p>What is to stop a sufficiently strong willed electronic engineer to build something to capture the actual signals going to screen and speakers?</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-cheong odd alt depth-5" id="comment-1352605">
				<div id="div-comment-1352605" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352605">
			July 18, 2018 at 6:15 pm</a>		</div>

		<p>I think there already exists HDMI convertor/splitor that removes HDCP.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-5" id="comment-1352745">
				<div id="div-comment-1352745" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DWalker07</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352745">
			July 19, 2018 at 1:53 pm</a>		</div>

		<p>Right; you could craft a cable that captures the signals and stores them.  It would be hard for the average hobbyist to do this; if the financial return is good enough, or the curiosity factor is high enough, anyone with resources can build something like that.  Probably not without running afoul of the DMCA-related laws, so these devices might be hard to sell.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt depth-3" id="comment-1352795">
				<div id="div-comment-1352795" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Phlip</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352795">
			July 20, 2018 at 1:26 am</a>		</div>

		<p>So then the answer to the original problem is the same as the one for DRM &#8211; if you can&#8217;t make it technologically impossible for the user to decrypt the data, just pass a broadly-written poorly-thought-out law to make it illegal for them do decrypt it. Problem solved.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fjeldse even thread-odd thread-alt depth-1" id="comment-1352545">
				<div id="div-comment-1352545" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Erik+F' rel='external nofollow' class='url'>Erik F</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352545">
			July 18, 2018 at 9:24 am</a>		</div>

		<p>I wonder how all this works in the brave new world of GDPR. The only thing that I can say for certain is that the only real winners will be the lawyers, as usual. :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="comment-1352565">
				<div id="div-comment-1352565" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Brian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352565">
			July 18, 2018 at 10:04 am</a>		</div>

		<p>Boy, people are suspicious.  Consider the situation where an ISV captures some information at installation time, some of which is PII or other data that you don&#8217;t want to store on the disk in clear text.  Some of that information is used in communications between the ISV&#8217;s web site and the installed program.  Yes, at de-installation time, the data will likely be deleted, but stuff tends to get silently cached.  Data cleanliness principals say &#8220;clean up as much as you can&#8221;, breaking that decryptability seems like a good thing to throw into a spec.</p>
<p>Over the years I&#8217;ve found that simply relying on CryptProtect(/Unprotect)Data without putting some thought and additional entropy is usually a bad idea.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1352575">
				<div id="div-comment-1352575" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Brian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352575">
			July 18, 2018 at 10:11 am</a>		</div>

		<p>Let&#8217;s ignore everything Raymond said and try to solve an easier problem:<br />
Given a cyphertext and a key:<br />
1.  Assume that the user will never copy or otherwise save the plaintext<br />
2.  Assume that the user may unintentionally the key.<br />
3.  Assume that the user will never intentionally bypass this system (i.e., the user *wants* the system to work).</p>
<p>Is there any mechanism that will allow me to destroy the key while having confidence that the user has not made a copy of it?</p>
<p>There are two answers:<br />
1.  Ensure that the user never has access to the key at all (e.g., decryption as a service).  This requires us to trust a 3rd party, which is often exactly what we don&#8217;t want.<br />
2.  Store both the key on tamper-proof hardware(*) that supports running &#8220;decrypt&#8221; and &#8220;encrypt&#8221; but does not support copying the key.  When the application is uninstalled, send a, &#8220;delete the key&#8221; command to the hardware.<br />
The best example of #2 is the combination of bitlocker and a TPM module.</p>
<p>(*) &#8211; With the possible exception of some sort of future quantum-based hardware, this probably doesn&#8217;t truly exist.  But we can approximate it by hoping that the hardware is sufficiently tamper-resistant that it isn&#8217;t worth bypassing.  Whether this is true depends on the quality of the hardware and the value of the data.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="comment-1352595">
				<div id="div-comment-1352595" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aged .Net Guy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352595">
			July 18, 2018 at 1:26 pm</a>		</div>

		<p>As always, you need to decide if you&#8217;re defending this secret against the NSA or against Marge in Accounting.  The fact it&#8217;s logically impossible to protect it perfectly and practically impossible to stop the NSA, etc., doesn&#8217;t mean it&#8217;s pointless to lock out Marge &amp; her ilk.</p>
<p>I agree there are plenty of nefarious reasons someone might want to incorporate logic like this into their app.</p>
<p>But there are also some decent reasons, mostly related to not leaving valuable secrets lying around.  Whether that&#8217;s valuable user data, or valuable application internal data.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fleet-command even thread-odd thread-alt depth-1 parent" id="comment-1352675">
				<div id="div-comment-1352675" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352675">
			July 19, 2018 at 3:12 am</a>		</div>

		<p>Mr Chen, you&#8217;ve been holding up this &#8220;Secrets cannot be stored&#8221; mantra since at least 2014, but in fact, they can be safely stored into a secure cryptoprocessor. The processor receives the encrypted data and gives back the decrypted data, whose exposure is intended at the time of decryption. (So, you are welcome to hook into it.) The cryptoprocessor is a black box. It cannot be debugged or hooked into.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1352695">
				<div id="div-comment-1352695" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352695">
			July 19, 2018 at 6:41 am</a>		</div>

		<p>Sigh. Time to break out the HF.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1352785">
				<div id="div-comment-1352785" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Denis Silvestre</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352785">
			July 20, 2018 at 1:16 am</a>		</div>

		<p>And how do the unencrypted data flow from the software to the processor?<br />
* Via an hardware bus? Easily sniffable;<br />
* Via a difficult to sniff bus (say SATA or PCIe)? Hook the drivers, profit.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-fleet-command odd alt depth-3" id="comment-1353025">
				<div id="div-comment-1353025" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1353025">
			July 23, 2018 at 4:58 am</a>		</div>

		<p>Yeah. But it involves being on the other side of the airtight hatchway.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1353485">
				<div id="div-comment-1353485" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://www.war59312.com/' rel='external nofollow' class='url'>war59312</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1353485">
			July 24, 2018 at 2:48 pm</a>		</div>

		<p>Black box argument doesn&#8217;t work. Just because you cant hack it doesn&#8217;t mean no one else can.</p>
<p>If encrypted date is ever, ever!, unecrypted somewhere in the chain.. It&#8217;s 100% poissiable to hack it and get the data. Period! It&#8217;s only a mater of time and cost!</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-fleet-command odd alt depth-3" id="comment-1353545">
				<div id="div-comment-1353545" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Fleet+Command' rel='external nofollow' class='url'>Fleet Command</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1353545">
			July 24, 2018 at 10:33 pm</a>		</div>

		<p>No, it isn&#8217;t. It is the matter of not properly reading one&#8217;s comment before replying! 😉 Data wasn&#8217;t the concern at all. The encryption key was. And the matter of time and cost isn&#8217;t something to dismiss as easily as you did. In fact, in cryptography, they are worshiped as the sole pillars on which the whole field relies.</p>
<p>Of course, I used the Microsoft lingo, &#8220;secret&#8221;. Everywhere else, &#8220;secret&#8221; means &#8220;data subjected to encryption&#8221;; but in Microsoft, it means the cryptographic key. Well, quite frankly, Microsoft has a funny lingo, with all the wrongly defined phrases like &#8220;x86&#8221;, &#8220;system partition&#8221;, &#8220;system32&#8221;, &#8220;SAC-T&#8221; and many others.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1352685">
				<div id="div-comment-1352685" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jpa</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352685">
			July 19, 2018 at 4:21 am</a>		</div>

		<p>Forward secrecy is not a pointless effort! It still protects the data from future users of the computer.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1352705">
				<div id="div-comment-1352705" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stuart</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352705">
			July 19, 2018 at 6:52 am</a>		</div>

		<p>Those damn airtight hatchways, at it again!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-iboyd even thread-even depth-1" id="comment-1352735">
				<div id="div-comment-1352735" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IanBoyd' rel='external nofollow' class='url'>IanBoyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180718-00/?p=99275#comment-1352735">
			July 19, 2018 at 12:47 pm</a>		</div>

		<p>It&#8217;s a defense-in-depth, and opportunistic data cleansing, measure.</p>
<p>If my application is being uninstalled, it&#8217;s a perfect time to remove any sensitive information. Even though it is encrypted, the most difficult to crack data is the data that doesn&#8217;t exist.</p>
<p>(it is a parallel to the axiom: the fastest code is the code that doesn&#8217;t run)</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>