<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (27)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-444563">
				<div id="div-comment-444563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Stu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444563">
			November 23, 2006 at 10:24 am</a>		</div>

		<p>i think there is a common belief that Windows Update uses QoS, which would explain why people think it would make a difference, as Windows Update downloads are fairly frequent.</p>
<p>I assume that Windows Update actually uses BITS, which does the opposite of QoS (ie. only uses available bandwidth, meaning that normal traffic is to BITS as QoS traffic is to normal traffic).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444573">
				<div id="div-comment-444573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://sanjay.mathur.ws/archives/interesting-post-at-the-old-new-thing-an-msdn-blog' rel='external nofollow' class='url'>Utterly random &raquo; Blog Archive &raquo; Interesting post at &#8220;The Old New Thing&#8221; (an MSDN blog)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444573">
			November 23, 2006 at 10:55 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://sanjay.mathur.ws/archives/interesting-post-at-the-old-new-thing-an-msdn-blog" rel="nofollow">http://sanjay.mathur.ws/archives/interesting-post-at-the-old-new-thing-an-msdn-blog</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mike-dimmick even thread-even depth-1" id="comment-444583">
				<div id="div-comment-444583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Mike+Dimmick' rel='external nofollow' class='url'>Mike Dimmick</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444583">
			November 23, 2006 at 11:39 am</a>		</div>

		<p>I still think that downloader applications like BitTorrent and GetRight (etc) will simply lie and pretend to be VoIP applications, which will make all QoS work completely redundant. It&#8217;s based on everyone being honest, which from your work on the Start menu, you know is untrue.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444593">
				<div id="div-comment-444593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444593">
			November 23, 2006 at 12:06 pm</a>		</div>

		<blockquote><p>
  I still think that downloader applications like BitTorrent and GetRight (etc) will simply lie and pretend to be VoIP applications, which will make all QoS work completely redundant. It&#8217;s based on everyone being honest, which from your work on the Start menu, you know is untrue.
</p></blockquote>
<p>Its only really controllable as far as</p>
<p>a) you control what software is running on your pc</p>
<p>b) you control what software is downloading/uploading data at any one time</p>
<p>c) you control the network infrastructure and know where it has QoS switched on.</p>
<p>So in a closed corporate environment (that almost certainly bans installing of bittorrent clients, etc) it can be very effective, and I believe its how my current company has consistent quality on our desk IP phones despite some other non-realtime apps using huge amounts of LAN bandwidth.</p>
<p>For a home user, its probably useful as far as the network socket on the back of their PC. Once the traffic leaves your house its out of your control. So you can control whether your media player steals bandwidth from your voip client, but can&#8217;t stop Johnny down the road&#8217;s illegal movie downloads from slowing you down, let alone congestion out on the big wide net.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444603">
				<div id="div-comment-444603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foxyshadis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444603">
			November 23, 2006 at 12:30 pm</a>		</div>

		<p>Stu: BITS is a form of traffic shaping, but it may not actually use any part of XP&#8217;s built-in QoS. It&#8217;s just lowest-priority, instead of the default highest-priority that most people think of when they think of QoS. Modules that use XP&#8217;s QoS module can reserve such a low-to-lowest priority for background downloading, although by default non-QoS traffic is automatically set to Lowest, so there&#8217;s not a lot to be gained by doing that normally. (non-QoS should typically be normal or low, but I guess they had a good reason for doing that.)</p>
<p>Good whitepaper here:</p>
<p><a rel="nofollow" target="_new" href="http://www.microsoft.com/technet/prodtechnol/windows2000serv/plan/qosover8.mspx" rel="nofollow">http://www.microsoft.com/technet/prodtechnol/windows2000serv/plan/qosover8.mspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444613">
				<div id="div-comment-444613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444613">
			November 23, 2006 at 1:04 pm</a>		</div>

		<p>Theres a discussion of limiting bits here:</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2005/01/27/361595.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2005/01/27/361595.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444633">
				<div id="div-comment-444633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.silentblue.net' rel='external nofollow' class='url'>quanta</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444633">
			November 23, 2006 at 5:09 pm</a>		</div>

		<p>I remember this issue &#8211; it became a serious contentious topic in computer enthusiast circles. Even today, you will see &quot;tweak&quot; guides that extoll the virtues of changing this setting, all the while painting MS programmers as buffoons.</p>
<p>I even tried this tweak, until I realized how crazy it would be if MS was depriving billions of Internet users 20% of their bandwidth.</p>
<p>The solution to this issue? More blog entries from experts like you! In 2001, Microsoft neither refuted or explained this setting, and the story took a life on its own.</p>
<p>P.S. The myth lives on in a slightly different form today as the &quot;remove WinXP SP2&#8217;s maximum TCP session&quot; placebo setting.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444663">
				<div id="div-comment-444663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444663">
			November 23, 2006 at 8:38 pm</a>		</div>

		<p>Good post Raymond, people should know that QoS is not the one who takes their bandwidth.</p>
<p>It is those idiots writing communication protocols with as much as 25% overhead.</p>
<p>For example PPPoE encapsulation takes ~25% of your bandwidth in both directions (up/down).</p>
<p>Let me explain the math using 512/128kbps ADSL (PPPoE) link:</p>
<p>64KB/sec is theoretical maximum download speed for 512kbps link. Divide 64 with 1.25 and you get 51.2KB/sec &#8212; that is your top download speed no matter what tweaks you use.</p>
<p>Your 128kpbs upload translates to 16KB/sec theoretical maximum. Divide again with 1.25 and it is only 12.8KB/sec you really have.</p>
<p>Try to upload more than that and your download speed plummets because ACK packets do not reach destination fast enough resulting in waits, timeouts and resends. Windows TCP/IP stack is of course stupid enough and does not offer any form of packet prioritization based on application or protocol used.</p>
<p>Luckily there are third party drivers like <a href="http://www.cfosspeed.de" rel="nofollow">http://www.cfosspeed.de</a>. If only that was part of the Windows&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444673">
				<div id="div-comment-444673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444673">
			November 23, 2006 at 8:50 pm</a>		</div>

		<p>&quot;The myth lives on in a slightly different form today as the &quot;remove WinXP SP2&#8217;s maximum TCP session&quot; placebo setting.&quot;</p>
<p>You obviously don&#8217;t know much about p2p do you?</p>
<p>That tweak <em>has</em> real effect on p2p. Those applications use half-open connections to search for file sources. The more they can open the faster they acquire sources. If you have a limit downloads will take longer to start and reach full speed.</p>
<p>Not only that you can&#8217;t open more than 10 such connections but your application networking gets slowed down if you exceed it. You actually have to play it safe by opening up to 8 such connections so as not to trigger the slowdown.</p>
<p>Having that limit at 10 connections is not nice and there should be a registry setting or the limit should be lifted to at least 50.</p>
<p>Anyway, RAW sockets are much bigger threat than half-open connections and yet they are allowed and abused by many exploits.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444763">
				<div id="div-comment-444763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sceptic</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444763">
			November 24, 2006 at 2:08 am</a>		</div>

		<blockquote><p>
  That tweak <em>has</em> real effect on p2p. Those applications use half-open</p>
<p>  connections to search for file sources. The more they can open the faster</p>
<p>  they acquire sources. If you have a limit downloads will take longer to start</p>
<p>  and reach full speed.
</p></blockquote>
<p>Is this really the case, or is it just a case of recalibrating the sensors and rotating the shield harmonics? &nbsp;I&#8217;ve seen this claim on a number of sites, but always from the same sorts of sources that would talk about the QoS conspiracy.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444773">
				<div id="div-comment-444773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Reuben</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444773">
			November 24, 2006 at 5:31 am</a>		</div>

		<p>How do you submit topic suggestions? I thought there was a link somewhere, but I can&#8217;t find it&#8230;</p>
<p>Anyway, this article accuses XP of wasting $25 billion of energy:</p>
<p><a rel="nofollow" target="_new" href="http://www.treehugger.com/files/2006/11/how_windows_xp.php" rel="nofollow">http://www.treehugger.com/files/2006/11/how_windows_xp.php</a></p>
<p>It specifically cites &quot;XP letting applications override the sleep function&quot; as a cause, and I was wondering if Raymond could shed any light on that&#8230;</p>
<p>Me, I blame people for leaving their damn PCs and screens on around the clock, not to mention aircon, lighting, heating etc, etc, grumble, grumble&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444843">
				<div id="div-comment-444843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">-</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444843">
			November 24, 2006 at 12:04 pm</a>		</div>

		<blockquote><p>
  Is this really the case, or is it just a case of</p>
<p>  recalibrating the sensors and rotating the shield</p>
<p>  harmonics? &nbsp;I&#8217;ve seen this claim on a number of sites,</p>
<p>  but always from the same sorts of sources that would</p>
<p>  talk about the QoS conspiracy.
</p></blockquote>
<p>Yes, with some apps and usage patterns that put a heavy stress over TCP. For example, certain P2P &quot;system&quot; (which has many implementations) doesn&#8217;t keep permanent TCP connections, it only open them when needed. If you are downloading a significant number of files (think well into the hundreds) with a significant number of peers (tens or hundreds of thousands in total), then the 10 half-open connection limit can really be a burden, since:</p>
<ul>
<li>many peers use the default port</li>
<li>
<p>many peers fail (have gone offline, and the stupid firewall doesn&#8217;t return a RST)</p>
</li>
</ul>
<p>Right now, my average number of half-open connections is about 50. The number of new connections opened per second is about 200.</p>
<p>It&#8217;s also worth mentioning that Vista RTM&#8217;s TCP stack dies under such conditions (until reboot); and transfers (direct downloads) are significantly slower than XP (SP2 with a 256K window size set in the registry). It reminds me of the state of TCP in Win95 :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444883">
				<div id="div-comment-444883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aaron</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444883">
			November 24, 2006 at 4:31 pm</a>		</div>

		<p>Igor: &quot;Anyway, RAW sockets are much bigger threat than half-open connections and yet they are allowed and abused by many exploits.&quot;</p>
<p>Amazing &#8211; I didn&#8217;t think anybody still paid attention to Steve Gibson&#8217;s hysterical rants. &nbsp;You do realize that the whole raw sockets scare was a crock, right?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444893">
				<div id="div-comment-444893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444893">
			November 24, 2006 at 5:01 pm</a>		</div>

		<p>Sceptic said: &quot;Is this really the case&quot;</p>
<p>Source &#8212; official eMule documentation:</p>
<p><a rel="nofollow" target="_new" href="http://www.emule-project.net/home/perl/help.cgi?l=1&amp;rm=show_topic&amp;topic_id=120" rel="nofollow">http://www.emule-project.net/home/perl/help.cgi?l=1&#038;rm=show_topic&#038;topic_id=120</a></p>
<p>Max. Half Open Connections</p>
<hr />
<p>This setting became necessary with the connection throttling of Windows XP SP2. This update in XP will only allow 10 half open connections and then starts parking further connections in a queue which is only slowly processed. This leads to timeout and other undesired effects in eMule.</p>
<p>If eMule is running on XP SP2 do not set this value any higher than 9. Although there are patches to increase this hardcoded value in XP, it is not recommended to patch such critical parts in Windows. The only effect this setting does have is that eMule acquires sources a bit slower right after startup. This will subside after the sources have been found.</p>
<p>In other operating systems like Windows 2000 or the obsolete Windows 95/ME set this value to 50.</p>
<p>Aaron said: &quot;You do realize that the whole raw sockets scare was a crock, right?&quot;</p>
<p>Or was it?!?</p>
<p>If I may quote Steve Gibson whose work both as a programmer and as a network specialist I admire:</p>
<p>&quot;When those insecure and maliciously potent Windows XP machines are mated to high-bandwidth Internet connections, we are going to experience an escalation of Internet terrorism the likes of which has never been seen before.&quot;</p>
<p>Now you tell me Aaron, which part of his prediction hasn&#8217;t happened yet?!? Don&#8217;t tell me you haven&#8217;t heard about zombie nets, about cyber-extortion, etc?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding even thread-even depth-1" id="comment-444943">
				<div id="div-comment-444943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444943">
			November 24, 2006 at 8:19 pm</a>		</div>

		<blockquote><p>
  RAW sockets are much bigger threat
</p></blockquote>
<p>Pfft, yeah, because if you couldn&#8217;t open raw sockets, there&#8217;d be no other way to spoof IP traffic or generate DoS attacks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444913">
				<div id="div-comment-444913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-444913">
			November 24, 2006 at 6:22 pm</a>		</div>

		<p>[The myth lives on in a slightly different form today as the &quot;remove WinXP SP2&#8217;s maximum TCP session&quot; placebo setting.]</p>
<p>I&#8217;m no expert, but from what I&#8217;ve seen, the limit for half-open connections imposed by SP2 *can* actually have a significant impact in any application similar to a peer-to-peer program.</p>
<p>Essentially, since the system can only have 10 half-open connections, it has to wait for responses from hosts that may not answer very quickly. &nbsp;When dealing with networks like Gnutella or Bittorrent there are sometimes tens of thousands of peers and only allowing 10 simultaneous connection attempts you can create a real bottleneck.</p>
<p>I would certainly be interested if Raymond has any insight into this, including why Microsoft implemented this change. It&#8217;s supposed to help stop worms from spreading, but that seems like &quot;too little too late&quot; and a poor reason to cripple the TCP stack.</p>
<p>In any case, pass the sugar pills.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-445013">
				<div id="div-comment-445013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445013">
			November 26, 2006 at 6:01 pm</a>		</div>

		<p>[quote=igor]</p>
<p>If I may quote Steve Gibson whose work both as a programmer and as a network specialist I admire:</p>
<p>&quot;When those insecure and maliciously potent Windows XP machines are mated to high-bandwidth Internet connections, we are going to experience an escalation of Internet terrorism the likes of which has never been seen before.&quot;</p>
<p>[/quote]</p>
<p>Before putting faith in GRC you might want to wonder why such a &#8216;security expert&#8217; is generally absent from just about every single security forum, website or consortium other then grc.com. This is also the man who has been quoted as saying</p>
<p>&quot;&quot;First of all, I never told anybody about winpcap. I took the position that it was impossible &#8230; I set up a deliberate disinformation campaign from the beginning, in order to persuade the script kiddies that I had come into contact with, from believing that there was another approach to this; and it was only because I had to defend myself against articles like Thomas&#8217; that I finally was forced to acknowledge that there was other ways to do this.</p>
<p>I didn&#8217;t want to say that&#8230; &#8230;I agree that information should be kept as&#8230;away from people as much as possible. &#8230;it&#8217;s standard practice in security, as certainly you well know, when you divulge a vulnerability, the people who might be able to exploit it have the opportunity. It&#8217;s what happens every day in security.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-445023">
				<div id="div-comment-445023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sceptic</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445023">
			November 26, 2006 at 6:05 pm</a>		</div>

		<blockquote><p>
  I would certainly be interested if Raymond has any insight into this, including why</p>
<p>  Microsoft implemented this change. It&#8217;s supposed to help stop worms from spreading,</p>
<p>  but that seems like &quot;too little too late&quot; and a poor reason to cripple the TCP</p>
<p>  stack.
</p></blockquote>
<p>I dunno about Raymond, but I can tell you the details: It was based on some work HP labs did on virus throttles, which won Best Paper at the ACSAC conference in 2002. &nbsp;You can get the original report at <a rel="nofollow" target="_new" href="http://www.hpl.hp.com/techreports/2002/HPL-2002-172R1.html" rel="nofollow">http://www.hpl.hp.com/techreports/2002/HPL-2002-172R1.html</a>, and the followup on performance details at <a rel="nofollow" target="_new" href="http://www.hpl.hp.com/techreports/2003/HPL-2003-103.html" rel="nofollow">http://www.hpl.hp.com/techreports/2003/HPL-2003-103.html</a>. &nbsp;What MS did in XP SP2 is a (uhh, sorry Raymond :-) rather badly-done 30-second hack on the original design.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-445063">
				<div id="div-comment-445063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.robertmoir.com/blogs/someone_else' rel='external nofollow' class='url'>Robert Moir</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445063">
			November 27, 2006 at 4:34 am</a>		</div>

		<p>&quot;&quot;When those insecure and maliciously potent Windows XP machines are mated to high-bandwidth Internet connections, we are going to experience an escalation of Internet terrorism the likes of which has never been seen before.&quot;</p>
<p>Now you tell me Aaron, which part of his prediction hasn&#8217;t happened yet?!?&quot;</p>
<p>The one where he said this would actually all be down to raw sockets.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-445073">
				<div id="div-comment-445073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445073">
			November 27, 2006 at 8:47 am</a>		</div>

		<blockquote><p>
  For example PPPoE encapsulation takes ~25% of your bandwidth in both directions (up/down).
</p></blockquote>
<p>So why does my 3Mbit/sec ADSL (using PPPoE) connection consistently download at around 350 kbytes/sec (from e.g. kernel.org, or some other server that has the upstream bandwidth to support it), when 3Mbit/sec &quot;naively&quot; translates to 384 kbytes/sec? &nbsp;That&#8217;s a heck of a lot less than 25% overhead; it&#8217;s closer to 10%.</p>
<p>(Now that bandwidth number includes the TCP, IP, and Ethernet header sizes. &nbsp;But that&#8217;s only a few tens of bytes (14+20+20) per each frame&#8217;s maximum of 1514; it can&#8217;t add 15% to that 10% number.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-445473">
				<div id="div-comment-445473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pc486</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445473">
			November 27, 2006 at 4:29 pm</a>		</div>

		<blockquote><p>
  It is those idiots writing communication protocols with as much as 25% overhead.</p>
<p>  For example PPPoE encapsulation takes ~25% of your bandwidth in both directions (up/down).
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-445483">
				<div id="div-comment-445483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pc486</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445483">
			November 27, 2006 at 4:38 pm</a>		</div>

		<blockquote><p>
  For example PPPoE encapsulation takes ~25% of your bandwidth in both directions (up/down).
</p></blockquote>
<p>This statement is wrong. PPPoE typically has a 8-byte overhead. With ethernet&#8217;s standard 1500 byte MTU (think cable internet), this means with PPPoE framing the MTU is 1492. That&#8217;s 0.53% overhead, not 25%.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-445623">
				<div id="div-comment-445623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445623">
			November 27, 2006 at 10:34 pm</a>		</div>

		<p>Aaron said:</p>
<p>&quot;Before putting faith in GRC&#8230;&quot;</p>
<p>As for Gibson, his tool SPINRITE saved my bottom several times. So Aaron, when you match that with your skills and tools I will start having the same amount of faith in your opinions and judgement.</p>
<p>About PPPoE, perhaps I am wrong &#8212; I am simply telling what I am observing on my own (and some other) connections. If the overhead was smaller then I could reach 64KB/sec download on my 512kbps connection (which is connected at that speed and is not VBR) and yet I get only 52KB/sec maximum. For upload instead of 16KB/sec I get 12KB/sec. If it is not protocol overhead then I would really like to know what could that be.</p>
<p>Anyway, there are several protocol layers involved and each one has its own overhead added to the payload:</p>
<p>IP: &nbsp; &nbsp; &nbsp;20 bytes</p>
<p>PPP: &nbsp; &nbsp; &nbsp;2 bytes</p>
<p>PPPoE: &nbsp; &nbsp;6 bytes</p>
<p>MAC: &nbsp; &nbsp; 18 bytes</p>
<p>RFC1483: 10 bytes</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-445783">
				<div id="div-comment-445783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-445783">
			November 28, 2006 at 8:28 am</a>		</div>

		<p>Igor: Add all those up sometime, and notice that you get 56 bytes. &nbsp;Even adding a 20-byte TCP header, 76/1500 is nowhere *NEAR* 25%.</p>
<p>Your &quot;overhead&quot; is coming from somewhere else.</p>
<p>My guess would be you use a downloader program (web browser?) that gives you the speed over the entire lifetime of the download, instead of over the last N seconds. &nbsp;This is obviously not the instantaneous speed, which is what you need to look at when doing overhead calculations.</p>
<p>To get the instantaneous speed, run gkrellm (or possibly task manager if you use XP). &nbsp;This will include the TCP, IP, and Ethernet overhead, but not PPP or PPPoE (unless the PPP/PPPoE client is running on the machine you run gkrellm on; then I&#8217;m not sure what number it gives you).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-446393">
				<div id="div-comment-446393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-446393">
			November 29, 2006 at 11:55 am</a>		</div>

		<p>Igor Said:</p>
<p>Aaron said:</p>
<p>&quot;Before putting faith in GRC&#8230;&quot;</p>
<p>As for Gibson, his tool SPINRITE saved my bottom several times. So Aaron, when you match that with your skills and tools I will start having the same amount of faith in your opinions and judgement.</p>
<p>So because he wrote a decent tool that has absolutely nothing to do with network security you trust his opinions regarding network security? Would that be true if he had written a decent media player or card game?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-446623">
				<div id="div-comment-446623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-446623">
			November 29, 2006 at 6:59 pm</a>		</div>

		<p>BryanK said:</p>
<p>&quot;My guess would be you use a downloader program&quot;</p>
<p>For HTTP/FTP downloading I use Flashget and never mind how fast the server I am downloading off is, I can&#8217;t pass 52KB/sec.</p>
<p>I have no viruses or spyware on my machine and nothing runs in background. Automatic update disabled. Traffic handled by cheap ADSL modem/router which I intend to change.</p>
<p>Paul said:</p>
<p>&quot;So because he wrote a decent tool that has absolutely nothing to do with network security&#8230;&quot;</p>
<p>No, because of that tool I trust him not being a useless troll like some people who like to discuss things on the Internet.</p>
<p>I have read his articles about DoS attacks that hit his server(s) carefully and IMO he did show more than adequate level of expertise in both network protocols and security while defending himself against those attacks.</p>
<p>Point is that he experienced all weaknesses first hand unlike many of you here. I believe that most of you sit behind corporate firewalls while someone else administers your network and your PC. So give Gibson a break. Or at least write a tool as usefull as his if you want me to respect your opinion.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-446843">
				<div id="div-comment-446843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.yuvisense.net/2006/11/30/windows-tip-imporve-your-internet-speed-get-rid-of-bandwidth-used-by-m/' rel='external nofollow' class='url'>YuviSense: Geek under Development &raquo; Windows Tip: Imporve your internet speed!!! Get Rid of Bandwidth used by M$!!!</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061123-14/?p=28923#comment-446843">
			November 30, 2006 at 10:39 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blog.yuvisense.net/2006/11/30/windows-tip-imporve-your-internet-speed-get-rid-of-bandwidth-used-by-m/" rel="nofollow">http://blog.yuvisense.net/2006/11/30/windows-tip-imporve-your-internet-speed-get-rid-of-bandwidth-used-by-m/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>