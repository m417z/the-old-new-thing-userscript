<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (9)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1276745">
				<div id="div-comment-1276745" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andrea Martinelli</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276745">
			December 13, 2016 at 8:04 am</a>		</div>

		<p>There are a few thumbs.db files on my computer that I know for sure have not been generated by Windows XP.<br />
Are there any scenarios in which modern versions of Windows store thumbnails in Thumbs.db?</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-mngoldeneagle odd alt depth-2" id="comment-1276825">
				<div id="div-comment-1276825" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MNGoldenEagle' rel='external nofollow' class='url'>MNGoldenEagle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276825">
			December 13, 2016 at 2:50 pm</a>		</div>

		<p>Programs may generate the thumbs.db if they opt into it.  For example, the common Save/Open dialog boxes that most programs use will leverage the thumbnail database.  I believe Windows Media Player and its associates do as well for album covers.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1276755">
				<div id="div-comment-1276755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276755">
			December 13, 2016 at 8:32 am</a>		</div>

		<p>Never underestimate the shenanigans of bad developers. I don&#8217;t know an immediate cause but it&#8217;s possible they did something so bad with the shell namespace COM components as to cause thumbs.db to generate.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1276765">
				<div id="div-comment-1276765" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276765">
			December 13, 2016 at 8:39 am</a>		</div>

		<p>I really dislike these files. Windows has Thumbs.db and desktop.ini, MacOS has .DS_Store, even KDE has a &#8220;.directory&#8221; file it creates when you change the preview settings for a folder (at least it stores the thumbnails in a global per-user cache).</p>
<p>Of them, in my opinion the Windows ones are the worst ones, since they intrude in the namespace. The other two start with a dot, which clearly separates them from the user-created files, but Thumbs.db sits well in the middle of the namespace.</p>
<p>And there&#8217;s also the obvious privacy leak: create a folder with three images, have Explorer create the Thumbs.db, then delete one of the images and create a ZIP of the whole folder. The Thumbs.db file, sent to your client, can still have the thumbnail for the deleted image.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2 parent" id="comment-1276776">
				<div id="div-comment-1276776" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Piotr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276776">
			December 13, 2016 at 9:23 am</a>		</div>

		<p>That&#8217;s why thumbs.db is marked as hidden &#8211; no need to rely on magic names. You have metadata for that. But another valid point is when those are created on network shares. That&#8217;s what is really rude.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-cheong odd alt depth-3" id="comment-1276855">
				<div id="div-comment-1276855" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276855">
			December 13, 2016 at 5:50 pm</a>		</div>

		<p>That&#8217;s why &#8220;disable thumbnail&#8221; and &#8220;change to detail view and apply to all folders&#8221; are on the list of things I want to do on each system install/reinstall.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mngoldeneagle even depth-2 parent" id="comment-1276835">
				<div id="div-comment-1276835" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MNGoldenEagle' rel='external nofollow' class='url'>MNGoldenEagle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276835">
			December 13, 2016 at 2:54 pm</a>		</div>

		<p>I suspect if they implemented this feature today it would be a central store database inside of System Volume Information instead, which would make all kinds of more sense.  But I doubt that will happen now simply because what they have works and the cost to reimplement, change existing tests, communicate to customers, etc. would be prohibitively high.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3 parent" id="comment-1276865">
				<div id="div-comment-1276865" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.silverbacknetworks.tech' rel='external nofollow' class='url'>Joshua Bowman</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276865">
			December 13, 2016 at 8:41 pm</a>		</div>

		<p>Since Vista, it&#8217;s been at %USERPROFILE%\AppData\Local\Iconcache.db, so it&#8217;s at least centralized per-user.</p>
<p>I don&#8217;t think adding it to System Volume Information would be a good idea, since that puts it in a protected location, and now you need new APIs to add, retrieve, and erase them, and have an additional unnecessary security risk.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-mngoldeneagle even depth-4" id="comment-1276885">
				<div id="div-comment-1276885" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MNGoldenEagle' rel='external nofollow' class='url'>MNGoldenEagle</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20161213-00/?p=94925#comment-1276885">
			December 14, 2016 at 7:11 am</a>		</div>

		<p>Presumably if one were to reimplement it you could design the APIs appropriate to the implementation. ;-) A user-level datastore makes sense, though, just in the sense that it means you don&#8217;t have to worry about tracking permissions for the thumbnails and who&#8217;s able to access what.  The advantage to using a system-level store is that you can deduplicate the thumbnails generated across all users and cache them within a system service, similar to how the Indexer works.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>