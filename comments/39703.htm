<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (11)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-166103">
				<div id="div-comment-166103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.25hoursaday.com/weblog' rel='external nofollow' class='url'>kpako@yahoo.com (Dare Obasanjo)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166103">
			April 21, 2004 at 10:01 am</a>		</div>

		<p>My favorite movie subject all at once period was Antz and A Bug&#8217;s Life. The Deep Impact/Armageddon period was also interesting.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-166133">
				<div id="div-comment-166133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/ericlippert' rel='external nofollow' class='url'>Eric Lippert</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166133">
			April 21, 2004 at 10:29 am</a>		</div>

		<p>On a related topic, the way JScript/JScript .NET handle this is a little weird.  I wrote a couple of articles on that a while back:</p>
<p><a target="_new" href="http://blogs.msdn.com/ericlippert/archive/2003/09/22/53063.aspx" rel="nofollow">http://blogs.msdn.com/ericlippert/archive/2003/09/22/53063.aspx</a></p>
<p><a target="_new" href="http://blogs.msdn.com/ericlippert/archive/2003/10/01/53134.aspx" rel="nofollow">http://blogs.msdn.com/ericlippert/archive/2003/10/01/53134.aspx</a></p>
<p>Remember 1988, when all those terrible mind-body-switch movies came out at the same time?   That was weird.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-166143">
				<div id="div-comment-166143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://haack.org/' rel='external nofollow' class='url'>nospamplease75@yahoo.com (Haacked)</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166143">
			April 21, 2004 at 11:13 am</a>		</div>

		<p>To prove your point, I had written an enumerator called PageRangeEnumerator.  You give it a string like &quot;1-4,7,18+&quot; and it would only enumerate over those pages.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-166193">
				<div id="div-comment-166193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Clinton Pierce</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166193">
			April 21, 2004 at 1:01 pm</a>		</div>

		<p>Larry Wall talks about optimizing for the Programmer as well as for Runtime speed.  I&#8217;ll give up quite a few CPU cycles to maintain foreach(&#8230;) over a corresponding for(&#8230;) loop anytime.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-166213">
				<div id="div-comment-166213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Kafrissen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166213">
			April 21, 2004 at 2:55 pm</a>		</div>

		<p>You have described why the compiler cannot optimize one form into another, but you did not describe why one form is less efficient than the other.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-166223">
				<div id="div-comment-166223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-166223">
			April 21, 2004 at 2:59 pm</a>		</div>

		<p>My topic is &quot;Why the compiler can&#8217;t autoconvert foreach to for&quot;, not &quot;Which one is faster&quot;. That&#8217;s a topic for somebody else (try the links I provided).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-167383">
				<div id="div-comment-167383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JFo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-167383">
			April 24, 2004 at 6:20 pm</a>		</div>

		<p>It turns out that sometimes a foreach can be faster than a for loop &#8211; some people have been converting their loops from this:</p>
<p>foreach (Control c in this.Controls) {<br />
<br /> // &#8230;<br />
<br />}</p>
<p>to this:</p>
<p>for (int i = 0; i &lt; this.Controls.Count; i++) {<br />
<br />  // &#8230;<br />
<br />}</p>
<p>Since you&#8217;re now accessing the &quot;Controls&quot; property on every iteration instead of using the enumerator it significantly slows down the loop.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-168573">
				<div id="div-comment-168573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">indranil banerjee</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-168573">
			April 27, 2004 at 3:07 pm</a>		</div>

		<p>but this just begs the question: Why were they designed to be semantically different?</p>
<p>Sure, &quot;depending on the circumstances, it may be better for the program to crash than to produce incorrect results&quot;. And sometimes the other way around. The language designer can never know. So why the inconsistency? </p>
<p>I would choose the more permissive of the two choices, apply it consistently to both keywords and leave error handling to the programmer.</p>
<p>BTW, JFo a really smart foreach would generate this :-</p>
<p>int end = this.Controls.Count<br />
<br />for (int i = 0; i &lt; end; ++i) {<br />
<br />// &#8230;<br />
<br />} </p>
<p>thats what happens in STL</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-168593">
				<div id="div-comment-168593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-168593">
			April 27, 2004 at 3:51 pm</a>		</div>

		<p>They are different because &quot;foreach&quot; is a generalized enumerator whereas &quot;for&quot; works only for integer-indexed objects. One is generalized and one is specialized.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-171433">
				<div id="div-comment-171433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.lemanix.com/nick/archive/2004/05/05/455.aspx' rel='external nofollow' class='url'>Nick's Delphi Blog</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-171433">
			May 5, 2004 at 12:34 pm</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-190683">
				<div id="div-comment-190683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040421-00/?p=39703#comment-190683">
			July 5, 2004 at 12:03 pm</a>		</div>

		<p>Commenting on this entry has been closed.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>