<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (11)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1279515">
				<div id="div-comment-1279515" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279515">
			January 9, 2017 at 9:07 am</a>		</div>

		<p>Friday was &#8220;part 2&#8221; and this is &#8220;part 4.&#8221;  Was &#8220;part 3&#8221; lost or is this just an off-by-one error?</p>
<p>Anyway, I&#8217;ve really enjoyed this recent series.  Thanks!</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1279525">
				<div id="div-comment-1279525" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">McBucket</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279525">
			January 9, 2017 at 9:29 am</a>		</div>

		<p>They&#8217;re actually numbered by powers of 2. Next installment would be &#8220;part 8&#8221;.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1279535">
				<div id="div-comment-1279535" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rob</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279535">
			January 9, 2017 at 9:38 am</a>		</div>

		<p>Look a couple entries previous.  This entry was titled &#8220;Applying a permutation to a vector&#8221;.  The Thursday and Friday articles were about a specific application of the general algorithm.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1279486">
				<div id="div-comment-1279486" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">TwelveBaud</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279486">
			January 9, 2017 at 9:46 am</a>		</div>

		<p>Raymond is interleaving the <a href="https://blogs.msdn.microsoft.com/oldnewthing/20170102-00/?p=95095">&#8220;Permutations of a Vector&#8221; series</a> and the <a href="https://blogs.msdn.microsoft.com/oldnewthing/20170105-00/?p=95125">&#8220;Sorting by Indices&#8221; series</a>. You have to read the whole title, not just the suffix.</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-2" id="comment-1279545">
				<div id="div-comment-1279545" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279545">
			January 9, 2017 at 1:25 pm</a>		</div>

		<p>Ah, thanks.  I didn&#8217;t realize they were being interleaved.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1 parent" id="comment-1279555">
				<div id="div-comment-1279555" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">rkannan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279555">
			January 9, 2017 at 3:44 pm</a>		</div>

		<p>Another way to look at this is to observe that the permutation of a vector is actually a matrix-vector multiplication operation, with the matrix P being an NxN binary matrix such that P[i][indices[i]] = 1 (and zeros everywhere else). Then, the naive cost of the permutation is the cost of matrix-vector multiple, which is N^2. However, since this is a binary matrix, we don&#8217;t need to multiply entries by 0, only those with a nonzero value. There is exactly one nonzero entry per row, hence the cost is only N. Vector permutations come up all the time in Linear Algebra operations such as Gaussian elimination with pivoting.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor even depth-2 parent" id="comment-1279565">
				<div id="div-comment-1279565" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279565">
			January 9, 2017 at 3:55 pm</a>		</div>

		<p>But it takes <var>O</var>(<var>N</var>) operations to find that nonzero value in each row, so if you are using matrix multiplication, the cost is <var>O</var>(<var>N</var>&sup2;).</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1279575">
				<div id="div-comment-1279575" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">R Kannan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279575">
			January 10, 2017 at 4:57 am</a>		</div>

		<p>Raymond, you don&#8217;t need to search for the nonzero entry because we already have its location: The nonzero entry in row i indices[i]. (although if we carry the matrix analogy through , we&#8217;ll need an additional O(N) storage to store the permuted vector.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-3" id="comment-1279595">
				<div id="div-comment-1279595" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SI</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279595">
			January 10, 2017 at 5:59 am</a>		</div>

		<p>If you use a sparse matrix, you only have to operate on the n nonzero values, and it goes back to being O(n)</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-1279566">
				<div id="div-comment-1279566" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279566">
			January 10, 2017 at 8:06 am</a>		</div>

		<p>Noting that if you are allowed <var>O</var>(<var>N</var>) additional storage, then the algorithm is trivial, as demonstrated in part 1.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1279625">
				<div id="div-comment-1279625" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ivan K</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170109-00/?p=95145#comment-1279625">
			January 11, 2017 at 3:24 am</a>		</div>

		<p>The while loop was a big hint that something was going on.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>