<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (10)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1296695">
				<div id="div-comment-1296695" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Damien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296695">
			May 18, 2017 at 7:06 am</a>		</div>

		<p>Post seems rather incomplete &#8211; are you waiting for a lock before finishing it?</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1296705">
				<div id="div-comment-1296705" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodríguez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296705">
			May 18, 2017 at 7:29 am</a>		</div>

		<p>Hope it&#8217;s not a deadlock &#8211; because I want a new article tomorrow :-) .</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2 parent" id="comment-1296865">
				<div id="div-comment-1296865" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scarlet Manuka</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296865">
			May 18, 2017 at 7:13 pm</a>		</div>

		<p>What additional information were you looking for? The subject of the post is &#8220;why is the !locks command called !locks even though it only does critical sections?&#8221; and the answer is &#8220;they were the only type of user-mode locks around when it was named.&#8221; There&#8217;s a bit of discussion to flesh it out, and some supplemental information; there doesn&#8217;t seem to be anything more to add.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-3" id="comment-1296915">
				<div id="div-comment-1296915" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Damien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296915">
			May 19, 2017 at 7:03 am</a>		</div>

		<p>When I first read the article, it stopped with <i>Until then, the word &#8220;lock&#8221;</i>. More words appeared later.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1296736">
				<div id="div-comment-1296736" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DWalker07</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296736">
			May 18, 2017 at 7:56 am</a>		</div>

		<p>That sounds reasonable.  We just need a time machine to fix things.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="comment-1296755">
				<div id="div-comment-1296755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andrew</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296755">
			May 18, 2017 at 8:53 am</a>		</div>

		<p>Retronym needed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-fredericmagnyf even thread-odd thread-alt depth-1 parent" id="comment-1296775">
				<div id="div-comment-1296775" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Medinoc' rel='external nofollow' class='url'>Medinoc</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296775">
			May 18, 2017 at 9:16 am</a>		</div>

		<p>Which reminds me, do &#8220;fat&#8221; reader-writer locks exist? Stuff that can have one writer at a time, but uses regular kernel object handles that can be waited on with WaitForMultipleObjects? I searched a bit, but haven&#8217;t found any&#8230;</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-jan-ringos odd alt depth-2" id="comment-1296905">
				<div id="div-comment-1296905" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Jan+Ringo%C5%A1' rel='external nofollow' class='url'>Jan Ringoš</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1296905">
			May 19, 2017 at 3:47 am</a>		</div>

		<p>LockFileEx? But you need to use LockFileEx again to wait, not WaitForMultipleObjects, and also no timeout, and who knows if CancelIoEx will work.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even depth-2" id="comment-1297006">
				<div id="div-comment-1297006" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sergei Vorobiev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1297006">
			May 20, 2017 at 4:48 pm</a>		</div>

		<p>Even if there were, WaitForSingleObject() won&#8217;t cut it since there is no exclusive/shared semantics.</p>
<p>Consider creating a bunch of mutexes. Reader acquires one mutex according to some hash of current cpu, tid, whatever. Writer acquires all in some well-defined order.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-2" id="comment-1297035">
				<div id="div-comment-1297035" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170518-00/?p=96185#comment-1297035">
			May 22, 2017 at 7:00 am</a>		</div>

		<p>You could carry out the sequence to construct Reader-Writer from semaphore, use the kernel Semaphore, then unwrap the logic so you can use WaitForMultipleObjects.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>