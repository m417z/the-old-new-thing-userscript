<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (49)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-620453">
				<div id="div-comment-620453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SRS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620453">
			April 17, 2008 at 10:15 am</a>		</div>

		<p>I like the advice that goes with Empty Folder Nuker v1.2.0 as well: &quot;Now of course you should be careful not to delete important files &#8211; that much should be a given&quot;. Wise words indeed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620463">
				<div id="div-comment-620463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Danielw</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620463">
			April 17, 2008 at 10:28 am</a>		</div>

		<p>Just don&#8217;t run that if you&#8217;re a purist like me and have no desktop icons. &nbsp;Windows kinda goes nuts. &nbsp;At least it did the last time I tried to run it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620473">
				<div id="div-comment-620473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620473">
			April 17, 2008 at 10:34 am</a>		</div>

		<p>I can&#8217;t figure out from the linked page whether or not the program also deletes empty files first. The guy seems completely confused about the distinction between files and folders, making it unclear what the program does.</p>
<p>It&#8217;s entirely possible to conclude from what he&#8217;s written that he considers a folder that contains files, all of which are 0 bytes in length, as being empty. In which case the program might delete all empty files (0 bytes in length) first and then delete any folders that are empty, including folders that have just been emptied by removing 0-byte files.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620503">
				<div id="div-comment-620503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rajesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620503">
			April 17, 2008 at 10:48 am</a>		</div>

		<p>This script fails if the directory name containes any space(blank) charecters.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620513">
				<div id="div-comment-620513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620513">
			April 17, 2008 at 10:54 am</a>		</div>

		<p>I would rather gauge my eyes out, thank you very much.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620523">
				<div id="div-comment-620523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620523">
			April 17, 2008 at 10:55 am</a>		</div>

		<p>I made a program that does this awell, I&#8217;m sure you could do it in a batch file, but it needs more handling than you have here.</p>
<p>On win9x, there are a couple of folders that can be empty, but you don&#8217;t want to delete them because it messes up the shell (IIRC the desktop and all users desktop folders)</p>
<p>Also, you don&#8217;t want to delete empty guid folders (Don&#8217;t know the proper name for those) ex: &quot;Control Panel.{control_panel_guid}&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620563">
				<div id="div-comment-620563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John Vert</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620563">
			April 17, 2008 at 11:52 am</a>		</div>

		<p>To fix the problem with spaces in paths, use the delims option:</p>
<p>&nbsp;for /f &quot;usebackq delims=&quot; %%d in (<code>&amp;quot;dir /ad/b/s | sort /R&amp;quot;</code>) do rd &quot;%%d&quot;</p>
<p>Then it will not tokenize the line.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620583">
				<div id="div-comment-620583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Tom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620583">
			April 17, 2008 at 11:59 am</a>		</div>

		<p>Actually, I really do enjoy working with batch files. &nbsp;Some of my earliest programming was writing .bat files for DOS (who can forget autoexec.bat?). &nbsp;Things have gotten much more sophisticated as Windows has added features to the language, and yet it retains its simple and familiar feel. &nbsp;It has a certain charm and accessibility which I find completely absent in other shells and scripting environments.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-francip even thread-even depth-1" id="comment-620593">
				<div id="div-comment-620593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Franci+Penov' rel='external nofollow' class='url'>Franci Penov</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620593">
			April 17, 2008 at 12:02 pm</a>		</div>

		<p>Or you could just do rd /s /q /f &quot;&lt;empty folder&gt;&quot;. Saves you additional 60 chars. :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620623">
				<div id="div-comment-620623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KJK::Hyperion</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620623">
			April 17, 2008 at 12:20 pm</a>		</div>

		<p>or, losing the heinous &quot;usebackq&quot; option:</p>
<p>for /f &quot;tokens=*&quot; %%d in (&#8216;dir /ad/b/s ^| sort /R&#8217;) do rd &quot;%%d&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620633">
				<div id="div-comment-620633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KJK::Hyperion</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620633">
			April 17, 2008 at 12:22 pm</a>		</div>

		<p>Franci: don&#8217;t even JOKE. rd /s deletes all subfolders AND files</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620653">
				<div id="div-comment-620653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620653">
			April 17, 2008 at 12:31 pm</a>		</div>

		<p>Why the unnecessary usebackq? To use the quotes, because yor don&#8217;t know how to escape the pipe symbol? Or what? It can be so simple:</p>
<p>for /f &quot;delims=&quot; %%i in (&#8216;dir /s /b /ad ^| sort /r&#8217;) do rd &quot;%%i&quot;&gt;NUL</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620673">
				<div id="div-comment-620673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Fenster</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620673">
			April 17, 2008 at 12:37 pm</a>		</div>

		<p>When I want to delete all folders (not necessarily empty ones). &nbsp;I use robocopy using /MIR option and set the source folder as an empty folder and the destination as the folders I want to delete e.g:</p>
<p>SET SOURCE=N:TempDir</p>
<p>SET DEST=N:Trash</p>
<p>MD %SOURCE%</p>
<p>ROBOCOPY %SOURCE% %DEST% /MIR /R:01 /W:01</p>
<p>del %SOURCE%</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620683">
				<div id="div-comment-620683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mega Bloat</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620683">
			April 17, 2008 at 12:37 pm</a>		</div>

		<p>cmd.exe is 382 kb (winxp). What kind of bloatware is this?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620693">
				<div id="div-comment-620693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620693">
			April 17, 2008 at 12:48 pm</a>		</div>

		<p>Can somebody please provide a dummy&#8217;s explanation of what usebackq is used for and how it&#8217;s better than tokens?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620713">
				<div id="div-comment-620713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">tkeane</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620713">
			April 17, 2008 at 1:07 pm</a>		</div>

		<p>@anon-</p>
<p>I&#8217;ve heard there are magical web-sites where you can type in words such as &#8216;usebackq&#8217; and &#8216;tokens&#8217; and get links to relevant articles about them&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620723">
				<div id="div-comment-620723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Josh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620723">
			April 17, 2008 at 1:11 pm</a>		</div>

		<p>@anon:</p>
<p>It&#8217;s got nothing to do with tokenizing. &nbsp;usebackq simply makes the command in the parentheses be delimited with backquotes, ` (it&#8217;s right above the Tab on most QWERTYs), instead of normal quotes, &#8216;, &nbsp;which allows for you to use a number of symbols in the command string directly which would otherwise have to be escaped.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620753">
				<div id="div-comment-620753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620753">
			April 17, 2008 at 1:36 pm</a>		</div>

		<p>@Josh:</p>
<p>Thanks. &nbsp;Exactly what I was looking for.</p>
<p>@tkeane:</p>
<p>That type of comment doesn&#8217;t help anyone. &nbsp;The first page of results from <a rel="nofollow" target="_new" href="http://www.google.com/search?q=usebackq" rel="nofollow">http://www.google.com/search?q=usebackq</a>:</p>
<p>Has 3 explanations that are identical, 3 that require you to login to a site and the rest are useless.</p>
<p>Thanks to Josh there will now be one more explanation on the first page when people go to these magical web sites.</p>
<p>Is it really so bad to ask for an alternate explanation?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620793">
				<div id="div-comment-620793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620793">
			April 17, 2008 at 4:17 pm</a>		</div>

		<p>this is all too complicated. Install some unix tools and do this:</p>
<p>find &lt;dir&gt; -depth -type d -empty|xargs rmdir</p>
<p>as a bonus, if I screwed up the command, rmdir fails when the dir isn&#8217;t empty.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620813">
				<div id="div-comment-620813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">oskopia</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620813">
			April 17, 2008 at 4:35 pm</a>		</div>

		<p>I work with batch files &#8211; not often, but if I need something, they can do. But I have heard, Basic &#8230; some sort of Basic is much better for it. Unfortunately I am not used to it, but to batch files.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620883">
				<div id="div-comment-620883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">njkayaker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620883">
			April 17, 2008 at 5:59 pm</a>		</div>

		<p>@anon: &quot;That type of comment doesn&#8217;t help anyone.&quot;</p>
<p>Your original post is indistiguishable from what some one too lazy to to a web search would have posted. (Hint: provide some evidence that you&#8217;ve performed the search before asking the question.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620893">
				<div id="div-comment-620893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620893">
			April 17, 2008 at 6:18 pm</a>		</div>

		<p>@Josh: Adding the usebackq and trying to find the horribly stupid backquotes on an EN-US keyboard (hint: not there, you have to use AltGr+XXXX) is definitely much less efficient than simply escaping one or too ampersands or pipes.</p>
<p>@anon: tokens=* instead of delims= is just less understandable and non-obvious.</p>
<p>And for the usebackq: Where&#8217;s your problem with typing &quot;for /?&quot; on your command prompt?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620903">
				<div id="div-comment-620903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620903">
			April 17, 2008 at 6:26 pm</a>		</div>

		<p>Using the -empty primary for find doesn&#8217;t work, because as Raymond says, &quot;we enumerate the directories bottom-up rather than top-down. This is important for deleting empty directories because you have to remove the subdirectories before you remove the parent.&quot; Therefore you have to find all subdirectories and rely on rmdir only removing the empty ones.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620913">
				<div id="div-comment-620913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike Heath</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620913">
			April 17, 2008 at 6:48 pm</a>		</div>

		<p>It&#8217;s blog posts like this that make me glad I have Cygwin. &nbsp;It&#8217;s a simple rm -rf dirname.</p>
<div class=post>[<i>Um, that removes nonempty directories too. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620923">
				<div id="div-comment-620923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620923">
			April 17, 2008 at 6:50 pm</a>		</div>

		<blockquote><p>
  Using the -empty primary for find doesn&#8217;t work, because as Raymond says, &quot;we enumerate the directories bottom-up rather than top-down.
</p></blockquote>
<p>that&#8217;s what -depth is for &#8211; it enumerates bottom up.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620953">
				<div id="div-comment-620953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">chrismcb</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620953">
			April 17, 2008 at 8:19 pm</a>		</div>

		<p>@cooney</p>
<p>How is &quot;find &lt;dir&gt; -depth -type d -empty|xargs rmdir&quot; any less complicated?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-620963">
				<div id="div-comment-620963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">steveg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620963">
			April 17, 2008 at 9:01 pm</a>		</div>

		<p>usebackq: <a rel="nofollow" target="_new" href="http://www.ss64.com/nt/for_cmd.html" rel="nofollow">http://www.ss64.com/nt/for_cmd.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-620983">
				<div id="div-comment-620983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://mailto:mail@jeff-tyrrill.com' rel='external nofollow' class='url'>Jeff Tyrrill</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-620983">
			April 17, 2008 at 10:56 pm</a>		</div>

		<p>Once again, we encounter the main reason that the command line is ill-equipped for any serious task: This script does not work with non-ASCII (such as Japanese) characters. Tested on Vista.</p>
<p>I note that the linked program does support Unicode (even though it had to be &quot;added&quot; after the first release).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-madq42 even thread-even depth-1" id="comment-621003">
				<div id="div-comment-621003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MadQ1' rel='external nofollow' class='url'>MadQ1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621003">
			April 18, 2008 at 12:37 am</a>		</div>

		<p>Jeff: Out of curiousity, have you tried changing the console&#8217;s code page? For example, to set the code page to UTF-8: MODE CON CP /SELECT=65001</p>
<p>Or maybe 932 (ANSI/OEM Japanese; Japanese (Shift-JIS)) or one of the other japanese code pages would work. I&#8217;m just stabbing in the dark; I know nothing about Japanese.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621063">
				<div id="div-comment-621063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.gialloporpora.netsons.org/index.php/2008/04/18/cancellare-le-cartelle-orfane-con-una-sola-riga-di-comando/' rel='external nofollow' class='url'>Cancellare le cartelle orfane con una sola riga di comando | Il blog che non c'??</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621063">
			April 18, 2008 at 5:59 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://www.gialloporpora.netsons.org/index.php/2008/04/18/cancellare-le-cartelle-orfane-con-una-sola-riga-di-comando/" rel="nofollow">http://www.gialloporpora.netsons.org/index.php/2008/04/18/cancellare-le-cartelle-orfane-con-una-sola-riga-di-comando/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621073">
				<div id="div-comment-621073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621073">
			April 18, 2008 at 8:12 am</a>		</div>

		<p>Eeew, piping to xargs!</p>
<p>On Unix, any byte is valid in a file or directory name except the zero byte and the byte used for the ASCII forward slash character (0x2f). &nbsp;Piping to xargs fails if any directory anywhere in the output of find has a newline in its name.</p>
<p>What does work is:</p>
<p>find -depth -type d -empty -exec rmdir {} ;</p>
<p>to have find execute rmdir directly.</p>
<p>(Of course all this requires some sort of Unix find to be installed, which means it&#8217;s a bad solution for Windows. &nbsp;It also breaks as soon as you need to run it on some machine that you don&#8217;t own&#8230;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621083">
				<div id="div-comment-621083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gerald</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621083">
			April 18, 2008 at 8:28 am</a>		</div>

		<p>Actually, these postings are the ones I love the most.</p>
<p>I doubt I&#8217;ll ever have to program scrollbar behaviors, but this kind of stuff is extremely useful. It doesn&#8217;t just show a specific solution to a specific problem, but also introduces a line of thinking which makes me consider &quot;oh, I could actually use this for something else&#8230;&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621133">
				<div id="div-comment-621133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621133">
			April 18, 2008 at 11:30 am</a>		</div>

		<p>Jeff and MadQ, did you ever consider &quot;cmd /u&quot;?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621203">
				<div id="div-comment-621203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuliy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621203">
			April 18, 2008 at 12:35 pm</a>		</div>

		<p>@chrismcb</p>
<p>It&#8217;s different because it fails to delete a directory which has only an empty directory as a subdirectory. Raymond&#8217;s solution tries to rd every directory. It succeeds for empty directories (when it gets to them) but fails for those that are empty.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621223">
				<div id="div-comment-621223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621223">
			April 18, 2008 at 12:46 pm</a>		</div>

		<p>@Cooney and BryanK</p>
<p>Even simpler Unix one-liners that don&#8217;t require piping or spawning new processes:</p>
<p>To delete 0-byte files and empty directories:</p>
<p>find &lt;dir&gt; -empty -delete</p>
<p>To delete empty directories but not 0-byte files:</p>
<p>find &lt;dir&gt; -empty -type d -delete</p>
<p>Note that the -delete option implies -depth.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621263">
				<div id="div-comment-621263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621263">
			April 18, 2008 at 1:08 pm</a>		</div>

		<p>&quot;Where&#8217;s your problem with typing &quot;for /?&quot; on your command prompt?&quot;</p>
<p>Some of us don&#8217;t use Windows but still enjoy Raymond&#8217;s informative and insightful posts.</p>
<p>Typing &quot;for /?&quot; on a Bourne shell won&#8217;t do any good.</p>
<p>(Of course, one could try running Wine&#8217;s cmd.exe and typing &quot;for /?&quot; there&#8230; Assuming they implemented the help parts of cmd.exe, that they implemented the &quot;advanced&quot; functions of cmd.exe, that they didn&#8217;t make any mistake on the help text, and that you are running on a i386-derived platform.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621273">
				<div id="div-comment-621273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621273">
			April 18, 2008 at 1:12 pm</a>		</div>

		<p>-delete? &nbsp;Wow, I had no idea that existed&#8230; &nbsp;Thanks! &nbsp;:-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621343">
				<div id="div-comment-621343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jbazuzi.blogspot.com' rel='external nofollow' class='url'>Jay Bazuzi</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621343">
			April 18, 2008 at 2:43 pm</a>		</div>

		<p>I was a CMD scripting nut for many years, but thanks to PowerShell, I can cut off the oxygen supply to that part of my brain.</p>
<p>One thing that most of the alternative solutions proposed here seem to miss is that if a directory contains no files in any of its subdirectories, Raymond&#8217;s one-liner will delete them. &nbsp;My proposal fails that test, too, I&#8217;m afraid, but I offer it here anyway as an example of the wonder of PowerShell.</p>
<p>Get-ChildItem -Recurse . | where { $<em>.PSISContainer -and @( $</em> | Get-ChildItem ).Count -eq 0 } | Remove-Item</p>
<p>or, more tersely,</p>
<p>gci -R . | where { $<em>.PSISContainer -and @( $</em> | gci ).Count -eq 0 } | ri</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621383">
				<div id="div-comment-621383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621383">
			April 18, 2008 at 6:48 pm</a>		</div>

		<blockquote><p>
  One thing that most of the alternative solutions proposed here seem to miss is that if a directory contains no files in any of its subdirectories, Raymond&#8217;s one-liner will delete them.
</p></blockquote>
<p>And they continued to do so after I quoted Raymond, which just goes to show that nobody actually reads anything he writes. (Now, where was that article on write-only memory?)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621413">
				<div id="div-comment-621413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://greasemonkey.nonlogic.org' rel='external nofollow' class='url'>GreaseMonkey</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621413">
			April 19, 2008 at 1:08 am</a>		</div>

		<blockquote><p>
  cmd.exe is 382 kb (winxp). What kind of bloatware is this?
</p></blockquote>
<p>It does more than just delete files.</p>
<p>By the way, /bin/bash is 661KB. If you&#8217;re typing that on a mac, I could probably guarantee it&#8217;s more bloated than cmd.exe. /bin/busybox is 440KB or something, and it&#8217;s got a lot of stuff; I&#8217;m unsure if it matches cmd.exe though.</p>
<p>In honour of Linux bloatware though&#8230; /bin/true and /bin/false are 11KB here; I can make a file in DEBUG.EXE to do the same thing, and that takes up only 5 bytes. With an MZ header (DOS EXE), I could probably do that in 37 bytes. Although, someone made a Linux ELF program in a very similar vein which was only 46 bytes, even though it walked all over the header. The smallest PE file (Windows EXE) is about 81 bytes or something, and it doesn&#8217;t work on 2000/XP due to the lack of headers.</p>
<p>As for the deletion script, I haven&#8217;t worked out how to do the same in a bourne shell, but it&#8217;d be a lot better than 260KB. Heck, I could do a C program better than that, maybe even a C++ one or a Java one using GCJ.</p>
<p>So yeah, goes both ways.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621483">
				<div id="div-comment-621483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog-well.com/2008/04/20/neteffect-april-20-2008/' rel='external nofollow' class='url'>.neteffect, April 20, 2008 | BlogWell</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621483">
			April 20, 2008 at 4:09 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blog-well.com/2008/04/20/neteffect-april-20-2008/" rel="nofollow">http://blog-well.com/2008/04/20/neteffect-april-20-2008/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621503">
				<div id="div-comment-621503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Camacho</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621503">
			April 20, 2008 at 11:52 pm</a>		</div>

		<p>@BryanK</p>
<p>The -print0 / &#8211;null option can be used to let xargs function when the input filenames contain whitespace.</p>
<p>find -depth -type d -empty -print0 | xargs &#8211;null rmdir</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-621833">
				<div id="div-comment-621833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Voigt</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621833">
			April 21, 2008 at 2:49 pm</a>		</div>

		<p>@Camacho</p>
<p>That still collects all the names first, which:</p>
<p>(1) Doesn&#8217;t delete directories that are recursively empty.</p>
<p>(2) Risks exceeding the maximum command-line length.</p>
<p>Better options have already been given.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-621933">
				<div id="div-comment-621933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Walker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-621933">
			April 21, 2008 at 3:53 pm</a>		</div>

		<p>@Clooney: Now you have two problems. &nbsp;(It seems like I have heard that somewhere before&#8230;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-622393">
				<div id="div-comment-622393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-622393">
			April 22, 2008 at 12:38 pm</a>		</div>

		<p>Jesus Christ Ray every time you post its like planting a seed, branches grow off in all kinds of crazy directions.</p>
<p>Thanks for posting the oneliner, I&#8217;ve been trying to figure that one out for some time. I had not thought of relying on rd&#8217;s inability to remove non-empty folders.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-622663">
				<div id="div-comment-622663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://conormulligan.com/blog/2008/04/22/one-line-batch-file-to-delete-empty-directories/' rel='external nofollow' class='url'>conormulligan.com / blog &raquo; One-line batch file to delete empty directories</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-622663">
			April 22, 2008 at 4:35 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://conormulligan.com/blog/2008/04/22/one-line-batch-file-to-delete-empty-directories/" rel="nofollow">http://conormulligan.com/blog/2008/04/22/one-line-batch-file-to-delete-empty-directories/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-626333">
				<div id="div-comment-626333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://cdavis1962.wordpress.com/2008/05/06/links-for-2008-05-06/' rel='external nofollow' class='url'>links for 2008-05-06 &laquo; LAN b4 Time</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-626333">
			May 5, 2008 at 8:33 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://cdavis1962.wordpress.com/2008/05/06/links-for-2008-05-06/" rel="nofollow">http://cdavis1962.wordpress.com/2008/05/06/links-for-2008-05-06/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-630013">
				<div id="div-comment-630013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-630013">
			May 15, 2008 at 3:52 pm</a>		</div>

		<p></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-645773">
				<div id="div-comment-645773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/cellfish/archive/2008/07/10/recursively-delete-empty-directories.aspx' rel='external nofollow' class='url'>Being Cellfish</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080417-00/?p=22703#comment-645773">
			July 10, 2008 at 8:15 am</a>		</div>

		<p>I recently had to find a neat way to remove all empty directories recursively on a Unix machine. In the</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>