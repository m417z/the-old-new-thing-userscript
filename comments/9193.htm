<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (8)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-944873">
				<div id="div-comment-944873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944873">
			November 4, 2011 at 8:02 am</a>		</div>

		<p>The customer&#39;s CTimeZoneTraits::Equals() function be checking if memcmp(&#8230;) == 0, not if memcmp(&#8230;) != 0.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-944893">
				<div id="div-comment-944893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Steve McKay</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944893">
			November 4, 2011 at 8:05 am</a>		</div>

		<p>General-purpose hash function and memcmp(&amp;tz1, &amp;tz2, sizeof(tz1)? Easy to implement, easy to understand. Gets the job done well enough if it doesn&#39;t cause too many cache misses, and I suspect it won&#39;t if you&#39;re doing enough lookups for caching to be worthwhile.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-944903">
				<div id="div-comment-944903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Olivier</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944903">
			November 4, 2011 at 8:10 am</a>		</div>

		<p>There is at least one timezone where StandardBias is a multiple of 15 minutes, not 30:</p>
<p>Check out <a rel="nofollow" target="_new" href="http://www.timeanddate.com/worldclock/city.html?n=117" rel="nofollow">http://www.timeanddate.com/&#8230;/city.html</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-944913">
				<div id="div-comment-944913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944913">
			November 4, 2011 at 8:14 am</a>		</div>

		<p>There was a special case of this problem I was working on once where storing secondswest was sufficient. A bit of mathematics indicates this fits in a signed 24 bit value. (I think it actually fits in 22 bits).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-944953">
				<div id="div-comment-944953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A. Skrobov</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944953">
			November 4, 2011 at 9:08 am</a>		</div>

		<p>There are two:</p>
<p>&quot;Nepal Standard Time is one of only two official time zones with a 45-minute increment from UTC. The Chatham Islands, which uses Chatham Island Standard Time, also has a 45-minute increment from UTC, its time zone being UTC+12:45.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-odd thread-alt depth-1" id="comment-944973">
				<div id="div-comment-944973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944973">
			November 4, 2011 at 10:52 am</a>		</div>

		<p>If they will be calling their function frequently, then perhaps they don&#39;t REALLY need to know if the two cities are in the same time zone. &nbsp;Do they need to know if the two locations currently have the local time? &nbsp;If that&#39;s the case, then the current time zone offset is all they need to know, and the time zone is not important. &nbsp;But maybe they need more than that. &nbsp;It&#39;s hard to tell from the problem specification.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-944993">
				<div id="div-comment-944993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Michael Entin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-944993">
			November 4, 2011 at 11:32 am</a>		</div>

		<p>Since most countries enter and exit daylight saving on Sundays &#8211; using wDayOfWeek in the hash function is not very useful. I would rather use some more unique bits &#8211; like tz.DaylightDate.wDay.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945013">
				<div id="div-comment-945013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111104-00/?p=9193#comment-945013">
			November 4, 2011 at 2:23 pm</a>		</div>

		<p>What if the time zone data change of a cached value? The switch date is only semi-permanent in most countries because of politics, the data is patched from windows update I suppose. Not as bad as iOS though, which has had time zone bugs in every os version, and the recently deployed work-a-round drains insane amounts of battery.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>