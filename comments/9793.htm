<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (21)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-932353">
				<div id="div-comment-932353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932353">
			August 26, 2011 at 7:26 am</a>		</div>

		<p>Using UTF-8 would use half as much space most of the time and be as future-proof as using UTF16-LE was.</p>
<div class="post">[<i>&quot;Hey, let&#39;s design our storage format to use an encoding that hasn&#39;t been invented yet!&quot; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932373">
				<div id="div-comment-932373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">B</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932373">
			August 26, 2011 at 7:37 am</a>		</div>

		<p>Wait, does this mean I can trigger some fun weirdness by picking two LFNs with the same checksum and deleting one of them using a non-LFN aware application?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932383">
				<div id="div-comment-932383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matej Horvat</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932383">
			August 26, 2011 at 7:51 am</a>		</div>

		<p>&quot;Using UTF-8 would use half as much space most of the time and be as future-proof as using UTF16-LE was.&quot;</p>
<p>Unicode codepoints were 16-bit until Unicode 2.0, so UTF-8 didn&#39;t exist yet.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932393">
				<div id="div-comment-932393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">grumpy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932393">
			August 26, 2011 at 7:54 am</a>		</div>

		<blockquote><p>
  the decision taken years earlier to use Unicode on disk proved eerily clairvoyant.
</p></blockquote>
<p>Heh. No, it proves that designers were very smart and had experienced problems with forward compatibility before. :-) The &quot;right thing&quot; may look expensive but in reality is often the cheapest way of doing things, even when discounting future expenses with a high interest rate&#8230;</p>
<p>@B: I&#39;m not quite sure that &quot;fun&quot; would cover it. But weirdness sounds about right. :-D</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932403">
				<div id="div-comment-932403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932403">
			August 26, 2011 at 8:01 am</a>		</div>

		<blockquote><p>
  Hey, let&#39;s design our storage format to use an encoding that hasn&#39;t been invented yet!
</p></blockquote>
<p>Rob Pike says UTF8 was invented in 1992, when was this FAT work done?</p>
<p>(But the RFC is dated 1996, so maybe it was not widely known until then)</p>
<blockquote><p>
  Using UTF-8 would use half as much space most of the time
</p></blockquote>
<p>This is, of course, an American perspective. The Japanese perspective might be &quot;Using UTF-8 would use one and a half times as much space most of the time&quot;. &nbsp;Western Europeans would just say &quot;meh&quot; (except that word had not been invented).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932423">
				<div id="div-comment-932423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ivan K</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932423">
			August 26, 2011 at 8:24 am</a>		</div>

		<p>Awww. Too much time spent double-checking before being the first with a witty &#39;time machine&#39; response to the UTF-8 thing. Oh well. Now I&#39;m wondering if there could be nearly space equivalent work-around if they hadn&#39;t done the Unicode thing years earlier.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932433">
				<div id="div-comment-932433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Henning Makholm</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932433">
			August 26, 2011 at 8:25 am</a>		</div>

		<p>More relevant than the possible existence of UTF-8 when the system was designed is the fact the Unicode was at that time supposed to be a 16-bit character set, so UCS-2 would be a fixed-width encoding. The practical advantages of working with a fixed width per character would have been compelling enough to justify the increased space demand over UTF-8.</p>
<p>However, once the upper planes came along and UCS-2 became UTF-16, with surrogate pairs and variable characters, all of that was negated and one might as well have used UTF-8 (with the added benefit that many more developers would have natural occasion to test that their code was variable-width clean, instead of now where characters that require surrogates in UTF-16 are all somewhat obscure). Unfortunately, by then it was too late to go back on the fundamental decision.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932443">
				<div id="div-comment-932443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932443">
			August 26, 2011 at 8:28 am</a>		</div>

		<p>I used the equiv. to meh long before 1995, except it was pronounced more like Ã¦nh.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao even thread-even depth-1" id="comment-932463">
				<div id="div-comment-932463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932463">
			August 26, 2011 at 8:29 am</a>		</div>

		<p>On that matter, I wonder why in Win9x the conversion from/to Unicode was done in IFSMGR with no interface exposed to user mode that I know of to directly access the Unicode filenames.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932473">
				<div id="div-comment-932473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Henning Makholm</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932473">
			August 26, 2011 at 8:33 am</a>		</div>

		<p>@dave, Greeks and Russians may well say &quot;meh&quot; to the difference between UTF-16 and UTF-8, space-wise. But a very large fraction of the characters in a typical &nbsp;text in a Western European language are ASCII, so the space savings in UTF-8 are quite relevant here. (The letters that aren&#39;t ASCII are 2 bytes wide in UTF-16 as well as UTF-8, but they are not the majority of characters in a typical text).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932483">
				<div id="div-comment-932483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932483">
			August 26, 2011 at 8:55 am</a>		</div>

		<p>@dave: <a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/UTF-8#cite_note-29" rel="nofollow">en.wikipedia.org/&#8230;/UTF-8</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932493">
				<div id="div-comment-932493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">xpclient</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932493">
			August 26, 2011 at 9:08 am</a>		</div>

		<p>I used a column handler shell extension on Windows 2000/XP to see short file names in Details view (for some legacy apps and games that require specifying the path in 8.3 style). I can&#39;t on Vista/7 because column handlers are gone. So I have to use dir /x. Just another example where GUI is destroyed/broken and a step back to command line has to be taken. Point to be noted: bring back column handlers.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932513">
				<div id="div-comment-932513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932513">
			August 26, 2011 at 11:08 am</a>		</div>

		<p>What really surprises me is how they were able to kludge the long file names into the FAT. Most of the time situations like these require creating a hidden file that contains the new information.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932553">
				<div id="div-comment-932553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ErikF</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932553">
			August 26, 2011 at 12:10 pm</a>		</div>

		<p>LFN wasn&#39;t so fun before FAT32 came out because the root directory in FAT12/16 has a fixed number of file slots. Imagine the fun I had when I tried for the first time to copy a whole bunch of files to a 360K floppy and only 15 of them would go!</p>
<p>That said, I think that LFN is a wonderful hack; for the most part, it was completely backwards-compatible, didn&#39;t mess with the disk structure, and was space-efficient. I salute the team that developed it!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao even thread-even depth-1" id="comment-932573">
				<div id="div-comment-932573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932573">
			August 26, 2011 at 2:09 pm</a>		</div>

		<p>See this Long Filename Specification 0.5 from December 1992 for some more history:</p>
<p><a rel="nofollow" target="_new" href="http://www.osdever.net/documents/LongFileName.pdf" rel="nofollow">http://www.osdever.net/&#8230;/LongFileName.pdf</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932603">
				<div id="div-comment-932603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932603">
			August 27, 2011 at 3:38 am</a>		</div>

		<p>@ErikF: Just reformat the disk with a larger root directory size in the disk&#39;s boot record first! (Don&#39;t forget to reduce the number of clusters appropriately.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932623">
				<div id="div-comment-932623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932623">
			August 27, 2011 at 6:22 pm</a>		</div>

		<p>@Neil: I tried that and found out that MS-DOS 6.x will corrupt any disks formatted that way. Win 9x and NT seem to work just fine though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932643">
				<div id="div-comment-932643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">IanET</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932643">
			August 28, 2011 at 12:25 am</a>		</div>

		<p>First BillG demo I ever did was of LFNs and showing how backwards compatible it was with 3.1. That was back when Bill would come to our building and go from office to office watching the demos and asking questions. &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-932663">
				<div id="div-comment-932663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John Elliott</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932663">
			August 28, 2011 at 1:52 pm</a>		</div>

		<p>@Joshua: MS-DOS is inclined to ignore bits of the boot sector, depending what&#39;s in the OEM ID. Unfortunately the Windows 95 volume tracker likes to scribble all over the OEM ID.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-932873">
				<div id="div-comment-932873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ender</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932873">
			August 30, 2011 at 3:37 am</a>		</div>

		<p>Thanks to Unicode support in LFNs, it was always fun when we had to deal with floppies from Russia (Windows would display just a bunch of underscored for filenames, and you couldn&#39;t access these files, though IIRC, either scandisk or chkdsk did &quot;fix&quot; this by renaming the files to garbage names that could then be open).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao even thread-even depth-1" id="comment-932973">
				<div id="div-comment-932973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110826-00/?p=9793#comment-932973">
			August 30, 2011 at 10:56 am</a>		</div>

		<p>ender: I think this is a direct consequence of the codepage conversions being done in IFSMGR. I wonder why was it designed that way.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>