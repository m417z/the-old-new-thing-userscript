<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (8)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1076303">
				<div id="div-comment-1076303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Peter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076303">
			September 5, 2013 at 8:46 am</a>		</div>

		<p>I don&#39;t really blame the customer for this one. &nbsp;This sort of issue is inherent in using a framework like MFC. &nbsp;It can be very hard to understand the framework&#39;s behaviour unless you also understand its implementation details.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1076343">
				<div id="div-comment-1076343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Koro</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076343">
			September 5, 2013 at 8:55 am</a>		</div>

		<p>If you absolutely need to take control when a system message loop is running though, you can register a WH_MSGFILTER hook. Every well-behaved message loop should call CallMsgFilter. (Sadly, I&#39;d say 90% of message loops don&#39;t, because all samples just have the GetMessage/TranslateMessage/DispatchMessage trio)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-john-ludlow even thread-even depth-1" id="comment-1076353">
				<div id="div-comment-1076353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/John+Ludlow' rel='external nofollow' class='url'>John Ludlow</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076353">
			September 5, 2013 at 9:19 am</a>		</div>

		<p>It&#39;s certainly a problem that a lot of documentation lacks the background details, but I often purposely &quot;redact&quot; information from documentation, questions, answers and general comments. The reason is I&#39;ve had too many conversations like this:</p>
<p>Someone Else: Why does &lt;insert scenario here&gt; happen?</p>
<p>Me &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Because of A. &lt;insert in-depth explanation of A&gt;</p>
<p>Someone Else: Oh, couldn&#39;t you have done something else instead of A?</p>
<p>Me: &nbsp; &nbsp; &nbsp; &nbsp; : No, because of B.</p>
<p>Someone Else: Oh, couldn&#39;t you have done something else instead of B?</p>
<p>Me: &nbsp; &nbsp; &nbsp; &nbsp; : No, because of C.</p>
<p>Someone Else: Oh, couldn&#39;t you have done something else instead of C?</p>
<p>Me: &nbsp; &nbsp; &nbsp; &nbsp; : No, because of D.</p>
<p>&lt;4 months later&gt;</p>
<p>Someone Else: Oh, couldn&#39;t you have done something else instead of Z?</p>
<p>Me &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: I&#39;m losing the will to live.</p>
<p>I think a lot of the time stuff is left out of documentation specifically to avoid this kind of conversation.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1076363">
				<div id="div-comment-1076363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rick C</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076363">
			September 5, 2013 at 10:08 am</a>		</div>

		<p>@Peter, MFC doesn&#39;t appear to be the problem here.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1076333">
				<div id="div-comment-1076333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/tlwest_4000_gmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>tlwest@gmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076333">
			September 5, 2013 at 8:53 am</a>		</div>

		<p>&gt; Simply blindly followed the advice rather than understanding </p>
<p>&gt; its rationale so they could apply the advice correctly.</p>
<p>My biggest complaint about almost all API documentation, (MS&#39;s and every-one else&#39;s) is the reluctance to explain the rationale. &nbsp;I understand it&#39;s a lot more work and tends to require a real technical writer, but it makes a huge difference to its use.</p>
<p>On the other hand, when I endeavored to ensure that a proper rationale was included with my company&#39;s API documentation, we got complaints about how &quot;we give us the minimum to use it &#8211; we don&#39;t have the time or expertise to understand it&#8230;&quot;</p>
<p>*sigh*.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1076413">
				<div id="div-comment-1076413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076413">
			September 5, 2013 at 9:58 pm</a>		</div>

		<p>Did the customer have any rationale for putting their custom message processing in PreTranslateMessage instead of the window procedure? I can&#39;t think of any good reason for doing that.</p>
<div class="post">[<em>I suspect they simply didn&#39;t know any better. &quot;We need to process this message. Hey, look, here&#39;s a place where we can process messages.&quot; -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1076423">
				<div id="div-comment-1076423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076423">
			September 6, 2013 at 3:22 am</a>		</div>

		<p>All this modal loop processing is all very well as long as your application can never have more than one enabled window at once.</p>
<p>For software such as Outlook which can readily have multiple enabled windows it breaks down almost immediately.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alegrigoriev odd alt thread-odd thread-alt depth-1" id="comment-1076453">
				<div id="div-comment-1076453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/alegr1' rel='external nofollow' class='url'>alegr1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20130905-00/?p=3313#comment-1076453">
			September 6, 2013 at 7:20 am</a>		</div>

		<p>@Neil,</p>
<p>Each top level window which can call a modal function needs to belong to a different thread, if you want to be able to have independent modal dialogs. Or they need to be owned by an invisible top level window, and before entering a modal loop they all need to be disabled. Otherwise it definitely becomes very fragile.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>