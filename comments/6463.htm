<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (24)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-alegrigoriev even thread-even depth-1" id="comment-1013483">
				<div id="div-comment-1013483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/alegr1' rel='external nofollow' class='url'>alegr1</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013483">
			September 28, 2012 at 7:30 am</a>		</div>

		<p>In the code I wrote, the quality assurance guy with his super-mega-nuclear test (yes, that was the real name of the test script) was able to hit race conditions just a couple instructions wide. This confirms that whatever is mathematically possible, will happen. In the worst case, after it&#39;s deployed on many machines in the field.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013493">
				<div id="div-comment-1013493" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013493">
			September 28, 2012 at 7:34 am</a>		</div>

		<p>The debugger could lie to you if you have a rootkit (<a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/oldnewthing/archive/2006/04/21/580608.aspx" rel="nofollow">blogs.msdn.com/&#8230;/580608.aspx</a>). &nbsp;Or possibly overclocking, I suppose.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013513">
				<div id="div-comment-1013513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/johnstonj_4000_inn_2D00_soft.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>johnstonj@inn-soft.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013513">
			September 28, 2012 at 7:53 am</a>		</div>

		<p>I have this problem all the time when dealing with people who do not fully grasp what &quot;undefined behavior&quot; means or what can happen when multi-threading goes wrong. &nbsp;&quot;Component ABC works on U, V, W, and X computers but not on Y computer. &nbsp;Therefore, Y computer must be defective / have a problem with its software environment / not compatible with some 3rd-party software on computer Y due to defect in the other software.&quot; &nbsp;Actually, that means nothing. &nbsp;Component ABC is guilty until proven innocent. &nbsp;The definition of undefined behavior includes cases where undesirable behavior only occurs 0.1% of the time.</p>
<p>In general &#8211; even outside of computers &#8211; I find I am a lot less willing to jump to conclusions about anything &#8211; compared to some people, anyway. &nbsp;Just never know about that 1% chance&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013523">
				<div id="div-comment-1013523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">kog999</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013523">
			September 28, 2012 at 8:12 am</a>		</div>

		<p>As a Systems Administrator I tend to find that many developers will blame literally anything else besides there code whenever there is an issue. Often it takes the form of them asking “is there a problem with the networkVMWareServersOperating System.Net Framework”, with no information as to why they think there is a problem. This always receives the same answer</p>
<p>Me: “I’m not aware of any problems with the network”.</p>
<p>A brief moment of silence ensues</p>
<p>Me: “No one has reported any problems with the network I’ve been using it all day and can even get to the old new thing, why do you think there is a network problem”</p>
<p>Them: “My code connects to database1 to get some info blah, blah, blah, and the webpage I wrote is displaying 5 instead of 6.”</p>
<p>Me: “so you can get to the server database1, sounds like the network is fine to me.”</p>
<p>Them: “Well I need you to check harder MY CODE HASN’T CHANGED!”</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013533">
				<div id="div-comment-1013533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013533">
			September 28, 2012 at 8:14 am</a>		</div>

		<p>• If X, then Y.</p>
<p>• X is true.</p>
<p>• Y cannot possible be true.</p>
<p>∴ Heap corruption.</p>
<p>Been there.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wma odd alt thread-odd thread-alt depth-1" id="comment-1013553">
				<div id="div-comment-1013553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Wes+MacDonald' rel='external nofollow' class='url'>Wes MacDonald</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013553">
			September 28, 2012 at 9:10 am</a>		</div>

		<p>This is when you&#39;re thinking you sound like a teacher from a Charlie Brown TV episode ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013573">
				<div id="div-comment-1013573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ivo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013573">
			September 28, 2012 at 9:44 am</a>		</div>

		<p>&quot;There is no bug here, the program works as coded&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013583">
				<div id="div-comment-1013583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013583">
			September 28, 2012 at 1:52 pm</a>		</div>

		<p>When your code works on Machine X but not Machine Y, you could be running into CPU errata. In this case it might be the machine lying to you rather than the debugger.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013593">
				<div id="div-comment-1013593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam Rosenfield</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013593">
			September 28, 2012 at 3:29 pm</a>		</div>

		<p>@Gabe: True, it&#39;s certainly possible, like the infamous Pentium FDIV bug. &nbsp;But the majority of the time, if it works on Machine X but not Machine Y, you probably have a bug in your code (race condition, undefined behavior, or the like) which only manifests on X.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-odd thread-alt depth-1" id="comment-1013543">
				<div id="div-comment-1013543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013543">
			September 28, 2012 at 8:46 am</a>		</div>

		<p>When you have eliminated the impossible, then whatever remains, *however improbable*, must be the truth.</p>
<p>&#8212; Sherlock Holmes, The Sign of the Four</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013663">
				<div id="div-comment-1013663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Wilson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013663">
			September 29, 2012 at 8:54 am</a>		</div>

		<p>Occam&#39;s Razor says its far more likely to be a bug in your code than a hardware fault.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013673">
				<div id="div-comment-1013673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Matt</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013673">
			September 29, 2012 at 2:44 pm</a>		</div>

		<p>If in doubt, it&#39;s always your code that screwed up. Blaming someone else should always be a last resort.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013713">
				<div id="div-comment-1013713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Damien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013713">
			September 30, 2012 at 8:57 am</a>		</div>

		<p>@Matt &#8211; if only every compiler, interpreter, macro language, etc would display that message by default every time it was invoked. (Maybe I&#39;m wrong, but) it always seems to be the beginner programmers who assume that they&#39;re writing perfect, pristine code every time. (Of course, some beginners never grow out of this attitude, I&#39;m not sure how to fix those people, other than recommend they pick a different career)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013763">
				<div id="div-comment-1013763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">LaQuisha Redfern</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013763">
			October 1, 2012 at 1:56 am</a>		</div>

		<p>You went from &#39;customer&#39; to &#39;a lazy developer who didn&#39;t know how to debug their own code&#39; pretty quickly.</p>
<p>Don&#39;t let the marketing department see! They&#39;ll have kittens.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013783">
				<div id="div-comment-1013783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Samuel222</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013783">
			October 1, 2012 at 2:33 am</a>		</div>

		<p>I&#39;m sure there is a huge religious/political can of worms somewhere in this argument.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013793">
				<div id="div-comment-1013793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian Ratnapala</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013793">
			October 1, 2012 at 4:20 am</a>		</div>

		<p>&lt;em&gt;</p>
<p>&nbsp; &nbsp;If X, then Y.</p>
<p>&nbsp; &nbsp;X is true.</p>
<p>&nbsp; &nbsp;Y cannot possible be true.</p>
<p>&lt;/em&gt;</p>
<p>Well that&#39;s a one up on <a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/Paraconsistent_logic" rel="nofollow">en.wikipedia.org/&#8230;/Paraconsistent_logic</a></p>
<p>But still I am amused that the article mention using it as a way of tackling sofware systems.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013803">
				<div id="div-comment-1013803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Terry A. Davis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013803">
			October 1, 2012 at 5:30 am</a>		</div>

		<p>AdamLog(fmt_st,&#8230;) has variable number of args. &nbsp;The first on the stack is fmt_st, then #args, then args.</p>
<p>PrintF(&quot;%h5D&quot;,dt); &nbsp;That will print in date format 5. &nbsp;</p>
<p>It is faster execution time to number date formats than to use strings like &quot;mm:dd:yy&quot;. &nbsp;I learned this at Ticketmaster.</p>
<p>I did a quick solution to International &#8212; a level of indirection. &nbsp;It looks in an array to map date format numbers to new date format numbers.</p>
<p>time zone is set with a simple system-wide global variable.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013813">
				<div id="div-comment-1013813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/jas71_4000_hotmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>jas71@hotmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013813">
			October 1, 2012 at 6:34 am</a>		</div>

		<p>&quot;Gosh, why couldn&#39;t they have reported a problem with a function with a shorter name! Now I have to type that thing over and over again.&quot;</p>
<p>On the bright side, just imagine what Klingon epithet the equivalent function would be called on a Unix platform&#8230;</p>
<p>I recall one painful debugging session where a particular function call (NtClose), from userspace, was giving me a BugCheck. Every time. Now, even if I&#39;d been passing in random integers, that would have been a bad thing, but I was just closing the handle I&#39;d received earlier from NtCreateFile! After much probing of my own logic, my soul and the kernel crash dump, I found the culprit: buggy anti-virus filter driver. Turn it off, or switch to another product, everything worked fine. &quot;The AV filter does something stupid when NtCreateFile is called in certain ways, which then causes it to break later on when that handle is closed&quot; wasn&#39;t really a conclusion I&#39;d leap to readily.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013843">
				<div id="div-comment-1013843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/johnstonj_4000_inn_2D00_soft.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>johnstonj@inn-soft.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013843">
			October 1, 2012 at 7:16 am</a>		</div>

		<p>@jas88: Actually, I&#39;d argue that a bugcheck / BSOD is a good reason to suddenly jump to &quot;no way it&#39;s my code&quot;, unless you&#39;re actually working kernel code as part of your system. &nbsp;Especially if the bugcheck happens when running as a normal user. &nbsp;But even if you have administrator access, it should take an explicit effort to cause a bugcheck. &nbsp;User-mode code should never bugcheck the system. &nbsp;It can crash itself all it wants, but it should never cause a bugcheck.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1013893">
				<div id="div-comment-1013893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013893">
			October 1, 2012 at 8:15 am</a>		</div>

		<p>@JamesJohnson: If I&#39;d found that from unprivileged code, I&#39;d immediately be contacting Microsoft with a potential DOS exploit. They&#39;d probably be able to narrow it down to the screwed-up antivirus easily enough.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1013773">
				<div id="div-comment-1013773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JM</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1013773">
			October 1, 2012 at 2:15 am</a>		</div>

		<p>Whenever people ask me for my professional inspiration, I&#39;ll say &quot;Sherlock Holmes&quot;. And quote this line at them. Actually, I quote that line all the time, but that&#39;s just because people don&#39;t appreciate it enough.</p>
<p>It&#39;s soooo tempting to assume that you *know* what&#39;s going on and ignore the facts as they&#39;re staring you right in the face. After all, our software is whatever we want it to be, right? And computers just do what they&#39;re told, right? So obviously we have complete knowledge of the situation, right? Having the knowledge available and acting on it correctly are two very different things. Experience helps but is no absolute antidote against this (you&#39;ll just start letting more elaborate assumptions slip in, because &quot;you&#39;ve seen something like this before&quot;).</p>
<p>My standard reply to &quot;my code hasn&#39;t changed&quot; is &quot;then the circumstances on the machine have changed ever so slightly, exposing a subtle bug that you&#39;ve never noticed before&quot;. The important part is to never stop believing that the code has a bug, until you have solid, iron-clad evidence that something else is to blame. And even *then*, when you fix that you *still* assume your code has a bug by verifying that the fix does what it&#39;s supposed to do! Per Hickam&#39;s dictum (&quot;Patients can have as many diseases as they damn well please&quot;) when something goes wrong, as many things can be wrong at the same time as the universe damn well pleases, but it&#39;s also very probable that only one thing is actually causing the bug to appear.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1014023">
				<div id="div-comment-1014023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/tlwest_4000_gmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>tlwest@gmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1014023">
			October 1, 2012 at 6:37 pm</a>		</div>

		<p>&lt;i&gt;When you have eliminated the impossible, then whatever remains, *however improbable*, must be the truth.&lt;/i&gt;</p>
<p>Ah, it brings back fond memories of &quot;this bug cannot happen&quot; bugs.</p>
<p>The bugs that, after days, you finally get down to a state where you can decisively declare: &quot;Since this obviously can not be happening, the customer must have been hallucinating, and now we&#39;ve been infected as well.&quot;</p>
<p>The last one I had I got down to three lines of code as long as they were placed in a particular place in the code:</p>
<p>var x : int</p>
<p>x = 2</p>
<p>print x</p>
<p>&gt; 0</p>
<p>Turned out it was an obscure bug in the p-code generation&#8230;</p>
<p>The one before that was a buffer being filled in 5 minutes after the system reported a network read failure and we assumed it was safe to re-allocate the buffer. &nbsp;Apparently the call had given up, but somewhere deep inside the system, a brave routine was waiting all alone in the darkness for a packet that did, finally, come, allowing it to fulfill its mission (and corrupt our memory). &nbsp;We had no threads, and we could loop, outputting a memory location, and watch it spontaneously change by itself&#8230;</p>
<p>After those two, whenever we hit an non-obvious bug, it really did take effort to assume it was our code (which it was, of course, 4 times out of 5).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1014223">
				<div id="div-comment-1014223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1014223">
			October 3, 2012 at 6:37 am</a>		</div>

		<p>An interesting one: <a rel="nofollow" target="_new" href="http://mjg59.dreamwidth.org/11235.html" rel="nofollow">mjg59.dreamwidth.org/11235.html</a></p>
<p>The firmware set up the wireless card, and it was DMA-ing data to a region of memory every time it received a wireless beacon packet. The firmware did not reset the card before booting the operating system, and the region of memory it used for the DMA was marked as available for use by the operating system. Memory corruption ensues.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1014283">
				<div id="div-comment-1014283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/tlwest_4000_gmail.com/ProfileUrlRedirect.ashx' rel='external nofollow' class='url'>tlwest@gmail.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120928-00/?p=6463#comment-1014283">
			October 3, 2012 at 8:42 am</a>		</div>

		<p>&gt; The firmware set up the wireless card, and it was DMA-ing data to a region of memory </p>
<p>&gt; every time it received a wireless beacon packet. The firmware did not reset the card </p>
<p>&gt; before booting the operating system, and the region of memory it used for the DMA was </p>
<p>&gt; marked as available for use by the operating system. Memory corruption ensues.</p>
<p>Ah. more proof that no matter how bad a debugging scenario I&#39;ve encountered, someone&#39;s had it *much*, *much* worse :-).</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>