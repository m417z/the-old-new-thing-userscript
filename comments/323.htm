<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (34)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1143023">
				<div id="div-comment-1143023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143023">
			August 6, 2014 at 7:14 am</a>		</div>

		<p>I&#39;ve been known to use invalid parameter for you bonehead (for an on-topic example move file inside of file).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143033">
				<div id="div-comment-1143033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">pete.d</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143033">
			August 6, 2014 at 7:15 am</a>		</div>

		<p>Ooh. Ooh! Here&#39;s a thought!</p>
<p>How about, instead of making unfounded assumptions, Explorer stops reporting &quot;file too large&quot; except when the file system actually reports &quot;ERROR_FILE_TOO_LARGE&quot;. &nbsp;If Explorer can&#39;t figure out why the parameter is invalid, then it should just report to the user an error message that says _that_ instead of translating the error into some other error message that may or may not be appropriate.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143043">
				<div id="div-comment-1143043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jimmy Queue</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143043">
			August 6, 2014 at 7:21 am</a>		</div>

		<p>&quot;Explorer assumes that the maximum file size is 4GB âˆ’ 1.&quot;</p>
<p>&#8211; 1 GB? 1 Byte? 1 slice of left over pizza? 1 months salary?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143053">
				<div id="div-comment-1143053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Paul</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143053">
			August 6, 2014 at 7:41 am</a>		</div>

		<p>If Explorer reported ERROR_INVALID_PARAMETER without fiddling, then people who are knowledgeable or not knowledgeable enough might say &quot;Explorer is calling the file system with an invalid parameter, it&#39;s a bug!!&quot;. There is no way Microsoft can win, it&#39;s an artefact of a mass market. Sometimes you have to do what is intuitively &quot;wrong&quot; so that you can stop people complaining en masse and get on with the real work.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143063">
				<div id="div-comment-1143063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Bugglin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143063">
			August 6, 2014 at 7:51 am</a>		</div>

		<p>@pete.d Then users say &quot;This new version of Windows is too confusing, it took me forever to figure out why I couldn&#39;t copy this file to my flash drive when it could have just told me it was too big! &nbsp;Parameter invalid? &nbsp;I don&#39;t know what that means! &nbsp;I&#39;m going to get a Mac for my next computer&quot;.</p>
<p>At the end of the day, MS has to work with the third party file system drivers they have, not the third party file system drivers they want (at least I assume they are third party or legacy or something, or they would have just had them fixed).</p>
<p>@Jimmy: 1 byte. &nbsp;The maximum value of an unsigned 32-bit integer is 4294967295. &nbsp;4gb is 4294967296 bytes (or only 4000000000 bytes, if you market hard drives).</p>
<div class="post">[<em>Indeed, the CMD.EXE COPY command does exactly what pete.d recommends. It doesn&#39;t try to massage the error message. It just tells you &quot;The parameter is incorrect.&quot; And then I have to write blog entries saying &quot;<a href="http://blogs.msdn.com/b/oldnewthing/archive/2011/10/11/10222996.aspx">This means that the file is too large</a>.&quot; -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143103">
				<div id="div-comment-1143103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Danny Moules</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143103">
			August 6, 2014 at 9:02 am</a>		</div>

		<p>@dave This entire article is about cases involving a &quot;custom file system&quot;. The context of this debate is framed by what Explorer has to do to meet that case.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143113">
				<div id="div-comment-1143113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143113">
			August 6, 2014 at 9:07 am</a>		</div>

		<p>It would be nice if the shell said &quot;That file was too big,&quot; and then logged an event that said &quot;We think that file may have been too big, the FS returned &#39;Invalid Parameter&#39;&quot;</p>
<p>Hiding an error from the end-user is smart. </p>
<p>Hiding an error from the administrator just makes you an ass.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143123">
				<div id="div-comment-1143123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143123">
			August 6, 2014 at 9:40 am</a>		</div>

		<p>Clearly you can&#39;t tell the user &quot;Invalid Parameter&quot; because even a user like me wouldn&#39;t know what that means.</p>
<p>Perhaps a better message would be, &quot;Explorer encountered an unknown error. This may mean the file is too large.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143133">
				<div id="div-comment-1143133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Azarien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143133">
			August 6, 2014 at 9:43 am</a>		</div>

		<p>@Danny Moules: there can be a custom file system provided by Microsoft &#8211; like the exFAT driver for XP and Server 2003, available for download.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143143">
				<div id="div-comment-1143143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jeffrey Altman</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143143">
			August 6, 2014 at 9:52 am</a>		</div>

		<p>An instance where Explorer incorrectly reports a file size error is when the Explorer Shell&#39;s caching of file system metadata fails to properly cache reparse point data. &nbsp;As a result the shell queries the wrong volume for volume information. &nbsp;If the queried volume is readonly or does not have enough free space, the shell reports an error indicating that the file is too large. &nbsp; There has been an open bug report about this issue going back several years now.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143153">
				<div id="div-comment-1143153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143153">
			August 6, 2014 at 10:06 am</a>		</div>

		<p>In all my life, I&#39;ve seen one (1!) computer with a custom file system, and it was a Microsoft file system.</p>
<p>Rather than making Explorer report spurious errors, maybe Microsoft should make sure that at least its own file systems do the right thing. This also does away with the entire mass-market argument.</p>
<p>Furthermore, if you encounter an invalid parameter on a custom file system, you may try to guess but Gabe&#39;s message is much better than a potentially wrong message. Also, if it&#39;s known that the cause might be the file size, why not probe with a one byte file?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-hikari odd alt thread-odd thread-alt depth-1" id="comment-1143163">
				<div id="div-comment-1143163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Chris+Crowther' rel='external nofollow' class='url'>Chris Crowther</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143163">
			August 6, 2014 at 10:19 am</a>		</div>

		<p>I&#39;ve had &quot;insufficient space available&quot; while copying a file to a USB stick before; 6GB to an empty 32GB stick. &nbsp;Took me a while to twig and go &quot;oh hang, what file system is on that stick?&quot;. &nbsp;One reformat to NTFS later and problem solved. &nbsp;A slightly more helpful &quot;file too large for the file system&quot; would have been welcome.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-hikari even thread-even depth-1" id="comment-1143173">
				<div id="div-comment-1143173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Chris+Crowther' rel='external nofollow' class='url'>Chris Crowther</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143173">
			August 6, 2014 at 10:25 am</a>		</div>

		<p>@Dave There&#39;s an ext2/3/4 filesystem driver for windows, iirc. &nbsp;I&#39;m sure there are others. &nbsp;It&#39;s entire possible some businesses may have an in-house proprietary driver of some variety&#8230;for whatever reason.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143183">
				<div id="div-comment-1143183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143183">
			August 6, 2014 at 10:55 am</a>		</div>

		<p>@Danny Moules : This entire article is about cases involving a &quot;custom file system&quot;. </p>
<p>Duh, yeah. I was misled by &quot;file system name is FAT&quot; into thinking &quot;the file system is FAT&quot;. Even though I have told that exact same lie in a remote file system (reached via SMB) of my own concoction.</p>
<p>The &quot;file system name&quot; is a terrible idea, since applications use it to make assumptions about capabilities rather than using the capabilities bits (and yes I know there is no max-file-size indication). &nbsp;And if you create a new file system and give it a new name, existing apps tend to have hissy fits (Robocopy: OMG! It can&#39;t have ACLs if it&#39;s not NTFS!)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143193">
				<div id="div-comment-1143193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143193">
			August 6, 2014 at 10:57 am</a>		</div>

		<p>@Chris Crowther.</p>
<p>Yes, but as I mentioned before, I was confusing &#39;name of file system on-disk format&#39; and &#39;the identity of the file system driver&#39;. &nbsp;We were talking about the former, but I assumed the latter.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143203">
				<div id="div-comment-1143203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">T. West</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143203">
			August 6, 2014 at 12:43 pm</a>		</div>

		<p>&lt;i&gt;And then I have to write blog entries saying &quot;This means that the file is too large.&quot; -Raymond&lt;/i&gt;</p>
<p>I laughed quite hard at that. &nbsp;And it is so true. &nbsp;You can&#39;t win, you can&#39;t break even, and it&#39;s probably unwise for one&#39;s financial future to get out of the game.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143213">
				<div id="div-comment-1143213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143213">
			August 6, 2014 at 2:12 pm</a>		</div>

		<p>@T. West: I think somebody just broke even. See impossible microwave drive.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143223">
				<div id="div-comment-1143223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Thomas Jepp</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143223">
			August 6, 2014 at 2:18 pm</a>		</div>

		<p>The most common custom FS drivers I come across is the Apple provided HFS+ driver &#8211; which is awful and fails in all kinds of weird ways. I&#39;ve seen it crash lots of apps just trying to enumerate files &#8211; so it wouldn&#39;t surprise me if it pulled stuff like this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-entegygmail-com even thread-even depth-1" id="comment-1143243">
				<div id="div-comment-1143243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Entegy' rel='external nofollow' class='url'>Entegy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143243">
			August 6, 2014 at 2:37 pm</a>		</div>

		<p>@Thomas Jepp</p>
<p>&gt; The most common custom FS drivers I come across is the Apple provided HFS+ driver &#8211; which is awful and fails in all kinds of weird ways. I&#39;ve seen it crash lots of apps just trying to enumerate files &#8211; so it wouldn&#39;t surprise me if it pulled stuff like this.</p>
<p>Except Apple&#39;s driver is read-only, so Explorer couldn&#39;t possibly be copying TO the HFS+ partition. And I&#39;ve never had that much problem with Apple&#39;s driver. The last problem I had was back in Lion when FileVault 2 came out and it blue-screened your computer trying to read the encrypted volume.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143253">
				<div id="div-comment-1143253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andreas Rejbrand</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143253">
			August 6, 2014 at 3:06 pm</a>		</div>

		<p>I love the appropriate usage of U+2212: MINUS SIGN. I suppose most people would have used U+002D (acceptable) or U+2013 (nightmare).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143073">
				<div id="div-comment-1143073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Xv8</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143073">
			August 6, 2014 at 8:06 am</a>		</div>

		<p>Wouldn&#39;t the shell saying &quot;Invalid ParameternnThis may be due to the file being to large.&quot; or something similar be better then saying something *completely* different to the return code&#39;s meaning?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143093">
				<div id="div-comment-1143093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143093">
			August 6, 2014 at 8:43 am</a>		</div>

		<p>&gt;MS has to work with the third party file system drivers</p>
<p>Does a typical Windows system *have* third party file system drivers? &nbsp;(At least for the case where we&#39;re talking about file systems on persistent storage, not just weirdo drivers that are conveniently designated as &#39;file systems&#39;)</p>
<p>In particular, I would imagine that all *FAT* drivers are Microsoft-supplied.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong even thread-even depth-1" id="comment-1143263">
				<div id="div-comment-1143263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143263">
			August 6, 2014 at 6:35 pm</a>		</div>

		<p>@dave: Some comes with the OS, other are added when new devices come to exist.</p>
<p>I think I&#39;ve used 3rd party driver for ISO-9660 (i.e.: CDROM driver) on Win3.1, and then an Ext2FS driver for Win98.</p>
<p>Take a look on FDISK&#39;s list partition types command and see how many filesystems were around at that time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-entegygmail-com odd alt thread-odd thread-alt depth-1" id="comment-1143233">
				<div id="div-comment-1143233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Entegy' rel='external nofollow' class='url'>Entegy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143233">
			August 6, 2014 at 2:35 pm</a>		</div>

		<p>@Dave &gt;Does a typical Windows system *have* third party file system drivers?</p>
<p>Perhaps it&#39;s uncommon, but definitely not unheard of. For example, any Mac user with Windows installed will have Apple&#39;s HFS+ file system driver installed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143273">
				<div id="div-comment-1143273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">random8382</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143273">
			August 6, 2014 at 10:35 pm</a>		</div>

		<p>This article reminds me of my dad, who would constantly be buying RAM for his computer as he had a corrupt EXE that, upon launching, caused Explorer to display an &quot;Out of memory&quot; error (even though the error had nothing to do with memory.. )</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/b/oldnewthing/archive/2006/01/30/519388.aspx">blogs.msdn.com/&#8230;/519388.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143283">
				<div id="div-comment-1143283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143283">
			August 7, 2014 at 12:06 am</a>		</div>

		<p>@everyone: mapped network drives. &nbsp;You shouldn&#39;t assume that the filesystem is local to the PC reporting the error.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143293">
				<div id="div-comment-1143293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave (no, a different Dave)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143293">
			August 7, 2014 at 12:23 am</a>		</div>

		<p>&gt;How about, instead of making unfounded assumptions, Explorer stops </p>
<p>&gt;reporting &quot;file too large&quot; except when the file system actually </p>
<p>&gt;reports &quot;ERROR_FILE_TOO_LARGE&quot;. &nbsp;If Explorer can&#39;t figure out why </p>
<p>&gt;the parameter is invalid, then it should just report to the user an </p>
<p>&gt;error message that says _that_ instead of translating the error into </p>
<p>&gt;some other error message that may or may not be appropriate.</p>
<p>Sometimes you have to report a best-case guess because the actual error information that&#39;s being provided is insufficient. &nbsp;Consider a situation where you&#39;re making a non-blocking connect to a remote server. &nbsp;select() returns success with an exceptfd set indicating that there&#39;s a problem, WSAGetLastError() says &quot;no error&quot;. &nbsp;What do you tell the user? &nbsp;You can&#39;t say &quot;select() returned with an exceptfd set but WSAGetLastError() reports no error&quot; because it&#39;s meaningless, you can&#39;t say &quot;We tried to connect to the server but couldn&#39;t, absolutely no idea why&quot; because that&#39;s useless, so you sort of make things up and report a WSAECONNREFUSED or something because it&#39;s the least awful thing you can do and it&#39;s probably close to the reason why there was a problem.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143303">
				<div id="div-comment-1143303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike S</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143303">
			August 7, 2014 at 5:52 am</a>		</div>

		<p>The ClearCase source control system mounts as a file system. (At least it used to.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mike-dimmick even thread-even depth-1" id="comment-1143393">
				<div id="div-comment-1143393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Mike+Dimmick' rel='external nofollow' class='url'>Mike Dimmick</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143393">
			August 7, 2014 at 10:50 am</a>		</div>

		<p>@Anon: Windows Explorer (like most Windows components) looks up all error messages with FormatMessage. You get whatever messages were built into Windows, for that particular error. There are still, I think, a few messages that have a replacement in them (%1 etc) which causes problems when the component trying to get the error message doesn&#39;t know that the error in question is expecting parameters.</p>
<p>The WinError.h file in the SDK is generated by the message compiler, using the .mc file that generates the resource that FormatMessage looks for. The comments above each #define give the message in the version of Windows that the SDK was built for. This means you can search WinError.h for the message you got, to get the #define and the actual error number. Usually, I find searching for one of those will give more useful information than searching for the error code.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143423">
				<div id="div-comment-1143423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143423">
			August 7, 2014 at 12:35 pm</a>		</div>

		<p>@640k: it seems you missed my comment above. &nbsp;What if the file system is on a Novell Netware (or whatever) file server accessed by a mapped network drive?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143413">
				<div id="div-comment-1143413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143413">
			August 7, 2014 at 12:27 pm</a>		</div>

		<p>Compensating for your own bugs again?</p>
<p>Why not fix the return values in *your* file system driver instead?</p>
<p>3rd party usb driver is actually ms own usb driver, no need to blame others.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1143663">
				<div id="div-comment-1143663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143663">
			August 8, 2014 at 11:14 am</a>		</div>

		<p>@Mike Dimmick</p>
<p>err.exe will look them up, no need to dig around.</p>
<p>In this case:</p>
<p>C:err&gt;err =ERROR_INVALID_PARAMETER</p>
<p># matching string &quot;ERROR_INVALID_PARAMETER&quot; :</p>
<p>0x00000057 ERROR_INVALID_PARAMETER &nbsp; &nbsp; &nbsp; &nbsp;winerror.h</p>
<p># The parameter is incorrect.</p>
<p># 1 matches found for &quot;=ERROR_INVALID_PARAMETER&quot;</p>
<p>&quot;The parameter is incorrect&quot; is not helpful.</p>
<p>0x00000057 is also not helpful.</p>
<p>The actual incorrect parameter, and/or why it was incorrect, would be helpful.</p>
<p>@Dave (no, a different Dave)</p>
<p>If you&#39;re reporting another component&#39;s error, report the error that component gave you. You don&#39;t have to present it in a dialog, but you need to present it, at a minimum, to either the logging subsystem or a channel over which dbgview can intercept and display it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1143813">
				<div id="div-comment-1143813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave (no, a different Dave)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1143813">
			August 11, 2014 at 4:15 am</a>		</div>

		<p>&gt;If you&#39;re reporting another component&#39;s error, report the error that component gave you.</p>
<p>See my original message, WSAGetLastError() is reporting ERROR_SUCCESS for the reason why it can&#39;t connect. &nbsp;The only thing that reporting that as an error status will give me is a screenshot on the daily WTF. &nbsp;This is why I have to invent an error, in my case WSAECONNREFUSED, in order to have something to report that at least may be the cause of the problem.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1144083">
				<div id="div-comment-1144083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140806-00/?p=323#comment-1144083">
			August 12, 2014 at 10:54 am</a>		</div>

		<p>@Dave: Hmmm I think this needs WASEYOURDRIVERISBROKEN.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>