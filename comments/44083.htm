<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (29)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-1150563">
				<div id="div-comment-1150563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Darren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150563">
			September 12, 2014 at 7:26 am</a>		</div>

		<p>Fun fact: Lots of old mainframe operating systems called the OS the &quot;System Monitor,&quot; not because it monitored the system but because a &quot;monitor&quot; is a synchronization object you can suspend yourself in and pick up again when it gets signaled. I.e., it would be like naming the kernel &quot;the system critical section&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-iboyd odd alt thread-odd thread-alt depth-1" id="comment-1150573">
				<div id="div-comment-1150573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IanBoyd' rel='external nofollow' class='url'>IanBoyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150573">
			September 12, 2014 at 7:49 am</a>		</div>

		<p>Intended or not; i liked this trip down the Ctrl+Alt+Delete hole. </p>
<p>It was also a trip down memory lane. Not only for the blue screens, but for the unintentional mention of Procomm. That, and Telix, were used a lot when BBSs existed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150583">
				<div id="div-comment-1150583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150583">
			September 12, 2014 at 7:55 am</a>		</div>

		<p>I love how the kernel single-stepped the processor! I wonder how often this technique has been used outside of debuggers.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150593">
				<div id="div-comment-1150593" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Muzer_</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150593">
			September 12, 2014 at 8:21 am</a>		</div>

		<p>I like this, very clever &#8211; though I got a bit lost at &quot;If things did not return to this sane state within 3Â¼ seconds, then you got this screen:&quot; and &quot;The kernel single-stepped the processor if necessary until the instruction pointer was no longer in the kernel, or until it had single-stepped for 5000 instructions and the instruction pointer was not in the heap manager.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150603">
				<div id="div-comment-1150603" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Muzer_</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150603">
			September 12, 2014 at 8:26 am</a>		</div>

		<p>To expand on that, which sane state is it talking about, and what is the kernel trying to achieve by single-stepping the processor (and which instruction pointer)?</p>
<div class="post">[<em>The sane state is explained in the previous sentence, once you ignore the parenthetical: &quot;&#8230; waited for the virtual machine to finish processing any pending virtual interrupts.&quot; And the purpose of single-stepping the processor is to get back to the application so we can pretend the application called <code>exit</code>. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150613">
				<div id="div-comment-1150613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rick C</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150613">
			September 12, 2014 at 8:39 am</a>		</div>

		<p>The definite article: <a rel="nofollow" target="_new" href="http://www.youtube.com/watch?v=K3CWXqUqPFA#t=40">http://www.youtube.com/watch</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150633">
				<div id="div-comment-1150633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Azarien</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150633">
			September 12, 2014 at 8:50 am</a>		</div>

		<p>@Muzer: Perhaps to get the name of the &quot;current&quot; executable, to be displayed on the blue screen.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150643">
				<div id="div-comment-1150643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">N I</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150643">
			September 12, 2014 at 8:58 am</a>		</div>

		<p>This has been a fascinating series of articles. I love how clever 16-bit Windows had to be, in contrast to NT which was able to favor correctness up front.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150653">
				<div id="div-comment-1150653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scott Brickey</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150653">
			September 12, 2014 at 9:00 am</a>		</div>

		<p>So THAT&#39;S where VxD came from. Finally answered, after decades of not knowing (not that I was investigating the whole time).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150673">
				<div id="div-comment-1150673" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">D V</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150673">
			September 12, 2014 at 9:28 am</a>		</div>

		<p>It&#39;s absolutely stunning that Windows, in its pre-NT incarnation, was actually a somewhat-functioning piece of software. I&#39;m in a state of awe after reading this article. Favorite quote &#8211; &quot;Why 3/4 seconds? I have no idea&quot;. Just utter chaos, held together by bubble gum and match sticks. Truly an amazing piece of software.</p>
<div class="post">[<em>You had to pull a lot of tricks to squeeze three operating systems into 2MB of memory. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150693">
				<div id="div-comment-1150693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Virtual troll Device</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150693">
			September 12, 2014 at 10:28 am</a>		</div>

		<p>All my eyes could focus on those screens is &quot;You will lose any unsaved information&quot;. The &quot;of Death&quot; part in BSOD is not unfounded.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao odd alt thread-odd thread-alt depth-1" id="comment-1150713">
				<div id="div-comment-1150713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150713">
			September 12, 2014 at 11:31 am</a>		</div>

		<p>I hope you will write about how Ctrl-Alt-Del changed in Win9x. Win32 apps are probably relatively easy, but it would be interesting to read about how it handled Win16 apps.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150743">
				<div id="div-comment-1150743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foo any</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150743">
			September 12, 2014 at 1:45 pm</a>		</div>

		<p>I was very confused about this:</p>
<p>&quot;The kernel single-stepped the processor if necessary until the instruction pointer was no longer in the kernel, or until it had single-stepped for 5000 instructions and the instruction pointer was not in the heap manager. (The heap manager was allowed to run for more than 5000 instructions.)&quot;</p>
<p>Then I remembered that there are actually two kernels involved here, the 32bit virtual machine manager and the 16bit Windows kernel. So the former single stepped the latter, right?</p>
<div class="post">[<em>The 16-bit kernel single-stepped itself. The 32-bit kernel simulated an int 1 into the 16-bit kernel, and the int 1 handler took over from there. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150753">
				<div id="div-comment-1150753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Eddie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150753">
			September 12, 2014 at 2:08 pm</a>		</div>

		<p>Ctrl-Alt-Del week has been absolutely entertaining and informative.</p>
<p>Raymond, after all those tech news sites erroneously reported that Ballmer created the BSOD did any coworkers stop by your office and say &quot;look what you done?&quot;</p>
<div class="post">[<em>Yeah, like all of them. (Exaggerating.) -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150763">
				<div id="div-comment-1150763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foo any</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150763">
			September 12, 2014 at 2:34 pm</a>		</div>

		<p>Ah, thanks Raymond, the simulated interrupt was the missing link. I was wondering how the 16bit kernel single stepping itself would make any sense if the virtual machine manager just resumed it.</p>
<p>By the way, you mentioned NMIs. What did happen on Win 3.1 when an NMI took place? Did the VMM just ignore it? Pass it into the 16bit kernel? Die?</p>
<div class="post">[<em>Actually, it wasn&#39;t precisely like that. The 32-bit kernel simulated a call to a magic function (part of the magic information provided at startup) <span style="text-decoration:underline;">as if</span> it were the int 1 handler. That function would then decide whether further tracing was necessary; if so, it would install a true int 1 handler, set the TF flag, and <code>iret</code>. Oh, did I mention that all of the code throughout this entire endeavor (32-bit kernel and 16-bit kernel) was written in assembly? (And the virtual reboot device by default rebooted the system when an NMI occurred.) -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150773">
				<div id="div-comment-1150773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Muzer_</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150773">
			September 12, 2014 at 3:47 pm</a>		</div>

		<p>Oh, I see. I had somehow misunderstood the term &quot;in the kernel&quot;, for some reason interpreting it as meaning in the working memory of the kernel (as in, some pointer on the stack somewhere had to disappear so it was no longer &quot;in the kernel&quot;), as opposed to the instruction pointer (which I now realise is synonymous with the program counter) having to stop pointing to memory belonging to the kernel. Thanks for correcting my stupid misunderstanding!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-yuhong-bao even thread-even depth-1" id="comment-1150783">
				<div id="div-comment-1150783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Yuhong+Bao' rel='external nofollow' class='url'>Yuhong Bao</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150783">
			September 12, 2014 at 3:50 pm</a>		</div>

		<p>@Muzer_: To be more precise, I think it is referring to KRNL386.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150813">
				<div id="div-comment-1150813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">user</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150813">
			September 13, 2014 at 7:47 am</a>		</div>

		<p>The whole week was awesome Raymond! What can you tell us about &quot;Abort, Retry, Fail&quot; message?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150823">
				<div id="div-comment-1150823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">12BitSlab</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150823">
			September 13, 2014 at 8:14 am</a>		</div>

		<p>This past week is yet another reason why this is my favorite blog. &nbsp;Thanks, Raymond!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150833">
				<div id="div-comment-1150833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">smf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150833">
			September 13, 2014 at 9:45 am</a>		</div>

		<p>&quot;The whole week was awesome Raymond! What can you tell us about &quot;Abort, Retry, Fail&quot; message?&quot;</p>
<p>@user</p>
<p>I&#39;m old school. I remember &quot;Abort, Retry, Ignore&quot;, IIRC it changed around dos 3.3</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150843">
				<div id="div-comment-1150843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nobugz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150843">
			September 13, 2014 at 11:59 am</a>		</div>

		<p>Ah, I see Ballmer&#39;s hand in rewriting *that* one.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150883">
				<div id="div-comment-1150883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Innocent Bystander</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150883">
			September 13, 2014 at 11:27 pm</a>		</div>

		<p>There is something particularly enchanting about these stories from the Windows 3.1 days. I think the hardware constraints forces the generation of &quot;nifty code&quot; that is both fun to read (and one assumes write) about. Win NT was a much more stable OS perhaps, but it was at least and order of magnitude slower at the time! I get the same enjoyment reading the original Quake sources (when can you open source Win 3.1 Raymond?). Sadly, modern hardware means we mostly have different priorities in this current day.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150903">
				<div id="div-comment-1150903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ErikF</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150903">
			September 14, 2014 at 4:05 am</a>		</div>

		<p>I&#39;m betting that the 3/4 second delay was to let VCACHE flush its buffers. I remember disk activity happening when I pressed Ctrl+Alt+Del (and also remember that hard disks were *not* fast back then!) Thanks again for the great series! There&#39;s something to be said for &quot;nifty code&quot;, but the downside to it is that such code often becomes unmaintainable and a possible source of problems later on.</p>
<div class="post">[<em>Well, there was no VCACHE in Windows 3.1, but I get your point. To let the disk cache flush. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1150923">
				<div id="div-comment-1150923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">user</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150923">
			September 14, 2014 at 11:23 am</a>		</div>

		<p>@smf</p>
<p>I guess I&#39;m old</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150933">
				<div id="div-comment-1150933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">user</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150933">
			September 14, 2014 at 1:57 pm</a>		</div>

		<p>Off topic &#8211; Raymond I guess those folks at Windows Phone team need your guidance badly, My phone was updating, It took more than an hour to reach to %93, then error 801882d2 happened and them instead of resuming the download, it started it all over again. a quick search showed that error 801882d2 is probably a server time-out error, does it really have to restart the download? can&#39;t it just resume it? Guys, Seriously?</p>
<div class="post">[<em>Try hitting Ctrl+Alt+Del. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong odd alt thread-odd thread-alt depth-1" id="comment-1150943">
				<div id="div-comment-1150943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150943">
			September 14, 2014 at 6:45 pm</a>		</div>

		<p>Yes, I think Win3.1 still using SMARTDRV.EXE to do caching things.</p>
<p>Btw, regarding &quot;unstable&quot; state in Win3.1, I remember I wondered about why sometimes the mouse cursor can move in &quot;unstable&quot; state and sometimes I can&#39;t (The Ctrl-Alt-Del keys are still functional in both cases) We used this to deduce how badly the system state is gone at that time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1150953">
				<div id="div-comment-1150953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Klimax</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1150953">
			September 15, 2014 at 6:49 am</a>		</div>

		<p>@cheong00</p>
<p>Correct:</p>
<p><a rel="nofollow" target="_new" href="http://support.microsoft.com/kb/83325/en-us">support.microsoft.com/&#8230;/en-us</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1151193">
				<div id="div-comment-1151193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1151193">
			September 16, 2014 at 2:56 am</a>		</div>

		<p>Anyone remember the &quot;crash&quot; &nbsp;where moving the mouse made the machine make beeping noises at you. Because the message queue was full? Much more entertaining than a blue screen.</p>
<div class="post">[<em>Oh, you mean <a href="http://blogs.msdn.com/b/oldnewthing/archive/2009/09/18/9896621.aspx">ticking death</a>. -Raymond</em>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1151243">
				<div id="div-comment-1151243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DWalker</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20140912-00/?p=44083#comment-1151243">
			September 16, 2014 at 8:58 am</a>		</div>

		<p>That KB article 83325 is quite interesting! &nbsp;I probably read it when it first came out. &nbsp;Windows, and all operating systems, have come a long way since then (only 23 years). &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>