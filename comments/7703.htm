<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (9)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-982803">
				<div id="div-comment-982803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982803">
			May 4, 2012 at 10:45 am</a>		</div>

		<p>Now I&#39;m sort of curious as to what prompted the behavior change. This seems like it could be a breaking change for apps that tended to get illegal characters in their inputs and were able to safely ignore them.</p>
<div class="post">[<i>My guess is security. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-982833">
				<div id="div-comment-982833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982833">
			May 4, 2012 at 12:36 pm</a>		</div>

		<blockquote><p>
  Some people claim that the following sentences in the documentation are contradictory
</p></blockquote>
<p>One might assume that people reading those sentences are, generally speaking, programmers. &nbsp;One might assume that programmers, who after all work with logical devices, could mentally derive that little table as they were reading the text. &nbsp; Alas, one would likely be wrong.</p>
<p>Lawyers, on the other hand &#8230; ;-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-982843">
				<div id="div-comment-982843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982843">
			May 4, 2012 at 1:28 pm</a>		</div>

		<p>Documentation is overcomplicated with negatives. That&#39;s why Raymond now has to spend time on explaining it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-982863">
				<div id="div-comment-982863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982863">
			May 4, 2012 at 3:43 pm</a>		</div>

		<p>Wasn&#39;t there some discussion on this in the comments awhile back? Unfortunately the Web 2.0 abuse makes it impossible to use a search engine to search the comments on this blog.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-982893">
				<div id="div-comment-982893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Wayne</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982893">
			May 5, 2012 at 4:10 pm</a>		</div>

		<p>The documentation should have Raymond&#39;s tables!! &nbsp;It&#39;s so much easier to parse than the text.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-982913">
				<div id="div-comment-982913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982913">
			May 6, 2012 at 5:34 pm</a>		</div>

		<p>I too am one of the humans who likes tables.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong even thread-even depth-1" id="comment-982943">
				<div id="div-comment-982943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982943">
			May 6, 2012 at 7:37 pm</a>		</div>

		<p>[My guess is security. -Raymond]</p>
<p>Agreed. I see the same potential as &quot;canonical Unicode forms&quot; abuse as it were in IIS before Win2k. If an application do checking on MBCS then convert to Unicode, and the source string contains discardable character that&#39;d make some illegal sequence seems legal, that&#39;ll effectively allow bad people write code to bypass the checking.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong odd alt thread-odd thread-alt depth-1" id="comment-982953">
				<div id="div-comment-982953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982953">
			May 6, 2012 at 7:43 pm</a>		</div>

		<p>I&#39;ll also note that if certain application is written for MBCS and not Unicode, all it&#39;s validation would be done in with MBCS data. And if that application passes the data to COM, since it&#39;ll transparently do the MBCS to Unicode conversion, it may unknowingly pass inadequately validated data to the COM component.</p>
<p>Another reason for not writing non-Unicode applications these days&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-982973">
				<div id="div-comment-982973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KJK::Hyperion</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20120504-00/?p=7703#comment-982973">
			May 7, 2012 at 1:25 am</a>		</div>

		<p>Codepages can specify a replacement character (most commonly &quot;?&quot;). It&#39;s documented as the default replacement character used by WideCharToMultiByte, presumably it&#39;s now used by MultiByteToWideChar, too. It could be made clearer</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>