<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (26)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-593263">
				<div id="div-comment-593263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Thom</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593263">
			January 24, 2008 at 10:07 am</a>		</div>

		<p>Programmers should have to pass a test to verify that they will not annoy Raymond. &nbsp;Only then should they be allowed to write code which makes it into software that has the potential to annoy me.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593273">
				<div id="div-comment-593273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://forbidden-planet.blogspot.com' rel='external nofollow' class='url'>richard</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593273">
			January 24, 2008 at 10:55 am</a>		</div>

		<p>A possible corollary to this is the way code gets modified when an unexpected bug does arise. I find the tendency is to add tests, handling and diagnostics for that specific problem (usually the result of a subtle coding fault). Despite it having been an unexpected problem (granted, we could debate if the design was sufficiently complete if it failed to consider this error condition).</p>
<p>I find this often adds complexity to the code, without adding benefit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593293">
				<div id="div-comment-593293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Medinoc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593293">
			January 24, 2008 at 11:27 am</a>		</div>

		<p>I think that rather than sending a fake WM_QUERYENDSESSION, testing the program calls DefWindowProc() could be more reliable by sending a message in the &quot;registered&quot; range.</p>
<p>Registered using a MAC-based GUID for good measure.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593313">
				<div id="div-comment-593313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mikkin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593313">
			January 24, 2008 at 12:31 pm</a>		</div>

		<p>Testing never proves the absence of bugs, only their presence.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593343">
				<div id="div-comment-593343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://jenk.livejournal.com' rel='external nofollow' class='url'>JenK</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593343">
			January 24, 2008 at 1:47 pm</a>		</div>

		<p>&lt;i&gt;&quot;Testing never proves the absence of bugs, only their presence.&quot;&lt;/i&gt;</p>
<p>Not to mention <a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/Halting_problem" rel="nofollow">http://en.wikipedia.org/wiki/Halting_problem</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593353">
				<div id="div-comment-593353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joe Butler</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593353">
			January 24, 2008 at 2:23 pm</a>		</div>

		<p>Ray Trent: &quot;Hate to beat a dead horse, but once again the problem is insufficient foresight on the part of the designers of Windows.&quot;</p>
<p>The point was that a message had been mishandled. Your assertion that it would all be rosy if window procedures didn&#8217;t work the way they do doesn&#8217;t really follow on from that. &nbsp;People would still be able to mishandle messages. &nbsp;Take the 50% of programmers on the the left hand side of the normal distribution and they will undoubtebly demonstrate the consumate skills required to mess the simplest of things up.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593363">
				<div id="div-comment-593363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">m0ff</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593363">
			January 24, 2008 at 2:38 pm</a>		</div>

		<p>Yeah, I can&#8217;t agree more with that comment on &#8216;Halting Problem&#8217;. I tend to observe that writing a piece code can be quite challenging, but then writting a test for it is much more difficult. It involves some scripting, frameworks and all that jazz. This repeats on and on, no matter Windows, Linux, VxWorks or whatever.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593383">
				<div id="div-comment-593383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aaron</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593383">
			January 24, 2008 at 4:03 pm</a>		</div>

		<p>Ray Trent: Technically speaking, isn&#8217;t just about every problem imaginable caused by -somebody&#8217;s- insufficient foresight? &nbsp;That is why we have the expression, &quot;the benefit of hindsight&quot;.</p>
<p>By Raymond&#8217;s example, and using your logic, we wouldn&#8217;t have world hunger if people in those starving countries had had the foresight to stop making babies and start growing crops. &nbsp;It&#8217;s a ridiculous and downright pompous assertion.</p>
<p>Not to mention, your solution doesn&#8217;t actually solve the non-trivial problem, but I&#8217;m sure you foresaw that too&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593393">
				<div id="div-comment-593393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JCM</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593393">
			January 24, 2008 at 4:29 pm</a>		</div>

		<p>On a related note, I&#8217;ve been working in the world of automated testing for the past couple of years. I very often have to tell colleagues around here that, &quot;Everything is easy in English.&quot;</p>
<p>They usually look at me like I was speaking a foreign language.</p>
<p>Although I wrote my first program back in 1982 when I was in the sixth grade, I am by education an electrical engineer. Most of my colleagues don&#8217;t have the background that I do, and can&#8217;t understand how much work there is behind their &quot;just have it do x&quot; requests.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593403">
				<div id="div-comment-593403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">toomuchwin32</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593403">
			January 24, 2008 at 4:46 pm</a>		</div>

		<p>Apart from agreeing vehemently with Aaron, Nicholas, Joe Butler and the others that Ray Trent&#8217;s &quot;brilliant&quot; solution does not actually solve the problem at hand, I must point out that it, in fact, creates a new problem. There are cases where the programmer might want to call DefWindowProc for a message &quot;first&quot; and then do some processing later. As a random example, I might want pass the WM_SETCURSOR message to DefWindowProc, let it do it&#8217;s thing (i.e. set the cursor based on the class cursor etc) and then do some post-processing. If Windows followed what Ray Trent suggests we would need a &quot;Pre&quot; and a &quot;Post&quot; message for every windows message.</p>
<p>Criticising someone else&#8217;s lack of foresight &#8211; aah such an easy thing to do.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593423">
				<div id="div-comment-593423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A Bad Coder</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593423">
			January 24, 2008 at 5:35 pm</a>		</div>

		<p>You test for conditions that are unacceptable. &nbsp;Something may be impossible to test because of the halting problem, but that does not mean there is no solution. &nbsp;The solution is to remove the unacceptable conditions.</p>
<p>In this case, each program implements their own GUI even if by calling a default implementation and if they fail to do so correctly the GUI fails &#8212; windows don&#8217;t move, or don&#8217;t repaint, deadlock, or whatever.</p>
<p>Immovable windows simply do not happen in X11 or OS X, so there is no need to test each program for correctness. &nbsp;These do not occur because the design precludes such unacceptable conditions from happening. &nbsp;When you are faced with a program that can not be tested, the problem is not one of testing but of design. &nbsp;The problem is Windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593443">
				<div id="div-comment-593443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">harmony7</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593443">
			January 24, 2008 at 7:26 pm</a>		</div>

		<p>People picking on Windows for not having an immune window message handling system don&#8217;t realize that this is the aspect of Windows that really makes it powerful.</p>
<p>An application gets to look at a window message sent to one of its windows and decide to process it itself, modify its parameters and pass it to the default window procedure, generate your own window messages in response (such as seen by DefWindowProc as well, such as by creating WM_CHAR messages in response to WM_KEY*), or even let the window outright ignore it completely&#8211;I&#8217;m sure there are legitimate cases for all of these cases, and you can even do any of these in combination. &nbsp;Of course, it needs to be implemented correctly, but this is a computer, and it&#8217;s just a machine that mindlessly performs a list of instructions you provide to it.</p>
<p>The halting problem is mentioned above. &nbsp;What if a program has an inadvertent while(true); in the window procedure somewhere? &nbsp;How would a standardized test differentiate between that and a procedure that is just taking a very long time to complete? &nbsp;(Test using a timeout? &nbsp;But what if you set a timeout to 30 seconds and the window message ends up taking 31 seconds to complete, etc.)</p>
<p>I really don&#8217;t see what this argument is about. &nbsp;When I buy any product, I have to hope that it has been built correctly, software or not.</p>
<p>What are you going to ask for next, idiot-proof cars that know not to drive on the wrong side of the road? &nbsp;And then one day a pedestrian jumps out of nowhere, and the car will prevent you from swerving to an empty lane to prevent the accident. &nbsp;Not going to happen. &nbsp;The driver is trusted to do the right thing.</p>
<p>Let&#8217;s also hope that your house is build to withstand earthquakes. &nbsp;How is this any different than hoping that your program doesn&#8217;t end in an endless loop?</p>
<p>The problem is not about Windows &#8212; it&#8217;s not the OS&#8217;s responsibility to prevent a thread from becoming unresponsive when it encounters a while(true); .</p>
<p>Raymond is using WndProc/DefWindowProc as only an example of how some people say that certain things should be done without having any idea of how it should be done.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593453">
				<div id="div-comment-593453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://lambert.geek.nz/' rel='external nofollow' class='url'>Miral</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593453">
			January 24, 2008 at 8:07 pm</a>		</div>

		<p>As Medinoc suggested, testing that in the general case a window procedure calls DefWindowProc for unknown messages is easy &#8212; just obtain a message id that the program is guaranteed to not handle (eg. a registered message), hook DefWindowProc so you know whether it gets called, and then pass it the message.</p>
<p>This at least is a reasonable test, even if it doesn&#8217;t test that the app processes those messages it does want to process &quot;correctly&quot; &#8212; since that is essentially impossible to test, as Raymond states.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-593463">
				<div id="div-comment-593463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593463">
			January 24, 2008 at 8:48 pm</a>		</div>

		<p>Miral: but to what end? Whether the application passes that particular test or not doesn&#8217;t actually tell you anything useful.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593333">
				<div id="div-comment-593333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ray Trent</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593333">
			January 24, 2008 at 1:44 pm</a>		</div>

		<p>Hate to beat a dead horse, but once again the problem is insufficient foresight on the part of the designers of Windows.</p>
<p>WindowProcs should *return* whether they handled a message or not, and the *system* should call DefWindowProc if they don&#8217;t. This whole issue then would devolve to &quot;the application lied to Windows, so it gets what it deserves&quot;.</p>
<p>If a message handler needs to return a value, it should do so by reference, *like any other sane event handler*. That allows for more flexibility in return types, but more importantly, the regular return value really wants to be an error code. Microsoft figured this out by the time COM came around, but it was too late.</p>
<p>(note: People who might be inclined to put in a vote for using exception handling rather than an error code for this kind of thing should consider what the word &quot;exception&quot; means&#8230; but I generally think exceptions are a bad idea&#8230; if you *really* want to have transparent error handling (ugh), aspects are a more general and cleaner solution)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593373">
				<div id="div-comment-593373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nicholas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593373">
			January 24, 2008 at 3:47 pm</a>		</div>

		<p>Ray Trent writes: &quot;WindowProcs should *return* whether they handled a message or not,&quot;</p>
<p>That doesn&#8217;t solve anything. &nbsp;It is only a lateral move. &nbsp;The way it currently is and the way you suggest are both of the form &quot;Windows is relying on the program to do something.&quot; &nbsp;In your case you want Windows to rely on the return value of the window procedure. &nbsp;But, the return value may be incorrect. &nbsp;How is an application that may return the wrong return value different from an application that may forget to call DefWindowProc?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding even thread-even depth-1" id="comment-593433">
				<div id="div-comment-593433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593433">
			January 24, 2008 at 7:01 pm</a>		</div>

		<p>A Bad Coder: So how do you propose we go and change Windows 3.x then?</p>
<p>In fact, the specific problem you mention has already been fixed in Vista with the DWM (and to a lesser extent in XP where the window manager will take over moving, maximizing and minimizing windows if it detects the window procedure is not responding) so you&#8217;re complaining about a problem that was fixed maybe 5 or 6 years ago. Some of us have learnt to move on&#8230;</p>
<p>But the *general* problem is not specific to Windows. The general problem being described here is one of programmers making mistakes (and expecting the framework to detect and correct the mistakes). I&#8217;d love to hear how OSX and X11 have solved *that* particular problem.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593483">
				<div id="div-comment-593483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Triangle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593483">
			January 24, 2008 at 10:39 pm</a>		</div>

		<p>&quot;But the *general* problem is not specific to Windows. The general problem being described here is one of programmers making mistakes (and expecting the framework to detect and correct the mistakes). I&#8217;d love to hear how OSX and X11 have solved *that* particular problem.&quot;</p>
<p>That depends on what your definition of Windows is. If you mean the win32 API, then I have to disagree with you. The win32 api is EXTREMELY subtle, the documention is sometimes lacking and/or inaccurate, and many things which Should Just Work work pretty poorly. I personally chalk it up to the fact Windows is an extension of an operating system designed to run in 320 KB of RAM, but say what you will. One thing that I&#8217;m sure of: It is the reason compatibility problems and workarounds plague Windows so much.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593503">
				<div id="div-comment-593503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave Harris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593503">
			January 25, 2008 at 9:29 am</a>		</div>

		<p>Dean Martin: whether or not the application passes the test does tell you something interesting.</p>
<p>Specifically, if it doesn&#8217;t pass, then the application has a serious bug and should be refused certification (or whatever the consequences of failing are). The test won&#8217;t find all bugs, but nobody sane expects it to. If the test filters out a few broken programmes, it will be useful.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593513">
				<div id="div-comment-593513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593513">
			January 25, 2008 at 10:10 am</a>		</div>

		<p>harmony7: &quot;People picking on Windows for not having an immune window message handling system don&#8217;t realize that this is the aspect of Windows that really makes it powerful.&quot;</p>
<p>Butbutbut, You Don&#8217;t Get It. &nbsp;People want a system that will allow applications to do everything they should do and forbid them from doing anything they shouldn&#8217;t do.</p>
<p>I mean, all we have to do is get everybody to agree on what goes into which category and then solve he halting problem, how hard can it be?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593613">
				<div id="div-comment-593613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593613">
			January 25, 2008 at 11:23 am</a>		</div>

		<p>I read that in Kernel Mode Windows 95 would send a message to VxDs that they couldn&#8217;t possibly handle and checked that they said they couldn&#8217;t handle it.</p>
<p>IIRC in the checked build there was a message. But it could have refused to load them. Then again enforcement probably isn&#8217;t an option for Windows user mode applications since there is probably a commercially important app that break every possible rule.</p>
<p>In kernel mode if you enforce the rules from the start you can simplify things. In fact the NT kernel will bug check if a driver breaks a rule.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593643">
				<div id="div-comment-593643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mikkin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593643">
			January 25, 2008 at 12:30 pm</a>		</div>

		<blockquote><p>
  &gt; Something may be impossible to test because of the halting problem, but that does not mean there is no solution. &nbsp;The solution is to remove the unacceptable conditions.
</p></blockquote>
<p>So the great leap forward is to remove support for Turing-equivalent computation! Why didn&#8217;t I think of that?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593693">
				<div id="div-comment-593693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593693">
			January 25, 2008 at 1:16 pm</a>		</div>

		<p>I like Raymond&#8217;s idea a lot, but I think he addresses the idea to wrong audience. Many users do not realize the &quot;how&quot; part when they ask for functionality, and when you deliver the things they want they immediately change their mind and try to blame on you!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-593563">
				<div id="div-comment-593563" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">A Bad Coder</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593563">
			January 25, 2008 at 11:03 am</a>		</div>

		<p>&#8220;A Bad Coder: So how do you propose we go and change Windows 3.x then?&#8221;</p>
<p>One thing you can do is have a known-good library on top of it so applications prefer to use a different design (kind of like how .net solves some of these problems).</p>
<p>&#8220;In fact, the specific problem you mention has already been fixed &#8230; to a lesser extent in XP where the window manager will take over moving, maximizing and minimizing windows if it detects the window procedure is not responding&#8221;</p>
<p>So in other words XP *tests* the program for correctness? &nbsp;Which is exactly what this thread and theory says is not possible to do?</p>
<p>&#8220;DWM &#8230; Some of us have learnt to move on&#8230;&#8221;</p>
<p>/sigh</p>
<p>That is exactly my point, change the design don&#8217;t try to test things which are untestable. EOT</p>
<div class="post">[<i>The window manager detects only the &#8220;program takes too long to give an answer&#8221; case. It doesn&#8217;t detect the &#8220;program immediately returns the wrong answer&#8221; case. The problem with WM_DEVICEBROADCAST wasn&#8217;t that programs were not responding to the message; it&#8217;s that they were responding to the message incorrectly. How do you know that when a program says &#8220;No, I&#8217;m still using that device&#8221;, it is telling the truth? -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-593723">
				<div id="div-comment-593723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Triangle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-593723">
			January 25, 2008 at 1:27 pm</a>		</div>

		<p>Friday, January 25, 2008 10:10 AM by dave</p>
<p>&quot;I mean, all we have to do is get everybody to agree on what goes into which category and then solve he halting problem, how hard can it be?&quot;</p>
<p>This is a misunderstanding alot of commenters seem to believe, so let me clarify: The halting problem *in general* is not solvable. There are specific cases that can be solved through specific means. It&#8217;s not _the_ halting problem that needs to be solved, it&#8217;s _a_ halting problem.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-594483">
				<div id="div-comment-594483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://uiguidelines.wordpress.com' rel='external nofollow' class='url'>Ian Boyd</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080124-00/?p=23713#comment-594483">
			January 29, 2008 at 1:44 pm</a>		</div>

		<p>i&#8217;d be quite happy if a test tested whatever it could.</p>
<p>i&#8217;d be quite happy with a test harness added to AppVerifier that injects fake messages during PeekMessage (a.l.a &quot;Sure, we do that&quot; <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2004/02/11/71307.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2004/02/11/71307.aspx</a>), and log if the message didn&#8217;t pop out the bottom through DefWindowProc.</p>
<p>If the developer has no idea that they are even supposed to call DefWindowProc, they&#8217;ll be informed pretty quickly through their own testing with AppVerifier. And the more screens they test, the more problems they&#8217;ll find.</p>
<p>And it&#8217;s better than nothing.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>