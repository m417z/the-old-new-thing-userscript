<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (7)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1299575">
				<div id="div-comment-1299575" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DSN</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299575">
			June 12, 2017 at 9:57 am</a>		</div>

		<p>You said &#8220;no maximum token count&#8221;, but then use a finite integer to store the count? Shame on you :P</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1299595">
				<div id="div-comment-1299595" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Al Go</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299595">
			June 12, 2017 at 12:03 pm</a>		</div>

		<p>Let me know how creating a billion threads works out for you</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3 parent" id="comment-1299605">
				<div id="div-comment-1299605" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">smf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299605">
			June 12, 2017 at 2:43 pm</a>		</div>

		<p>On a quantum cpu they will be done by last week.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-4" id="comment-1299615">
				<div id="div-comment-1299615" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John Doe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299615">
			June 12, 2017 at 7:30 pm</a>		</div>

		<p>&#8220;The per-process limit on kernel handles is 2^24.&#8221;<br />
You will never reach there.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even depth-3" id="comment-1299606">
				<div id="div-comment-1299606" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299606">
			June 12, 2017 at 5:16 pm</a>		</div>

		<p>Come to think of it I wrote an OS that didn&#8217;t need a kernel stack per thread. If the usermode threads don&#8217;t need stacks either it&#8217;s no longer ridiculously implausible.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt depth-3" id="comment-1299645">
				<div id="div-comment-1299645" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299645">
			June 13, 2017 at 2:39 am</a>		</div>

		<p>What makes you think that a thread will only ever want to reserve access to <em>one</em> instance of the resource being protected by the semaphore?</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-archangelpip even depth-2" id="comment-1299725">
				<div id="div-comment-1299725" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170612-00/?p=96375#comment-1299725">
			June 13, 2017 at 12:42 pm</a>		</div>

		<p>Even if you wait on a single address, you don&#8217;t have to keep the token count in a single address, do you?<br />
The x86 architecture has the adc and sbb instructions to allow you to use integers that are larger than the processor can handle in one operation, so as long as you are willing to put more memory to the token count than to anything useful, you will only run out of tokens when you run out of address space.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>