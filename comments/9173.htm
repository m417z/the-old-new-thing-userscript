<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (24)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-945103">
				<div id="div-comment-945103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jamie Akers</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945103">
			November 7, 2011 at 7:18 am</a>		</div>

		<p>Rounded to 1 decimal place may make sense on this 1% occasion.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945153">
				<div id="div-comment-945153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jeff</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945153">
			November 7, 2011 at 7:52 am</a>		</div>

		<p>Maybe it&#39;s the nearest 1/100th percent value of the nearest full percentage?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945183">
				<div id="div-comment-945183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">acq</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945183">
			November 7, 2011 at 7:59 am</a>		</div>

		<p>(me: fires Python and types)</p>
<blockquote><p>
  &gt;&gt; 0.4+4.0+9.4+9.3+9.2+21.2+20.0+15.8
</p></blockquote>
<p>89.3</p>
<p>Raymond probably just did mental math. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945193">
				<div id="div-comment-945193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">acq</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945193">
			November 7, 2011 at 8:02 am</a>		</div>

		<p>ups I omitted 1 in front of the first number. So the result is 99.3 &#8212; that&#39;s certainly much harder to detect without actually calculating everything.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-945213">
				<div id="div-comment-945213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945213">
			November 7, 2011 at 8:57 am</a>		</div>

		<p>As Andy H points out:</p>
<p>There are eight numbers which sure look like they were rounded to the nearest 0.1%.</p>
<p>The maximum error in rounding to the nearest 0.1% is 0.05%.</p>
<p>Even if all the rounding happened to be &quot;down&quot;, the maximum error you would expect from eight numbers would be 0.05% * 8 = 0.4%.</p>
<p>The rounded numbers add up to 99.3%, which is an error of 0.7%.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945253">
				<div id="div-comment-945253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">lib</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945253">
			November 7, 2011 at 9:15 am</a>		</div>

		<p>To be charitable/whimsical, one possibility: only the percentages 4.0% and 20.0% have been rounded to the nearest percent, being something like 4.3% and 20.4%. This would make the numbers add up.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945263">
				<div id="div-comment-945263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">voo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945263">
			November 7, 2011 at 9:18 am</a>		</div>

		<p>@Maurits Huh? If we round only in one direction we get a maximum error of 0.9999..% = 0.1% per item. And 0.1 * 8 = 0.8 &gt; 0.7 so that works fine. But that&#39;d be a really strange definition for &quot;round to nearest&quot; :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945283">
				<div id="div-comment-945283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JM</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945283">
			November 7, 2011 at 9:42 am</a>		</div>

		<p>The solution is simple enough: round the total to the nearest 100%. This should give you a sufficiently wide margin.</p>
<p>Also, by amending the phrase to the more convenient &quot;percentages may not add up to 100% due to rounding&quot; you have all your bases covered, really. Nobody said which values were being rounded, or when, or how.</p>
<p>Speaking of bases, we&#39;re just assuming here the rounding was done in base 10. This seems too limiting.</p>
<p>Finally, we could see the problem as getting a total of 100% from a set of values rounded with different rules as an instance of the knapsack problem, meaning we have just transformed a boring accountancy issue into an interesting exercise in optimization.</p>
<p>If you&#39;re not having fun, you&#39;re just not being arbitrary enough.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945293">
				<div id="div-comment-945293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">AsmGuru62</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945293">
			November 7, 2011 at 9:44 am</a>		</div>

		<p>Instead of such disclaimer the proper code should have been written:</p>
<ol>
<li>
<p>Make a variable of 100.0%</p>
</li>
<li>
<p>Calculate percentages for every category of &#39;whatever&#39; it is needed on the chart</p>
</li>
<li>
<p>Subtract every percentage from the value in step 1.</p>
</li>
<li>
<p>Do not calculate the last category &#8211; simply accept the value from step 1.</p>
</li>
</ol>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945343">
				<div id="div-comment-945343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil (SM)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945343">
			November 7, 2011 at 10:38 am</a>		</div>

		<p>@Maurits: I assume by &quot;always rounding down&quot; he meant using some kind of floor or trunc function to one decimal place, which would make the result plausible. &nbsp; Although that explanation itself is not very plausible!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945353">
				<div id="div-comment-945353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mark Steward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945353">
			November 7, 2011 at 12:02 pm</a>		</div>

		<p>Wait, computers rounding down by default is now not plausible?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945383">
				<div id="div-comment-945383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">well-actually</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945383">
			November 7, 2011 at 12:35 pm</a>		</div>

		<p>I believe Raymond&#39;s point was that the numbers are not rounded to the nearest percent as claimed, but instead to the nearest tenth (0.1) of a percent.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945393">
				<div id="div-comment-945393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945393">
			November 7, 2011 at 12:39 pm</a>		</div>

		<p>I&#39;ve never understood why these notes say &quot;may not add to 100%&quot; rather than &quot;do not &#8230;&quot; unless it&#39;s charting live data.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945423">
				<div id="div-comment-945423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mark</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945423">
			November 7, 2011 at 1:46 pm</a>		</div>

		<p>well-actually: yes, I was replying to all the astonished comments at the (entirely irrelevant) rounding down.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945433">
				<div id="div-comment-945433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Huh?</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945433">
			November 7, 2011 at 1:46 pm</a>		</div>

		<blockquote><p>
  Wait, computers rounding down by default is now not plausible?
</p></blockquote>
<p>No, because every sane format function would round to the nearest value of the requested decimal resolution, not always down. Probably, you will 0.99999999999999999999999999 formatted to 3 digits shown as 1.000, or not?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945123">
				<div id="div-comment-945123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andy H</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945123">
			November 7, 2011 at 7:40 am</a>		</div>

		<p>Even allowing for rounding to 1dp, they still don&#39;t add up to 100%</p>
<p>Unless the *always* round down rather than to nearest 1dp</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945243">
				<div id="div-comment-945243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam V</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945243">
			November 7, 2011 at 9:15 am</a>		</div>

		<p>Maybe 4.0 and 20.0 *were* rounded to the nearest full percent, meaning their maximum error is 0.5%, so change your calculations to (0.05 * 6) + (0.5 * 2) = 1.3%, and you&#39;re back within the possible error limits.</p>
<p>Of course, then you have to wonder why they rounded 2 numbers correctly and 6 incorrectly&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-odd thread-alt depth-1" id="comment-945463">
				<div id="div-comment-945463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945463">
			November 7, 2011 at 5:37 pm</a>		</div>

		<p>Another possibility &#8211; maybe there were a slew of other values which added up to around 0.7%, but which were individually too small to be worth adding to the list.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945523">
				<div id="div-comment-945523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945523">
			November 8, 2011 at 3:23 am</a>		</div>

		<p>@acq Save yourself a CreateProcess and use SET /A instead.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945683">
				<div id="div-comment-945683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">640k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945683">
			November 8, 2011 at 10:45 am</a>		</div>

		<p>rounding is not truncation</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-945693">
				<div id="div-comment-945693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945693">
			November 8, 2011 at 10:56 am</a>		</div>

		<p>Truncation is just rounding toward zero.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945723">
				<div id="div-comment-945723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ricardo C</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945723">
			November 8, 2011 at 2:48 pm</a>		</div>

		<p>We know you can round down or up.</p>
<p>I believe that Raymond&#39;s point is:</p>
<p>&quot;This is a use of the phrase &quot;nearest percent&quot; I was previously unfamiliar with. &quot;</p>
<p>The use of the phrase is ambiguous and provides no helpful information.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-945743">
				<div id="div-comment-945743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945743">
			November 8, 2011 at 4:27 pm</a>		</div>

		<p>set /a doesn&#39;t seem to handle floating-point numbers on my system.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-945663">
				<div id="div-comment-945663" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20111107-01/?p=9173#comment-945663">
			November 8, 2011 at 9:09 am</a>		</div>

		<p>@Neil: that assumes he already has a cmd.exe open (I am guessing this &quot;SET /A&quot; you speak of is from cmd.exe). Maybe he fired python directly without opening cmd.exe first. Maybe he, like me, is using another operating system and *does not* have cmd.exe at all (nor CreateProcess, for that matter, unless you count Wine).</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>