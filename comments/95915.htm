<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (5)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1291625">
				<div id="div-comment-1291625" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cesar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170406-00/?p=95915#comment-1291625">
			April 6, 2017 at 3:28 pm</a>		</div>

		<p>&gt; Use std::call_once or C++ static locals.</p>
<p>Be careful with C++ static locals: from what I recall, their initialization isn&#8217;t thread-safe in MSVC.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-1291635">
				<div id="div-comment-1291635" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">David Haim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170406-00/?p=95915#comment-1291635">
			April 6, 2017 at 3:42 pm</a>		</div>

		<p>It is after c++11.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-archangelpip even depth-2" id="comment-1291646">
				<div id="div-comment-1291646" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Darran+Rowe' rel='external nofollow' class='url'>Darran Rowe</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170406-00/?p=95915#comment-1291646">
			April 6, 2017 at 11:41 pm</a>		</div>

		<p>This was added to VC in VC2015.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-1291935">
				<div id="div-comment-1291935" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alex Guteniev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170406-00/?p=95915#comment-1291935">
			April 11, 2017 at 3:01 am</a>		</div>

		<p>std::call_once is implemented via InitOnceExecuteOnce in VS2015.<br />
I guess this means that you can just throw from InitOnceExecuteOnce parameter, if you want to use InitOnceExecuteOnce.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor even depth-2" id="comment-1291985">
				<div id="div-comment-1291985" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170406-00/?p=95915#comment-1291985">
			April 11, 2017 at 9:38 am</a>		</div>

		<p>Ah, but notice that std::call_once wraps the lambda inside a try/catch before calling InitOnceExecuteOnce (<code>_TRY_BEGIN</code>&#8230;<code>_CATCH_ALL</code>) and rethrows the exception after InitOnceExecuteOnce returns (<code>_XSTD rethrow_exception</code>). So the evidence is the opposite of what you claim.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>