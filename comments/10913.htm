<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (5)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-907883">
				<div id="div-comment-907883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alex Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110418-00/?p=10913#comment-907883">
			April 18, 2011 at 7:54 am</a>		</div>

		<p>Better advice is never call an &quot;outside&quot; function while holding a lock. &quot;Outside&quot; meaning something not under your control. Even better don&#39;t call any non-utility functions.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-907963">
				<div id="div-comment-907963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110418-00/?p=10913#comment-907963">
			April 18, 2011 at 1:14 pm</a>		</div>

		<p>Even better: Lock only what you must, iff you must, and no longer than you must.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-907973">
				<div id="div-comment-907973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110418-00/?p=10913#comment-907973">
			April 18, 2011 at 1:32 pm</a>		</div>

		<p>All the more reason to use lock-free.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-908093">
				<div id="div-comment-908093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110418-00/?p=10913#comment-908093">
			April 19, 2011 at 3:31 am</a>		</div>

		<p>Perhaps it would suffice to get the text from the &quot;special place&quot; and not send a message, if you know that the window in question doesn&#39;t subclass WM_GET/SETTEXT.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-908103">
				<div id="div-comment-908103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">GWO</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20110418-00/?p=10913#comment-908103">
			April 19, 2011 at 5:36 am</a>		</div>

		<p>@Alex Grigoriev: That&#39;s solid advice. I&#39;d add to that &quot;While holding a lock, try not to do anything except access the resource that the lock protects&quot;. If you can&#39;t specify exactly what resource your lock is supposed to be protecting &#8211; redesign the code / locking scheme until you can.</p>
<div class="post">[<i>This is far easier to say than to do. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>