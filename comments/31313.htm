<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (64)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-376723">
				<div id="div-comment-376723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Peter Ritchie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376723">
			May 4, 2006 at 10:20 am</a>		</div>

		<p>Cool. &nbsp;But, a function of SET? &nbsp;Weird.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376733">
				<div id="div-comment-376733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Puckdropper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376733">
			May 4, 2006 at 10:30 am</a>		</div>

		<p>Cool&#8230; Just missed going in my research paper by one day, though. &nbsp;Yet another tool at your finger tips on the command line. :-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376743">
				<div id="div-comment-376743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BryanK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376743">
			May 4, 2006 at 10:31 am</a>		</div>

		<p>Cool? &nbsp;Yes; almost as cool as $((&#8230;)) in bash. &nbsp;;-)</p>
<p>(FWIW, I think bash&#8217;s version is better because you can use the result in another command, instead of only being able to print it. &nbsp;To get it to print, you have to &quot;echo $((&#8230;))&quot;; to assign it to a variable, you can just &quot;var=$((&#8230;))&quot;. &nbsp;Yes, the first is slightly easier in cmd &#8212; but the second doesn&#8217;t seem possible at all, unless cmd has the equivalent of backticks.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376763">
				<div id="div-comment-376763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.kryogenix.org/' rel='external nofollow' class='url'>Stuart Langridge</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376763">
			May 4, 2006 at 10:33 am</a>		</div>

		<p>You get backtick-ish behaviour from for /f:</p>
<p>for /f %f in (&#8216;set /a 2+2&#8217;) do echo %f<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376773">
				<div id="div-comment-376773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://forbidden-planet.blogspot.com' rel='external nofollow' class='url'>richard</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376773">
			May 4, 2006 at 10:36 am</a>		</div>

		<p>I will be another to chime in cool!</p>
<p>Nice to know I don&#8217;t have to leave the command prompt.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376783">
				<div id="div-comment-376783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://meneame.net/story.php?id=15720' rel='external nofollow' class='url'>meneame.net</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376783">
			May 4, 2006 at 10:44 am</a>		</div>

		<p>Tantos a&amp;#241;os usando la linia de comandos de Windows XP (cmd.exe) y ahora me entero que se pueden hacer peque&amp;#241;os calculos con una precision de un numero entero de 32-bits sin tener que usar la calculadora de Windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376793">
				<div id="div-comment-376793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376793">
			May 4, 2006 at 10:46 am</a>		</div>

		<p>BrianK:</p>
<p>Try:</p>
<p>set /A foo=2+2<br />
<br />echo %foo%</p>
<p>(Also note that &quot;set /A&quot; does not print the result from a batch file, only from the command line)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376803">
				<div id="div-comment-376803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">I forgot my posting name (really)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376803">
			May 4, 2006 at 10:49 am</a>		</div>

		<p>Had to really lough hard, when reading this, because of the spots a friend sent me yesterday<br />
<br /> <a rel="nofollow" target="_new" href="http://movies.apple.com/movies/us/apple/getamac_ads1/ilife_480x376.mov" rel="nofollow">http://movies.apple.com/movies/us/apple/getamac_ads1/ilife_480x376.mov</a><br />
<br />is the culprit</p>
<p>(Apple computer) tells (Windows computer) what he has preinstalled (iLive suit)<br />
<br />(Windows computer): And I&#8217;ve got a calculator</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376813">
				<div id="div-comment-376813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376813">
			May 4, 2006 at 10:50 am</a>		</div>

		<p>re: setting variables:</p>
<p>C:&gt;SET /a FOUR=2+2<br />
<br />4<br />
<br />C:&gt;echo %FOUR%<br />
<br />4</p>
<p>granted, you have to suppress the output of SET if you don&#8217;t want it, but it does work to directly set variables.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-376863">
				<div id="div-comment-376863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376863">
			May 4, 2006 at 11:28 am</a>		</div>

		<p>I didn&#8217;t say &quot;fancy arithmetic using floating point values greater than 4 billion&quot;, I said &quot;quick arithmetic&quot;.</p>
<p>I don&#8217;t use this trick myself but I thought others might find it helpful. If you don&#8217;t find it helpful, that&#8217;s fine.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376883">
				<div id="div-comment-376883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://msmvps.com/alunj' rel='external nofollow' class='url'>Alun Jones</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376883">
			May 4, 2006 at 11:30 am</a>		</div>

		<p>Why is it &quot;weird&quot; that it&#8217;s a function of &#8216;set&#8217;? &nbsp;Where else should it go? &nbsp;A separate &quot;eval&quot; or &quot;expr&quot; or &quot;calc&quot; command?<br />
<br />Already, SET is where expressions of other kinds are parsed, evaluated and set.<br />
<br />Me, I like &quot;SET /P&quot; &#8211; to prompt for a value to put into an environment variable.<br />
<br />As for a &quot;real programming language&quot; &#8211; yeah, sure, if you need to do real things, you use a real language. &nbsp;If you&#8217;re at the batch file, and don&#8217;t want to start up an instance of your favourite language just to add a few numbers, you don&#8217;t have to. &nbsp;Four-byte signed arithmetic is all you&#8217;re likely to need in most batch files, surely? &nbsp;If not, as you point out, you&#8217;re free to call others.<br />
<br />For the Mac advert, sorry, I wasn&#8217;t able to watch it, because it uses a proprietary video format that isn&#8217;t installed on my system &#8211; but I&#8217;m intrigued as to how &quot;iLive suit&quot; (uh, is that &quot;suite&quot;?) compares to Windows Movie Maker, etc &#8211; or is the iMac trying to compare its consumer software to server products?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376893">
				<div id="div-comment-376893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andrew Feldstein</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376893">
			May 4, 2006 at 11:31 am</a>		</div>

		<p>I use the Google toolbar since my browser is always running anyway.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376943">
				<div id="div-comment-376943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Eli</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376943">
			May 4, 2006 at 11:42 am</a>		</div>

		<p>Yeah but the Google toolbar doesn&#8217;t do bit shifts.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376953">
				<div id="div-comment-376953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376953">
			May 4, 2006 at 11:44 am</a>		</div>

		<p>Anders:</p>
<p>C would do the same thing. Are you seriously trying to claim that C is not &quot;a real programming language&quot;?<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-376963">
				<div id="div-comment-376963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ritchie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376963">
			May 4, 2006 at 11:47 am</a>		</div>

		<p>Personally I use calc (great for hex / dec conversion) but I can forsee a time when this will come in handy. Thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-aaron-margosis odd alt thread-odd thread-alt depth-1" id="comment-376983">
				<div id="div-comment-376983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Aaron+Margosis' rel='external nofollow' class='url'>Aaron Margosis</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376983">
			May 4, 2006 at 11:49 am</a>		</div>

		<p>Wow &#8211; it&#8217;ll do hex-to-decimal conversion, too:<br />
<br />C:&gt;set /a 0x1234<br />
<br />4660</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377003">
				<div id="div-comment-377003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://asztal.net/' rel='external nofollow' class='url'>Lee Houghton</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377003">
			May 4, 2006 at 11:57 am</a>		</div>

		<p>It&#8217;s cool, and on occasion I have used it &#8211; but I don&#8217;t use it any more. I have a button on my keyboard for calculator (MS Internet Keyboard). I seem to be using calculator a lot more recently. </p>
<p>PS. I was totally hoping you&#8217;d used the KBD tag there :-P</p>
<p>PPS. Anders Munch: ruby -e &quot;p 50000*50000&quot; :D</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377013">
				<div id="div-comment-377013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377013">
			May 4, 2006 at 11:58 am</a>		</div>

		<p>Raymond, I know you&#8217;re just being helpful posting this information, I certainly meant no offense to you. &nbsp;I was just commenting in the context of your recent posts on using the ever-present command interpreter instead of something requiring download+installation. </p>
<p>However: Signaling an error when the problem at hand exceeds your capacity to solve it isn&#8217;t &quot;fancy&quot;, it&#8217;s a basic requirement. SET could have set errorlevel or un-set the target environment variable, but I checked, it does neither on my W2K.</p>
<p>PS: Who said anything about floating point?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377033">
				<div id="div-comment-377033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://slavior.blogspot.com/' rel='external nofollow' class='url'>Slaven</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377033">
			May 4, 2006 at 12:06 pm</a>		</div>

		<p>Anders, the post clearly says &quot;32-bit signed integers&quot;; I don&#8217;t think we need to compare the command prompt with Python to show that Python is better, but a lot of people still rely on the command prompt for many legacy reasons.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377053">
				<div id="div-comment-377053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377053">
			May 4, 2006 at 12:12 pm</a>		</div>

		<p>it does octal-to-decimal too (in case someone uses base-8, I&#8217;m guessing):<br />
<br />C:&gt;set /a 0543<br />
<br />355<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377073">
				<div id="div-comment-377073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377073">
			May 4, 2006 at 12:17 pm</a>		</div>

		<p>Adam: The C programming language does not require overflow checks for reasons of efficiency.</p>
<p>cmd.exe doesn&#8217;t have that excuse. Just<br />
<br />the time spent by SET converting between binary numbers and text strings exceeds the time for the actual computation by orders of magnitude.</p>
<p>Oh, and saying cmd.exe isn&#8217;t a real programming language was not intended as a slight on cmd.exe! &nbsp;After all cmd.exe wasn&#8217;t designed to be a general-purpose programming language. &nbsp;I just want to use the right tool for the job.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377083">
				<div id="div-comment-377083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377083">
			May 4, 2006 at 12:21 pm</a>		</div>

		<p>Anders: Again, C does not signal an error on overflow; it just wraps around.</p>
<p>Hmmmm &#8230;. bignum support required, automatic overflow checking &quot;a basic requirement&quot;. Please tell, what other features do you require of &quot;a real programming language&quot;?</p>
<p>/me stifles grin<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jamescurran even thread-even depth-1" id="comment-377123">
				<div id="div-comment-377123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Garry Trinder</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377123">
			May 4, 2006 at 12:48 pm</a>		</div>

		<p>So, how&#8217;d you get the colloquial phrase &quot;The expression evaluator is pretty simple&quot; (from &quot;SET /?&quot;) &nbsp;passed the User Documentation Police?<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377133">
				<div id="div-comment-377133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Risto</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377133">
			May 4, 2006 at 12:56 pm</a>		</div>

		<p>CMD.EXE just gets better and better with each release. I have taken to reading the help of all the commands on each OS and SP release. I totally missed the SET /P one! Sheesh! Is there a forum to request new features? I would love for it to save history across invokations.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377143">
				<div id="div-comment-377143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">hepwori</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377143">
			May 4, 2006 at 12:56 pm</a>		</div>

		<p>&quot;Note that we had to quote the shift operator&quot;.</p>
<p>Alternatively, you can escape the &gt; signs with the cmd.exe escape character ^.</p>
<p>C:&gt;set /a 31^&gt;^&gt;2<br />
<br />7<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377163">
				<div id="div-comment-377163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377163">
			May 4, 2006 at 1:02 pm</a>		</div>

		<p>Adam: I&#8217;m glad you&#8217;re having fun, but what you&#8217;re laughing at is a straw man. I never purported to define a set of required features for programming languages, but since you ask, if I were to write one, data structures and subroutines would be at the top of the list.</p>
<p>C unsigned int implements modulo UINT_MAX+1 arithmetic. C signed int arithmetic has undefined behaviour, if the result is not representable as a signed int. A C implementation is perfectly entitled to trap signed arithmetic overflow, and I would expect a C <em>interpreter</em> to do just that.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377173">
				<div id="div-comment-377173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377173">
			May 4, 2006 at 1:22 pm</a>		</div>

		<p>I wouldn&#8217;t want to use bash or GNU expr for programming either (Rich, try bigger numbers with bash). But at least the limitations of bash expressions are clearly documented. man bash tells me:</p>
<p>&quot;Evaluation is done in fixed-width integers with no check for overflow&quot;.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377183">
				<div id="div-comment-377183" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DOS Fogey</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377183">
			May 4, 2006 at 1:28 pm</a>		</div>

		<p>Bah. &nbsp;All these spoiled kids with their newfangled scripting languages. &nbsp;I always say you&#8217;re not really a man until you&#8217;ve written a Texas Hold&#8217;em game in DOS Batch.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377193">
				<div id="div-comment-377193" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.justinho.com/PermaLink,guid,0df3c438-2ad1-48e7-bbab-66f2bd74e655.aspx' rel='external nofollow' class='url'>Justin T Ho - www.justinho.com</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377193">
			May 4, 2006 at 1:36 pm</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377203">
				<div id="div-comment-377203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">moefh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377203">
			May 4, 2006 at 2:27 pm</a>		</div>

		<p>Rich: I guess you&#8217;re using a 64-bit machine, no?</p>
<p>Bash and Perl do integer arithmetic in native integer precision. &nbsp;I don&#8217;t know about bc, though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377213">
				<div id="div-comment-377213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">moefh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377213">
			May 4, 2006 at 2:40 pm</a>		</div>

		<p>Erm&#8230; Perl does arithmetic in floating point&#8230; oops! :-)</p>
<p>Bash does it in native integer precision.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377253">
				<div id="div-comment-377253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://matthew.chaboud.com' rel='external nofollow' class='url'>Matthew Chaboud</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377253">
			May 4, 2006 at 3:22 pm</a>		</div>

		<p>Any way to get hex back out of this as an argument?</p>
<p>That would just make my day.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377263">
				<div id="div-comment-377263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://matthew.chaboud.com' rel='external nofollow' class='url'>Matthew Chaboud</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377263">
			May 4, 2006 at 3:24 pm</a>		</div>

		<p>That doesn&#8217;t quite read as I intended. &nbsp;What I meant was:</p>
<p>&quot;Is there any argument that might indicate to SET that one wishes to receive hex as a result of the calculation?&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377283">
				<div id="div-comment-377283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377283">
			May 4, 2006 at 3:45 pm</a>		</div>

		<p>Our build script uses this to increment the build number automatically.<br />
<br />set /a newbuildnum=%buildnum%+1</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377313">
				<div id="div-comment-377313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377313">
			May 4, 2006 at 6:08 pm</a>		</div>

		<p>Adam: The &quot;you said then I said then you said..&quot; game doesn&#8217;t accomplish anything. EOT</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-376843">
				<div id="div-comment-376843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anders Munch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-376843">
			May 4, 2006 at 11:14 am</a>		</div>

		<p>C:&gt;set /a 50000*50000<br />
<br />-1794967296</p>
<p>I&#8217;ll take a real programming language please, thank you all the same. Even if it does take an extra install.</p>
<p>C:&gt;python -c &quot;print 50000*50000&quot;<br />
<br />2500000000<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377323">
				<div id="div-comment-377323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.michael-puff.de' rel='external nofollow' class='url'>Michael Puff</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377323">
			May 4, 2006 at 6:42 pm</a>		</div>

		<p>But the question is: Why only signed integers and not floats?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-odd thread-alt depth-1" id="comment-377353">
				<div id="div-comment-377353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377353">
			May 4, 2006 at 7:16 pm</a>		</div>

		<p>Any way to get hex back out of this as an argument?</p>
<p>Sure, just run the output through something like this (negative numbers not tested)</p>
<p>rem tohex.bat<br />
<br />@echo off<br />
<br />if (%1) == () goto USAGE<br />
<br />setlocal<br />
<br />set in=%1<br />
<br />:LOOP<br />
<br />if (%in%) == (0) goto ENDLOOP<br />
<br />set /a hexit=%in% %% 16<br />
<br />set /a in=%in% / 16<br />
<br />if (%hexit%) == (10) set hexit=A<br />
<br />if (%hexit%) == (11) set hexit=B<br />
<br />if (%hexit%) == (12) set hexit=C<br />
<br />if (%hexit%) == (13) set hexit=D<br />
<br />if (%hexit%) == (14) set hexit=E<br />
<br />if (%hexit%) == (15) set hexit=F<br />
<br />set out=%out%%hexit%<br />
<br />goto LOOP<br />
<br />:ENDLOOP</p>
<p>if (%out%) == () set out=0<br />
<br />echo 0x%out%<br />
<br />endlocal<br />
<br />goto END<br />
<br />:USAGE<br />
<br />echo USAGE: tohex positive-number<br />
<br />:END<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-377363">
				<div id="div-comment-377363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377363">
			May 4, 2006 at 7:19 pm</a>		</div>

		<p>Heh. &nbsp;Spot-the-bug! &nbsp;I only tested this with palindromic hex numbers, It seems :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377103">
				<div id="div-comment-377103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377103">
			May 4, 2006 at 12:35 pm</a>		</div>

		<p>I still think what Amiga OS did over two decades ago is more logical: Eval.</p>
<p>That MS-DOS (and therefore NT cmd.exe) never understood &quot;ticks&quot; is a larger problem, and one that can&#8217;t be easily fixed. Claiming &quot;for /f&quot; *can* solve some of these issues is, while techincally correct, a path down infuriation-and-&quot;fsck-off-you-bl**dy-interpreter&quot;-lane. :-)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-377373">
				<div id="div-comment-377373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377373">
			May 4, 2006 at 7:39 pm</a>		</div>

		<p>Fixed the bug and added support for negative numbers.</p>
<p>Source here:<br />
<br /><a rel="nofollow" target="_new" href="http://channel9.msdn.com/ShowPost.aspx?PostID=189460" rel="nofollow">http://channel9.msdn.com/ShowPost.aspx?PostID=189460</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-377113">
				<div id="div-comment-377113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377113">
			May 4, 2006 at 12:42 pm</a>		</div>

		<p>If cmd.exe has no excuse then neither do many other programs.</p>
<p>$ echo $[50000*50000]<br />
<br />-1794967296<br />
<br />$ expr 50000 &#8216;*&#8217; 50000<br />
<br />-1794967296<br />
<br />% @ x = 50000 * 50000; echo $x<br />
<br />-1794967296<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377153">
				<div id="div-comment-377153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377153">
			May 4, 2006 at 1:00 pm</a>		</div>

		<p>Raymond: the first two work for me.</p>
<p>bash$ echo $((50000 * 50000))<br />
<br />2500000000<br />
<br />zsh$ echo $((50000 * 50000))<br />
<br />2500000000<br />
<br />$ expr 50000 &#8216;*&#8217; 50000<br />
<br />2500000000<br />
<br />$ perl -e &#8216;print 50000 * 50000&#8217;<br />
<br />2500000000<br />
<br />$ python -c &#8216;print 50000 * 50000&#8217;<br />
<br />2500000000<br />
<br />$ echo 50000 &#8216;*&#8217; 50000 | bc<br />
<br />2500000000</p>
<p>I&#8217;m not sure what your last example was.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377243">
				<div id="div-comment-377243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377243">
			May 4, 2006 at 3:19 pm</a>		</div>

		<p>How is it a straw man?</p>
<p>Having shown that the expression evaluator wraps on arithmetic overflow, you said &quot;I&#8217;ll take a real programming language please, thank you all the same.&quot;, and pointed out that your language of choice uses bignums. That&#8217;s a direct implication that any &quot;real programming language&quot; should use bignums.</p>
<p>&quot;Signaling an error when the problem at hand exceeds your capacity to solve it isn&#8217;t &quot;fancy&quot;, it&#8217;s a basic requirement.&quot; is also a direct attack on the lack of such handling in the expression evaluator.</p>
<p>These are both things you clearly believe should be in a &quot;real programming language&quot;. I don&#8217;t see how what you&#8217;ve said can be taken differently. C does not implement either of these features. Therefore, you clearly believe that C is not a &quot;real programming language&quot;.</p>
<p>Ah, but &quot;The C programming language does not require overflow checks for reasons of efficiency.&quot; and &quot;C signed int arithmetic has undefined behaviour&quot;.</p>
<p>So, &quot;reasons of efficiency&quot; and &quot;writing down that it&#8217;s undefined&quot; are circumstances in which the rules for &quot;real programming languages&quot; can be ignored? Well, the cmd.exe expression evaluation already qualifies on the second, as Raymond pointed out. As for the first, why is &quot;ease of implementation&quot; not just as valid an excuse for implementing something? Especially as &quot;ease of implementation&quot; is more likely to be the original rationale for C&#8217;s lack of tightly-defined overflow semantics. In which case cmd.exe wins on that score too.</p>
<p>I apologise for the amusement, but you do seem to be attempting to create a definition of &quot;real programming languages&quot; which excludes most languages generally considered &quot;real&quot;, but them claiming that those rules don&#8217;t need to apply to *those* languages.</p>
<p>(Also, I&#8217;d expect a C program run by an interpreter to have the same semantics as the same program compiled and run as a binary. There are some circumstances where it can be handy to *rely* on overflow.)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377303">
				<div id="div-comment-377303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kuwanger</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377303">
			May 4, 2006 at 5:11 pm</a>		</div>

		<p>&quot;Bash &#8230; [does] integer arithmetic in native integer precision. &nbsp;I don&#8217;t know about bc, though.&quot;</p>
<p>Uh, no. &nbsp;Bash does interger arithmetic in signed 64-bit integer precision (easily testable with echo $((2**63-1)) and $((2**63))). &nbsp;bc offers infinite (ie, memory space limited) precision. &nbsp;Personally, it&#8217;s the lack of floating point numbers that frquently cause me to use bc more than worries of integer overflowing; I&#8217;m not sure how well I&#8217;d handle doing everything through set though :).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377573">
				<div id="div-comment-377573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bangwhistle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377573">
			May 5, 2006 at 12:48 pm</a>		</div>

		<p>I use my TI-36 calculator which I keep on my desk. &nbsp;It took me years to let go of my slide rule for a calculator, it&#8217;s going to take more years to use these new-fangled tricks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377463">
				<div id="div-comment-377463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.phm.lu' rel='external nofollow' class='url'>Philippe Majerus</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377463">
			May 5, 2006 at 8:59 am</a>		</div>

		<p>Interesting, but JScript and VBScript just provides so much more and are installed on every Windows since years :)</p>
<p>Too bad CScript doesn&#8217;t handle stdin as the script source and requires a file:<br />
<br />C:&gt; echo WScript.StdOut.Write(50000*50000) &gt; temp.js<br />
<br />C:&gt; CScript /NoLogo temp.js<br />
<br />C:&gt; del temp.js</p>
<p>However, it makes it possible to build an eval utility for CMD:<br />
<br />[eval.js]<br />
<br />WScript.StdOut.Write (eval(WScript.StdIn.ReadAll()));<br />
<br />[eval.cmd]<br />
<br />@CScript.exe /NoLogo eval.js</p>
<p>eval can then be used in CMD pipelines:<br />
<br />C:&gt; echo 50000*50000 | eval.cmd | more<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377623">
				<div id="div-comment-377623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">milowg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377623">
			May 5, 2006 at 4:08 pm</a>		</div>

		<p>What good is doing this in a DOS window, if to copy the results, I have to:<br />
<br />1. right click on the window<br />
<br />2. select Mark<br />
<br />3. highlight the text<br />
<br />4. hit the enter key.</p>
<p>What ever happened to the cmd window in windows 2000 where you could highlight anytime you wanted?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377633">
				<div id="div-comment-377633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">oakfed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377633">
			May 5, 2006 at 5:06 pm</a>		</div>

		<p>Yoo can highlight any time you want in both XP command windows and Win2K command windows &#8211; provided the properties for the window have &quot;Quick Edit&quot; mode set. I&#8217;m not sure what the default is in either OS, though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377643">
				<div id="div-comment-377643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.phm.lu' rel='external nofollow' class='url'>Philippe Majerus</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377643">
			May 5, 2006 at 5:06 pm</a>		</div>

		<blockquote><p>
  What ever happened to the cmd window in windows 2000 where you could highlight anytime you wanted?</p>
<p>You mean the Quick Edit Mode you can enable in the console window properties? (right click on its title bar &gt; properties).</p>
<p>Changing from Raster Fonts to Lucida Console also makes the console window much more comfortable, especially with ClearType.<br />
  
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377653">
				<div id="div-comment-377653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">milowg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377653">
			May 5, 2006 at 5:15 pm</a>		</div>

		<p>Wow! Quick Edit is exactly what I was looking for.</p>
<p>I knew I read this blog for a reason :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377613">
				<div id="div-comment-377613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">moefh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377613">
			May 5, 2006 at 3:55 pm</a>		</div>

		<p>&quot;Bash does interger arithmetic in signed 64-bit integer precision [&#8230;]&quot;.</p>
<p>Not here (32-bit machine):</p>
<p>$ uname -m<br />
<br />i686<br />
<br />$ echo $BASH_VERSION<br />
<br />2.05.8(1)-release<br />
<br />$ echo $((1&lt;&lt;31))<br />
<br />-2147483648<br />
<br />$ echo $((0xffffffff))<br />
<br />-1</p>
<p>Strangely, the manual of this version says:</p>
<p>&quot;Evaluation &nbsp;is &nbsp;done &nbsp;in &nbsp;long integers with no check for overflow [&#8230;]&quot;</p>
<p>(which would make you right), but appears to be wrong.</p>
<p>On another box (64-bit):</p>
<p>$ uname -m<br />
<br />x86_64<br />
<br />$ echo $BASH_VERSION<br />
<br />3.00.16(1)-release<br />
<br />$ echo $((1&lt;&lt;31))<br />
<br />2147483648<br />
<br />$ echo $((0xffffffff))<br />
<br />4294967295</p>
<p>The manual of this version says:</p>
<p>&quot;Evaluation is done in fixed-width integers with no check for overflow [&#8230;]&quot;.</p>
<p>(Seems like they gave up on specifying a precision :-))</p>
<p>PS: calculating $((2**63)) in 32 bits overflows to 0 as early as $((2**32)), which (I guess) is calculated as $((1&lt;&lt;32)).<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377733">
				<div id="div-comment-377733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">GEL</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377733">
			May 6, 2006 at 1:59 am</a>		</div>

		<p>This batch file seems to work pretty well:</p>
<p> &nbsp;@echo off<br />
<br /> &nbsp;SET /A result = %*<br />
<br /> &nbsp;SET result</p>
<p>Not my original, I got it here:</p>
<p>[url]<a rel="nofollow" target="_new" href="http://www.robvanderwoude.com/useless.html" rel="nofollow">http://www.robvanderwoude.com/useless.html</a>[/url]<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377713">
				<div id="div-comment-377713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377713">
			May 6, 2006 at 1:08 am</a>		</div>

		<p>Thursday, May 04, 2006 3:19 PM by Adam<br />
<br />&gt; (Also, I&#8217;d expect a C program run by an<br />
<br />&gt; interpreter to have the same semantics as<br />
<br />&gt; the same program compiled and run as a<br />
<br />&gt; binary.</p>
<p>It does. &nbsp;The code under discussion has no semantics at all, whether run by an interpreter or compiled and run as a binary. &nbsp;Undefined means undefined.</p>
<p>&gt; There are some circumstances where it can be<br />
<br />&gt; handy to *rely* on overflow.)</p>
<p>Here are two ways to accomplish that:<br />
<br />1. &nbsp;Use unsigned types.<br />
<br />2. &nbsp;Use a known dialect of C, in which the vendor of the interpreter or compiler added implementation extensions to define meanings for some expressions which were otherwise undefined. &nbsp;Maybe the vendor offers these extensions when you set a flag or maybe the vendor offers these extensions always, it doesn&#8217;t matter which, but if that&#8217;s what you need then that&#8217;s what you need to use.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377783">
				<div id="div-comment-377783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377783">
			May 6, 2006 at 9:27 am</a>		</div>

		<p>Norman: Good catch. I forgot that signed overflow is undefined.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-powershellteamhotmail-com odd alt thread-odd thread-alt depth-1" id="comment-377883">
				<div id="div-comment-377883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/PowerShell+Team' rel='external nofollow' class='url'>PowerShell Team</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377883">
			May 7, 2006 at 1:59 pm</a>		</div>

		<p>If you&#8217;re not happy with the expression support in cmd.exe, give Microsoft&#8217;s new PowerShell a try. Here are a couple of examples.</p>
<p>Basic expressions just work:</p>
<p>PS (1) &gt; 50000*50000<br />
<br />2500000000</p>
<p>You also have direct access to all of the math stuff in .NET from powershell:</p>
<p>PS (2) &gt; [math]::sqrt(50000*50000 )<br />
<br />50000</p>
<p>And full floating point support</p>
<p>PS (3) &gt; function sqr ($x) {$x * $x}<br />
<br />PS (4) &gt; sqr 12.4<br />
<br />153.76<br />
<br />PS (5) &gt; 7/3<br />
<br />2.33333333333333<br />
<br />PS (6) &gt; [math]::sin(3.14)<br />
<br />0.00159265291648683<br />
<br />PS (7) &gt; 0x55aa<br />
<br />21930</p>
<p>And operations on other data types like chars</p>
<p>PS (8) &gt; ([int][char] &quot;a&quot;) + 1<br />
<br />98<br />
<br />PS (9) &gt; [char] (([int][char] &quot;a&quot;) + 1)<br />
<br />b</p>
<p>Of course, since it is a shell, you can mix and match commands and expressions. Here&#8217;s an example that calculates the total length of all of the files in the current directory:</p>
<p>PS (10) &gt; $total = 0<br />
<br />PS (11) &gt; dir | foreach {$total += $_.length}<br />
<br />PS (12) &gt; $total<br />
<br />37574</p>
<p>-bruce</p>
<p>&#8212;<br />
<br />Bruce Payette<br />
<br />Technical Lead<br />
<br />Windows PowerShell</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-377903">
				<div id="div-comment-377903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.phm.lu' rel='external nofollow' class='url'>Philippe Majerus</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377903">
			May 7, 2006 at 5:58 pm</a>		</div>

		<p>I&#8217;m happy to see that JScript can also achieve the same result, even if it requires some more typing, especially for the last piece.</p>
<p>Basic expression:</p>
<p>MAS (1)&gt; ?5000*50000<br />
<br />250000000</p>
<p>Using JScript Math stuff:</p>
<p>MAS (2)&gt; ?Math.sqrt(5000*5000)<br />
<br />5000</p>
<p>Floating point support:</p>
<p>MAS (3)&gt; function sqr (x) { return x*x }<br />
<br />MAS (4)&gt; ?sqr(12.4)<br />
<br />153,76<br />
<br />MAS (5)&gt; ?7/3<br />
<br />2,33333333333333<br />
<br />MAS (6)&gt; ?Math.sin(3.14)<br />
<br />1,59265291648683E-03<br />
<br />MAS (7)&gt; ?0x55aa<br />
<br />21930</p>
<p>Operations on chars:</p>
<p>MAS (8)&gt; ?&quot;a&quot;.charCodeAt(0)+1<br />
<br />98<br />
<br />MAS (9)&gt; ?String.fromCharCode(&quot;a&quot;.charCodeAt(0)+1)<br />
<br />b</p>
<p>Total length of all the files in the current directory&#8230; This definitely shows the power of PowerShell scripting language though:</p>
<p>MAS (10)&gt; total = 0<br />
<br />MAS (11)&gt; f = new Enumerator(new ActiveXObject(&quot;Scripting.FileSystemObject&quot;).GetFolder(location).Files)<br />
<br />MAS (12)&gt; for (;!f.atEnd();f.moveNext()) { total+= f.item().Size }<br />
<br />MAS (13)&gt; ?total</p>
<p>Note this isn&#8217;t pure JScript, lines starting with &#8216;?&#8217; are evaluated and their result displayed, instead of executed.<br />
<br />This is an extra feature of a little command shell based on script engine I&#8217;m coding.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-377923">
				<div id="div-comment-377923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.phm.lu' rel='external nofollow' class='url'>Philippe Majerus</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-377923">
			May 7, 2006 at 7:07 pm</a>		</div>

		<p>I realized VBScript can actually be shorter for several of these operations, so if anyone is interested, here it is.</p>
<p>Basic expression:</p>
<p>MAS (1)&gt; ?50000*50000<br />
<br />2500000000</p>
<p>Using VBScript Math functions:</p>
<p>MAS (2)&gt; ?Sqr(5000*5000)</p>
<p>Floating point support:</p>
<p>MAS (3)&gt; Function Sqrx (x): Sqrx = x*x: End Function<br />
<br />MAS (4)&gt; ?Sqrx(12.4)<br />
<br />153,76<br />
<br />MAS (5)&gt; ?7/3<br />
<br />2,33333333333333<br />
<br />MAS (6)&gt; ?Sin(3.14)<br />
<br />1,59265291648683E-03<br />
<br />MAS (7)&gt; ?&amp;h55aa<br />
<br />21930</p>
<p>Operations on chars, much shorter than in JScript:</p>
<p>MAS (8)&gt; ?Asc(&quot;a&quot;)+1<br />
<br />98<br />
<br />MAS (9)&gt; ?Chr(Asc(&quot;a&quot;)+1)<br />
<br />b</p>
<p>Total length of all the files in the current directory, shorter than in JScript, but still far from PowerShell script:</p>
<p>MAS (10)&gt; total = 0<br />
<br />MAS (11)&gt; Set f = CreateObject(&quot;Scripting.FileSystemObject&quot;).GetFolder(location).Files<br />
<br />MAS (12)&gt; For each i in f: total = total+i.Size: Next<br />
<br />MAS (13)&gt; ?total</p>
<p>All in all, PowerShell is much more efficient. I believe this is due to its design, which enforces pipes in every command and thus makes evaluation or execution the same thing, and its syntax being very well designed.<br />
<br />But it&#8217;s good to know we can get some results using current script engines if needed :)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-378413">
				<div id="div-comment-378413" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://technicallysan.blogspot.com' rel='external nofollow' class='url'>Santosh Jayamurugan</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-378413">
			May 9, 2006 at 5:14 am</a>		</div>

		<p>A cool stuff that dint get my attention all these days&#8230;.thx for ticking it !!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-378863">
				<div id="div-comment-378863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anonymous Coward</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-378863">
			May 9, 2006 at 7:05 pm</a>		</div>

		<p>Thursday, May 04, 2006 12:56 PM by hepwori<br />
<br />&gt;Alternatively, you can escape the &gt; signs with the cmd.exe escape character ^. </p>
<p>Wow. &nbsp;This is too cool! &nbsp;Now I can finally generate HTML tags with the ECHO command.<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-379073">
				<div id="div-comment-379073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.phm.lu' rel='external nofollow' class='url'>Philippe Majerus</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-379073">
			May 10, 2006 at 7:25 am</a>		</div>

		<blockquote><p>
  Now I can finally generate HTML tags with the ECHO command.</p>
<p>I wouldn&#8217;t drop ISAPI, ASP and ASP.NET for that new CGI.BAT technology you&#8217;re talking about :)<br />
  <br />However, this can be cool to generate rich reports for batch / CMD scripts.<br />
  
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-odd thread-alt depth-1" id="comment-381273">
				<div id="div-comment-381273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-381273">
			May 16, 2006 at 3:38 pm</a>		</div>

		<p>Well, that&#8217;s integer division for you. :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-381263">
				<div id="div-comment-381263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John B</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-381263">
			May 16, 2006 at 2:59 pm</a>		</div>

		<p>Great but if this is really true what good is it?<br />
<br />C:&gt;set /a 2*(9/2)<br />
<br />8</p>
<p>In my school 2*(9/2) is the same as (2*9)/2 &nbsp;which is still 9. &nbsp;It never equals 8</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-706913">
				<div id="div-comment-706913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.pluskid.org/?p=102' rel='external nofollow' class='url'>Free Mind &raquo; ???????????????????????????</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20060504-13/?p=31313#comment-706913">
			February 7, 2009 at 12:56 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blog.pluskid.org/?p=102" rel="nofollow">http://blog.pluskid.org/?p=102</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>