<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (16)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1 parent" id="comment-1224291">
				<div id="div-comment-1224291" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Boris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224291">
			January 21, 2016 at 7:11 am</a>		</div>

		<p>But what kind of compatibility issue would occur if cmd.exe were simply to accept but ignore the switch?</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-bboorman odd alt depth-2" id="comment-1224301">
				<div id="div-comment-1224301" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Brian_EE' rel='external nofollow' class='url'>Brian_EE</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224301">
			January 21, 2016 at 7:32 am</a>		</div>

		<p>One where if the disk cache buffers actually weren&#8217;t identical, and (x)copy said the file verified but then they really weren&#8217;t the same after flushing.</p>
<p>While rare, RAM bits can get flipped. So at least checking the cache buffers you do the best you can before they flush to media.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mndos even thread-odd thread-alt depth-1 parent" id="comment-1224331">
				<div id="div-comment-1224331" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MacIn173' rel='external nofollow' class='url'>MacIn173</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224331">
			January 21, 2016 at 8:43 am</a>		</div>

		<p>IIRC, it is not just &#8216;device driver would compare&#8217; etc. &#8220;by writing the data to the disk, then reading the data back and comparing it to what should have been written. &#8221;</p>
<p>There&#8217;s special &#8216;verify&#8217; command that is handled by floppy disk controller, and thing it does is to read the track(actually, either whole track or N sectors) and calc checksum.<br />
Command code is D6, the actual data is not transferred to the RAM, CRC code is checked in FDC for each sector.</p>
<p>So, originally, what VERIFY ON does is to check if CRC of data in the sector corresponds to the CRC from sector header.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-mndos odd alt depth-2" id="comment-1224351">
				<div id="div-comment-1224351" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/MacIn173' rel='external nofollow' class='url'>MacIn173</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224351">
			January 21, 2016 at 9:07 am</a>		</div>

		<p>Well, right. According to the sources of MS-DOS in public domain, VERIFY ON is translated into call #4 for int 13h, which is BIOS &#8216;verify&#8217; that directly throws verify command to the FDC.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-scott-brickey even thread-even depth-1" id="comment-1224341">
				<div id="div-comment-1224341" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Scott+Brickey' rel='external nofollow' class='url'>Scott Brickey</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224341">
			January 21, 2016 at 8:44 am</a>		</div>

		<p>So in the event that xcopy was used to copy data between two disks (using /W)&#8230; the assumption is that the file size would be sufficient?</p>
<p>seems like floppy disk corruption would be the exact situation where byte-by-byte verification would benefit most.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1224373">
				<div id="div-comment-1224373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">BZ</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224373">
			January 21, 2016 at 10:17 am</a>		</div>

		<p>So how useful was the /V switch by MS-DOS 6.2 days? Because we always used it when doing both floppy disk copy and HDD copying between different locations.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-1224382">
				<div id="div-comment-1224382" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">HiTechHiTouch</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224382">
			January 21, 2016 at 10:45 am</a>		</div>

		<p>For once, a most disappointing telling of the story.</p>
<p>Was there a fly on the wall when the &#8220;new I/O&#8221; model was hashed out who could tell us why hardware verification was tossed off so lightly to the device driver?</p>
<p>How did the conversation go when the XCOPY developer decided to total subvert/redefine &#8220;verify&#8221; as used by the copy command (i.e. floppy CRC verification)?  Remember, the original XCOPY intent was to do exactly what copy did, only do it by batching as much I/O together as possible so to reduce floppy disk swaps&#8230;</p>
<p>And did the original software people who had suffered from bad media and realized they could build assistance into the operating system (/v, VERIFY) ever raise their voices when verification was gutted?</p>
<p>If the history could be assembled, it would make a good case study in project evolution / programming psychology / inter-group communication failures.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2" id="comment-1224452">
				<div id="div-comment-1224452" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224452">
			January 22, 2016 at 1:10 am</a>		</div>

		<p>The MS-DOS version of XCOPY used the MS-DOS &#8220;verify&#8221; command, which did whatever MS-DOS did. It&#8217;s the Win32 version of XCOPY that was stuck with a /V flag that didn&#8217;t have equivalent semantics in Win32.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1224391">
				<div id="div-comment-1224391" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Richard Wells</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224391">
			January 21, 2016 at 12:33 pm</a>		</div>

		<p>By the time of DOS 6.22, the verify wasn&#8217;t exactly useful. Most systems had sufficient memory to make a sizable disk cache which concealed some of these errors. </p>
<p>Now, if instead, one was back in the multitasking floppy only world of the PDP-11, verify was tremendously useful. The destination floppy might have damage and not record the file or the super long floppy cable might encounter noise. So DEC PIP had a verify option, CP/M PIP implemented the idea, and then DOS included equivalents to much of the CP/M feature set.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-even depth-1" id="comment-1224412">
				<div id="div-comment-1224412" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224412">
			January 21, 2016 at 4:40 pm</a>		</div>

		<p>In theory, the destination might allow write but not read; so xcopy /v would be a way to both copy the file and confirm read access on the destination, in a single command.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-exchange-development-blog-team even thread-odd thread-alt depth-1 parent" id="comment-1224421">
				<div id="div-comment-1224421" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">exchange development blog team</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224421">
			January 21, 2016 at 6:01 pm</a>		</div>

		<p>Uhh, what&#8217;s &#8220;command 8&#8221; and &#8220;command 9&#8221;?  The only one I&#8217;m familiar with was AH=43h with AL=00 or 01 to control verify.  In any case the &#8220;write with verify&#8221; option was always rather optimistic, the most frequently-applied way to implement it was to ignore the flag.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt depth-2" id="comment-1224442">
				<div id="div-comment-1224442" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224442">
			January 22, 2016 at 1:08 am</a>		</div>

		<p>MS-DOS device driver command codes are listed <a href="http://www.drdobbs.com/writing-ms-dos-device-drivers/184402277" rel="nofollow">here</a>.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-cheong even thread-even depth-1 parent" id="comment-1224431">
				<div id="div-comment-1224431" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224431">
			January 21, 2016 at 7:01 pm</a>		</div>

		<p>Btw, the &#8220;Set Features&#8221; (EFh) command of ATAPI command supports subcommand &#8220;Enable Write-Read-Verify&#8221; (0BH) (command reference section 7.47.10). When set to mode 00H, it&#8217;ll make the disk verify written location is readable after each write without additional burden to the system. If the read after write fails, the controller will report error to the system. So I think the verify option is still feasible on HDD today too.</p>
<p>Of cource the disk controller can lie and don&#8217;t do what it supposed to, but just like the controller can lie about what it does when you command it to do buffer flush, it doesn&#8217;t mean you can&#8217;t write feature rely on that when it&#8217;s needed.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-cheong odd alt depth-2" id="comment-1224433">
				<div id="div-comment-1224433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/cheong00' rel='external nofollow' class='url'>cheong00</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224433">
			January 21, 2016 at 7:05 pm</a>		</div>

		<p>Almost forgot it, the command sets global state on disk hence will slow down write performance on disk with head on other application as well during the setting is effective. I don&#8217;t think it&#8217;ll have any performance problem on SSD.</p>
<p>Is there documentated way to enable this feature on my SSDs or it&#8217;s enabled by default now (I think on Win10 because SSDs are now becoming more common)?</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="comment-1224491">
				<div id="div-comment-1224491" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224491">
			January 22, 2016 at 2:37 am</a>		</div>

		<p>Nowadays the only remaining use of VERIFY appears to be as a convenient way to set ERRORLEVEL so that you can detect whether SETLOCAL has taken effect.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-raykoopa odd alt thread-even depth-1" id="comment-1224632">
				<div id="div-comment-1224632" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ray+Koopa' rel='external nofollow' class='url'>Ray Koopa</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20160121-00/?p=92911#comment-1224632">
			January 25, 2016 at 1:22 am</a>		</div>

		<p>Verifying must&#8217;ve been awfully slow back in the days of copying stuff to floppies, wasn&#8217;t it? =)</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>