<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (38)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-152223">
				<div id="div-comment-152223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.atrevido.net' rel='external nofollow' class='url'>Michael Giagnocavo</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152223">
			March 9, 2004 at 7:06 am</a>		</div>

		<p>Aren&#8217;t the parse methods culture-dependent?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152243">
				<div id="div-comment-152243" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.smackfu.com' rel='external nofollow' class='url'>Scott</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152243">
			March 9, 2004 at 7:17 am</a>		</div>

		<p>So what&#8217;s the solution?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152283">
				<div id="div-comment-152283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152283">
			March 9, 2004 at 7:44 am</a>		</div>

		<p>As a regular expression: &quot;^[0-9]+$&quot;. Alternatively, you can turn on ECMA mode via RegexOptions.ECMAScript but make sure to understand all that ECMA mode changes; it&#8217;s more than just the way d is interpreted.</p>
<p>bool IsAsciiDigit(char c)<br />
<br />{<br />
<br /> return c &gt;= &#8216;0&#8217; &amp;&amp; c &lt;= &#8216;9&#8217;;<br />
<br />}</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152293">
				<div id="div-comment-152293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Einars Lielmanis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152293">
			March 9, 2004 at 8:23 am</a>		</div>

		<p>Ahem, in this case, if everything&#8217;s becoming so internationalized, shouldn&#8217;t in the perfect world the System.Int32.Parse() be able to handle the numbers in the arabic notation as well? ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152303">
				<div id="div-comment-152303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.electricminds.org' rel='external nofollow' class='url'>Erbo</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152303">
			March 9, 2004 at 8:58 am</a>		</div>

		<p>Incidentally, I tried this in Java as well, translating your C# code into this:</p>
<p>import java.util.regex.*;</p>
<p>public class TestDigit {<br />
<br />  public static void main(String[] args) {<br />
<br />    System.out.println(Pattern.matches(&quot;^\d+$&quot;,&quot;u0661u0662u0663&quot;));<br />
<br />    System.out.println(Character.isDigit(&#8216;u0661&#8217;));<br />
<br />  }<br />
<br />}</p>
<p>The output this produced was:</p>
<p>false<br />
<br />true</p>
<p>The difference is that Java 1.4&#8217;s regexp engine interprets &quot;d&quot; as &quot;[0-9]&quot;, not as &quot;p{Nd}&quot;, which seems to be how C#&#8217;s regexp engine is interpreting it.</p>
<p>Of course, which behavior is &quot;correct&quot;?  It could be argued both ways; C# is more &quot;internationally&quot; correct by default, while Java is more &quot;intuitively&quot; correct, at least for US/European programmers.  And there&#8217;s certainly ways to force either behavior in either engine, just by writing a different regexp or setting engine options.  Ah well, I&#8217;ll just leave that question to the language/library lawyers.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152313">
				<div id="div-comment-152313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">runtime</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152313">
			March 9, 2004 at 9:21 am</a>		</div>

		<p>This demonstrates what Bruce Schneier has said that Unicode is a huge security disaster waiting to happen..<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152323">
				<div id="div-comment-152323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jerry Pisk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152323">
			March 9, 2004 at 9:28 am</a>		</div>

		<p>It just shows that you need to actually parse the input to validate it. If Int32.Parse throws an exception then it&#8217;s not a valid number, if it doesn&#8217;t then it is. Using regular expressions to validate input is pointless &#8211; this digits issue is just the beginning, even if you actually manage to only include symbols you can parse you&#8217;re still not validating the actual value, which can be lesss or more than the minimum or maximum Int32 value. So you may just go ahead and save yourself the regular expression testing and just try to parse the input.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152383">
				<div id="div-comment-152383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DuncS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152383">
			March 9, 2004 at 11:53 am</a>		</div>

		<p>Following up from what Jerry said: use Double.TryParse() to save yourself having to catch an exception.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152393">
				<div id="div-comment-152393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Steve Hiner</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152393">
			March 9, 2004 at 12:01 pm</a>		</div>

		<p>Catching exceptions is slow.  RegEx isn&#8217;t slow. </p>
<p>If it&#8217;s time critical code you&#8217;d be far better off using a RegEx test for [0-9] then wrap the parse in a Try&#8230;Catch for numbers too big or too small for your type.  At least that way you could avoid most of the Exceptions.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152443">
				<div id="div-comment-152443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jerry Pisk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152443">
			March 9, 2004 at 1:56 pm</a>		</div>

		<p>Steve, you would have to create a regex for each locale your code would run under, which is going to be somewhat of an issue. For example US numbers can include multiple commas (thousand separators) while most european number formats can only have one (since it&#8217;s used as a decimal separator) but can have spaces in the number as a thousands separator. Of course you can not allow your users to use their number format, this whole localization fad is going nowhere anyways ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152463">
				<div id="div-comment-152463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Rackarn</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152463">
			March 9, 2004 at 2:47 pm</a>		</div>

		<p>I find the Snippet Compiler app useful for trying out code samples such as the experiment in this post. <a target="_new" href="http://www.sliver.com/dotnet/snippetcompiler/" rel="nofollow">http://www.sliver.com/dotnet/snippetcompiler/</a></p>
<p>Does anyone know if there is a similar program for Java?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152473">
				<div id="div-comment-152473" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Maas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152473">
			March 9, 2004 at 2:54 pm</a>		</div>

		<p>This reminds me of the case-sensitivity dilemma. In English it&#8217;s trivial to check letter cases, but if you were parsing Chinese I&#8217;d hope you would consider Traditional and Simplified characters as &quot;case-equivalent&quot; (this is a somewhat arbitrary many-to-many mapping, with thousands of entries).</p>
<p>If you do a search on a Japanese filesystem, are katakana and hiragana considered &quot;case-equivalent?&quot; What about kana and (equivalent) kanji?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152483">
				<div id="div-comment-152483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Mastros (theorbtwo)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152483">
			March 9, 2004 at 3:57 pm</a>		</div>

		<p>The obvious fix, to me, would be to make system.int32.parse Do The Right Thing with non-ASCII digits.  That is, consider the value of each character based off of the unicode character database, not from a naive &#8216;0&#8217;-c.  (There are various ways of optimizing this, of course.)</p>
<p>The definition of Nd and the unicode decimal property seem to imply that the characters should function as exact duplcates of 0-9 &#8212; that is, be used in decimal place-value systems, with the most significant digit first.</p>
<p>Of course, the previous paragrah is in direct disagreement with the fact that there are two sets of Nd characters that do not include a zero digit, Ethopic and Tamil.  (I&#8217;m using the UCD 4.0.0 for this.)  There are a total of 268 Nd characters.</p>
<p>BTW, this info is from a quick perl program:<br />
<br />perl -MUnicode::UCD=charinfo -le while (++$n&lt;0x1FFFF) {my $c=chr($n); my $i=charinfo($n); printf &quot;U+%x (%s): %s = %dn&quot;, $n, $i-&gt;{name}, $c, $i-&gt;{decimal} if $c=~/p{Nd}/}</p>
<p>(PS &#8212; I don&#8217;t mean to start a language war, but perl is my language of choice.  It does get this similarly wrong, though it also gives your choice of how to get it wrong.)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152503">
				<div id="div-comment-152503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Shane King</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152503">
			March 9, 2004 at 4:43 pm</a>		</div>

		<p>All the more evidence that we should get everyone to learn English because it would be much easier to do that than get every program to speak every language.</p>
<p>Plus your strings take half the memory that way, because we can go back to 8 bit strings rather than 16 bit ones.</p>
<p>Everybody wins! ;)<br /></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152513">
				<div id="div-comment-152513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152513">
			March 9, 2004 at 4:54 pm</a>		</div>

		<p>Replies here to both the base note and Dan Maas.</p>
<p>I think this quotation in the base note probably comes from the Unicode standard:<br />
<br />&gt; DecimalDigitNumber<br />
<br />&gt; Indicates that the character is a decimal<br />
<br />&gt; digit; that is, in the range 0 through 9.</p>
<p>Gads.  Then the following characters are decimal digits:<br />
<br />???????????????????<br />
<br />(not a word, ichi, ni, san, yon, go, roku, shichi, hachi, kyuu)<br />
<br />(zero, one, two, three, four, five, six, seven, eight, nine)</p>
<p>but the following characters are not decimal digits:<br />
<br />??????????etc.<br />
<br />(juu, hyaku, sen, man, oku, etc.)<br />
<br />(ten, hundred, thousand, ten thousand, hundred million, etc.)<br />
<br />(and I&#8217;ll have to find one of my old Rubik&#8217;s Revenges in order to be reminded of the words for larger powers of ten thousand ^0^)</p>
<p>There are even more reasons than I thought there were, to not adopt Unicode.</p>
<p>3/9/2004 2:54 PM Dan Maas:</p>
<p>&gt; If you do a search on a Japanese filesystem,<br />
<br />&gt; are katakana and hiragana considered &quot;case-<br />
<br />&gt; equivalent?&quot;</p>
<p>If it&#8217;s a filesystem, generally no.  Even a full-width Ro-maji and equivalent half-width Ro-maji do not match.  One time I was looking at a folder in Windows Explorer, looking at two files with identical names, trying to figure out how it could happen.  Then suddenly I noticed that one letter was shaped slightly differently in one name than in the other.  Windows Explorer uses a font which has proportional spacing for Roman letters, so the difference between the full-width and half-width forms of that particular letter was almost invisible.  (By the way, half-width Ro-maji use the same character encodings as ASCII, single byte values in two ranges below 127.)</p>
<p>However, upper-case and lower-case are considered equivalent if both are half-width (as you expected) or if both are full-width (which you probably wondered about but didn&#8217;t ask).</p>
<p>In Microsoft Word, there are options to consider various forms as either identical or different, and I&#8217;m pretty sure these include hiragana vs. katakana, full-width vs. half-width, and upper-case vs. lower-case.</p>
<p>I think search engines can match kanji against various possible readings of the kanji.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152583">
				<div id="div-comment-152583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Maas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152583">
			March 9, 2004 at 6:17 pm</a>		</div>

		<p>Don&#8217;t get me wrong, I love Unicode. Having all languages in a single character set is a great step forward. But it shows the true difficulty of multi-lingual programming. (and allows for good retorts when young whippersnappers suggest making a filesystem that matches upper and lower case inside the kernel :)</p>
<p>(I think the only viable alternative to Unicode would be mandating everything English-only or Esperanto-only or Mandarin-only&#8230; not very attractive options for most people in the world!)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152633">
				<div id="div-comment-152633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152633">
			March 9, 2004 at 6:53 pm</a>		</div>

		<p>In Microsoft Word, you can set the language property for each portion of a document as you type it in.</p>
<p>In some e-mail systems, you can set the language and character encoding of each message.  In some, you can set it on portions of a message.</p>
<p>It is possible for web pages too.  It isn&#8217;t always necessary for American and European web pages to display garbage Kanji all over the place and make it impossible to read what was intended.  It is possible to add a tag saying that the encoding is ISO-8859-1.  Some designers do that and then some browsers can display it properly if you have suitable fonts.  A few years ago I used Internet Explorer to mostly read and then save some documents, and when saving them I specified the encoding as Western European, but when I opened the saved files Internet Explorer still displayed them with garbage Kanji instead of the authors&#8217; intended texts.  That can be avoided even without Unicode.</p>
<p>Unicode itself is not a bad idea.  If it had been invented a few decades earlier than it was, it would be even more wonderful.  The biggest problem is that it isn&#8217;t backward compatible.  There already exist billions of files in SJIS and EUC which are not going to be converted.  No matter how much further improvement and/or debugging gets made to Unicode, it will always be necessary to allow additional cultural or technical specifications.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152643">
				<div id="div-comment-152643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152643">
			March 9, 2004 at 7:07 pm</a>		</div>

		<p>I&#8217;ve just read a bug in the MSDN page cited in the base note (and now hope that someone else will post another followup before this so I won&#8217;t have two in a row, sigh).</p>
<p>&gt; Overload List<br />
<br />&gt; Indicates whether the specified Unicode<br />
<br />&gt; character is categorized as a decimal digit.<br />
<br />[&#8230;]<br />
<br />&gt; [C++] public: static bool IsDigit(__wchar_t);<br />
<br />[&#8230;]<br />
<br />&gt; int main() {<br />
<br />&gt;    char ch = &#8216;8&#8217;;<br />
<br />&gt;<br />
<br />&gt;    Console::WriteLine(Char::IsDigit(ch));</p>
<p>&#8216;8&#8217; and ch are not Unicode characters.  The example code gets the correct output but the example code didn&#8217;t get there by design.  The person who wrote the declaration should talk to the person who wrote the example code.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152653">
				<div id="div-comment-152653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152653">
			March 9, 2004 at 7:11 pm</a>		</div>

		<p>Note that this works due to integer promotion rules, so the error is stylistic and not technical. Fortunately there is a &quot;Feedback&quot; link at the bottom, which I have had much success with. I&#8217;ve found that being polite helps.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152683">
				<div id="div-comment-152683" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.codeproject.com/script/articles/list_articles.asp?userid=152' rel='external nofollow' class='url'>Mike Dunn</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152683">
			March 9, 2004 at 10:40 pm</a>		</div>

		<p>Dan&gt; How about Klingon-only? ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152713">
				<div id="div-comment-152713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Maas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152713">
			March 10, 2004 at 3:57 am</a>		</div>

		<p>I see Chinese users moving (at a snail&#8217;s pace) away from the old 16-bit character sets. Sort of a chicken-and-egg problem given the lack of Unicode-aware applications. (it would be a major step forward for everyone to use Unicode for &quot;Cut&quot;/&quot;Paste&quot; between programs!)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152743">
				<div id="div-comment-152743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.fairview3.clara.co.uk/dev/' rel='external nofollow' class='url'>Sam Meldrum</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152743">
			March 10, 2004 at 7:32 am</a>		</div>

		<p>re Steve Hiner:</p>
<p>&gt; Catching exceptions is slow. RegEx isn&#8217;t<br />
<br />&gt; slow.<br />
<br />&gt;<br />
<br />&gt; If it&#8217;s time critical code you&#8217;d be far<br />
<br />&gt; better off using a RegEx test for [0-9] then<br />
<br />&gt; wrap the parse in a Try&#8230;Catch for numbers<br />
<br />&gt; too big or too small for your type. At least<br />
<br />&gt; that way you could avoid most of the<br />
<br />&gt; Exceptions.</p>
<p>How does that avoid most of the exceptions?  How do you know that there will be more exceptions due to chars outside the range [0-9] than due to absolute values outside the int range being passed?</p>
<p>Unless you know all the ways in which the code is going to be called and what values they are likely to pass in, you simply don&#8217;t know this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-152893">
				<div id="div-comment-152893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152893">
			March 10, 2004 at 10:31 am</a>		</div>

		<blockquote><p>
  Catching exceptions is slow.</p>
<p>Exceptions are supposed to be exceptional.  I can&#8217;t speak for all exception handling mechanisms, but good ones have minimal overhead for the non-exceptional case.  If you&#8217;re trying to parse random data for integer strings, this would throw a lot of exceptions, but how realistic is that?
</p></blockquote>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-152923">
				<div id="div-comment-152923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Maas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-152923">
			March 10, 2004 at 11:13 am</a>		</div>

		<p>A slow exception is preferable to crashing or giving the malicious user control of your program!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-153033">
				<div id="div-comment-153033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-153033">
			March 10, 2004 at 2:40 pm</a>		</div>

		<p>Unicode is a big mess, but it wouldn&#8217;t work any other way because natural languages themselves are so messy.</p>
<p>Someone mentioned problems with case-insensitive matching and Unicode. (I think Raymond even wrote about it once.) To me, this shows how horribly broken the Windows file system is. I&#8217;m sure it seemed like a good idea in the 1980s.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-153233">
				<div id="div-comment-153233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.digitalfanatics.org' rel='external nofollow' class='url'>Johan Thelin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-153233">
			March 10, 2004 at 10:16 pm</a>		</div>

		<p>This is just as amusing as good old VB6/VBA. </p>
<p>I live and work in Sweden where we (don&#8217;t laugh) use comma instead of dot when writing real values. For example you might think that Pi=3.1415&#8230; but in Sweden it is 3,1415&#8230;</p>
<p>This is not a big problem, if I use the Format function I get a comma (or dot, depending on the regional settings of Windows). The big problem appears when I want to convert it to a value again. The val() function does not care about the regional settings so &quot;1,55&quot; = 1 but &quot;1.55&quot; = 1.55. This means that I had to define RVal() (Regional Val) that finds and replaces the first (if any) comma with a dot before calling val(). Not much of a problem, but an annoying work around since Format honours the regional settings.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-153363">
				<div id="div-comment-153363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Kevin Westhead</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-153363">
			March 11, 2004 at 6:02 am</a>		</div>

		<p>Johan,</p>
<p>I think the CCur, CDbl, CInt, CSng, etc. functions are all locale-aware in VB, whereas Val, as you&#8217;ve discovered, always uses &quot;.&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-153713">
				<div id="div-comment-153713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.redwoodroot.org' rel='external nofollow' class='url'>Peter Evans</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-153713">
			March 11, 2004 at 8:50 pm</a>		</div>

		<p>So has anybody come up with a best practice for validating UNICODE input?</p>
<p>Seems like the problem stems from needing to know the Natural Language NL context of the input creator. </p>
<p>I don&#8217;t recall. Do common user agent&#8217;s provide this in trustworth fashion?</p>
<p>Regardless, your code either has to trust the UA provided NL context, decide an arbitrary NL context, or parse the value for the entire unicode encoding (ick).</p>
<p>I&#8217;m just getting up to speed with the framework classes.  So another question I have is do the regexs for the system.text or whatever have flags for language contexts to make this easier for the non-multilingual programmer.   For example,  I&#8217;m bob in U.S and I just want asp.net to work for my blog and will reject any digits that I don&#8217;t know how to validate with regexs.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-153753">
				<div id="div-comment-153753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-153753">
			March 11, 2004 at 9:44 pm</a>		</div>

		<p>If you set the ECMA flag, then everything is just English. So digits are &quot;0&quot; through &quot;9&quot; and nothing else, letters are &quot;a&quot; through &quot;z&quot; and &quot;A&quot; through &quot;Z&quot; and nothing else, etc.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-164573">
				<div id="div-comment-164573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/archive/0001/01/01/114651.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-164573">
			April 16, 2004 at 4:03 pm</a>		</div>

		<p>FoldString(MAP_FOLDDIGITS) will convert all the digits.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-200933">
				<div id="div-comment-200933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/' rel='external nofollow' class='url'>Raymond Chen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-200933">
			August 4, 2004 at 11:25 am</a>		</div>

		<p>Commenting closes after two weeks.</p>
<p><a target="_new" href="http://weblogs.asp.net/oldnewthing/archive/2004/02/21/77681.aspx" rel="nofollow">http://weblogs.asp.net/oldnewthing/archive/2004/02/21/77681.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-210903">
				<div id="div-comment-210903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.asp.net/oldnewthing/archive/2004/09/16/230386.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-210903">
			September 16, 2004 at 10:00 am</a>		</div>

		<p>The RegexOptions.ECMAScript flag changes the behavior of .NET regular expressions.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-231533">
				<div id="div-comment-231533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/2004/12/01/272864.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-231533">
			December 1, 2004 at 7:59 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-231543">
				<div id="div-comment-231543" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/0001/01/01/272864.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-231543">
			December 1, 2004 at 8:01 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-248503">
				<div id="div-comment-248503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/2005/01/24/359347.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-248503">
			January 24, 2005 at 3:04 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-248513">
				<div id="div-comment-248513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/michkap/archive/0001/01/01/359347.aspx' rel='external nofollow' class='url'>Sorting It All Out</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-248513">
			January 24, 2005 at 3:21 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-382813">
				<div id="div-comment-382813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2006/05/22/603788.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-382813">
			May 22, 2006 at 10:00 am</a>		</div>

		<p>No, you don&#8217;t do that.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605573">
				<div id="div-comment-605573" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.csharp411.com/judge-character-with-charis/' rel='external nofollow' class='url'>Judge Character with Char.Is : C# 411</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20040309-00/?p=40333#comment-605573">
			February 29, 2008 at 9:33 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://www.csharp411.com/judge-character-with-charis/" rel="nofollow">http://www.csharp411.com/judge-character-with-charis/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>