<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (41)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-874833">
				<div id="div-comment-874833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Brian Friesen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874833">
			November 17, 2010 at 7:10 am</a>		</div>

		<p>Raymond: For drives smaller than 3GB, the rules are different, but nobody—to within experimental error—has hard drives that small anyway, so it&#39;s pretty much dead code now.</p>
<p>These small hard drives may occur a little more often than you&#39;re thinking thanks to the magic of virtual machines. &nbsp;I routinely create virtual machines with very small hard drives, just enough to get the job done. &nbsp;So this code may not be as dead as you think, although admittedly this code isn&#39;t used as much anymore.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874843">
				<div id="div-comment-874843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Peter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874843">
			November 17, 2010 at 7:22 am</a>		</div>

		<p>I have TrueCrypt volumes which weigh in at under 3GB, which explorer sees as hard drives once mounted.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874853">
				<div id="div-comment-874853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Doug</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874853">
			November 17, 2010 at 7:27 am</a>		</div>

		<p>I have a few 2GB USB Thumb Drives around. Are those treated differently, since they are removable?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874863">
				<div id="div-comment-874863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">GL1zdA</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874863">
			November 17, 2010 at 7:42 am</a>		</div>

		<p>Raymond: but nobody—to within experimental error—has hard drives that small anyway, so it&#39;s pretty much dead code now.</p>
<p>Are you sure the warnings are HDD size dependent not partition size dependent? I know many people who have small partitions used for a simple software repository with basic installers and drivers for use after a full system reinstall.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874873">
				<div id="div-comment-874873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874873">
			November 17, 2010 at 7:43 am</a>		</div>

		<p>I don&#39;t believe that removable drives are included in the low disk space warning checks. &nbsp;I&#39;ve run memory sticks full numerous times and don&#39;t recall ever seeing a warning about it (outside of the inevitable &quot;out of disk space&quot; message when I try to push the envelope a bit too much). &nbsp;I&#39;m thinking either I am either correct or that I&#39;ve grown so used to seeing them pop up that I stopped paying attention.</p>
<p>There&#39;s not a whole lot that Windows would be able to do about it anyway. &nbsp;The Disk Cleanup Wizard would be almost useless, since removable drives aren&#39;t really intended to be used as system temp files or anything like that, and most removable media uses FAT (except for hard drives, but Windows seems to handle removable hard drives a bit differently compared to other removable devices&#8230;and there are still an alarming number of USB HDDs that come preformatted with FAT), so you can&#39;t compress the files on them.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874883">
				<div id="div-comment-874883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan Bugglin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874883">
			November 17, 2010 at 8:06 am</a>		</div>

		<p>Ubuntu actually warns me every time my 40gb SSD drive on my Windows computer drops under 2gb (I keep it mounted over the network). &nbsp;Which I think it kind of funny.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874893">
				<div id="div-comment-874893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874893">
			November 17, 2010 at 8:52 am</a>		</div>

		<p>@GL1zdA: Nobody likes a nitpicker :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874913">
				<div id="div-comment-874913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asdbsd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874913">
			November 17, 2010 at 9:30 am</a>		</div>

		<p>These warnings usually occur when you&#39;re installing something, and when you only have 200Mb left it&#39;s pretty much too late to do anything. You won&#39;t make it in time, the installation will fail anyway.</p>
<p>I understand why this size was chosen at the time of Windows XP, but Windows 7 really should have set it to something like 1-1.5Gb.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874923">
				<div id="div-comment-874923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KaarlisK</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874923">
			November 17, 2010 at 10:30 am</a>		</div>

		<p>While cleaning house a month ago, I came across a 250 megabyte hard drive. And then I realised I actually have some info I need on it. Which is when I discovered what I had never noticed before, the read speed is like 200 KILObytes per second :D Now I know why that computer was sooooo slow&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874953">
				<div id="div-comment-874953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">old fart</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874953">
			November 17, 2010 at 11:55 am</a>		</div>

		<p>wow &#8212; makes me feel very old. &nbsp;when i started at MS, my computer had a 192 MEGABYTE hard drive!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874963">
				<div id="div-comment-874963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">RichB</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874963">
			November 17, 2010 at 11:56 am</a>		</div>

		<p>And the defrag warning is 15%. At least on XP.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874983">
				<div id="div-comment-874983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nerd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874983">
			November 17, 2010 at 12:04 pm</a>		</div>

		<p>@asdbsd, Windows 7 does have another warning. The drive indicator turns red at around below 1-2 GB I think.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-874993">
				<div id="div-comment-874993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874993">
			November 17, 2010 at 1:29 pm</a>		</div>

		<blockquote><p>
  Future versions of Windows reserve the right to change the thresholds.
</p></blockquote>
<p>I hope they do so, as 90% full on a 2 TB partition still leaves a lot of space. My entire Windows + installed applications partition could fit in it twice!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875003">
				<div id="div-comment-875003" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875003">
			November 17, 2010 at 1:38 pm</a>		</div>

		<p>Haha half the comments are about what Raymond says is essentially dead code (of course it&#39;s really not but even so&#8230;)</p>
<p>@Joren: actually the warning at 90% full is perfectly reasonable for a rotating head disk. Filesystem performance starts dropping dramatically after that point due to fragmentation. *NIX systems won&#39;t even let nonroot users use any more disk space after this point (can be changed with tunefs). Now a SD card on the other hand has no performance degradation due to fragmentation so the system could get away with lowering the warning threshold.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-leo-davidson even thread-even depth-1" id="comment-875013">
				<div id="div-comment-875013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Leo+Davidson' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875013">
			November 17, 2010 at 3:02 pm</a>		</div>

		<p>@Joshua: Flash memory devices do often perform slower when full compared to when empty.</p>
<p>When they are relatively empty their controllers can ensure each memory block only has a single filesystem block of data. If the filesystem writes over something the controller can just write over a block of flash memory.</p>
<p>When they get full enough that multiple disk blocks now have live into single memory blocks, updating one of those memory blocks requires reading the whole thing in, overlaying the new information, then writing it out.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874903">
				<div id="div-comment-874903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Roger</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874903">
			November 17, 2010 at 9:02 am</a>		</div>

		<p>While cleaning house yesterday I came across an 8 megabyte (note *mega*) SD card. &nbsp;I haven&#39;t bothered plugging it into anything to see what happens. &nbsp;I also finally decided to free up some bookshelf space which means tossing my MSDOS 5 and 6 manuals and all the manuals that came with the floppy disk version of Office 4.2 (~1992).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875023">
				<div id="div-comment-875023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875023">
			November 17, 2010 at 6:35 pm</a>		</div>

		<p>@Leo: You know that on systems newer than XP it is reasonably easy to set filesysetm block size = memory block size right?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits odd alt thread-odd thread-alt depth-1" id="comment-874943">
				<div id="div-comment-874943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874943">
			November 17, 2010 at 11:40 am</a>		</div>

		<p>Intelligence: I assure you, Explorer will let you know if your drive is too full.</p>
<p>Indy: *How* full?</p>
<p>Intelligence: Too&#8230; full.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875043">
				<div id="div-comment-875043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875043">
			November 17, 2010 at 7:46 pm</a>		</div>

		<p>@Joshua: In my case, that large partition only really has files added to it, never deleted. (Why would you delete anything if you still have hundreds of gigabytes of space left?) The fragmentation on it is therefore really, really low.</p>
<p>But in the general case, what you say does make a good case for the default threshold to be similar to what it is now.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-874973">
				<div id="div-comment-874973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Please wait while Windows configures updates...</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-874973">
			November 17, 2010 at 12:01 pm</a>		</div>

		<p>In simpler terms, the HDD just has to be gobbled up by the completely botched servicing stack before Explorer will start getting concerned. The screw up in the servicing stack &#8211; ever growing size of WinSxS (yes I know *some* files there are hard links) is the reason the disk footprint of Windows 7 is so bloated. These are drive eating operating systems.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875053">
				<div id="div-comment-875053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Worf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875053">
			November 17, 2010 at 10:28 pm</a>		</div>

		<p>Don&#39;t forget embedded systems &#8211; we had one that boots XP off a 512MB card (XP Embedded), and I think before that we had a system use a 256MB card as the main hard disk.</p>
<p>And one of my current embedded PCs comes with a 256MB SSD. So I won&#39;t quite discount those sub-3GB drives just yet.</p>
<p>And I have a tiny VM image of XP to run questionable executables on.</p>
<p>,DIV CLASS=post&gt;[<i>On the other hand, embedded systems typically don&#39;t run Explorer. -Raymond</i>]</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875063">
				<div id="div-comment-875063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Drak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875063">
			November 17, 2010 at 10:50 pm</a>		</div>

		<p>@asdbsd: Usually my installers check the amount of free drive space BEFORE installing.</p>
<p>Personally i think the warnings should be more pronounced for our customers. We regularly get service desk calls with people saying &#39;I&#39;m getting an error. It says the disk is full. What should i do?&#39;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875073">
				<div id="div-comment-875073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Engywuck</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875073">
			November 17, 2010 at 11:31 pm</a>		</div>

		<p>@Old Fart:</p>
<p>My first HDD was 20MB on an add-in card on a 8086 computer for IIRC 800DM then (would be around 700€ nowadays according to inflation or 1000$(US)). That computer would have been able to support a 30MB disk, but the DOS-version used on it supported no partitions that large ;-)</p>
<p>On another note: my external HDD (39GB free of 931GB, USB) is shown with red indicator on Win7 as does my USB stick (622MB free of 7,45GB total, FAT) and some mounted network shares (20GB free of 230GB)</p>
<p>@Worf: do these embedded systems use regular XP? Could be that XPe uses other tresholds. I never saw such a warning on our XPe systems (available on 1GB, 2GB and 4GB flash cards), but admittedly I didn&#39;t try to fill them to the brim :)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875093">
				<div id="div-comment-875093" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875093">
			November 18, 2010 at 3:17 am</a>		</div>

		<p>I thought the problem with (nearly) full Flash drives was that you would end up rewriting the same blocks over and over again, which shortens the life of the drive.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875103">
				<div id="div-comment-875103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875103">
			November 18, 2010 at 4:02 am</a>		</div>

		<p>I think my first &quot;Winchester disc&quot; was 10Mb. &nbsp; I don&#39;t think they were called HDDs back then. &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875113">
				<div id="div-comment-875113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875113">
			November 18, 2010 at 4:26 am</a>		</div>

		<blockquote><p>
  On the other hand, embedded systems typically don&#39;t run Explorer. -Raymond
</p></blockquote>
<p>Actually a lot of them do. &nbsp;It&#39;s always been rather disconcerting seeing a Windows desktop come up on oscilloscopes, logic analysers, biopharma devices, &#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875123">
				<div id="div-comment-875123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asdbsd</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875123">
			November 18, 2010 at 4:48 am</a>		</div>

		<p>@Drak: They kind of do and kind of don&#39;t. Sometimes this is an update and they didn&#39;t bother to check. Sometimes they check it after they unpack the installation files.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-leo-davidson odd alt thread-odd thread-alt depth-1" id="comment-875143">
				<div id="div-comment-875143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Leo+Davidson' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875143">
			November 18, 2010 at 5:24 am</a>		</div>

		<p>@Neil:</p>
<p>&quot;I thought the problem with (nearly) full Flash drives was that you would end up rewriting the same blocks over and over again, which shortens the life of the drive.&quot;</p>
<p>I don&#39;t know if they all do it (maybe it&#39;s a feature of SSDs but not SD cards?) but at least some devices do &quot;wear levelling&quot; which means if you keep updating the same logical block (e.g. overwriting the same file over and over) they&#39;ll swap where that block is physically stored with some other block so that you wear out a different bit of the memory.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875153">
				<div id="div-comment-875153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Engywuck</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875153">
			November 18, 2010 at 6:10 am</a>		</div>

		<p>Computer magazine c&#39;t tried some years ago to induce wear in an USB stick by writing the same data over and over onto it. 16 Million writes to the same file later they still hadn&#39;t manage to induce even a single error&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875173">
				<div id="div-comment-875173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Alex Grigoriev</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875173">
			November 18, 2010 at 7:18 am</a>		</div>

		<p>@Engywick:</p>
<p>The data was written to a different block every time. This is how flash drives work.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875223">
				<div id="div-comment-875223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875223">
			November 18, 2010 at 8:28 am</a>		</div>

		<p>@Leo: how big are your memory blocks? I&#39;m used to 16k range or so. Setting filesystem block size to 16k should be no trouble.</p>
<p>TRIM is intended to tell the controller that space is free so those blocks may be recycled as spares or for wear leveling.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875303">
				<div id="div-comment-875303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nawak</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875303">
			November 18, 2010 at 11:54 am</a>		</div>

		<p>@Leo, Engywick and Alex:</p>
<p>Some flash devices only do dynamic wear leveling, ie wear leveling on changing data. If such a device is first filled and then you start always writing at the same logical place, they won&#39;t have many free sectors to rotate data on. (They may have inaccessible spares to mitigate this, though)</p>
<p>I think many SSD do static wear-leveling, able to swap blocks that are not free (but less used) with the block you are constantly rewriting. Bandwidth decreases when this happens because this operation is costly: when you swap with a free block, you don&#39;t have to erase it (and you may not have to erase the swapped block either because Logical-to-physical is not bijective, only surjective) whereas when you swap with a used block, you have to erase both blocks and swap their data.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-leo-davidson even thread-even depth-1" id="comment-875133">
				<div id="div-comment-875133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Leo+Davidson' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875133">
			November 18, 2010 at 5:18 am</a>		</div>

		<p>@Joshua:</p>
<p>&quot;@Leo: You know that on systems newer than XP it is reasonably easy to set filesysetm block size = memory block size right?&quot;</p>
<p>Not sure I&#39;ve heard of that. How does it work?</p>
<p>Does the filesystem still store at most one file per block? If so you&#39;d just run out of space much quicker and be completely out of space by the time the device would have *started* slowing down with the old system.</p>
<p>Or does the filesystem essentially take over the duties of the flash memory controller, taking care of caching extra filesystem blocks (that happen to be in the same memory block as data it&#39;s modifying) and the merging and re-writing required? I guess that&#39;s possible but it&#39;d surprise me and is certainly news to me if it&#39;s been there in Vista onwards.</p>
<p>The only thing I&#39;ve heard about in this area is the TRIM command where the filesystem can tell the memory controller that filesystem blocks are no longer needed, so that the memory controller knows it doesn&#39;t have to preserve their contents.</p>
<p>Given all the fuss about TRIM, I can&#39;t believe the filesytem block size = memory block size setting you mention is actually a solution to the problem. If it was we wouldn&#39;t have needed TRIM.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875313">
				<div id="div-comment-875313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Carl D</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875313">
			November 18, 2010 at 1:35 pm</a>		</div>

		<p>@old fart</p>
<p>My first system with a &quot;winchester disk&quot; was 74Mb drive &#8211; and that was a full 4U rack mount chassis to hold that one drive (Ohio Scientific &quot;C3B&quot; &#8211; 1980).</p>
<p>On the PC, the first hard drives that I can recall were 5Mb (1983) &#8211; barely big enough to store an icon today. &nbsp;They were vast compared to the floppies of the day though!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875323">
				<div id="div-comment-875323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Carl D</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875323">
			November 18, 2010 at 1:35 pm</a>		</div>

		<p>@old fart</p>
<p>My first system with a &quot;winchester disk&quot; was 74Mb drive &#8211; and that was a full 4U rack mount chassis to hold that one drive (Ohio Scientific &quot;C3B&quot; &#8211; 1980).</p>
<p>On the PC, the first hard drives that I can recall were 5Mb (1983) &#8211; barely big enough to store an icon today. &nbsp;They were vast compared to the floppies of the day though!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-875333">
				<div id="div-comment-875333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875333">
			November 18, 2010 at 1:43 pm</a>		</div>

		<p>@Leo: &quot;Does the filesystem still store at most one file per block?&quot;</p>
<p>That&#39;s what it does, yes. The block size is the minimum allocation unit on the disk. If you&#39;re storing all small text files, then yes a 64KB block size wouldn&#39;t make sense. If instead you&#39;re storing photos or music files or whatnot, which are orders of magnitude bigger than 64KB, then it&#39;s not much difference in terms of used space compared to a 4KB block size, but the performance difference could be significant.</p>
<p>Note that XP supported multiple block sizes as well, I think Joshua was just saying that it was harder to set when you formatted your disk.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875343">
				<div id="div-comment-875343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Andreas Rejbrand</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875343">
			November 18, 2010 at 1:45 pm</a>		</div>

		<p>There really should be a space between a number and a unit. Write &quot;100 GB&quot;, not &quot;100GB&quot;. It is just like &quot;5 km&quot;, not &quot;5km&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-odd thread-alt depth-1" id="comment-875363">
				<div id="div-comment-875363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875363">
			November 18, 2010 at 2:16 pm</a>		</div>

		<p>@GL1zdA: I am sure Raymond is talking about partitions, not physical disks, since partitions are what Explorer sees, and partitions are what get drive letters assigned to them. &nbsp;I understood what he was talking about.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-leo-davidson even thread-even depth-1" id="comment-875353">
				<div id="div-comment-875353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Leo+Davidson' rel='external nofollow' class='url'>Leo Davidson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875353">
			November 18, 2010 at 2:09 pm</a>		</div>

		<p>@Joshua: SSD block sizes seem to be about 128KB, at least from a quick search. (Not sure if that&#39;s actually standard but a few articles mention it and it seems a plausible ballpark figure.)</p>
<p>128KB seems way too large for the filesystem block size on such small drives where you don&#39;t want to be wasting space.</p>
<p>Are you sure you&#39;re not confusing the fairly recent support for (easily) *aligning* the filesystem blocks with the disk blocks (so that filesystem blocks don&#39;t overlap two disk blocks), rather than making the block sizes the same?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-875403">
				<div id="div-comment-875403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Engywuck</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875403">
			November 18, 2010 at 10:36 pm</a>		</div>

		<p>@Nawak: I didn&#39;t say the speed won&#39;t go down rapidly, only that wear levelling is apperently in use in USB sticks (of 2006/7 era at least) and/or that flash can sustain way more than guaranteed number of write cycles. Unfortunately one cannot reliably test USB sticks by continuous overwriting anymore: for a 4GB stick, 30MB/s write speed and a meager 1 million write cycles this would take more than 4 years&#8230;</p>
<p>@Andreas: I find it way more annoying when there is a line wrap between measure and unit, so I&#39;ll stick with the surely non-breaking no-space for now. Once you show me how to reliably(!) and easily enter non-breaking space[1] in web forms (and windows catches up with it, Alt+255 is no easy way!), I&#39;ll be glad to comply, though. Although at least in german typographic convention[2] this space should be a smaller space, without variable width, non-breaking (i.e. sth. like U+202F or so).</p>
<p>[1] <a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/Non-breaking_space#Non-breaking_behavior" rel="nofollow">en.wikipedia.org/&#8230;/Non-breaking_space</a></p>
<p>[2] <a rel="nofollow" target="_new" href="http://de.wikipedia.org/wiki/Schmales_Leerzeichen#Verwendung" rel="nofollow">de.wikipedia.org/&#8230;/Schmales_Leerzeichen</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-875393">
				<div id="div-comment-875393" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dave</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101117-00/?p=12263#comment-875393">
			November 18, 2010 at 10:21 pm</a>		</div>

		<p>Sheesh, there&#39;s all these guys telling us how hard they had it with their 10MB 5 1/4&quot; MFM hard drives&#8230; when I were a lad, we had to bang rocks together to get ones and zeroes, and if we were lucky, *if we were lucky*, the mill owner would let us store our ones and zeroes by moulding them out of damp mud. &nbsp;But you know, we were happy in those days, though all we had was damp mud.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>