<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (16)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-292703">
				<div id="div-comment-292703" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Christian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292703">
			July 26, 2005 at 10:10 am</a>		</div>

		<p>Hi!</p>
<p>Does anybody (not the autor of the blog, this is not a .NET-blog), know how this is best mapped to .NET? What is the OnLoad-event, and how can I get the other three?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292713">
				<div id="div-comment-292713" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.forgetdecember.co.uk/' rel='external nofollow' class='url'>Al</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292713">
			July 26, 2005 at 10:26 am</a>		</div>

		<p>Just a couple of clean-up points:</p>
<p>&quot;and it receives the WM_NCDESTROY come after they have been destroyed.&quot; could do with making sense. Maybe &quot;and it receives the WM_NCDESTROY [message] after they have been destroyed.&quot;</p>
<p>Also your link to the scratch program has an additional quote at the end of the href, thus making the link fail without some editing.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-292723">
				<div id="div-comment-292723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mschaef</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292723">
			July 26, 2005 at 10:48 am</a>		</div>

		<p>How far do the WM_NCDESTROY and WM_NCCREATE messages date back? Windows 1.0?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292743">
				<div id="div-comment-292743" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://mg.to/' rel='external nofollow' class='url'>Michael Geary</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292743">
			July 26, 2005 at 10:55 am</a>		</div>

		<p>Yes, obviously WM_NCCREATE is the first message sent to a window. Nothing else would make sense, would it?</p>
<p>Try setting a breakpoint on an window function and see what is really the first message sent to a window. It may surprise you&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-292753">
				<div id="div-comment-292753" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292753">
			July 26, 2005 at 11:21 am</a>		</div>

		<p>I had a home-brew framework that would get an assertion-failure if a window proc received any message before the WM_NCCREATE. Turns out that top-level windows often receive a WM_GETMINMAXSIZE first.  It&#8217;s annoying since you can&#8217;t respond rationally to the message before you&#8217;re initialized.  I wonder if this is one of the weirdnesses Raymond will talk about.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292813">
				<div id="div-comment-292813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.escoria.org/PermaLink,guid,e7d8336f-7290-4b4f-a6a4-fc1e626aa0c8.aspx' rel='external nofollow' class='url'>Anuncie Aqui!</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292813">
			July 26, 2005 at 12:56 pm</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-maurits even thread-even depth-1" id="comment-292823">
				<div id="div-comment-292823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Maurits+%5BMSFT%5D' rel='external nofollow' class='url'>Maurits [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292823">
			July 26, 2005 at 1:37 pm</a>		</div>

		<p>No Child?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292843">
				<div id="div-comment-292843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Slaven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292843">
			July 26, 2005 at 2:30 pm</a>		</div>

		<p>NC is probably non-client&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-292853">
				<div id="div-comment-292853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mike</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292853">
			July 26, 2005 at 3:23 pm</a>		</div>

		<p>I also find the mention of NC_CREATE misleading, since AFAIK getminmaxinfo is always the first message ever sent to any (&quot;frame&quot;/non-child) window. For a (C++) framework I have worked on, testing has proved (to me) that it&#8217;s the only realiable message to depend on to create a C++ object and attach it to the frame window HWND being created (at least if you, like in my case, from then on use that C++ object to handle all messages to that window).</p>
<p>This under-documentation (to put it mildly) of the order of messages during creation I consider a quite serious flaw. Either you (as a developer) have to know about many of these undocumented behaviours by experience or just trial-and-error, or be prepared to create backing objects for windows no matter what message is recieved.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292873">
				<div id="div-comment-292873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bryan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292873">
			July 26, 2005 at 3:52 pm</a>		</div>

		<p>NC == non-client for the WM_NCPAINT message, so I would assume that NC == non-client here also.</p>
<p>Could be wrong, though.</p>
<p>Christian &#8212; you might be able to disassemble the System.Windows.Forms.dll assembly and find out which functions the various messages correspond to (though this may not be allowed by the framework&#8217;s license, I&#8217;m not sure).  I&#8217;d think that System.Windows.Forms.Form.WndProc would be the logical place to start, if you want to do this.</p>
<p>I&#8217;d look at the MSIL opcodes using ildasm.exe (part of vs.net), not the raw x86 assembly.  Or maybe Rotor would be helpful (I&#8217;m not entirely sure what Rotor even is, but I&#8217;ve heard mention of it relative to decompiling / disassembling before).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-292883">
				<div id="div-comment-292883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asdf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292883">
			July 26, 2005 at 4:45 pm</a>		</div>

		<p>I remember there was some windows spy program that would send WM_GETICON (or maybe WM_SETICON) before the WM_NCCREATE message got to your wndproc and it would cause problems on certain programs.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-292913">
				<div id="div-comment-292913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292913">
			July 27, 2005 at 7:50 am</a>		</div>

		<p>The MSDN docs for MFC CWnd::CreateEx say:<br />
<br />&quot;When CreateEx executes, Windows sends the WM_GETMINMAXINFO, WM_NCCREATE, WM_NCCALCSIZE, and WM_CREATE messages to the window.&quot;</p>
<p>and for the Win32 CreateWindowEx (which is called by the CWnd version):<br />
<br />&quot;The CreateWindowEx function sends WM_NCCREATE, WM_NCCALCSIZE, and WM_CREATE messages to the window being created.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-292983">
				<div id="div-comment-292983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">josh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-292983">
			July 27, 2005 at 12:11 pm</a>		</div>

		<p>Another oddity is that MSDN says WM_SIZE and WM_MOVE aren&#8217;t sent if you don&#8217;t pass WM_WINDOWPOSCHANGED on to DefWindowProc, but you&#8217;ll still get one of each during creation.  (at least on Windows 2000&#8230;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-293083">
				<div id="div-comment-293083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ulric</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-293083">
			July 27, 2005 at 7:07 pm</a>		</div>

		<p>One thing I learned the hard way while creating a menu-like widget was that while in WM_DESTROY all the children still exist, owned windows have already been destroyed.  In order words, all the WM_POPUP that look like &quot;children&quot; (but actually, owned) by a window are destroyed before WM_DESTROY gets sent to that window.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-584613">
				<div id="div-comment-584613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2008/01/02/6926246.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-584613">
			January 2, 2008 at 11:05 am</a>		</div>

		<p>Remember the order in which windows are destroyed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-596653">
				<div id="div-comment-596653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.csdn.net/fengzi_shen/archive/2008/02/01/2076591.aspx' rel='external nofollow' class='url'>fengzi_shen</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20050726-00/?p=34803#comment-596653">
			January 31, 2008 at 10:27 pm</a>		</div>

		<p>WM_DESTROY 和 WM_NCDESTROY 消息之间有什么区别?</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>