<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (51)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-605053">
				<div id="div-comment-605053" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Scott</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605053">
			February 28, 2008 at 12:36 pm</a>		</div>

		<p>But if somebody has already written code that relies on that fact, then wouldn&#8217;t you end up being tasked with maintaining it for backwards-compatibility?</p>
<div class=post>[<i>Hence the need for the big warning text in this article. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xepol odd alt thread-odd thread-alt depth-1" id="comment-605063">
				<div id="div-comment-605063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Xepol' rel='external nofollow' class='url'>Xepol</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605063">
			February 28, 2008 at 12:43 pm</a>		</div>

		<p>Sounds suspiciously like a memory aligned pointer masquarading as a magic number. &nbsp;</p>
<p>Since it is faster to just work with the pointer than to look a pointer up from an actual arbitrary handle, it isn&#8217;t a huge surprise when the pointer is misused like that &#8211; even if it is deperately bad idea with all sorts of negative consequences.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605083">
				<div id="div-comment-605083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.adammarquis.com' rel='external nofollow' class='url'>Adam</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605083">
			February 28, 2008 at 12:49 pm</a>		</div>

		<p>I bet you dollars to doughnuts that somebody will read this, think &quot;oh, that&#8217;s interesting,&quot; ignore the warning, and write code that depends on it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605123">
				<div id="div-comment-605123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.starkeith.net/coredump/' rel='external nofollow' class='url'>Keithius</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605123">
			February 28, 2008 at 12:59 pm</a>		</div>

		<p>Thanks for satisfying my curiosity! (No, seriously, I really appreciate it &#8211; I love this sort of stuff!)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605133">
				<div id="div-comment-605133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605133">
			February 28, 2008 at 1:04 pm</a>		</div>

		<p>&gt;Sounds suspiciously like a memory aligned pointer masquarading as a magic number. &nbsp;</p>
<p>In fact, Win9x does just that for it&#8217;s PIDs and TIDs. They are pointers to internal data structures XORed to obfuscate them. Early builds of Win95 did not obfuscated them, the obfuscation was in response to books like Unauthorized Windows 95.</p>
<div class=post>[<i>Please do not use the comments section of my site to make it easier for people to rely on undocumented behavior. If you want to do that, do it on your own blog. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605213">
				<div id="div-comment-605213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605213">
			February 28, 2008 at 2:16 pm</a>		</div>

		<blockquote><p>
  and write code that depends on it.
</p></blockquote>
<p>This has already been done, and is called ntoskrnl.exe. Yes, by modifiying the (undocumented) EPROCESS structure one can easily create an unkillable process. Gladly this requires loading a kernel-mode driver and therefore admin privileges.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605233">
				<div id="div-comment-605233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://qbziz.wordpress.com' rel='external nofollow' class='url'>KristofU</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605233">
			February 28, 2008 at 3:02 pm</a>		</div>

		<p>&#8220;[Please do not use the comments section of my site to make it easier for people to rely on undocumented behavior. If you want to do that, do it on your own blog. -Raymond]&#8221;</p>
<p>Sorry Raymond, but any which way you twist this, this is a sad reply.</p>
<p>You can do it, but he can&#8217;t?</p>
<p>Well yes he can, but not here?</p>
<p>C&#8217;mon he&#8217;s even talking about Windows 95.</p>
<div class=post>[<i>I explicitly note that the behavior is not supported and is provided solely to satisfy the reader&#8217;s curiosity. Yuhong Bao is encouraging people to do undocumented things. I hope you see the difference. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605273">
				<div id="div-comment-605273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Warren</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605273">
			February 28, 2008 at 3:34 pm</a>		</div>

		<p>KristofU, it&#8217;s a reasonable request &#8212; his house, his rules. &nbsp;If Mr. Chen said, &quot;don&#8217;t smoke in my house&quot;, then you wouldn&#8217;t smoke in his house, regardless of whether you smoke in your own his, or he smokes in his house. &nbsp;It doesn&#8217;t matter. &nbsp;You wouldn&#8217;t want someone being disrespectful of you and your decisions in your own house, would you? &nbsp;Offer Mr. Chen the same.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605283">
				<div id="div-comment-605283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nar</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605283">
			February 28, 2008 at 3:43 pm</a>		</div>

		<p>&gt;Yuhong Bao is encouraging people to do undocumented things</p>
<p>Uh, what? What comment are you reading? There&#8217;s no encouragement there. There&#8217;s no discouragement, either, but that&#8217;s not the same thing. Mostly just an indifference to courage ;)</p>
<div class=post>[<i>My mistake. I didn&#8217;t follow the pages that were linked to. But the whole discussion is off topic anyway. The topic is &#8220;Why are the values multiples of four? It&#8217;s an artifact of code re-use.&#8221; It&#8217;s not &#8220;How do I de-obfuscate Windows 95 process IDs so I can access internal structures?&#8221; or &#8220;Let me link to APIs that were newly-documented in Windows XP SP1.&#8221; Yuhong Bao has a rather well-established record of going off topic. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605293">
				<div id="div-comment-605293" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick Mason</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605293">
			February 28, 2008 at 4:16 pm</a>		</div>

		<p>How can this be classified as a &quot;misuse&quot; of a pointer? &nbsp;Using it to your advantage, more like. &nbsp;Its use might have simplified or sped up some things, but surely, the whole point of an ID or handle is that it uniquely identifies something. So long as the ID is within the specified range and is unique, that&#8217;s all that matters.</p>
<p>Anyone who noticed that the ID is always a multiple of four and wrote code that specifically relied on this behavior is a fool; they deserve all they get. &nbsp;Next time I fill up my car at some random station, I&#8217;ll blindly go for the pump that&#8217;s second on the right &#8211; after all, it&#8217;s always the diesel one.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605303">
				<div id="div-comment-605303" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">DriverDude</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605303">
			February 28, 2008 at 5:00 pm</a>		</div>

		<p>&quot;Anyone who noticed that the ID is always a multiple of four and wrote code that specifically relied on this behavior is a fool; they deserve all they get.&quot;</p>
<p>Unfortunately, as Raymond has pointed out repeatedly, the programmer or vendor rarely pays for their foolishness; it is the users who run into incompatibilities when they upgrade and Microsoft who (sometimes) has to fix somebody else&#8217;s bug.</p>
<p>That is why I prefer full disclosure instead of (or in addition to) invisible application-compatibility hacks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605313">
				<div id="div-comment-605313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bryan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605313">
			February 28, 2008 at 5:05 pm</a>		</div>

		<p>&quot;Next time I fill up my car at some random station, I&#8217;ll blindly go for the pump that&#8217;s second on the right &#8211; after all, it&#8217;s always the diesel one.&quot;</p>
<p>This is an excellent analogy the next time someone tries to use undocumented behavior for no real reason.</p>
<p>I&#8217;m not sure what you&#8217;d ever do with knowing that PIDs &amp; TIDs are multiples of 4 by coincidence or otherwise. &nbsp;I guess I can&#8217;t think of a scenario you would misuse this information. &nbsp;Obviously there is one though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605323">
				<div id="div-comment-605323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605323">
			February 28, 2008 at 5:14 pm</a>		</div>

		<p>&quot;Windows 95 process and thread IDs were not always multiples of four.&quot;</p>
<p>That was what reminded me that it was actually a XORed pointer.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605343">
				<div id="div-comment-605343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Francisco Arevalo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605343">
			February 28, 2008 at 5:54 pm</a>		</div>

		<p>Yuhong Bao&#8217;s comment was as informative as your post. And that analogy was an excellent way to see what blindly using an undocumented random detail.</p>
<p>Had anyone noticed the &quot;multiples-of-four&quot; thing before you read it here?</p>
<p>I use &quot;tasklist&quot; everyday and didn&#8217;t even notice they were only even numbers. Let alone multiples of four.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xepol even thread-even depth-1" id="comment-605353">
				<div id="div-comment-605353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Xepol' rel='external nofollow' class='url'>Xepol</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605353">
			February 28, 2008 at 6:40 pm</a>		</div>

		<p>Evan -&gt; I had hoped that OS developers had learned their lessons from OSes in the early 90ies and late 80ies that could not handle memory expansion beyond a certain point because they had decided they could use the top x bits of a pointer for &quot;other things&quot;. &nbsp;</p>
<p>That said, you could be right. &nbsp;On the other hand, if handles are memory aligned pointers, you get the storage space for 2 bits for free and can easily map them out with an AND mask. &nbsp;I guess it&#8217;s easy enough to find out- just check how 64bit windows treats its handles. &nbsp;If you find they are all aligned on 8 byte boundaries and you suddenly get a extra spare bit in the bottom&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605373">
				<div id="div-comment-605373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605373">
			February 28, 2008 at 7:52 pm</a>		</div>

		<p>&quot;I had hoped that OS developers had learned their lessons from OSes in the early 90ies and late 80ies that could not handle memory expansion beyond a certain point because they had decided they could use the top x bits of a pointer for &quot;other things&quot;.&quot;</p>
<p>On Mac OS versions before System 7, for example, the memory manager uses the top 8 bits for flags.</p>
<p>It took a while to fix these apps that was not 32-bit clean because they assumed that the upper 8 bit had flags.</p>
<p>In the meantime the Mac II by default had an AMU or HMMU that could translate 24-bit addresses to 32-bit addresses. Mac II could be upgraded with a 68851 PMMU for OSes like A/UX, and in this case it used the PMMU to do this translation. Most later Macs, thanks to the 68030 processors, had the PMMU built-in and thus the AMU was not needed.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605383">
				<div id="div-comment-605383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605383">
			February 28, 2008 at 8:37 pm</a>		</div>

		<p>Just kidding :)</p>
<p>Seriously, who needs those extra two bits of information?</p>
<p>I cannot imagine how this can save anything (in terms of performance) considering the need for OR-ing and AND-ing in order to insert and extract that information as opposed to using additional one byte variable.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605113">
				<div id="div-comment-605113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Evan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605113">
			February 28, 2008 at 12:57 pm</a>		</div>

		<p>@Xepol: &quot;Sounds suspiciously like a memory aligned pointer masquarading as a magic number.&quot;</p>
<p>Nah, it&#8217;s probably that someone wanted to be able to store two bits of information and didn&#8217;t want to use another variable.</p>
<p>From the excerpt of ntdef.h in Raymond&#8217;s other article *that he linked to there*:</p>
<p>// Low order two bits of a handle are ignored </p>
<p>// by the system and available</p>
<p>// for use by application code as tag bits. </p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605443">
				<div id="div-comment-605443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">dolph</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605443">
			February 28, 2008 at 11:15 pm</a>		</div>

		<p>Empirically, it seemed that PIDs in NT 4 were multiples of 2 rather than 4. &nbsp;An example of this is the PID of the system process, which (again empirically) seemed always to be 2.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605453">
				<div id="div-comment-605453" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">nksingh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605453">
			February 28, 2008 at 11:34 pm</a>		</div>

		<p>@Xepol:</p>
<p>I don&#8217;t think it&#8217;s ever a problem to use the bottom bits of a pointer for flag. &nbsp;All you&#8217;re doing in that case is forcing alignment on future consumers of your API, which isn&#8217;t usually all that terrible&#8230; especially when it&#8217;s the natural alignment for the data type in question.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605523">
				<div id="div-comment-605523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://weblogs.pontonetpt.com/israelaece/posts/26716.aspx' rel='external nofollow' class='url'>Israel A</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605523">
			February 29, 2008 at 6:14 am</a>		</div>

		
		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605533">
				<div id="div-comment-605533" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">KJK::Hyperion</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605533">
			February 29, 2008 at 6:35 am</a>		</div>

		<p>I doubt this is ever going to change, anyway. Interix (the POSIX subsystem) uses odd pids to tell actual pids (which are all even) from virtual pids that should be translated by its internal process table first (because in Windows, exec() is much more efficiently implemented by creating a whole new process, not to mention security issues with support for setuid executables), and to my knowledge has done this since forever</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605463">
				<div id="div-comment-605463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605463">
			February 29, 2008 at 12:31 am</a>		</div>

		<p>If you have:</p>
<p>int pid = 111;</p>
<p>void *table;</p>
<p>void *p = table[pid];</p>
<p>Then in assembler it could look like this:</p>
<p>mov	eax, dword ptr [pid]</p>
<p>lea	esi, table</p>
<p>mov	edi, dword ptr [esi + eax * 4]</p>
<p>But if pid was multiple of four:</p>
<p>mov	eax, dword ptr [pid]</p>
<p>lea	esi, table</p>
<p>mov	edi, [esi + eax]</p>
<p>It simplifies address calculation and gives shorter instruction encoding. How much it affects the performance is something I would really like to know.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605583">
				<div id="div-comment-605583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">mongo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605583">
			February 29, 2008 at 9:52 am</a>		</div>

		<p>@dolph:</p>
<p>Empirically, it seemed that PIDs in NT 4 were multiples of 2 rather than 4. &nbsp;An example of this is the PID of the system process, which (again empirically) seemed always to be 2.</p>
<p>This beautifully illustrates Raymond&#8217;s point. At some point in the evolution of the NT kernel, the PID/TID allocation strategy changed. Anything dependent on the exact (undocumented) nature of this strategy could have experienced problems.</p>
<p>And of course, it could change again in the future.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605633">
				<div id="div-comment-605633" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">anonymous</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605633">
			February 29, 2008 at 11:14 am</a>		</div>

		<p>The good thing is that out of userland the last two bits are always ignored, including the process creation. That is, whatever you try, you cannot abuse any inconsistency.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605513">
				<div id="div-comment-605513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605513">
			February 29, 2008 at 5:14 am</a>		</div>

		<p>Well, I guess the XOR obfuscation constant is &#8230;&#8230;01 because all my Windows 95 process IDs end in those two bits.</p>
<p>16-bit Windows didn&#8217;t obfuscate any of its handles, which allowed cheeky programs to get away with various &quot;shortcuts&quot;, such as</p>
<p>* doubly-indirect dereferencing of a local movable handle</p>
<p>* turning a global handle into a selector (in protected mode only, of course)</p>
<p>For one private app I even did the dirty and peeked into USER&#8217;s data segment (obtained by getting the HINSTANCE of the desktop) to find out whether a given window had had FlashWindow called on it an odd number of times (without actually calling FlashWindow again, which obviously suffers from side-effects).</p>
<p>I really would like to think Igor is just kidding, even though his next word is &quot;Seriously&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605553">
				<div id="div-comment-605553" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">SuperKoko</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605553">
			February 29, 2008 at 8:23 am</a>		</div>

		<p>&quot;</p>
<p>I&#8217;m not sure what you&#8217;d ever do with knowing that PIDs &amp; TIDs are multiples of 4 by coincidence or otherwise. &nbsp;I guess I can&#8217;t think of a scenario you would misuse this information. &nbsp;Obviously there is one though.</p>
<p>&quot;</p>
<p>Just follow the link in Raymond&#8217;s article, and you&#8217;ll get a sample of use for HANDLEs (rather than process Ids):</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2005/01/21/358109.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2005/01/21/358109.aspx</a></p>
<p>Igor wrote:</p>
<p>&quot;</p>
<p>void *p = table[pid];</p>
<p>&quot;</p>
<p>A process Id may be something as big as 4000000000 (especially on Windows 98). Indexing tables with pid is insane.</p>
<p>&quot;</p>
<p>It simplifies address calculation and gives shorter instruction encoding.</p>
<p>&quot;</p>
<p>How?</p>
<p>Did you read the IA-32 architecture manual?</p>
<p>[esi + eax] as well as [esi + eax*4] both require two bytes (ModR/M + SIB). I don&#8217;t see why one would be slower than the other.</p>
<p>Neil wrote:</p>
<p>&quot;</p>
<p>Well, I guess the XOR obfuscation constant is &#8230;&#8230;01 because all my Windows 95 process IDs end in those two bits.</p>
<p>&quot;</p>
<p>I don&#8217;t remember the whole story, but I think that Windows 98 or Windows 98 SE use an improved XOR obfuscation with a random number generated at boot time.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605793">
				<div id="div-comment-605793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605793">
			February 29, 2008 at 5:54 pm</a>		</div>

		<p>&gt;&gt;A process Id may be something as big as 4000000000&lt;&lt;</p>
<p>I believe that is impossible:</p>
<p>MSDN: &#8220;The number of threads a process can create is limited by the available virtual memory. By default, every thread has one megabyte of stack space. Therefore, you can create at most 2,028 threads.&#8221;</p>
<p>So if you can&#8217;t create more than 2,028 threads, and each process needs at least one thread that means you are topped at 2,028 processes as well.</p>
<p>2028 * 4 = 8112 which is 80 bytes less than two 4KB pages of RAM.</p>
<p>&gt;&gt;Did you read the IA-32 architecture manual?&lt;&lt;</p>
<p>Of course, the other would be slower because AGU has to do the multiplication of eax by the scale factor (4) to generate the load address. As I already said, I doubt it has any impact on modern CPUs.</p>
<div class=post>[<i>You read the conclusion without understanding the logic that led to it. There is no limit on the number of threads; the limit is process address space. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605803">
				<div id="div-comment-605803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605803">
			February 29, 2008 at 6:12 pm</a>		</div>

		<p>&gt;&gt;So if you can&#8217;t create more than 2,028 threads, and each process needs at least one thread that means you are topped at 2,028 processes as well.&lt;&lt;</p>
<p>Oops&#8230; that should have read:</p>
<p>So if you can&#8217;t create more than 2,028 threads in one process (beause of 2GB per process limit) and each process needs at least one thread, that means you are capped by the amount of physical RAM available for stack.</p>
<p>Given that the smallest stack allocation is 4KB and assuming 32-bit address space:</p>
<p>4,294,967,296 / 4,096 = 1,048,576 PIDs</p>
<p>Since they have to be a multiple of 4:</p>
<p>1,048,576 / 4 = 262,144 PIDs</p>
<p>Having 262,144 processes would consume 1GB of RAM just for the initial stack commit assuming that all processes are single-threaded. If they commited 1MB of stack each you would need 256 GB of memory.</p>
<p>So, good luck avoiding PID reuse and reaching 4,000,000,000 of processes.</p>
<div class=post>[<i>Who said stacks couldn&#8217;t be paged out? Or that all stacks had to fit into a 32-bit address space? Or that PIDs are always allocated as &#8220;lowest available&#8221;? Or that a process has to have a thread? (<a href="http://blogs.msdn.com/oldnewthing/archive/2004/07/23/192531.aspx" rel="nofollow">It doesn&#8217;t</a>.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-xepol odd alt thread-odd thread-alt depth-1" id="comment-605833">
				<div id="div-comment-605833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Xepol' rel='external nofollow' class='url'>Xepol</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605833">
			February 29, 2008 at 10:40 pm</a>		</div>

		<p>To those who don&#8217;t understand why handing pointers to programmers is a bad thing need to read this blog more.</p>
<p>Any time you expose an actual undocumented internal detail, someone will abuse it to work with said undocumented internal detail, causing long term forward compatibility issues.</p>
<p>The only 2 possible solutions are to change things in the future and let the apps crash or to not expose the internal details with a pointer and use a true &quot;magic number&quot; as the handle instead.</p>
<p>Too often it is easy to be lazy in design because it is &quot;convenient&quot;, but all too often, it will bit you in the butt sooner than later.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605843">
				<div id="div-comment-605843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Triangle</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605843">
			February 29, 2008 at 11:24 pm</a>		</div>

		<p>&quot;The only 2 possible solutions are to change things in the future and let the apps crash or to not expose the internal details with a pointer and use a true &#8216;magic number&#8217; as the handle instead.&quot;</p>
<p>Or you could patch the offending program, which seems to be working passably for Microsoft.</p>
<p>Drawbacks:</p>
<p>• Encoding and decoding handle values is expensive performancewise.</p>
<p>• If, like most programmers, you encounter a bug in your program, you can deference the pointer to access the members of the structure, which can provide amazingly useful information for finding the bug.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605863">
				<div id="div-comment-605863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Grumpy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605863">
			March 1, 2008 at 10:57 am</a>		</div>

		<p>Igor Levicki dribbles:</p>
<p>] Seriously, who needs those extra two bits of information?</p>
<p>] I cannot imagine how this can save anything (in terms of performance) considering the need for OR-ing and AND-ing in order to insert and extract that information as opposed to using additional one byte variable.</p>
<p>Just because you are unimaginative, and have probably never written any substantial software, doesn&#8217;t mean that the rest of us are that boring.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605893">
				<div id="div-comment-605893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605893">
			March 1, 2008 at 8:35 pm</a>		</div>

		<p>&gt;&gt;Grumpy can just point to&#8230;&lt;&lt;</p>
<p>Link is broken.</p>
<p>&gt;&gt;describes one application that uses&#8230;&lt;&lt;</p>
<p>It is one thing to describe application, and completely another to provide some performance data for that application and prove how much has been saved/gained by using low two bits of a PID to store data. Sorry, but I want some numbers from Grumpy, not a description. He said I was boring so I now have to keep up to his expectations ;-)</p>
<p>&gt;&gt;I still don&#8217;t see how your argument proves that a PID whose numerical value is greater than 0x40000000 is impossible&lt;&lt;</p>
<p>There must be some language barrier at work here.</p>
<p>You say that PID can be larger than 1,073,741,824? Of course it can, but there can&#8217;t be more than 1,073,741,824 PIDs. And assuming each process consumes at least 4KB of physical RAM that number goes down considerably in practice (I guesstimated it to be ~262,144).</p>
<p>Of course you can argue that even those 4KB can be swapped out and that you can indeed have 1,073,741,824 processes running in Windows, but I sincerely doubt they would process anything.</p>
<div class="post">[<i>Finding the correct link is left as an exercise, since <u>it&#8217;s right here on this page</u>. And you were the one who responded to &#8220;A process Id may be something as big as 4000000000&#8221; with &#8220;<a href="http://blogs.msdn.com/oldnewthing/archive/2008/02/28/7925962.aspx#7966012" rel="nofollow">I believe that is impossible</a>.&#8221; Now you&#8217;re saying that when you wrote &#8220;impossible&#8221; you meant something else? I give up. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605913">
				<div id="div-comment-605913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605913">
			March 1, 2008 at 8:52 pm</a>		</div>

		<p>Just so I don&#8217;t forget&#8230;</p>
<p>Grumpy said:</p>
<p>&gt;&gt;Igor Levicki dribbles:&lt;&lt;</p>
<p>&gt;&gt;Just because you are unimaginative, and have probably never written any substantial software, doesn&#8217;t mean that the rest of us are that boring.&lt;&lt;</p>
<p>I asked that question in hope that someone who used such a dirty trick will provide some real-world example or performance data so I can expand my knowledge.</p>
<p>Your use of argumentum ad hominem instead of facts just proved that you are not that someone (read: you are not an expert).</p>
<div class="post">[<i>May I recommend that in the future when you want to ask a question, you ask a question instead of stating the opposite as a fact and seeing if anybody corrects you. (And the issue is rarely performance. It&#8217;s borrowing space in someone else&#8217;s namespace.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605923">
				<div id="div-comment-605923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605923">
			March 1, 2008 at 9:36 pm</a>		</div>

		<p>&quot;Of course you can argue that even those 4KB can be swapped out and that you can indeed have 1,073,741,824 processes running in Windows, but I sincerely doubt they would process anything.&quot;</p>
<p>Indeed, if you are creating that many processes, something is seriously wrong. Here the limiting factors would be the amount of memory. And the amount of memory a process would take would be much larger then the amount of memory a thread takes.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605933">
				<div id="div-comment-605933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Yuhong Bao</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605933">
			March 1, 2008 at 9:37 pm</a>		</div>

		<p>Can you add something about undocumented function here:</p>
<p><a href="http://blogs.msdn.com/oldnewthing/archive/2004/02/21/77681.aspx" target="_new" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2004/02/21/77681.aspx</a></p>
<div class="post">[<i>You should well know my position about undocumented functions if you&#8217;ve read this blog for any significant length of time at all. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605873">
				<div id="div-comment-605873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605873">
			March 1, 2008 at 1:46 pm</a>		</div>

		<p>Grumpy, is that the best you&#8217;ve got?</p>
<p>Are you saying that you have actually written an aplication which creates processes and threads so that it can use lowest two bits to store some data?</p>
<p>&gt;&gt;Who said stacks couldn&#8217;t be paged out?&lt;&lt;</p>
<p>Are you saying that COMMIT doesn&#8217;t really mean COMMIT or what?</p>
<p>I understand that the system will eventually start paging stacks too (together with the rest of the minimum process working set) when the physical memory gets exhausted, but to me your reply sounds as if you are implying that Windows has been designed to allow infinite number of processes and threads when some practical limit *must* exist. I have only attempted to prove that such a limit is well below 4,000,000,000, not that my assumptions are exact.</p>
<div class="post">[<i>Grumpy can just point to <a href="http://blogs.msdn.com/79http://blogs.msdn.com/7925962.aspx" rel="nofollow">this earlier comment</a> that describes one application that uses the bottom bit to store some data. As for paged-out stacks: I was responding to your previous comment that stack size was constrained by RAM. RAM is not the same as COMMIT. I still don&#8217;t see how your argument proves that a PID whose numerical value is greater than 0x40000000 is impossible. In fact, your claim is directly contradicted by Windows 95. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-605963">
				<div id="div-comment-605963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Grumpy</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605963">
			March 2, 2008 at 3:36 pm</a>		</div>

		<p>Igor quibbles:</p>
<p>] Your use of argumentum ad hominem instead of facts just proved that you are not that someone (read: you are not an expert).</p>
<p>It&#8217;s not an ad-hominem attack. &nbsp;An ad-hominem attack would be: &quot;you&#8217;re a talentless whiner who has never contributed anything worthwhile to the human race, much less software.&quot;</p>
<p>What I said is far more focused, and true: You have probably never dealt with any design interesting enough to make you think, hmmm, what could I do with two extra bits there? &nbsp;And yes, I have, years ago.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-605993">
				<div id="div-comment-605993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://railean.net/' rel='external nofollow' class='url'>Alex</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-605993">
			March 3, 2008 at 6:13 am</a>		</div>

		<p>&lt;em&gt;Mongo: Empirically, it seemed that PIDs in NT 4 were multiples of 2 rather than 4. &nbsp;An example of this is the PID of the system process, which (again empirically) seemed always to be 2.&lt;/em&gt;</p>
<p>In Windows XP the PID of the System process is 4, so now you can generalize and say that the PID is a multiple of the PID of the System process.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-606483">
				<div id="div-comment-606483" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606483">
			March 3, 2008 at 8:04 pm</a>		</div>

		<p>&gt;&gt;It is unclear to me how the maximum number of PIDs has anything to do with this article&lt;&lt;</p>
<p>I already admitted that I misunderstood &#8220;A process Id may be something as big as 4,000,000,000&#8221; as &#8220;there can be 4,000,000,000 processes&#8221;. Should I apologize too?</p>
<p>Since my curiosity has not been satisfied with this article could you please clarify under which circumstances PID can reach such an insane number?</p>
<div class=post>[<i>Run Windows 95. PIDs on Windows 95 were regularly in the 4 billion range. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-606503">
				<div id="div-comment-606503" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606503">
			March 3, 2008 at 8:20 pm</a>		</div>

		<p>&gt;&gt;As for the &#8220;stating as fact&#8221; I wasn&#8217;t referring so much to that comment&#8230;&lt;&lt;&lt;</p>
<p>Then you shouldn&#8217;t put it there because it looked like you are defending Grumpy&#8217;s attitude which I hope wasn&#8217;t your intent regardless of how much you hate me.</p>
<p>&gt;&gt;&#8230;as a subsequent one that claims as fact various characteristics of RAM, stacks, processes, threads, and the AGU &#8211; all of which were wrong.&lt;&lt;</p>
<p>I already said above that all calculations were guesstimates, not facts.</p>
<p>As for the AGU, if I remember correctly Pentium 4 AGU lacks the barrel shifter making indexed table lookups slower. I reserve the right to be wrong on this.</p>
<div class=post>[<i>The issue wasn&#8217;t with your guesstimates. Sure, the numbers may not be precise. But you manipulated them based on faulty assumptions. E.g., you divided per-process address space by stack size to arrive at the maximum number of PIDs. This is a meaningless computation. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-606513">
				<div id="div-comment-606513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606513">
			March 3, 2008 at 8:25 pm</a>		</div>

		<p>&gt;&gt;Run Windows 95.&lt;&lt;</p>
<p>1. I can&#8217;t, my computer is too new for that.</p>
<p>2. I was asking (and all my guesstimates were) about present, not the past.</p>
<div class=post>[<i>Please read the title of this blog again. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-606523">
				<div id="div-comment-606523" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606523">
			March 3, 2008 at 9:27 pm</a>		</div>

		<p>&gt;&gt;This is a meaningless computation.&lt;&lt;</p>
<p>It is meaningless in the context of searching for the highest PID number because it is based on false assumption(s), but not in the context of searching for the maximum number of processes which I admit may not be related to this topic, but for me it was in that moment. You have my apology for assuming that much and going off-topic.</p>
<p>&gt;&gt;Please read the title of this blog again.&lt;&lt;</p>
<p>Why not look at the first sentence of this article?</p>
<p>&#8220;On Windows NT-based operating systems&#8230;&#8221;</p>
<p>I thought that is what we were discussing here, not Windows 95.</p>
<div class="post">[<i>It is still a meaningless computation for determining the maximum number of processes. And I&#8217;m not going to say &#8220;You don&#8217;t have to worry about PIDs bigger than 4 billion&#8221; because PIDs can be any 32-bit value. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-606333">
				<div id="div-comment-606333" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">ANONOYMOUS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606333">
			March 3, 2008 at 3:52 pm</a>		</div>

		<p>&gt; A process Id may be something as big as 4000000000.</p>
<p>Well, except that the maximum PID is 2**16-1.</p>
<p>Now 2**16/4*4 = 64 KB = 16 pages for a PID index table.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-606463">
				<div id="div-comment-606463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-606463">
			March 3, 2008 at 6:50 pm</a>		</div>

		<p>&gt;&gt;Now you&#8217;re saying that when you wrote &#8220;impossible&#8221; you meant something else?&lt;&lt;</p>
<p>As a matter of fact I did. I meant MAXIMUM NUMBER OF PIDS, while he meant MAXIMUM PID NUMBER.</p>
<p>&gt;&gt;ask a question instead of stating the opposite as a fact&lt;&lt;</p>
<p>Well I thought that:</p>
<p>&#8220;Seriously, who needs those extra two bits of information?&#8221;</p>
<p>Can be considered a question. Moreover, I also thought that saying:</p>
<p>&#8220;I cannot imagine how this can save anything (in terms of performance)&#8230;&#8221;</p>
<p>Wasn&#8217;t me stating any facts because if I wanted to state some facts, then *I* would post some performance numbers or provide a link to the relevant information.</p>
<p>Actually, it was just me wondering how that hack can do anything usefull from a *current* perspective (read: today on multi GB and multi GHz computer). In other words &#8212; it was not a statement much less factual.</p>
<p>&gt;&gt;It&#8217;s not an ad-hominem attack&#8230;&lt;&lt;</p>
<p>And what would be the difference between this and your previous claim about my qualifications except that first time you used somewhat &#8220;politically correct&#8221; speech?</p>
<p>I&#8217;ll tell you &#8212; there is absolutely NO difference.</p>
<p>Both of your claims are argumentum ad hominem because both of them do not contain any relevant facts, and both are equally insulting to me.</p>
<p>&gt;&gt;You have probably never dealt with any design interesting enough to make you think&#8230;&lt;&lt;</p>
<p>Unproven assumption.</p>
<p>&gt;&gt;And yes, I have, years ago.&lt;&lt;</p>
<p>Unproven claim of an anonymous person hiding behind the pseudonym &#8220;Grumpy&#8221;.</p>
<p>So Grumpy, it turns out that your replies say more about your own credibility than they say about mine.</p>
<div class=post>[<i>It is unclear to me how the maximum number of PIDs has anything to do with this article. As for the &#8220;stating as fact&#8221; I wasn&#8217;t referring so much to that comment as a subsequent one that claims as fact various characteristics of RAM, stacks, processes, threads, and the AGU &#8211; all of which were wrong. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-607023">
				<div id="div-comment-607023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Igor Levicki</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-607023">
			March 4, 2008 at 5:19 pm</a>		</div>

		<p>Ok, then I will reverse-engineer ntoskrnl.exe to find out the actual limit.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-607133">
				<div id="div-comment-607133" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">enough already</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-607133">
			March 5, 2008 at 10:18 am</a>		</div>

		<p>Igor,</p>
<p>Are you kidding? So you are going to spend your time reverse engineering ntoskrnl.exe so you can prove something to Raymond, yourself? I mean geez is it really that serious? Personally I can think of a ton of other things I would rather spend my time doing like making money doing real work, relaxing outside, spending time with my wife and kid even come to mind. Sorry but getting into a pissing match with Raymond just doesn&#8217;t rank up there as high on the list. Especially when the outcome regardless of whether I am right or wrong really just makes me look juvenile. Although I may be wrong and this is just <em>my</em> humble assumption Raymond is here to help and provide interesting anecdotes into Windows development. He has stated many many many times that he is not <em>the</em> windows authority and that nothing he says is official or necessarily researched or factual. Yet you on nearly an everyday basis take it upon yourself to prove him wrong. Igor I am going to break it down to you as simply as I can. You&#8217;re exchanges now come off like a teenager who just has to be right. Knock it off, while it was once funny to read your nonsense, it&#8217;s just getting old now.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-608163">
				<div id="div-comment-608163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://people.warp.es/~ricardo/blog/?p=61' rel='external nofollow' class='url'>eclectic 2.0 :: Las consecuencias de reutilizar c??digo&#8230;</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-608163">
			March 7, 2008 at 3:40 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://people.warp.es/~ricardo/blog/?p=61" rel="nofollow">http://people.warp.es/~ricardo/blog/?p=61</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-610643">
				<div id="div-comment-610643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.chinhdo.com/20080317/finds-of-the-week-20080316/' rel='external nofollow' class='url'>Finds of The Week - March 16, 2008 &raquo; Chinh Do</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-610643">
			March 18, 2008 at 12:46 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://www.chinhdo.com/20080317/finds-of-the-week-20080316/" rel="nofollow">http://www.chinhdo.com/20080317/finds-of-the-week-20080316/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-662383">
				<div id="div-comment-662383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2008/08/27/8898863.aspx' rel='external nofollow' class='url'>The Old New Thing : What possible use are those extra bits in kernel handles? Part 1: Sentinels</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-662383">
			August 27, 2008 at 11:23 am</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2008/08/27/8898863.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2008/08/27/8898863.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-663323">
				<div id="div-comment-663323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2008/08/29/8904342.aspx' rel='external nofollow' class='url'>The Old New Thing : What possible use are those extra bits in kernel handles? Part 3: New object types</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20080228-00/?p=23283#comment-663323">
			August 31, 2008 at 11:05 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2008/08/29/8904342.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2008/08/29/8904342.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>