<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (36)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-867763">
				<div id="div-comment-867763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sven</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867763">
			October 18, 2010 at 8:47 am</a>		</div>

		<p>I wonder, what is the historical reason for including bColorCount if its value can be calculated from the wPlanes and wBitCount fields? I&#39;m guessing that some older version of this field may not have had the wPlanes and wBitCount fields?</p>
<div class="post">[<i>The reason will become evident when we look at the format of icon resources at some unspecified point in the future. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867773">
				<div id="div-comment-867773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ben Hutchings</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867773">
			October 18, 2010 at 8:51 am</a>		</div>

		<p>How is bColorCount supposed to be set when the number of bits per pixel is &gt;= 8 ?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867783">
				<div id="div-comment-867783" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Karellen</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867783">
			October 18, 2010 at 9:02 am</a>		</div>

		<p>&quot;The customer thanked us for our investigation and said that they would take the issue up with their graphic design team.&quot;</p>
<p>Um, yeah, because of course graphic designers should know how to set the bColorCount in the IconDirectoryEntry of ICO files correctly!</p>
<p>/sarcasm</p>
<p>Did you point out they&#39;d probably be better off instead talking to the people who wrote the tools their graphic designers are using? The designers should be hitting &quot;save&quot; and have it all Just Work(tm).</p>
<div class="post">[<i>I trusted that they were using the appropriate shorthand. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867793">
				<div id="div-comment-867793" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867793">
			October 18, 2010 at 9:09 am</a>		</div>

		<p>One also has to wonder by bColorCount isn&#39;t just ignored completely. Since the value only holds up to 255, anything parsing the structure has to look at wPlanes and wBitCount anyway, so why not just look there to begin with?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867803">
				<div id="div-comment-867803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">configurator</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867803">
			October 18, 2010 at 9:10 am</a>		</div>

		<p>@Ben: Raymond clearly said it: If wBitCount * wPlanes is greater than or equal to 8, then bColorCount is zero.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867813">
				<div id="div-comment-867813" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867813">
			October 18, 2010 at 9:10 am</a>		</div>

		<p>This should be a fun series. &nbsp;I&#39;ve rummaged around inside ICO files before, but the documentation is scattered and doesn&#39;t put the details in the context of the evolution.</p>
<p>@sven: &nbsp;I think the color count is in case you use fewer than the maximum number of colors that the format would allow. &nbsp;For example, if you had 4bpp, you could have 16 colors, but maybe you use only 7 of them. &nbsp;You&#39;d set the color count to 7 and need to provide only 7 entries in the color table.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867823">
				<div id="div-comment-867823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Falcon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867823">
			October 18, 2010 at 9:40 am</a>		</div>

		<p>@Adrian: I think you missed this part:</p>
<p>&quot;Oh, hey, how about that, it&#39;s actually a 16-color image. Okay, well, I guess I can load that.&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867833">
				<div id="div-comment-867833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Troll</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867833">
			October 18, 2010 at 11:19 am</a>		</div>

		<p>Great now will the shell team please ship a hotfix for the 16-bit icons not showing in 32-bit Windows 7 problem or it may never get fixed if Windows 8 ships in 64-bit only version. Is it or is it not going to before NTVDM is killed completely by shipping Windows 8 in x64 only?</p>
<div class="post">[<i><a href="http://technet.microsoft.com/en-us/magazine/2008.05.windowsconfidential.aspx" rel="nofollow">It was removed on purpose</a>. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867843">
				<div id="div-comment-867843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Troll</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867843">
			October 18, 2010 at 1:06 pm</a>		</div>

		<p>I have read that but I wish it was back and working. It bothers me extremely for hundreds of 16-bit games. Even the Windows 7 taskbar treats 16-bit apps inferiorly (separate icon when run). I really wish at least 32-bit Windows treated 16-bit apps properly. Too many things are being removed since Vista arbitrarily.</p>
<div class="post">[<i>The removal was not arbitrary. The icon extraction code was a liability, as noted in the article. Not mentioned in the article was that reimplementing the NE file parser was also a security liability. (Not a purely theoretical exercise. <a href="http://www.microsoft.com/technet/security/advisory/935423.mspx" rel="nofollow">Custom file parsers have been the source of security vulnerabilities in the past</a>.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867853">
				<div id="div-comment-867853" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Crescens2k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867853">
			October 18, 2010 at 1:20 pm</a>		</div>

		<p>That is because 16 bit application support is being removed from windows entirely, 64 bit versions of windows can&#39;t directly run 16 bit applications, and if you use server as the way of the future then the next client version will be 64 bit only.</p>
<p>If you hate how it is being treated though, why not just use XP mode anyway, that will have everything you want and it works on both 32 and 64 bit versions of 7.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867863">
				<div id="div-comment-867863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Troll</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867863">
			October 18, 2010 at 1:36 pm</a>		</div>

		<p>Well just let me tell you it degrades the experience for 16-bit apps. Is there any way I can write my own parser for only New Executables and make Explorer show them automatically?</p>
<p>@Crescens2k, you are talking about 64-bit Windows while Windows 7 and Vista are also available in a pure 32-bit version where 16-bit support is no different from XP except for the icon issue.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-davebacher odd alt thread-odd thread-alt depth-1" id="comment-867873">
				<div id="div-comment-867873" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dave+Bacher' rel='external nofollow' class='url'>Dave Bacher</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867873">
			October 18, 2010 at 4:17 pm</a>		</div>

		<p>The idea behind the catalog is to speed the selection and loading.</p>
<p>First &#8212; the index is corrupt with the wrong number of colors. &nbsp;What makes anyone think that the bits-per-plane and number of planes are any more accurate? &nbsp;If they&#39;re wrong, Windows doesn&#39;t care either. &nbsp;Just saying &#8212; all Windows cares about from a &quot;does something end up on the screen&quot; is that the DIB is valid.</p>
<p>Second &#8212; if I were implementing this, most likely I&#39;d pack the first 4 bytes into a DWORD and then pack the second 4 bytes into another DWORD, and run a bunch of subtracts in a loop. &nbsp;Closest to zero wins. &nbsp;for monochrome, I could see short circuting that and only doing the first DWORD &#8212; which in turn would cause the exact issue described in Raymond&#39;s post if the file was tagged monochrome, but actually had color data.</p>
<p>Also coincidentally, if there were a 16, 256 and 65536 color icon, it would consistently pick the 16 color icon (it&#39;s closest to 0).</p>
<p>Not saying that&#39;s what Windows is actually doing &#8212; just saying it&#39;s an easy/fast implementation that requires very little code, that happens to coincide with observed behavior.</p>
<p>Also coincidentally, it would favor monochrome icons if a 4bpp image had the number of colors set to 0, since the monochrome would be closer to the target value.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867883">
				<div id="div-comment-867883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nick</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867883">
			October 18, 2010 at 4:21 pm</a>		</div>

		<p>&quot;Too many things are being removed since Vista arbitrarily.&quot;</p>
<p>I agree completely! &nbsp;I mean, look at Scraps for example. &nbsp;They were just up and ripped out without even offering a replacement. Windows is unusable without scraps!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867893">
				<div id="div-comment-867893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">J</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867893">
			October 18, 2010 at 5:09 pm</a>		</div>

		<p>&quot;Well just let me tell you it degrades the experience for 16-bit apps.&quot;</p>
<p>Who uses 16-bit apps anymore? This is a serious question, I really can&#39;t think of any uses other than legacy commercial stuff. And any decently competent IT team could implement the &quot;package the icons in a 32-bit resource instead&quot; solution if it was that important.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867903">
				<div id="div-comment-867903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867903">
			October 18, 2010 at 6:20 pm</a>		</div>

		<p>@J: Well, how about that &quot;How come the icons on toolbar of my old 16-bit application all look the same?&quot;</p>
<p>Add more fun if there&#39;s neither small text nor tooltips on the toolbar. :P</p>
<div class="post">[<i>The icons on the toolbar of your old 16-bit application looks fine because it&#39;s being displayed by a 16-bit application. What got removed was 32-bit applications loading icons from 16-bit modules. If you want your 32-bit application to load icons from 16-bit modules, you are welcome to write your own parser that reads icons from 16-bit modules. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867913">
				<div id="div-comment-867913" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867913">
			October 18, 2010 at 10:22 pm</a>		</div>

		<p>Oh, I thought the ability to read 16-bit icons were taken away because you mentioned about &quot;security liability&quot;. :O</p>
<p>If it&#39;s just about the shortcut/application icons, there&#39;s really no big deal then.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867923">
				<div id="div-comment-867923" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867923">
			October 18, 2010 at 10:24 pm</a>		</div>

		<p>s/16-bit icons/16-bit module icons/</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867933">
				<div id="div-comment-867933" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Troll</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867933">
			October 18, 2010 at 10:39 pm</a>		</div>

		<p>Just because few people use 16-bit apps doesn&#39;t make it a good excuse to degrade the user experience. Now MS will make the same maintenance cost vs value vs time argument. This makes them look like DOS apps: <a rel="nofollow" target="_new" href="http://1.bp.blogspot.com/_Brnfl_nyGas/SuGkCbiogiI/AAAAAAAAACA/B0cmI3ube4s/s1600-h/WEP7.png" rel="nofollow">1.bp.blogspot.com/&#8230;/WEP7.png</a> Please fix this before at least for the last shipping 32-bit release of Windows.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867943">
				<div id="div-comment-867943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Barbie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867943">
			October 19, 2010 at 4:51 am</a>		</div>

		<p>@Troll: you do take your name seriously. It does make it an excuse if very few people use it. A good one at that. The cost of maintenance outweighs the benefit to those few users, compared to to other features. So go ahead and write a shell extension if you really want it. It <em>is</em> possible to change the icons explorer shows. Here&#39;s a pointer:</p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/cc144110%28VS.85%29.aspx" rel="nofollow">msdn.microsoft.com/&#8230;/cc144110%28VS.85%29.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867953">
				<div id="div-comment-867953" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Medinoc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867953">
			October 19, 2010 at 4:56 am</a>		</div>

		<p>Damn, my post about the difficulty in writing an IconHandler got eaten (probably because I submitted after something expired and closed the tab without checking). So I&#39;ll make it brief:</p>
<p>It&#39;s probably possible, but difficult, since one has to implement two behaviors based on whether the .exe is NE or PE. Maybe it&#39;s possible to piggyback on the default implementation in the case of PE files, but I&#39;m not sure.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867963">
				<div id="div-comment-867963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodr&#237;guez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867963">
			October 19, 2010 at 5:31 am</a>		</div>

		<p>It would be easier to build a small utility that, when handled a shortcut, checks if it points to an NE executable, and then extracts its icon next to the executable (or to a subfolder in AppData if unelevated) and permanently modifies the shortcut to use the extracted icon. Since both the taskbar and the Start menu use shortcuts to represent programs, it would solve the problem simply and nicely.</p>
<p>The next step would be an utility that, when run, scanned through all taskbar and Start menu items, replacing its icon if necessary. Bonus points if it runs in the background and does it automatically when the system notifies that the Start menu or Quick launch folders have been modified :-) .</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-867973">
				<div id="div-comment-867973" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Antonio Rodr&#237;guez</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867973">
			October 19, 2010 at 5:32 am</a>		</div>

		<p>It would be easier to build a small utility that, when handled a shortcut, checks if it points to an NE executable, and then extracts its icon next to the executable (or to a subfolder in AppData if unelevated) and permanently modifies the shortcut to use the extracted icon. Since both the taskbar and the Start menu use shortcuts to represent programs, it would solve the problem simply and nicely.</p>
<p>The next step would be an utility that, when run, scanned through all taskbar and Start menu items, replacing its icon if necessary. Bonus points if it runs in the background and does it automatically when the system notifies that the Start menu or Quick launch folders have been modified :-) .</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-867983">
				<div id="div-comment-867983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">asf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-867983">
			October 19, 2010 at 5:40 am</a>		</div>

		<p>@Medinoc: SHCreateDefaultExtractIcon maybe</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-868123">
				<div id="div-comment-868123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868123">
			October 19, 2010 at 9:27 am</a>		</div>

		<p>@DWalker59:</p>
<blockquote><p>
  Is anyone still making new 32-bit processors and chipsets?
</p></blockquote>
<p>I believe all current ARM processors are still 32-bit. And ARM processors are very popular.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-868163">
				<div id="div-comment-868163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Frode Aarebrot</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868163">
			October 19, 2010 at 11:35 am</a>		</div>

		<p>Anon: So what? Windows doesn&#39;t run on ARM so your point is moot.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-868173">
				<div id="div-comment-868173" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anon</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868173">
			October 19, 2010 at 12:17 pm</a>		</div>

		<p>@Frode Aarebrot:</p>
<p>He asked if anyone was still making new 32-bit processors, not if anyone was still making new x86-compatible 32-bit processors.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-868203">
				<div id="div-comment-868203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jonathan Wilson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868203">
			October 19, 2010 at 4:12 pm</a>		</div>

		<p>What I want to know is why so many OEMs are shipping PCs with a 64 bit CPU inside yet shipping a 32 bit version of Windows 7 on it&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk odd alt thread-odd thread-alt depth-1" id="comment-868103">
				<div id="div-comment-868103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868103">
			October 19, 2010 at 9:13 am</a>		</div>

		<p>@Troll: &quot;if Windows 8 ships in 64-bit only version&quot;&#8230; I predict that Windows 8 *will* ship as 64-bit only. &nbsp;It may depend on when Windows 8 ships. &nbsp;My personal guess (with no knowledge) is 3-4 years from now. &nbsp;Is anyone still making new 32-bit processors and chipsets? &nbsp;Windows XP will be around with extended support (security patches) until 2014. &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-868213">
				<div id="div-comment-868213" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868213">
			October 19, 2010 at 6:32 pm</a>		</div>

		<p>@Jonathan Wilson: Because lots of people buy their PC to play games, there&#39;s not many PC games targeting x64 yet.</p>
<p>If there were less rant about unstable 64-bit display drivers, and longer loading time, I suspect there would be lots more people choosing x64 as default.</p>
<p>Btw, what&#39;s the benefit of installing 64-bit version unless your PC has &gt; 4GB RAM installed? Perheps we have to wait until 8GB machine becoming entry class that Microsoft can push a x64 only OS.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-gregm odd alt thread-odd thread-alt depth-1" id="comment-868223">
				<div id="div-comment-868223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/GregM' rel='external nofollow' class='url'>GregM</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868223">
			October 19, 2010 at 6:38 pm</a>		</div>

		<p>Cheong, simple: getting more than 3GB of address space per process. &nbsp;Remember, address space does not equal ram.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-868233">
				<div id="div-comment-868233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868233">
			October 20, 2010 at 12:02 am</a>		</div>

		<p>@GregM: I know in x64 your process can have &gt; 3GB address space, but since most application are still 32-bit (or vendor provides both 32/64-bit version), any application that need that much address space in 32-bit system would have found other ways to fit their need anyway. From an average user&#39;s perspective, this is really irrelevent.</p>
<div class="post">[<i>I&#39;ll have to remember to use this explanation. &quot;There&#39;s no point doing X because everybody has to work around it anyway.&quot; Who will tell the <a href="http://blogs.msdn.com/b/excel/archive/2009/08/28/excel-2010-now-with-more-bits.aspx" rel="nofollow">Excel</a> and <a href="http://msexchangeteam.com/archive/2005/12/29/416613.aspx" rel="nofollow">Exchange</a> teams to just use whatever workaround the 32-bit version was using instead of developing a 64-bit version. Oh wait, there was no workaround in the 32-bit version in the first place. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-868263">
				<div id="div-comment-868263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Crescens2k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868263">
			October 20, 2010 at 4:58 am</a>		</div>

		<p>Cheong:</p>
<p>There may be doubts until now because the code generation by x64 VC was still inferior to x86 VC due to it being relatively young. But VC2010 is making a huge difference, so when the compiler itself becomes more used then you will start seing major differences.</p>
<p>But what are the benefits of 64bit systems other than memory? Double the general purpose registers for one, so more data can be kept on processor without having to swap between memory. For lengthy calculations and with an intelligent system this will help make the 64bit version run a lot faster and I have seen it at work already in some places. (One place is the 64bit decoding of 1080p videos is faster due to this). Second you are guaranteed to have SSE2 instructions on the processor, so any code can take advantage of it without explicitly checking. But yes, these do require you building a 64bit version of the application since the 32bit emulation is only there for compatability.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dwalker-wk even thread-even depth-1" id="comment-868323">
				<div id="div-comment-868323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/DWalker' rel='external nofollow' class='url'>DWalker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868323">
			October 20, 2010 at 9:26 am</a>		</div>

		<p>Sorry to lead people off the topic, which was cursors&#8230; &nbsp;:-)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-868613">
				<div id="div-comment-868613" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868613">
			October 21, 2010 at 6:14 pm</a>		</div>

		<p>@Raymond: I&#39;m not saying that there&#39;s no point to do x64 development, just saying that because there&#39;s so few applications that actually requires x64, there&#39;s little reason for average users to use a x64 OS in the meantime unless the user has more than 4GB RAM.</p>
<div class="post">[<i>You&#39;re confusing address space with RAM. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-868623">
				<div id="div-comment-868623" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cheong</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868623">
			October 21, 2010 at 9:24 pm</a>		</div>

		<p>I wonder why you don&#39;t see the context of my chain of comment before getting that impression. I&#39;m responding to the comment on why there&#39;s so many vendors still selling PCs ready for x64 but yet with 32-bit OS, trying to give some reason behind that decision. That&#39;s nothing to do with x64 development at all.</p>
<p>The core part I&#39;m saying is, the average users won&#39;t see the difference yet. The additional address space is good, but if you don&#39;t have that much RAM, you still have to page them to disk, right? The additional registers on x64 is good, but programs cannot take advantage over them unless the compiler explicitly asked to use them, right?</p>
<p>But really, is there any common application that average users use require that much RAM/registers that x86 environment cannot satisfy, so only x64 version is available?</p>
<p>Seems you&#39;re interpreting my comments in some way that I don&#39;t mean it that way.</p>
<div class="post">[<i>Address space is used for things other than RAM. And running out of address space is an increasingly common problem in 32-bit code. Even the PC version of Halo ran into it. (More examples in the blog queue.) -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-868763">
				<div id="div-comment-868763" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Crescens2k</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20101018-00/?p=12513#comment-868763">
			October 22, 2010 at 1:35 pm</a>		</div>

		<p>Cheong: x64 compilers use everything they can get ahold of by default. The x64 calling convention even requires the use of some of these registers. If you are curious look at the assembler output of a non trivial program, you will see r8 &#8211; r15 in use, there is nothing stopping it from using SSE2 when possible, and it will, there are places in the CRT where it uses SSE2 when available too. So yes the compiler must explicitly use them, but the compiler does explicitly use them.</p>
<p>But the vendors who only provide x86 versions of Windows now can only see the now. Raymond mentioned Halo had address space issues, and that was a few years back. But the thing is to remember that it happened once and so it can happen again, and again. Once game developers start understanding and being able to use x64 to it&#39;s fullest then I wouldn&#39;t be surprised to see a jump in the quality of textures and things like that because of the address space available. The problems of a few years ago have also vanished. The original issues was lack of drivers and the like, but over the last few years it has been harder to find a modern supported device without a driver for x64.</p>
<p>x64 is becoming used more commonly, a couple of years back it was hard to find x64 software. But now there are media players, codecs, web browsers, developer tools, office suites etc which use x64. So only seeing that x64 isn&#39;t useful for the average user yet is short sighted and you should look at next year or the year after before making that decision.</p>
<div class="post">[<i>&quot;32 bits should be enough for anyone.&quot; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>