<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (7)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-311883">
				<div id="div-comment-311883" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jack Mathews</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-311883">
			October 10, 2005 at 10:51 am</a>		</div>

		<p>This is a great counter argument to your points about punching holes in virtual machines, and this is exactly the &quot;screen door&quot; I was talking about.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-311893">
				<div id="div-comment-311893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-311893">
			October 10, 2005 at 11:16 am</a>		</div>

		<p>Could you be more specific what &quot;this&quot; is? Are you saying that one of the holes punched in the virtual machine would be unifying the window lists and supporting subclassing across VMs?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-311903">
				<div id="div-comment-311903" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Jack Mathews</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-311903">
			October 10, 2005 at 11:51 am</a>		</div>

		<p>&quot;This&quot; means the safety problems introduced in the Window Manager.</p>
<p>I suppose, thinking it through, this is more the problem of Win32 being pretty close to code compatible with Win16 and less about VM&#8217;s.  Even a simple function, like getting the size of text in a window caption and then getting that text, can cause you to get incorrect results depending on thread scheduling.  These <em>are</em> fixable problems.</p>
<p>I guess my real issue is still the thought that Win16 and Win32 should exist as two happy families living side by side code-wise.  But I&#8217;ve beaten that to death already.</p>
<p>(The problem I mention above is calling GetWindowTextLength(), then a thread makes the caption longer, then calling GetWindowText passing the text length from GetWindowTextLength will result in a truncated version of that longer string)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-312043">
				<div id="div-comment-312043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Sean Bryant</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-312043">
			October 11, 2005 at 5:31 pm</a>		</div>

		<p>Does this also apply to the new subclassing functions? SetWindowSubclass, GetWindowSubclass?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-312773">
				<div id="div-comment-312773" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">sandman</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-312773">
			October 13, 2005 at 2:12 pm</a>		</div>

		<p>&lt;quote&gt;<br />
<br />Therefore, the above code sequence was safe in 16-bit Windows. And for compatibility reasons, the code continues to be legal, even though it isn&#8217;t safe any more.<br />
<br />&lt;/quote&gt;</p>
<p>My, that is a strange definition of compatible.</p>
<p>So, a program which was safe can now exihibt undefined behaviour as opposed to ellicting an error message!</p>
<p>Surely window should invoke some sort of modal warning then in this case (non-owner thread modifing  a window) .</p>
<p>You could have a bunch of compaitblity flags removing this on an application basis, or if certain locks were  held.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-oldnewthing bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-312803">
				<div id="div-comment-312803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Raymond+Chen+-+MSFT' rel='external nofollow' class='url'>Raymond Chen - MSFT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-312803">
			October 13, 2005 at 4:10 pm</a>		</div>

		<p>No, an old program that was safe is still safe. But a new program is not safe. Think about it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-623693">
				<div id="div-comment-623693" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2008/04/24/8420242.aspx' rel='external nofollow' class='url'>The Old New Thing</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20051010-09/?p=33843#comment-623693">
			April 24, 2008 at 12:20 pm</a>		</div>

		<p>Multi-threaded apartments do not pump messages.</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>