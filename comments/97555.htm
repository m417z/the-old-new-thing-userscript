<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (8)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment byuser comment-author-jan-ringos even thread-even depth-1 parent" id="comment-1317726">
				<div id="div-comment-1317726" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Jan+Ringo%C5%A1' rel='external nofollow' class='url'>Jan Ringoš</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317726">
			December 11, 2017 at 8:32 am</a>		</div>

		<p>I&#8217;d guess that coroutines would be implemented through fibers on Windows.</p>

		
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2 parent" id="comment-1317737">
				<div id="div-comment-1317737" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">henke37</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317737">
			December 11, 2017 at 8:48 am</a>		</div>

		<p>Look up the emulator formerly called bsnes. The madman behind it tried using fibers for coroutines. Then he just went ahead and swapped ESP. Pretty sure that you get into all sorts of &#8220;fun situations&#8221; by doing that. Lets hope he never had to verify that every stack frame was in on the joke of exceptions&#8230;</p>

		
				</div>
		<ol class="children">
		<li class="comment even depth-3" id="comment-1317745">
				<div id="div-comment-1317745" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">creaothceann</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317745">
			December 11, 2017 at 9:23 am</a>		</div>

		<p>It&#8217;s still called bsnes, but just the emulator core. (higan is the whole suite, and libco is the coroutine library.)</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt depth-2" id="comment-1317746">
				<div id="div-comment-1317746" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">JAS</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317746">
			December 12, 2017 at 1:02 am</a>		</div>

		<p>The correct answer is you don&#8217;t implement coroutines any particular way and just adapt the language&#8217;s coroutine builder pattern to your specific scenario. I&#8217;d be pretty pissed if I wanted to handle thread pools and found out that some yo yo forced coroutines to use fibers. Fibers are worthless. They&#8217;re a computer science experiment. We heard a fiber story about SQL Server but that story hasn&#8217;t quite propagated to other projects, wonder why.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-s-m-joshi-02 even depth-2 parent" id="comment-1317755">
				<div id="div-comment-1317755" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/camhusmj38' rel='external nofollow' class='url'>camhusmj38</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317755">
			December 12, 2017 at 2:30 am</a>		</div>

		<p>The coroutines ts refers to stackless coroutines. The compiler transforms the function into a state machine &#8211; when the coroutine suspends, it needs a place to store any local state that will be need after the courtine resumes. Unless the compiler can prove the coroutine will not be resumed after the frame in which it is first invoked, that state needs to be heap allocated.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-s-m-joshi-02 odd alt depth-3 parent" id="comment-1317765">
				<div id="div-comment-1317765" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/camhusmj38' rel='external nofollow' class='url'>camhusmj38</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317765">
			December 12, 2017 at 2:31 am</a>		</div>

		<p>Sorry, forgot to add &#8211; that means fibres aren&#8217;t the correct model. Coroutines run on whatever stack is handy.</p>

		
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-jan-ringos even depth-4" id="comment-1317795">
				<div id="div-comment-1317795" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Jan+Ringo%C5%A1' rel='external nofollow' class='url'>Jan Ringoš</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317795">
			December 13, 2017 at 5:55 am</a>		</div>

		<p>Ah, that makes more sense now. Thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1317727">
				<div id="div-comment-1317727" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">GWO</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20171211-00/?p=97555#comment-1317727">
			December 11, 2017 at 8:33 am</a>		</div>

		<p>I&#8217;m afraid these things really have been hoisted into the future &#8211; Coroutines didn&#8217;t make the cut for inclusion in C++17</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>