<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (32)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-443723">
				<div id="div-comment-443723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">not a .net developer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443723">
			November 20, 2006 at 10:54 am</a>		</div>

		<p>Neither of the links worked for me.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-443803">
				<div id="div-comment-443803" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Bap</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443803">
			November 20, 2006 at 1:30 pm</a>		</div>

		<p>Post Aaron&#8217;s cousin&#8217;s e-mail address and I&#8217;m sure at least one of your fine readers will be happy to tell her &quot;too bad&quot;.</p>
<p>Whether it placates her or not is her problem to work out. &nbsp;Sounds like she&#8217;s got issues anyway.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-443823">
				<div id="div-comment-443823" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443823">
			November 20, 2006 at 2:35 pm</a>		</div>

		<p>AARGH! makes a good point in a sideways sort of way &#8211; the shocking thing about windows is not that it works poorly (sometimes/frequently), but that it works at all. It really is a feat that XP still runs software written against windows 3.1.</p>
<p>That said, this is probably a case of poorly written software, relying on some version specific artifact, like writing to HKLM or something. Add a shim if you must, but don&#8217;t allow that in the name of compatibility.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-443843">
				<div id="div-comment-443843" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Oof</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443843">
			November 20, 2006 at 4:02 pm</a>		</div>

		<p>Wow. That Aaron Zupancic critter has one of the most hilariously awful prose styles I&#8217;ve ever endured. I love the way subnormal types always go straight for the malapropisms when they want to &quot;sound smart&quot;. I wonder if it&#8217;s even capable of understanding that words have meanings? Probably not.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-443863">
				<div id="div-comment-443863" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">M$</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443863">
			November 20, 2006 at 4:35 pm</a>		</div>

		<p>Supporting old buggy apps is microsofts game. The backward compatibility would have been dropped a long time ago if it wasn&#8217;t lucrative.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-443893">
				<div id="div-comment-443893" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443893">
			November 20, 2006 at 5:36 pm</a>		</div>

		<blockquote><p>
  The backward compatibility would have been dropped a long time ago if it wasn&#8217;t lucrative.
</p></blockquote>
<p>Duh!</p>
<p>I don&#8217;t understand, are you saying it&#8217;s a bad thing that Microsoft makes money?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-443943">
				<div id="div-comment-443943" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443943">
			November 20, 2006 at 8:29 pm</a>		</div>

		<blockquote><p>
  I don&#8217;t understand, are you saying it&#8217;s a bad thing that Microsoft makes money?
</p></blockquote>
<p>I actually do run into people who object to me making money &#8211; it&#8217;s as if me selling something to them for more than I paid for it is immoral.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-443963">
				<div id="div-comment-443963" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Mitch Tenderson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443963">
			November 20, 2006 at 9:16 pm</a>		</div>

		<blockquote><p>
  Supporting old buggy apps is microsofts game. &gt;The backward compatibility would have been &gt;dropped a long time ago if it wasn&#8217;t &gt;lucrative.
</p></blockquote>
<p>Lucrative as in&#8230; the customers request it? Yeah, that sounds like a terrible way ot make software.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-443983">
				<div id="div-comment-443983" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Dan</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443983">
			November 20, 2006 at 11:17 pm</a>		</div>

		<p>I major place some old 9x apps fail is when they try to access serial or parallel ports or write to the hard drive directly (ie raw data)&#8230; no-nos in NT.</p>
<p>You&#8217;re really supposed to use drivers instead of the former two. &nbsp;Programs that support legacy serial/parallel connections&#8230; and I mean more obscure hardware other than printers or scanners&#8230; typically use special drivers to gain low-level access to the port they need, to work around this.</p>
<p>As for the last, I imagine it&#8217;s a security blockade against malware rendering your machine unbootable by messing with boot sectors, or wiping your hard drive by fiddling with the partition table. &nbsp;I don&#8217;t believe there is a workaround for this. &nbsp;I have a hex editor that can read raw data from drives on the disk and partiton levels, but the &quot;write&quot; command is always grayed out on XP&#8230; probably only enabled on 9x/ME, methinks, if I&#8217;m right about all this.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-443993">
				<div id="div-comment-443993" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Aaargh!</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-443993">
			November 21, 2006 at 3:41 am</a>		</div>

		<p>The only reason this person is complaining is because people EXPECT things to continue working after an upgrade because this has always been the case.</p>
<p>No one is complaining that their old VHS tapes won&#8217;t work in their DVD player because no one ever promised them it would.</p>
<p>How much time does the average computer spend trying to determine if it should execute the normal code path or the backwards-compatible one ? When is MS going to stop providing backwards compatibility ?</p>
<p>You could have done it the way Apple did with the &#8216;classic&#8217; environment. Ensure backwards compatibility in a way that doesn&#8217;t compromise the integrity of the new OS and at the same time make it very unattractive to keep using the old software.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444013">
				<div id="div-comment-444013" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.robertmoir.com/blogs/someone_else' rel='external nofollow' class='url'>Robert Moir</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444013">
			November 21, 2006 at 4:05 am</a>		</div>

		<p>Aaargh,</p>
<p>The strengths and weaknesses of a virtualised or emulated environment have been discussed here before. It&#8217;s good. It&#8217;s very good indeed. But it isn&#8217;t a panacea.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444023">
				<div id="div-comment-444023" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">foxyshadis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444023">
			November 21, 2006 at 7:14 am</a>		</div>

		<p>Mac Classic actually generates a whole lot more complaints than windows&#8217; backcompat has, even with less users. It&#8217;s good, but I know several who downgraded back to OS 9 or never upgraded because they hated it so much.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444043">
				<div id="div-comment-444043" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">James Risto</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444043">
			November 21, 2006 at 8:28 am</a>		</div>

		<p>OldNewThing, you talk about compat a lot. Any insights on the<br />
future? Can you see a day where Windows ships with a virtual subsystem<br />
that runs old apps, perhaps freeing the real machine for new things?</p>
<div class="post">[<i>1. Suggestions go into the Suggestion Box. 2.<br />
Please read the &#8220;Topics I am not inclined to cover&#8221; list before making<br />
a suggestion. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444063">
				<div id="div-comment-444063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.semack.net' rel='external nofollow' class='url'>Myron A. Semack</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444063">
			November 21, 2006 at 8:38 am</a>		</div>

		<p>Aaargh raises an interesting question (indirectly).</p>
<p>How expensive (in terms of CPU and memory) are these backwards-compatibility &quot;hacks&quot; that pervade Windows?</p>
<p>If Microsoft produced a version of Windows that skipped all of the backwards compatibility stuff, how much faster would it be? &nbsp;And how much smaller would the memory footprint be?</p>
<p>Can some Microsoft employee answer this? &nbsp;Or at least provide a ballpark estimate?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444083">
				<div id="div-comment-444083" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.benryves.com/' rel='external nofollow' class='url'>Ben Ryves</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444083">
			November 21, 2006 at 9:50 am</a>		</div>

		<p>I find it absolutely remarkable that the Windows 2 control panel applet runs under XP SP2, and can even change system properties (window border sizes and so on). Windows 2&#8217;s Notepad also runs.</p>
<p>The fact that XP&#8217;s DOS support is sufficient to run a handful of VESA games (Tomb Raider runs in high-resolution mode &#8211; with sound) is also staggering.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jamesnt odd alt thread-odd thread-alt depth-1" id="comment-444113">
				<div id="div-comment-444113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/JamesNT' rel='external nofollow' class='url'>JamesNT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444113">
			November 21, 2006 at 10:43 am</a>		</div>

		<p>Ben,</p>
<p>And most of that stuff runs on Windows Server 2003 and Small Business Server, also.</p>
<p>I believe Raymond made a post about this&#8230;</p>
<p>JamesNT</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444123">
				<div id="div-comment-444123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://deadnode.org/sw/' rel='external nofollow' class='url'>James</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444123">
			November 21, 2006 at 10:46 am</a>		</div>

		<p>&quot;Can you see a day where Windows ships with a virtual subsystem that runs old apps, perhaps freeing the real machine for new things?&quot;</p>
<p>I can. I can see that virtual machine being called NTVDM.EXE (the NT Virtual DOS Machine), and running a big chunk of Windows 3.1 (krnl386.exe) for compatibility with 16 bit apps, under the name WOW (Windows On Windows). That day started quite a few years ago, though.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444153">
				<div id="div-comment-444153" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">J</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444153">
			November 21, 2006 at 11:49 am</a>		</div>

		<p>&quot;No one is complaining that their old VHS tapes won&#8217;t work in their DVD player because no one ever promised them it would.&quot;</p>
<p>If your HD-DVD player didn&#8217;t play regular DVDs, that wouldn&#8217;t bother you at all as long as the manufacturer never promised you it would?</p>
<p>(assuming you have a large DVD collection)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444223">
				<div id="div-comment-444223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Cooney</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444223">
			November 21, 2006 at 5:51 pm</a>		</div>

		<blockquote><p>
  If your HD-DVD player didn&#8217;t play regular DVDs, that wouldn&#8217;t bother you at all as long as the manufacturer never promised you it would?
</p></blockquote>
<p>Who in their right mind would buy an HD DVD player that won&#8217;t play DVDS? Actually, why would you ever buy HDDVD? That thing is so hamstrung as to be completely useless and, as an added benefit, it can be declared incompatible with your new HDTV if the manufacturer feels like it.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-444233">
				<div id="div-comment-444233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444233">
			November 21, 2006 at 6:55 pm</a>		</div>

		<blockquote><p>
  Who in their right mind would buy an HD DVD player that won&#8217;t play DVDS?
</p></blockquote>
<p>I think that&#8217;s his point: you wouldn&#8217;t buy an HD-DVD player that doesn&#8217;t play DVDs, just like you wouldn&#8217;t buy Windows version N+1 if it didn&#8217;t run all of your programs. Doesn&#8217;t matter what the manufacturer promises, or does not. Microsoft WANT you to buy Windows N+1, so they make sure all of your old programs will work.</p>
<p>Lets not get into the (many) vices of HD-DVD/BluRay, though&#8230; ;)</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444253">
				<div id="div-comment-444253" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Norman Diamond</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444253">
			November 21, 2006 at 8:30 pm</a>		</div>

		<p>Tuesday, November 21, 2006 6:55 PM by Dean Harding</p>
<blockquote><p>
  you wouldn&#8217;t buy an HD-DVD player that</p>
<p>  doesn&#8217;t play DVDs
</p></blockquote>
<p>In principle I agree. &nbsp;(In practice it&#8217;s vacuous for me, because the region code garbage persuaded me not to buy DVD videos.)</p>
<blockquote><p>
  just like you wouldn&#8217;t buy Windows version</p>
<p>  N+1 if it didn&#8217;t run all of your programs
</p></blockquote>
<p>Not really true. &nbsp;I bought NT4 for one of my home machines knowing that it wouldn&#8217;t run a lot of Windows 95 and MS-DOS programs. &nbsp;Later I bought Windows 2000 knowing that it still wouldn&#8217;t run some Windows 95/98 and MS-DOS programs. &nbsp;I was astounded to read a previous reply here saying that XP SP2 will run Tomb Raider with sound, but I&#8217;m sure I have other programs that won&#8217;t run under XP.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-444263">
				<div id="div-comment-444263" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Chris</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444263">
			November 21, 2006 at 8:56 pm</a>		</div>

		<p>Myron has a point. I&#8217;d add: what&#8217;s the cost in terms of features Windows doesn&#8217;t have/can&#8217;t have because compatibility gets in the way?</p>
<p>I&#8217;m not advocating blowing off compatibility, but I am saying it is worthwhile pursuing a more balanced approach. There comes a time to drop support for ancient software where it is actively hindering newer features.</p>
<p>For the record, the people who said they&#8217;d never upgrade to OS X are the people who hated Aqua or the new (still borked) Finder. The Classic environment worked and continues to work well, as long as you didn&#8217;t need most third party drivers (except USB drivers, which were/are actually supported).</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444273">
				<div id="div-comment-444273" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Anony Moose</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444273">
			November 21, 2006 at 9:15 pm</a>		</div>

		<p>The cost? &nbsp; In terms of market-share? &nbsp;I&#8217;ld say absolutely nothing. &nbsp; I suspect that Microsoft hasn&#8217;t lost one ten thousandth of a percent of their market share due to putting &quot;compatability&quot; ahead of &quot;new features that break compatability for a single 15 year old DOS program&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-444283">
				<div id="div-comment-444283" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444283">
			November 21, 2006 at 10:39 pm</a>		</div>

		<p>Anony Moose: But how do you know that? I&#8217;d say Apple&#8217;s vs. Microsoft&#8217;s policy towards backwards compatibility are a pretty good indication.</p>
<p>Apple are pretty good TODAY in terms of backwards compatibly, but if I had wanted to upgrade to a Mac back in the day, I would have also had to replace all of my APPLE II software. When I upgraded from MS-DOS to Windows, it all still worked.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444373">
				<div id="div-comment-444373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.semack.net' rel='external nofollow' class='url'>Myron A. Semack</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444373">
			November 22, 2006 at 12:10 pm</a>		</div>

		<p>FYI, I asked my question because I&#8217;m genuinely curious. &nbsp;Do the<br />
backwards compatibility &#8220;hacks&#8221; of Windows reduce the system&#8217;s<br />
performance? &nbsp;If so, by how much?</p>
<p>Note that I&#8217;m NOT asking about the political and economic costs<br />
(market share, engineering man-hours, etc). &nbsp;I&#8217;m asking about the<br />
performance and memory footprint costs.</p>
<p>I&#8217;m just genuinely curious if we live with performance degradation<br />
because of backwards compatibility. &nbsp;There must be at least SOME<br />
cost, at least in terms of memory footprint, but just how much?</p>
<p>I think the only people who can really answer that question are ones<br />
that are familiar with the Windows codebase. &nbsp;Those of us on the<br />
outside don&#8217;t really know the implementation details of these<br />
compatibility &#8220;hacks&#8221;.</p>
<p>IF there is a significant drop in performance, or increase in memory<br />
footprint, then that lends some weight to the argument that backwards<br />
compatibility is &#8220;holding back&#8221; Windows.</p>
<p>If Raymond (or some other MS employee familiar with the Windows<br />
source code) tells us that performance and memory footprint ARE NOT<br />
significantly impacted, then it takes the teeth out of the people who<br />
argue that backwards compatibility is holding Windows back.</p>
<p>I also put this question into the Suggestion Box for Raymond. &nbsp;I hope that he makes a blog posting about it some day.</p>
<div class="post">[<i>Okay, posting the same question <u>three</u><br />
times is excessive. I already wrote up an answer for you but now I&#8217;m<br />
tempted to delete it since you&#8217;re being so annoying about it. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jamesnt odd alt thread-odd thread-alt depth-1" id="comment-444403">
				<div id="div-comment-444403" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/JamesNT' rel='external nofollow' class='url'>JamesNT</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444403">
			November 22, 2006 at 1:24 pm</a>		</div>

		<p>Mr. Chen,</p>
<p>Although Myron A. Semack is being a noob, I would ask that you avoid the temptation of deleting your response to his question. &nbsp;I too must confess a serious curiousity regarding the performance impact of the many back compat hacks in Windows. &nbsp;</p>
<p>Indeed, not only would such a discussion possibly remove the teeth from those who say back compat hurts Windows, but I feel it would also give many of us a much clearer picture of just how elegant Windows is. &nbsp;</p>
<p>Think about it, Windows does all the things it does with acceptable performance even with all those hacks. &nbsp;</p>
<p>Incredible.</p>
<p>JamesNT</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444433">
				<div id="div-comment-444433" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.semack.net' rel='external nofollow' class='url'>Myron A. Semack</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444433">
			November 22, 2006 at 3:44 pm</a>		</div>

		<p>Raymond,</p>
<p>I wasn&#8217;t trying to annoy you. &nbsp;I apologize if I was doing so. &nbsp;It seemed that some of the other posters here were missing the point of my question, so I was trying to clarify myself and also explain the reasoning behind my question.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-444463">
				<div id="div-comment-444463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444463">
			November 22, 2006 at 5:46 pm</a>		</div>

		<p>I can&#8217;t see how returning 2 instead of 3* would come with any &quot;serious&quot; performance cost&#8230;</p>
<p>* That being the compatibility &quot;hack&quot; required in the linked-to post&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-444723">
				<div id="div-comment-444723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444723">
			November 23, 2006 at 11:35 pm</a>		</div>

		<p>&quot;I can&#8217;t see how returning 2 instead of 3* would come with any &quot;serious&quot; performance cost&#8230;&quot;</p>
<p>Hmm, lets see:</p>
<p>if (strcmp(appname, &quot;buggycrap.exe&quot; == 0 &amp;&amp; (file_length == 64392) &amp;&amp; file_crc32(&quot;buggycrap.exe&quot;) == 0xDEADBEEF) {</p>
<p>&nbsp; &nbsp;return 2;</p>
<p>}</p>
<p>return 3;</p>
<p>People are just being stupid. They want new faster hardware, new OS, new features and when they get all that they run some 20 years old crap on it.</p>
<p>As an example just look at all those overclocking morons running SUPERPI as a CPU benchmark. For God sake it is 386 code. It even has waits for floating point instructions and it changes rounding modes so much (large penalty on modern CPUs) that just a simple patch to use FISTTP instead of FISTP can speed it up by whole 12%.</p>
<p>I am really tempted to start distributing patched kernel versions which would just do NOP on CreateProcess(&quot;SUPERPI.EXE&quot;) or any similar legacy junk.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dean-harding odd alt thread-odd thread-alt depth-1" id="comment-444733">
				<div id="div-comment-444733" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dean+Harding' rel='external nofollow' class='url'>Dean Harding</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-444733">
			November 24, 2006 at 12:04 am</a>		</div>

		<p>Igor: Lets keep things in perspective here. The code would actually be more like:</p>
<p>if (filename[0] == 0) { return 2; }</p>
<p>And, more importantly, this is in code that opens files &#8211; an operation which is inherently quite expensive (requiring access to the file system), so even if you had 100 such tests, the difference is totally insignificant.</p>
<p>To be honest, I haven&#8217;t heard of any compatibility fixes on this blog that WOULD significantly impact performance. The main downside to compatibility fixes is in complexity. They would make it harder for the Windows developers to get in there and fix actual bugs, because its hard to tell what&#8217;s a bug and what&#8217;s a compatibility fix. But I guess sufficient commenting could help to mitigate that.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-446833">
				<div id="div-comment-446833" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://levicki.blogspot.com/' rel='external nofollow' class='url'>Igor</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-446833">
			November 30, 2006 at 10:35 am</a>		</div>

		<p>Dean Harding said:</p>
<p>&#8220;The code would actually be more like:</p>
<p>if (filename[0] == 0) { return 2; }&#8221;</p>
<p>Your code would always return 2 if filename is &#8220;&#8221;.</p>
<p>That would do fine for those programs which do not check return code and just use it as a handle.</p>
<p>But if you have a properly written program which prompts for a<br />
filename (for example BIOS flash utility) and user just hits<br />
&lt;Enter&gt; it will get 2 instead of rightfully expected 3 which is<br />
mentioned in the docs if I understand correctly.</p>
<p>So you still have to test for misbehaving programs. That certainly wastes some cycles.</p>
<div class="post">[<i>Any program that expects error 3 didn&#8217;t work on<br />
any version of MS-DOS since it always returned 2 in this case. I don&#8217;t<br />
know where you&#8217;re concluding that 3 is the return value required by the<br />
documentation. -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-529103">
				<div id="div-comment-529103" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blogs.msdn.com/oldnewthing/archive/2007/07/23/4003873.aspx' rel='external nofollow' class='url'>The Old New Thing : The real cost of compatibility is not in the hacks; the hacks are small potatoes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20061120-21/?p=28963#comment-529103">
			July 23, 2007 at 12:46 pm</a>		</div>

		<p>PingBack from <a rel="nofollow" target="_new" href="http://blogs.msdn.com/oldnewthing/archive/2007/07/23/4003873.aspx" rel="nofollow">http://blogs.msdn.com/oldnewthing/archive/2007/07/23/4003873.aspx</a></p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>