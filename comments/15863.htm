<table class="commenttable" cellspacing="0" cellpadding="0"><tr><td><div class="commentdiv"><div class="commentdivhdr">
<!-- COMMENTS START -->
Comments (25)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-790033">
				<div id="div-comment-790033" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790033">
			November 30, 2009 at 7:18 am</a>		</div>

		<p>The only problem I&#8217;ve run into is that windows.h includes winsock.h if you don&#8217;t define that symbol; this creates havoc if you want to include winsock2.h, as everything gets redefined.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790063">
				<div id="div-comment-790063" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Vilx-</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790063">
			November 30, 2009 at 7:23 am</a>		</div>

		<p>The funny thing is that it is still a part of the default C++ Windows application template in Visual Studio.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790073">
				<div id="div-comment-790073" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790073">
			November 30, 2009 at 7:43 am</a>		</div>

		<blockquote><p>
  &gt; It doesn&#8217;t really save you much any more.
</p></blockquote>
<p>It does save you pollution of the C namespace which assists in writing portable code.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790113">
				<div id="div-comment-790113" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Adrian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790113">
			November 30, 2009 at 8:52 am</a>		</div>

		<blockquote><p>
  &gt;It does save you pollution of the C namespace which assists in writing portable code.
</p></blockquote>
<p>+1. &nbsp;And not just the language namespace, but the preprocessor&#8217;s macro namespace as well.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790123">
				<div id="div-comment-790123" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random832</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790123">
			November 30, 2009 at 9:16 am</a>		</div>

		<p>I think the assumption is that someone who includes windows.h at all doesn&#8217;t have writing portable code as a priority.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790143">
				<div id="div-comment-790143" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Neil (SM)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790143">
			November 30, 2009 at 10:03 am</a>		</div>

		<p>If the goal is to write portable code, you&#8217;ve already lost when you started adding WIN32 headers.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790163">
				<div id="div-comment-790163" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.aegisub.org/' rel='external nofollow' class='url'>Niels</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790163">
			November 30, 2009 at 12:00 pm</a>		</div>

		<p>I&#8217;ve also experienced code that broke in compilation when WIN32_LEAN_AND_MEAN was undefined, because some header defined some symbol with an excessively generic name.</p>
<p>Related, many MSDN pages tell that a function is declared in some specific header file but then notes &#8220;include windows.h&#8221; afterwards. Is that a suggestion, recommendation or requirement (for compatibility)?</p>
<div class=post>[<i>It&#8217;s saying &#8220;This header file comes along for the ride when you include windows.h, so just include windows.h and call it good.&#8221; -Raymond</i>]</div>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790203">
				<div id="div-comment-790203" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Gabe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790203">
			November 30, 2009 at 12:45 pm</a>		</div>

		<p>Most portable software I&#8217;ve encountered runs on Windows as well as other OSes. Firefox is the first thing that comes to mind, but there are thousands of other examples.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790223">
				<div id="div-comment-790223" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Starfish</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790223">
			November 30, 2009 at 12:54 pm</a>		</div>

		<p>I learnt the hard way that GDI+ doesn&#8217;t work if you define WIN32_LEAN_AND_MEAN. Not a fun error to track down on account of it making no sense whatsoever why it should make a difference.</p>
<p>You live and learn!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790233">
				<div id="div-comment-790233" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.nickbastin.com' rel='external nofollow' class='url'>Nick Bastin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790233">
			November 30, 2009 at 1:03 pm</a>		</div>

		<blockquote><p>
  It does save you pollution of the C namespace which assists in writing portable code.
</p></blockquote>
<p>+1. &nbsp;Spewing conflicting symbols all over my cross-platform code always makes me happy.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790313">
				<div id="div-comment-790313" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Random832</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790313">
			November 30, 2009 at 1:53 pm</a>		</div>

		<p>Why is your cross-platform code including windows.h? Shouldn&#8217;t your windows code be in the file that includes windows.h and your cross-platform code be in some other file?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790323">
				<div id="div-comment-790323" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790323">
			November 30, 2009 at 3:06 pm</a>		</div>

		<blockquote><p>
  &gt; Why is your cross-platform code including windows.h? Shouldn&#8217;t your windows code be in the file that includes windows.h and your cross-platform code be in some other file?
</p></blockquote>
<p>There are many ways to write portable code, for example WINSOCK requires windows.h but that does not mean all winsock calls have to be in another file.</p>
<p>Perhaps Windows programmers are not aware of the phrase &quot;mechanism not policy&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790343">
				<div id="div-comment-790343" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790343">
			November 30, 2009 at 4:33 pm</a>		</div>

		<blockquote><p>
  &gt; you&#8217;ve already lost when you started adding WIN32 headers
</p></blockquote>
<p>Perhaps you have not heard of &quot;#ifdef&quot;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790373">
				<div id="div-comment-790373" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790373">
			November 30, 2009 at 6:39 pm</a>		</div>

		<blockquote><p>
  &gt; Have you ever wondered how much of your life you&#8217;ve spent staring at an hourglass cursor?
</p></blockquote>
<p>I don&#8217;t remember an hour glass using MSC 7.0 in a DPMI DOS console window.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790383">
				<div id="div-comment-790383" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://www.parkscomputing.com/' rel='external nofollow' class='url'>Paul M. Parks</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790383">
			November 30, 2009 at 6:51 pm</a>		</div>

		<p>Hourglasses? Real Programmers (TM) can remember getting their fan-fold printed compile results from the data center the next morning.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790423">
				<div id="div-comment-790423" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Worf</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790423">
			November 30, 2009 at 11:20 pm</a>		</div>

		<p>The winsock one gets me every time &#8211; you tend to want winsock2.h always these days, but forgetting WIN32_LEAN_AND_MEAN always meant duplicated symbols.</p>
<p>I always wondered why no one hasn&#8217;t consolidated the two. It&#8217;s not like that parameters to socket() or struct sockaddr have differed too much&#8230;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790353">
				<div id="div-comment-790353" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">steveg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790353">
			November 30, 2009 at 4:39 pm</a>		</div>

		<p>I have quite fond memories of WIN32_LEAN_AND_MEAN and windowsx.h &#8212; the latter based on the design pattern of having a *separate* function per message instead of the &quot;traditional&quot; incredibly long switch() statement prone to blowing 64k CS limits (depending on your memory model).</p>
<p>Compiling code on a 33Mhz 386&#8230; whee! Have you ever wondered how much of your life you&#8217;ve spent staring at an hourglass cursor?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790363">
				<div id="div-comment-790363" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Daniel</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790363">
			November 30, 2009 at 4:54 pm</a>		</div>

		<p>@steveg: I *love* compiling code on slow machine &#8212; <a rel="nofollow" target="_new" href="http://xkcd.com/303/" rel="nofollow">http://xkcd.com/303/</a></p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790443">
				<div id="div-comment-790443" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Goran</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790443">
			December 1, 2009 at 1:09 am</a>		</div>

		<p>&quot;It does save you pollution of the C namespace which assists in writing portable code.&quot;</p>
<p>What, you mean portable between Win16 and Win16+? ;-) Yeah, that old code support is a bitch&#8230;</p>
<p>In a way, you want to pollute as much as you can, so that you know you are using names that might fail compilation on a given platform tomorrow, when you include another header from it. Because if you do need that header, and you do have a symbol clash, you might have to break your own compilation to change your symbol (easier than changing platform&#8217;s symbol).</p>
<p>BTW, isn&#8217;t this why prefixing is the norm for cross-platform code?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790643">
				<div id="div-comment-790643" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://chuckop.spaces.live.com' rel='external nofollow' class='url'>Charles Oppermann</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790643">
			December 1, 2009 at 9:07 am</a>		</div>

		<p>I still use windowsx.h and the function macros. &nbsp;I figured I was just hard-core Win32 C&#8211; programmer.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790653">
				<div id="div-comment-790653" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">porter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790653">
			December 1, 2009 at 9:16 am</a>		</div>

		<blockquote><p>
  &gt; BTW, isn&#8217;t this why prefixing is the norm for cross-platform code?
</p></blockquote>
<p>There was a time when OS/2 was the successor to the graphical DOS extender and DosXXX, WinXXX, GpiXXX etc were the prefix on the APIs.</p>
<p>I think argument is that everybody does prefixing except simple applications and Microsoft.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-790723">
				<div id="div-comment-790723" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn"><a href='http://blog.nickbastin.com' rel='external nofollow' class='url'>Nick Bastin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790723">
			December 1, 2009 at 11:26 am</a>		</div>

		<blockquote><p>
  BTW, isn&#8217;t this why prefixing is the norm for cross-platform code?
</p></blockquote>
<p>Yeah, don&#8217;t you think it&#8217;d be nice if Microsoft stuck DOMDocument in a namespace?</p>
<blockquote><p>
  Why is your cross-platform code including windows.h?
</p></blockquote>
<p>Of course you have it #ifdef&#8217;d to win32, but writing portable code often means using 3rd party libraries to replicate a functionality that might be available on one OS and not another, and so it&#8217;s pretty annoying when both your 3rd party library and Microsoft define something like DOMDocument &#8211; and you&#8217;re not even using MSXML, but it&#8217;s dragged in by windows.h.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-790583">
				<div id="div-comment-790583" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Nicholas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-790583">
			December 1, 2009 at 8:00 am</a>		</div>

		<p>RANDOM POSTER: *rolls eyes* &quot;Well, if you&#8217;re writing portable code and including windows.h then blah blah blah&quot;</p>
<p>I guess some of you people are young and pampered by WinXP, or some of you don&#8217;t remember the 90&#8217;s. &nbsp;Writing a Windows application for both Win9x and WinNT was in effect an excercise in crafting portable code.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-791463">
				<div id="div-comment-791463" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">easy fix</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-791463">
			December 3, 2009 at 7:45 am</a>		</div>

		<p>Then put WIN32_LEAN_AND_MEAN inside #ifdef</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-791513">
				<div id="div-comment-791513" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">joe</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/oldnewthing/20091130-00/?p=15863#comment-791513">
			December 3, 2009 at 9:12 am</a>		</div>

		<p>Namespace pollution needs to be avoided if you&#8217;re either *writing* or *using* portable code.</p>
<p>The canonical example is that the C++ standard library functions std::min and std::max are hit by the win32 #defines of min and max macros (there&#8217;s a way to disable this &#8211; but often you&#8217;ll need to #undef something)</p>
<p>In addition, platform specific routines we write have a single header file associated with a set of source files (with extensions like .win32.cpp). This requires that the header file must be compilable in the presence of namespace pollution from *any* of the platform specific APIs we&#8217;re using, despite the fact that it is itself portable. </p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
<!-- COMMENTS END -->
</div></td></tr></table>